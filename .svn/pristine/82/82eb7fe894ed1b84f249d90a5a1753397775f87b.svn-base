<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="DL50000104P21" classname="DL410101" inheritanceid="" position="absolute 0 0 695 447" titletext="카드/CMS등록(NEW)" scrollbars="none" onload="DL50000104P21_onload">
    <Layouts>
      <Layout>
        <Static id="stc_31" class="sta_popupBg1" enable="false" position="absolute 0 0 692 441"/>
        <Button id="btn_close" taborder="3" onclick="btn_close_onclick" class="btn_popupClose" position="absolute 660 9 680 28"/>
        <Static id="stc_30" text="CMS/카드등록(NEW)" class="sta_popupTitle" transparenthittest="true" position="absolute 10 8 202 28"/>
        <Tab id="tab_resn" taborder="4" onchanged="tab_resn_onchanged" onlbuttonup="tab_resn_onlbuttonup" tabindex="0" scrollbars="autoboth" position="absolute 10 48 682 232">
          <Tabpages>
            <Tabpage id="tp_card" text="카드">
              <Layouts>
                <Layout>
                  <Static id="stc_15" class="sta_workData" position2="absolute l:104 r:9 t:94 h:26" positiontype="position2"/>
                  <Static id="stc_03" class="sta_workData" position2="absolute l:82 r:9 t:69 h:26" positiontype="position2"/>
                  <Static id="stc_08" class="sta_workData" position2="absolute l:82 r:9 t:12 h:26" positiontype="position2"/>
                  <Static id="stc_11" text="회원번호" class="sta_workLabel1" position2="absolute l:8 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_accnt_no" taborder="1" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:84 w:132 t:14 h:22" positiontype="position2"/>
                  <Static id="stc_02" text="회원명" class="sta_workLabel1" position2="absolute l:217 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_mem_nm" taborder="2" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:293 w:132 t:14 h:22" positiontype="position2"/>
                  <Static id="stc_00" text="생년월일" class="sta_workLabel1" position2="absolute l:428 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_brdt" taborder="3" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:504 w:154 t:14 h:22" positiontype="position2"/>
                  <Static id="stc_04" text="카드 신청" class="sta_workTitle2" position2="absolute l:8 w:169 t:50 h:20" positiontype="position2"/>
                  <Static id="stc_06" class="sta_workData" position2="absolute l:82 r:9 t:119 h:26" positiontype="position2"/>
                  <Edit id="edt_accnt_no00" taborder="4" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:85 w:102 t:121 h:22" positiontype="position2"/>
                  <Static id="stc_01" text="PG정보" class="sta_workLabel1" position2="absolute l:8 w:75 t:119 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Static id="stc_deprPhone" text="결제일" class="sta_workLabel1" position2="absolute l:188 w:75 t:94 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_mem_nm01" taborder="6" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:85 w:102 t:96 h:22" positiontype="position2"/>
                  <Static id="stc_14" text="등록일" class="sta_workLabel1" position2="absolute l:488 w:75 t:94 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Calendar id="cal_rgsnDt" taborder="7" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" position2="absolute l:565 w:94 t:97 h:20" positiontype="position2"/>
                  <Static id="stc_07" text="빌키" class="sta_workLabel1" position2="absolute l:188 w:75 t:119 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_bid" taborder="8" inputtype="number" maxlength="2" position2="absolute l:265 w:221 t:121 h:22" positiontype="position2"/>
                  <Static id="stc_09" text="카드종류" class="sta_workLabel1" position2="absolute l:488 w:75 t:119 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_mem_nm02" taborder="9" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:565 w:93 t:121 h:22" positiontype="position2"/>
                  <Static id="stc_13" text="카드사" class="sta_workLabel1" position2="absolute l:8 w:75 t:69 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Combo id="cbo_card" taborder="10" innerdataset="ds_card_cd" codecolumn="cd" datacolumn="cd_nm" onitemchanged="tab_cms_cbo_RltnCd_onitemchanged" position2="absolute l:85 w:102 t:71 h:22" positiontype="position2"/>
                  <Edit id="edt_card_no" taborder="11" inputtype="number" maxlength="21" onkillfocus="card_onkillfocus" ontextchanged="card_ontextchanged" position2="absolute l:265 w:161 t:71 h:22" positiontype="position2"/>
                  <Static id="stc_12" text="유효기간" class="sta_workLabel1" position2="absolute l:428 w:75 t:69 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_card_year" taborder="12" inputtype="number" maxlength="2" position2="absolute l:505 w:48 t:71 h:22" positiontype="position2" ontextchanged="fn_ontextchanged"/>
                  <Static id="stc_cell_bar00" text="년" position2="absolute l:559 w:13 t:72 h:22" positiontype="position2"/>
                  <Edit id="edt_card_mon" taborder="13" inputtype="number" maxlength="2" position2="absolute l:581 w:48 t:71 h:22" positiontype="position2" ontextchanged="fn_ontextchanged"/>
                  <Static id="stc_cell_bar03" text="월" position2="absolute l:637 w:13 t:72 h:22" positiontype="position2"/>
                  <Radio id="rdo_tranDt" taborder="14" columncount="0" rowcount="0" codecolumn="codecolumn" datacolumn="datacolumn" direction="vertical" onitemclick="tab_01_card_rdo_tranDt_onitemclick" position="absolute 273 97 468 118" style="font:Dotum,9;">
                    <Dataset id="innerdataset">
                      <ColumnInfo>
                        <Column id="codecolumn" size="256"/>
                        <Column id="datacolumn" size="256"/>
                      </ColumnInfo>
                      <Rows>
                        <Row>
                          <Col id="codecolumn">05</Col>
                          <Col id="datacolumn">5</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">10</Col>
                          <Col id="datacolumn">10</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">15</Col>
                          <Col id="datacolumn">15</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">20</Col>
                          <Col id="datacolumn">20</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">25</Col>
                          <Col id="datacolumn">25</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">X</Col>
                          <Col id="datacolumn"/>
                        </Row>
                      </Rows>
                    </Dataset>
                  </Radio>
                  <Static id="stc_10" text="카드번호" class="sta_workLabel1" position2="absolute l:188 w:75 t:69 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <CheckBox id="ckb_cardbenefit" taborder="15" text="카드혜택중단(이니시스)" value="1" truevalue="100" falsevalue="1" position2="absolute r:358 w:164 t:50 h:20" positiontype="position2" style="color:red;"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tp_cms" text="CMS">
              <Layouts>
                <Layout>
                  <Static id="stc_08" class="sta_workData" position2="absolute l:82 r:9 t:12 h:26" positiontype="position2"/>
                  <Static id="stc_11" text="회원번호" class="sta_workLabel1" position2="absolute l:8 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_accnt_no" taborder="1" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:84 w:132 t:14 h:22" positiontype="position2"/>
                  <Static id="stc_02" text="회원명" class="sta_workLabel1" position2="absolute l:217 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_mem_nm" taborder="2" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:293 w:132 t:14 h:22" positiontype="position2"/>
                  <Static id="stc_00" text="생년월일" class="sta_workLabel1" position2="absolute l:427 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_brdt" taborder="3" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:504 w:154 t:14 h:22" positiontype="position2"/>
                  <Static id="stc_04" text="CMS 신청" class="sta_workTitle2" position2="absolute l:8 w:169 t:50 h:20" positiontype="position2"/>
                  <Static id="stc_01" class="sta_workData" position2="absolute l:82 r:9 t:69 h:26" positiontype="position2"/>
                  <Static id="stc_10" text="예금주" class="sta_workLabel1" position="absolute 502 69 577 95" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_depr" taborder="4" readonly="true" class="edt_clssEnable" position2="absolute l:579 w:79 t:71 h:22" positiontype="position2"/>
                  <Static id="stc_03" class="sta_workData" position2="absolute l:82 r:9 t:94 h:26" positiontype="position2"/>
                  <Static id="stc_14" text="등록일" class="sta_workLabel1" position="absolute 456 94 531 120" style="font:Dotum,8;" validate=""/>
                  <Calendar id="cal_rgsnDt" taborder="5" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" position2="absolute l:533 w:125 t:97 h:20" positiontype="position2"/>
                  <Static id="stc_05" class="sta_workData" position2="absolute l:82 r:9 t:119 h:26" positiontype="position2"/>
                  <Static id="stc_file_gb" text="증빙자료구분" class="sta_workLabel1" position="absolute 8 119 104 145" style="font:Dotum,8;" validate=""/>
                  <Combo id="cbo_file_gb" taborder="6" value="2" text="녹취" codecolumn="codecolumn" datacolumn="datacolumn" index="1" onitemchanged="tab_01_cms_cbo_file_gb_onitemchanged" position2="absolute l:105 w:98 t:121 h:22" positiontype="position2">
                    <Dataset id="innerdataset">
                      <ColumnInfo>
                        <Column id="codecolumn" size="256"/>
                        <Column id="datacolumn" size="256"/>
                      </ColumnInfo>
                      <Rows>
                        <Row>
                          <Col id="codecolumn">1</Col>
                          <Col id="datacolumn">서면</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">2</Col>
                          <Col id="datacolumn">녹취</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">3</Col>
                          <Col id="datacolumn">ARS</Col>
                        </Row>
                      </Rows>
                    </Dataset>
                  </Combo>
                  <Static id="stc_ext" text="확장자" class="sta_workLabel1" position="absolute 205 119 280 145" style="font:Dotum,8;" validate=""/>
                  <Combo id="cbo_ext" taborder="7" innerdataset="ds_ext" codecolumn="cd" datacolumn="cd_nm" position2="absolute l:281 w:98 t:121 h:22" positiontype="position2"/>
                  <Static id="stc_13" text="관계" class="sta_workLabel1" position2="absolute l:279 w:75 t:94 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Combo id="cbo_RltnCd" taborder="8" innerdataset="ds_rltn_typ" codecolumn="cd" datacolumn="cd_nm" onitemchanged="tab_cms_cbo_RltnCd_onitemchanged" position2="absolute l:356 w:98 t:96 h:22" positiontype="position2"/>
                  <Radio id="rdo_tranDt" taborder="9" columncount="0" rowcount="0" codecolumn="codecolumn" datacolumn="datacolumn" direction="vertical" onitemclick="tab_01_cms_rdo_tranDt_onitemclick" position="absolute 89 97 284 118" style="font:Dotum,9;">
                    <Dataset id="innerdataset">
                      <ColumnInfo>
                        <Column id="codecolumn" size="256"/>
                        <Column id="datacolumn" size="256"/>
                      </ColumnInfo>
                      <Rows>
                        <Row>
                          <Col id="codecolumn">05</Col>
                          <Col id="datacolumn">5</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">10</Col>
                          <Col id="datacolumn">10</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">15</Col>
                          <Col id="datacolumn">15</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">20</Col>
                          <Col id="datacolumn">20</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">25</Col>
                          <Col id="datacolumn">25</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">X</Col>
                          <Col id="datacolumn"/>
                        </Row>
                      </Rows>
                    </Dataset>
                  </Radio>
                  <CheckBox id="ckb_webModule" taborder="10" text="실시간 웹모듈 연결끊기" value="N" truevalue="Y" falsevalue="N" position2="absolute r:61 w:164 t:123 h:20" positiontype="position2"/>
                  <Static id="stc_12" text="은행코드" class="sta_workLabel1" position="absolute 8 69 83 95" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_bankCd" taborder="11" inputtype="number" onkeydown="tab_01_cms_edt_bank_onkeydown" position2="absolute l:85 w:38 t:71 h:22" positiontype="position2"/>
                  <Edit id="edt_bankNm" taborder="12" onkeydown="tab_01_cms_edt_bank_onkeydown" position2="absolute l:124 w:111 t:71 h:22" positiontype="position2"/>
                  <Button id="btn_13" taborder="13" onclick="btn_Bank_onclick" class="btn_workSrcPop" position2="absolute l:237 w:20 t:72 h:20" positiontype="position2"/>
                  <Static id="stc_09" text="계좌번호" class="sta_workLabel1" position2="absolute l:259 w:75 t:69 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_bankaccntNo" taborder="14" inputtype="number" canchange="tab_01_cms_edt_bankaccntNo_canchange" position2="absolute l:335 w:165 t:71 h:22" positiontype="position2"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Button id="btn_save" taborder="5" class="btn_WF_Save" position2="absolute r:13 w:72 t:52 h:20" positiontype="position2" tooltiptext="저장" onclick="btn_save_onclick"/>
        <Button id="btn_del_card" taborder="6" onclick="btn_del_card_onclick" class="btn_WF_Del" visible="false" position2="absolute r:87 w:72 t:52 h:20" positiontype="position2" tooltiptext="삭제" style="shadow:drop 0,0 0 #00000033;"/>
        <Static id="stc_16" text="이체일자" class="sta_workLabel1" position2="absolute l:19 w:75 t:170 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
        <ActiveX id="CMSCommAX" visible="false" progid="{60601393-834E-44DA-84BE-99E08C9734FE}" windowed="true" useautobitmapcache="1" position2="absolute l:248 w:138 t:45 h:27" positiontype="position2" taborder="11" tabstop="false"/>
        <Static id="sta_cmsTotalCnt" text="검색결과   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt; / 전체   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt;" usedecorate="true" class="sta_workTitle5" position2="absolute l:10 w:186 t:242 h:20" positiontype="position2"/>
        <Grid id="Grid00" taborder="12" binddataset="ds_cmsAplcDtl_list" useinputpanel="false" cellsizingtype="col" autofittype="col" onvscrolllastover="fn_cmsAplcDtlGrid_onvscrolllastover" position2="absolute l:11 r:13 t:264 b:14" positiontype="position2">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="46"/>
                <Column size="67"/>
                <Column size="91"/>
                <Column size="90"/>
                <Column size="106"/>
                <Column size="101"/>
                <Column size="83"/>
                <Column size="86"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" edittype="normal" style="checkboxsize:BIND(Column0);" text="순번" autosizecol="limitmin"/>
                <Cell col="1" text="신청구분"/>
                <Cell col="2" text="회원번호"/>
                <Cell col="3" text="카드/은행"/>
                <Cell col="4" text="카드/계좌번호"/>
                <Cell col="5" text="유효일"/>
                <Cell col="6" text="예금주"/>
                <Cell col="7" text="등록일"/>
              </Band>
              <Band id="body">
                <Cell text="expr:currow+1"/>
                <Cell col="1" text="bind:app_cl_nm"/>
                <Cell col="2" displaytype="text" edittype="readonly" text="bind:accnt_no" editdisplay="display"/>
                <Cell col="3" text="bind:bank_nm"/>
                <Cell col="4" text="bind:bank_accnt_no" mask="expr:gfn_SetCmsNoGrdSecu(bank_accnt_no)"/>
                <Cell col="5" text="bind:app_dt"/>
                <Cell col="6"/>
                <Cell col="7" text="bind:app_dt"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_chkCard" taborder="13" text="삼성카드 확인" onclick="btn_onclick" position="absolute 576 122 672 142" tooltiptext="카드보유 확인" style="border:0 none #000000ff ;padding:0 0 0 0;" visible="false"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="tab_resn.tp_card.edt_mem_nm" propid="value" datasetid="ds_accnt_card" columnid="mem_nm"/>
      <BindItem id="item1" compid="tab_resn.tp_card.edt_brdt" propid="value" datasetid="ds_accnt_card" columnid="birth"/>
      <BindItem id="item2" compid="tab_resn.tp_card.cbo_card" propid="value" datasetid="ds_accnt_card" columnid="card_cd"/>
      <BindItem id="item3" compid="tab_resn.tp_card.edt_card_no" propid="value" datasetid="ds_accnt_card" columnid="card_no"/>
      <BindItem id="item4" compid="tab_resn.tp_card.edt_card_year" propid="value" datasetid="ds_accnt_card" columnid="yyyy"/>
      <BindItem id="item5" compid="tab_resn.tp_card.edt_card_mon" propid="value" datasetid="ds_accnt_card" columnid="mm"/>
      <BindItem id="item6" compid="tab_resn.tp_card.rdo_tranDt" propid="value" datasetid="ds_accnt_card" columnid="ichae_dt"/>
      <BindItem id="item7" compid="tab_resn.tp_card.cal_rgsnDt" propid="value" datasetid="ds_accnt_card" columnid="card_join_dt"/>
      <BindItem id="item8" compid="tab_resn.tp_cms.edt_mem_nm" propid="value" datasetid="ds_accnt_cms" columnid="mem_nm"/>
      <BindItem id="item9" compid="tab_resn.tp_cms.edt_brdt" propid="value" datasetid="ds_accnt_cms" columnid="birth"/>
      <BindItem id="item10" compid="tab_resn.tp_cms.edt_bankCd" propid="value" datasetid="ds_accnt_cms" columnid="bank_cd"/>
      <BindItem id="item11" compid="tab_resn.tp_cms.edt_bankNm" propid="value" datasetid="ds_accnt_cms" columnid="bank_nm"/>
      <BindItem id="item12" compid="tab_resn.tp_cms.edt_bankaccntNo" propid="value" datasetid="ds_accnt_cms" columnid="bank_accnt_no"/>
      <BindItem id="item13" compid="tab_resn.tp_cms.edt_depr" propid="value" datasetid="ds_accnt_cms" columnid="depr"/>
      <BindItem id="item14" compid="tab_resn.tp_cms.rdo_tranDt" propid="value" datasetid="ds_accnt_cms" columnid="ichae_dt"/>
      <BindItem id="item15" compid="tab_resn.tp_cms.cbo_RltnCd" propid="value" datasetid="ds_accnt_cms" columnid="reltn"/>
    </Bind>
    <Objects>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_card_cd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accntInqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accnt_card" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="mem_no" type="STRING" size="100"/>
          <Column id="mem_nm" type="STRING" size="100"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="card_join_dt" type="STRING" size="256"/>
          <Column id="cnsl_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="reltn" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="birth" type="STRING" size="256"/>
          <Column id="card_nm" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="accnt_no2" type="STRING" size="256"/>
          <Column id="wdrw_stat" type="STRING" size="256"/>
          <Column id="card_yn" type="STRING" size="256"/>
          <Column id="yyyy" type="STRING" size="256"/>
          <Column id="mm" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="section_thr" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="boon_napply" type="STRING" size="256"/>
          <Column id="ini_bid" type="STRING" size="256"/>
          <Column id="dbl_accnt_no" type="STRING" size="256"/>
          <Column id="double_stat" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accnt_info_hs" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="mem_no" type="STRING" size="100"/>
          <Column id="mem_nm" type="STRING" size="100"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="card_join_dt" type="STRING" size="256"/>
          <Column id="cnsl_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="reltn" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="birth" type="STRING" size="256"/>
          <Column id="card_nm" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="accnt_no2" type="STRING" size="256"/>
          <Column id="wdrw_stat" type="STRING" size="256"/>
          <Column id="card_yn" type="STRING" size="256"/>
          <Column id="yyyy" type="STRING" size="256"/>
          <Column id="mm" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="section_thr" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="boon_napply" type="STRING" size="256"/>
          <Column id="ini_bid" type="STRING" size="256"/>
          <Column id="dbl_accnt_no" type="STRING" size="256"/>
          <Column id="double_stat" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmsAplcDtl_list" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="100"/>
          <Column id="app_cl_nm" type="STRING" size="100"/>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="bank_cd" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="app_dt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accnt_cms" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="mem_no" type="STRING" size="100"/>
          <Column id="mem_nm" type="STRING" size="100"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="bank_cd" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="join_dt" type="STRING" size="256"/>
          <Column id="cnsl_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="depr" type="STRING" size="256"/>
          <Column id="reltn" type="STRING" size="256"/>
          <Column id="depr_cell" type="STRING" size="256"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="birth" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="cms_yn" type="STRING" size="256"/>
          <Column id="wdrw_stat" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rltn_typ" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ext" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ext_wav" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="cd">mp3</Col>
            <Col id="cd_nm">mp3</Col>
          </Row>
          <Row>
            <Col id="cd">wav</Col>
            <Col id="cd_nm">wav</Col>
          </Row>
          <Row>
            <Col id="cd">wma</Col>
            <Col id="cd_nm">wma</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_ext_img" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="cd">jpg</Col>
            <Col id="cd_nm">jpg</Col>
          </Row>
          <Row>
            <Col id="cd">jpeg</Col>
            <Col id="cd_nm">jpeg</Col>
          </Row>
          <Row>
            <Col id="cd">gif</Col>
            <Col id="cd_nm">gif</Col>
          </Row>
          <Row>
            <Col id="cd">tif</Col>
            <Col id="cd_nm">tif</Col>
          </Row>
          <Row>
            <Col id="cd">pdf</Col>
            <Col id="cd_nm">pdf</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_accnt_card_old" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="mem_no" type="STRING" size="100"/>
          <Column id="mem_nm" type="STRING" size="100"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="card_join_dt" type="STRING" size="256"/>
          <Column id="cnsl_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="reltn" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="birth" type="STRING" size="256"/>
          <Column id="card_nm" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="accnt_no2" type="STRING" size="256"/>
          <Column id="wdrw_stat" type="STRING" size="256"/>
          <Column id="card_yn" type="STRING" size="256"/>
          <Column id="yyyy" type="STRING" size="256"/>
          <Column id="mm" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="section_thr" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="dbl_accnt_no" type="STRING" size="256"/>
          <Column id="double_stat" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accnt_cms_old" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="mem_no" type="STRING" size="100"/>
          <Column id="mem_nm" type="STRING" size="100"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="card_join_dt" type="STRING" size="256"/>
          <Column id="cnsl_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="reltn" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="birth" type="STRING" size="256"/>
          <Column id="card_nm" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="accnt_no2" type="STRING" size="256"/>
          <Column id="wdrw_stat" type="STRING" size="256"/>
          <Column id="card_yn" type="STRING" size="256"/>
          <Column id="yyyy" type="STRING" size="256"/>
          <Column id="mm" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="section_thr" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="dbl_accnt_no" type="STRING" size="256"/>
          <Column id="double_stat" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/********************************************************************************************/
/* 1. Include Library include, variables Declaration 영역                                  */
/********************************************************************************************/
include "LIB::lib_All.xjs";

var gv_rslMsg = "";

var gv_accnt_no = "";	//글로벌 회원번호 
var gv_card_yn = "";	//CARD등록여부(DEL_FG ='N')
var gv_req_yn = "";	//회원 청구 여부(N : 산출, R : 청구)
var gv_dbl_stat = "1";	//CMS다구좌상태(1 : 각각구좌, 2 : 각각구좌에서 통합구좌, 3 : 통합구좌에서 통합구좌)
var gv_pay_mthd = "";

/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트) 처리                                           	*/
/********************************************************************************************/
function DL50000104P21_onload(obj:Form, e:LoadEventInfo)
{
	///////////////////////////////////////////////////////////////////////////////////////////
	// 프로그램 로그 추가 2018.01.05 정승철
	gvMenuId = GV_LOGMENUID;
	///////////////////////////////////////////////////////////////////////////////////////////
	
	//컴퍼넌트 초기화
	fn_setComponent("INIT");
		
	gfn_initForm(obj);
	gfn_getList("dlwCd","07,52,84,0120","fn_callBack",false);   // 대명코드조회 (07:관계, 0120:카드사)	
	gfn_createPagingDataset(obj); // 페이징처리 위한 데이터셋 설정;	
}

    
/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
function fn_callBack(svcid, errcd, errmsg)
{
	if (errcd != 0) {
		trace(errcd)
		return false;
	} else {
		switch (svcid) {
			case "selectDlwCode":	
				gfn_getCode("0120", "ALL", ds_card_cd, gds_DmlCd); // 코드조회결과 필터	
				gfn_getCode("07", "ALL", ds_rltn_typ, gds_DmlCd); // 코드조회결과 필터	
				
				if(gv_pay_mthd == "04") {
					tab_resn.tabindex = 1;
					fn_commSearch(gfn_getCommTypeInit(), "getCmsList");
				} else if (gv_pay_mthd == "06") {
					tab_resn.tabindex = 0;
					fn_commSearch(gfn_getCommTypeInit(), "getCareList");
				}
			break;
			
			case "selectCustaccntList" :
				//청구여부 데이터 
 				gv_req_yn = ds_accnt_card.getColumn(0,"wdrw_stat")
// 				gv_dbl_stat = ds_accnt_card.getColumn(0,"double_stat");	
// 							
// 				if (gv_dbl_stat == "1") {
// 					btn_Change.visible = true;
// 				} else {
// 					btn_Change.visible = false;
// 				}
// 				
				if(ds_accnt_card.rowcount > 0) {
					//카드등록된 회원여부
					switch(ds_accnt_card.getColumn(0,"card_yn")){
					
						// 카드회원 정보가 입력된적 없음
						case "NONE" :
							gv_card_yn = "N";
							fn_setComponent("ADD_CARD");							
						break;
											
						// 카드회원 정보가 있는데 삭제된 경우 
						case "Y" :
							gv_card_yn = "U";
							fn_setComponent("ADD_CARD");					
						break;
																
						// 카드회원 정상인 회원이 있음											
						case "N" :
							gv_card_yn = "Y";
							fn_setComponent("SEARCH_CARD");
						break;									
					}	
				}
				
				if(ds_accnt_cms.rowcount > 0) {
					//CMS등록된 회원여부
					switch(ds_accnt_cms.getColumn(0,"cms_yn")){
					
						// 카드회원 정보가 입력된적 없음
						case "NONE" :
							gv_card_yn = "N";
							fn_setComponent("ADD_CMS");							
						break;
											
						// 카드회원 정보가 있는데 삭제된 경우 
						case "Y" :
							gv_card_yn = "U";
							fn_setComponent("ADD_CMS");					
						break;
																
						// 카드회원 정상인 회원이 있음											
						case "N" :
							gv_card_yn = "Y";
							fn_setComponent("SEARCH_CMS");
						break;									
					}	
				}
			break;	
			
			case "updateCard" :
				alert("정상적으로 변경 되었습니다.");
				close();
			break;
			
			case "deleteCard" :
				alert("정상적으로 삭제 되었습니다.");
				opener.fn_srchPymnHstr();
				close();
			break;	

			case "insertCard" :
				alert(gv_rslMsg);
				if (gv_rslMsg.substr(0,4) == "[OK]"){
					opener.fn_srchPymnHstr();
					close();
				}								
			break;	
			
			case "updateCms" :
				alert("정상적으로 변경 되었습니다.");
				close();
			break;
			
			case "deleteCms" :
				alert("정상적으로 삭제 되었습니다.");
				opener.fn_srchPymnHstr();
				close();
			break;	
			
			case "insertCms" :
				alert("정상적으로 등록 되었습니다.");
				opener.fn_srchPymnHstr();
				close();
			break;
		}
	}
}

/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/

function fn_preSearch(sType) {
// 	switch(sType) {	
// 		case "selectCustaccntList":		
// 			ds_accnt_card.clearData();
// 			
// 			ds_accntInqCndt.clearData();
// 			ds_accntInqCndt.addRow();
// 			ds_accntInqCndt.setColumn(0, "accnt_no", gv_accnt_no);
// 		break;
// 	}
	ds_accnt_card.clearData();
			
	ds_accntInqCndt.clearData();
	ds_accntInqCndt.addRow();
	ds_accntInqCndt.setColumn(0, "accnt_no", gv_accnt_no);
	
	tab_resn.tp_card.edt_accnt_no.value = gv_accnt_no;
	tab_resn.tp_cms.edt_accnt_no.value = gv_accnt_no;
}

function fn_preSaveCard(svcid) {
	var return_bool = false;
	var relTn = "20";			// 관계 : 본인, 대리납
	
	switch(svcid) {
		case "updateCard":			
			//변경된 필드가 있는지 확인
			if(!fn_changedColumnCard()){
				alert("변경된 정보가 없습니다.");
				return false;
			}
							
			if (gv_req_yn == "N"){
				return_bool = confirm("산출(청구)중인 회원입니다.[수정 시 해당 월 추가 산출 될수 있음]");
			} else {
				return_bool = confirm("변경 하시겠습니까?[수정 시 해당 월 추가 산출 될수 있음]");
			}			
		break;
		
		case "deleteCard":							
			if (gv_req_yn == "N"){
				return_bool = confirm("산출(청구)중인 회원이지만 해당 회원의 카드를 삭제 하시겠습니까?");				
			} else {
				return_bool = confirm("해당 회원의 카드를 해지 하시겠습니까?");
			}			
		break;		
		
		case "insertCard":	

			// 생년월일 체크 	
			var sBrthMonDay = tab_resn.tp_card.edt_brdt.value;
			if (!gfn_isNull(sBrthMonDay)) {
				var len = String(sBrthMonDay).length;
				if (len != 6) {
					alert("올바른 생년월일을 입력하세요");
					edt_brdt.setFocus();
					return false;
				} 
			} else {
				alert("올바른 생년월일을 입력하세요");
				tab_resn.tp_card.edt_brdt.setFocus();
				return false;
			}
			
			// 카드사 체크 	
			if(tab_resn.tp_card.cbo_card.index == 0){
				alert("카드사를 선택 하세요");
				tab_resn.tp_card.cbo_card.setFocus();
				return false;
			}
			
			// 카드번호 체크 			
			var sCardAccnt = tab_resn.tp_card.edt_card_no.value; 
			if (gfn_isNull(sCardAccnt)) {
				alert("올바른 카드번호를 입력하세요");
				tab_resn.tp_card.edt_card_no.setFocus();
				return false;
			}
						
			// 카드 만기 월 체크 	
			var sChkMM = "Y";
			var smm = tab_resn.tp_card.edt_card_mon.value;
			if (!gfn_isNull(smm)) {
				var len = String(smm).length;
				if (len < 2) {
					sChkMM = "N"
				} else {
					if(smm > 12){
						sChkMM = "N"
					}
				}
			} else {
				sChkMM = "N"
			}
			
			if (sChkMM == "N"){
				alert("올바른 카드 만기월을 입력하세요");
				tab_resn.tp_card.edt_card_mon.setFocus();
				return false;
			}
			
			// 카드 만기 년도 체크 	
			var sChkyyyy = "Y";
			var sYYYY = tab_resn.tp_card.edt_card_year.value;
			if (!gfn_isNull(sYYYY)) {
				var Ylen = String(sYYYY).length;
				if (Ylen < 2) {
					sChkyyyy = "N"
				} else {
					if(sYYYY < 19){
						sChkyyyy = "N"
					}
				}
			} else {
				sChkyyyy = "N"
			}
			
			if (sChkyyyy == "N"){
				alert("올바른 카드 만기연도을 입력하세요");
				tab_resn.tp_card.edt_card_year.setFocus();
				return false;
			}						
							
			// 대리납 체크	(생년월일이 틀리거나 예금주명이 틀리면 관계값이 본인이 될수 없음			
			var brth_mon_day = ds_accnt_card.getColumn(0,"brth_mon_day").substr(2,6);	
			
			if (sBrthMonDay !=  brth_mon_day){
				relTn = "00";
			}
			
			ds_accnt_card.setColumn(0,"reltn",relTn); // 관계값 강제 입력
						
			if(relTn == "20"){
				return_bool = confirm("해당 회원의 카드를 신청 하시겠습니까?");
			} else {
				return_bool = confirm("해당 회원[대리납]의 카드를 신청 하시겠습니까?");
			}			
		break;			
	}
	//통합구좌의 경우 회원번호가 아닌 두구좌 통합 번호를 회원번호로 조건처리함
// 	if (gv_dbl_stat == '2'){
// 		ds_accnt_card.setColumn(0, "accnt_no", edt_card_accnt.text);	
// 	}
	return return_bool;
}

function fn_preSaveCms(svcid) {
	var return_bool = false;
	
	switch(svcid) {
		case "updateCms":			
			//변경된 필드가 있는지 확인
			if(!fn_changedColumnCms()){
				alert("변경된 정보가 없습니다.");
				return false;
			}
							
			if (gv_req_yn == "N"){
				return_bool = confirm("산출(청구)중인 회원입니다.[수정 시 해당 월 추가 산출 될수 있음]");
			} else {
				return_bool = true;
			}
		break;
		
		case "deleteCms":			
				
			//웹모듈 연동
			if(tab_resn.tp_cms.ckb_webModule.value == "N") {
				var resl = fn_rltmWebModuleRequest();
				if (!resl) return false;
			} 

			if (gv_req_yn == "N"){
				return_bool = confirm("산출(청구)중인 회원이지만 해당 회원의 CMS를 삭제 하시겠습니까?");				
			} else {
				return_bool = confirm("해당 회원의 CMS를 해지 하시겠습니까?");
			}					
		break;		
		
		case "insertCms":	
			// 생년월일 체크 	
			var sBrthMonDay = tab_resn.tp_cms.edt_brdt.value;
			if (!gfn_isNull(sBrthMonDay)) {
				var len = String(sBrthMonDay).length;
				if (len < 6 || len > 10) {
					alert("올바른 생년월일을 입력하세요");
					tab_resn.tp_cms.edt_brdt.setFocus();
					return false;
				} 
			} else {
				alert("올바른 생년월일을 입력하세요");
				tab_resn.tp_cms.edt_brdt.setFocus();
				return false;
			}
			// 관계 값 체크 			
			if (tab_resn.tp_cms.cbo_RltnCd.index == 0) {				
				alert("올바른 관계 값을 입력하세요");
				tab_resn.tp_cms.cbo_RltnCd.setFocus();
				return false;				
			}							
			// 은행코드 체크 			
			var sBankCd = tab_resn.tp_cms.edt_bankCd.value; 
			var len = String(sBankCd).length;
			if (len != 3) {
				alert("올바른 은행코드를 입력하세요");
				tab_resn.tp_cms.edt_bankCd.setFocus();
				return false;
			} 
			// 계좌번호 체크 			
			var sBankAccnt = tab_resn.tp_cms.edt_bankaccntNo.value; 
			if (gfn_isNull(sBankAccnt)) {
				alert("올바른 계좌번호를 입력하세요");
				tab_resn.tp_cms.edt_bankaccntNo.setFocus();
				return false;
			}								
			// 예금주 체크 			
			var sDepr = tab_resn.tp_cms.edt_depr.value; 
			if (gfn_isNull(sDepr)) {
				alert("올바른 예금주를 입력하세요");
				tab_resn.tp_cms.edt_depr.setFocus();
				return false;
			}	
			// 대리납 체크	(생년월일이 틀리거나 예금주명이 틀리면 관계값이 본인이 될수 없음
			
			var brth_mon_day = ds_accnt_cms.getColumn(0,"brth_mon_day");			
			
			if (sBrthMonDay !=  brth_mon_day || tab_resn.tp_cms.edt_mem_nm.value != sDepr){
				if(cbo_RltnCd.index == 1){
					alert("대리납의 경우 관계 값이 본인이 될 수 없습니다.[변경요망]");
					cbo_RltnCd.setFocus();
					return false;
				}
			}												
			
            //웹모듈 연동
			if(tab_resn.tp_cms.ckb_webModule.value == "N") {
				var resl = fn_rltmWebModuleRequest();
				if (!resl) return false;				
			}
						
			if(cbo_RltnCd.index == 1){
				return_bool = confirm("해당 회원의 CMS를 신청 하시겠습니까?");
			} else {
				return_bool = confirm("해당 회원[대리납]의 CMS를 신청 하시겠습니까?");
			}
		break;			
	}
			
	//통합구좌의 경우 회원번호가 아닌 두구좌 통합 번호를 회원번호로 조건처리함
// 	if (gv_dbl_stat == '2'){
// 		ds_accnt_cms.setColumn(0, "accnt_no", edt_cms_accnt.text);	
// 	}
	return return_bool;
}

/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
//조회
function fn_commSearch(sType, svcId) {
	var szSvcid       = "";
    var szController  = "";
    var szInDs        = "";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "";

	switch(svcId) {	
		//회원번호 기준으로 카드정보 가져오기 		
		case "getCareList":
			fn_preSearch(svcId);
			
			szSvcid       = "selectCustaccntList";
			szController  = "/dlw/memPayMthd/getMemPayMthdList";
			szInDs        = "ds_input=ds_accntInqCndt";
			szOutDs       = "ds_accnt_card=ds_output ds_cmsAplcDtl_list=ds_output2";
			szParam       = "pay_mthd=CARD";
			szRetCallback = "fn_callBack";
		break;
		
		case "getCmsList":
			fn_preSearch(svcId);
			
			szSvcid       = "selectCustaccntList";
			szController  = "/dlw/memPayMthd/getMemPayMthdList";
			szInDs        = "ds_input=ds_accntInqCndt";
			szOutDs       = "ds_accnt_cms=ds_output ds_cmsAplcDtl_list=ds_output2";
			szParam       = "pay_mthd=CMS";
			szRetCallback = "fn_callBack";
		break;
	}
	
    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

function fn_commSave(saveInfo) {

    var szSvcid = ""
    var szController = ""
    var szInDs = ""
    var szOutDs = ""
    var szParam = ""
    var szRetCallback = ""

    switch(saveInfo) {
		
		// 나이스 카드 변경
        case "updateCard":         						
			if(!fn_preSaveCard(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/updateCard";
			szInDs        = "ds_input=ds_accnt_card ds_input_old=ds_accnt_card_old";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";  
        break;   
                  
		// 나이스 카드 삭제
        case "deleteCard": 
            if(!fn_preSaveCard(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/saveCard";
			szInDs        = "ds_input=ds_accnt_card";
			szOutDs       = "";
			szParam       = "double_stat=" + gv_dbl_stat;
			szRetCallback = "fn_callBack";  
        break;   
                         
		// 이니시스 카드 등록
        case "insertCard": 
            if(!fn_preSaveCard(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/saveCard";
			szInDs        = "ds_input=ds_accnt_card ds_input2=ds_accnt_cms";
			szOutDs       = "";			
			szParam       = "benefit=" + tab_resn.tp_card.ckb_cardbenefit.value + " double_stat=" + gv_dbl_stat;
			szRetCallback = "fn_callBack";  
        break;
        
        // CMS정보 업데이트 
        case "updateCms":         						
			if(!fn_preSaveCms(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/updateCms";
			szInDs        = "ds_input=ds_accnt_cms ds_input_old=ds_accnt_cms_old";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";  
        break;   
                  
		// CMS정보 삭제
        case "deleteCms": 
            if(!fn_preSaveCms(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/saveCms";
			szInDs        = "ds_input=ds_accnt_cms";
			szOutDs       = "";
			szParam       = "double_stat=" + gv_dbl_stat;
			szRetCallback = "fn_callBack";  
        break;   
                         
		// CMS정보 등록
        case "insertCms": 
            if(!fn_preSaveCms(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/saveCms";
			szInDs        = "ds_input=ds_accnt_cms ds_input2=ds_accnt_card";
			szOutDs       = "";
			szParam       = "double_stat=" + gv_dbl_stat;
			szRetCallback = "fn_callBack";  
        break;
        
        // CMS로그 등록
        case "insertCmsLog": 
//            if(!fn_preSave(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/saveCmsHistoryLogs";
			szInDs        = "ds_input=ds_cms_log";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";  
        break;
    }

	// 트랜젝션 공통함수 호출
	gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,"","","I",gvMenuId);
}



/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/


//데이터 업데이트시 ASIS데이터와 TOBE데이터 비교 후 변경된 데이터를 넘김
function fn_changedColumnCard(){	
	var arrText = "";
	var asisData = "";
	var tobeData = "";
	var returnVal = false;
	for(var i=0; i<ds_accnt_card.colcount; i++){
		asisData = ds_accnt_card.getOrgColumn(0,i);	
		tobeData = ds_accnt_card.getColumn(0,i);		
		if(asisData == undefined) asisData = "";
		if(tobeData == undefined) tobeData = "";	
				
		if(asisData != tobeData){				
			trace("asisData : " + asisData);
			trace("tobeData : " + tobeData);
			returnVal = true;
		}		
	}	
			
	trace("returnVal : " + returnVal);
	return returnVal;
}

//데이터 업데이트시 ASIS데이터와 TOBE데이터 비교 후 변경된 데이터를 넘김
function fn_changedColumnCms(){	
	var arrText = "";
	var asisData = "";
	var tobeData = "";
	var returnVal = false;
	for(var i=0; i<ds_accnt_cms.colcount; i++){
		asisData = ds_accnt_cms.getOrgColumn(0,i);	
		tobeData = ds_accnt_cms.getColumn(0,i);		
		if(asisData == undefined) asisData = "";
		if(tobeData == undefined) tobeData = "";	
			
		if(asisData != tobeData){				
			returnVal = true;
		} 		
	}			
	return returnVal;
}
/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
// 닫기
function btn_close_onclick(obj:Button,  e:ClickEventInfo)
{
	close();
}

// 버튼 클릭
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	if (obj.name == "btn_chkCard") {		// 카드보유 확인
		//var url = "https://www.samsungcard.com/hpsub/jhsvc/NHPSPITAK611.do?method=viewForm";
		var url = "https://www.samsungcard.com/hpsub/hpsub/UHPPSU0701P0.jsp";
		system.execBrowser(url);
	}
}

function fn_setComponent(sType){
	trace("#########컴퍼넌트(" + sType +") 세팅############");
	switch(sType) {	
		case "INIT":
// 			edt_mem_nm.readonly = true;
// 			edt_brdt.readonly = true;			
// 			edt_card_mon.readonly = true;
// 			edt_card_year.readonly = true;			
// 			edt_card_no.readonly = true;			
// 			btn_del_card.visible = false;
// 			cbo_card.readonly = true;
																	
			gv_accnt_no = p_accnt_no;
			gv_pay_mthd = p_pay_mthd;
		break;
		
		case "SEARCH_CARD":
			//이전 데이터 저장
			ds_accnt_card_old.assign(ds_accnt_card);
			btn_del_card.visible = true;
			
			//카드사에 따른 나이스 빌키 사용 체크
			ckb_niceBillkey.enable = false;
			var cardCd = ds_accnt_card.getColumn(0,"card_cd");						
// 			if(cardCd == "04" || cardCd == "05" || cardCd == "08"){				
// 				ckb_niceBillkey.value = 100;				
// 			} else {			
// 				ckb_niceBillkey.value = 1;				
// 			}
			if(!gfn_isNull(ds_accnt_card.getColumn(0, "bid"))) {
				tab_resn.tp_card.edt_bid.value = ds_accnt_card.getColumn(0, "bid");
			}
			if(!gfn_isNull(ds_accnt_card.getColumn(0, "ini_bid"))) {
				tab_resn.tp_card.edt_bid.value = ds_accnt_card.getColumn(0, "ini_bid");
			}
		break;	
			
		case "ADD_CARD":
			tab_resn.tp_card.cal_rgsnDt.value = gfn_getToday();
			tab_resn.tp_cms.cal_rgsnDt.value = gfn_getToday();
			
			//이전 데이터 저장
// 			edt_mem_nm.readonly = true;
// 			
// 			edt_brdt.readonly = false;			
// 			cbo_card.readonly = false;
// 			edt_card_mon.readonly = false;
// 			edt_card_year.readonly = false;
// 			edt_card_no.readonly = false;
// 						
// 			rdo_tranDt.value = "05";
// 						
// 			// 이름 및 생년월일 자동 생성 
// 			edt_brdt.value = ds_accnt_card.getColumn(0,"brth_mon_day").substr(2,6);
									
			// 카드기존에 등록이 되었던 회원의 경우 (카드업데이트 NEW_CANCLE 인서트)
			if(gv_card_yn == "U"){										
//				edt_card_mon.value = "06";		
//				edt_card_year.value = "25";
//				edt_card_no.value = "9410340004680208";
// 				edt_reg_dm.value = "";
// 				edt_reg_man.value = "";
// 				cbo_card.value = "01";
			}
//				edt_card_mon.value = "06";		
//				edt_card_year.value = "25";
//				edt_card_no.value = "9410340004680208";																										
		break;	
		
		case "SEARCH_CMS":
			//이전 데이터 저장
			ds_accnt_cms_old.assign(ds_accnt_cms);
			btn_del_card.visible = true;
			
			//카드사에 따른 나이스 빌키 사용 체크
//			ckb_niceBillkey.enable = false;
//			var cardCd = ds_accnt_card.getColumn(0,"card_cd");						
// 			if(cardCd == "04" || cardCd == "05" || cardCd == "08"){				
// 				ckb_niceBillkey.value = 100;				
// 			} else {			
// 				ckb_niceBillkey.value = 1;				
// 			}
// 			if(!gfn_isNull(ds_accnt_card.getColumn(0, "bid"))) {
// 				tab_resn.tp_card.edt_bid.value = ds_accnt_card.getColumn(0, "bid");
// 			}
// 			if(!gfn_isNull(ds_accnt_card.getColumn(0, "ini_bid"))) {
// 				tab_resn.tp_card.edt_bid.value = ds_accnt_card.getColumn(0, "ini_bid");
// 			}
		break;	
			
		case "ADD_CMS":
			tab_resn.tp_cms.cal_rgsnDt.value = gfn_getToday();
			
			//이전 데이터 저장
// 			edt_mem_nm.readonly = true;
// 			
// 			edt_brdt.readonly = false;			
// 			cbo_card.readonly = false;
// 			edt_card_mon.readonly = false;
// 			edt_card_year.readonly = false;
// 			edt_card_no.readonly = false;
// 						
// 			rdo_tranDt.value = "05";
// 						
// 			// 이름 및 생년월일 자동 생성 
// 			edt_brdt.value = ds_accnt_card.getColumn(0,"brth_mon_day").substr(2,6);
									
			// 카드기존에 등록이 되었던 회원의 경우 (카드업데이트 NEW_CANCLE 인서트)
			if(gv_card_yn == "U"){										
//				edt_card_mon.value = "06";		
//				edt_card_year.value = "25";
//				edt_card_no.value = "9410340004680208";
// 				edt_reg_dm.value = "";
// 				edt_reg_man.value = "";
// 				cbo_card.value = "01";
			}
//				edt_card_mon.value = "06";		
//				edt_card_year.value = "25";
//				edt_card_no.value = "9410340004680208";																										
		break;	
	}

}

function btn_save_onclick(obj:Button,  e:ClickEventInfo)
{
	trace(":::::::::::::" + gv_card_yn);
	
	if(tab_resn.tabindex == 0) {
		//카드 정보는 변경이 없고 이체일자만 변경됨
		if (gv_card_yn == "Y"){
			fn_commSave("updateCard");
		} else {
			fn_commSave("insertCard");
		}
	} else if(tab_resn.tabindex == 1) {
		//카드 정보는 변경이 없고 이체일자만 변경됨
		if (gv_card_yn == "Y"){
			fn_commSave("updateCms");
		} else {
			fn_commSave("insertCms");
		}
	}
}

function btn_del_card_onclick(obj:Button,  e:ClickEventInfo)
{
	if(tab_resn.tabindex == 0) {
		fn_commSave("deleteCard");
	} else if(tab_resn.tabindex == 1) {
		fn_commSave("deleteCms");
	}
}

function cbo_card_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
// 	if (e.postvalue == "04" || e.postvalue == "05" || e.postvalue == "08"){		
// 		ckb_niceBillkey.value = 100;
// 		ckb_niceBillkey.enable = false;
// 	} else {
// 		ckb_niceBillkey.value = 1;
// 		ckb_niceBillkey.enable = true;
// 	}
}
function tab_resn_onlbuttonup(obj:Tab, e:TabMouseEventInfo)
{
	if(e.fromobject == "[object Tab]")
	{			
	    if (obj.tabindex == 0) {
		    fn_commSearch(gfn_getCommTypeInit(), "getCareList");
	    } 
		else if (obj.tabindex == 1) {
			fn_commSearch(gfn_getCommTypeInit(), "getCmsList");
		} 
	}
}

function tab_01_cms_cbo_file_gb_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_ext.clearData();
	if (obj.value == "1") {
		ds_ext.assign(ds_ext_img);
		tab_resn.tp_cms.cbo_ext.index = "0";
	} else {
		ds_ext.assign(ds_ext_wav);
		tab_resn.tp_cms.cbo_ext.index = "1";
	}
}]]></Script>
  </Form>
</FDL>

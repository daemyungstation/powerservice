<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="PS220602" classname="팝업가이드" inheritanceid="" position="absolute 0 0 719 407" titletext="대상고객(File추출) 상세 정보" onload="PS220602_onload" onactivate="PS220602_onactivate">
    <Layouts>
      <Layout>
        <Static id="stc_31" class="sta_popupBg1" enable="false" position="absolute 0 0 719 407"/>
        <Button id="btn_close" taborder="1" onclick="btn_onclick" class="btn_popupClose" position="absolute 687 8 707 27"/>
        <Static id="stc_30" text="대상고객(File추출) 상세 정보" class="sta_popupTitle" transparenthittest="true" position="absolute 10 8 316 28"/>
        <Static id="sta_GrayLine" class="sta_WF_Line1" position="absolute 10 45 708 46"/>
        <Static id="stc_03" class="sta_workData" position="absolute 107 71 709 97"/>
        <Static id="stc_20" class="sta_workData" position="absolute 107 46 709 72" onclick="stc_20_onclick"/>
        <Static id="stc_09" text="일반전화" class="sta_workLabel1" position="absolute 10 96 108 122" style="font:Dotum,8;" validate=""/>
        <Static id="stc_11" text="주소" class="sta_workLabel1" position="absolute 10 71 108 97" style="font:Dotum,8;" validate=""/>
        <Static id="stc_13" text="대상고객ID" class="sta_workLabel1" position="absolute 10 46 108 72" style="font:Dotum,8;" validate=""/>
        <Static id="stc_18" class="sta_workData" position="absolute 107 96 709 122"/>
        <Static id="stc_00" text="이메일" class="sta_workLabel1" position="absolute 10 121 108 147" style="font:Dotum,8;" validate=""/>
        <Static id="stc_01" class="sta_workData" position="absolute 107 121 709 147"/>
        <Static id="stc_02" text="사용자정의1" class="sta_workLabel1" position="absolute 10 146 108 172" style="font:Dotum,8;" validate=""/>
        <Static id="stc_04" class="sta_workData" position="absolute 107 146 709 172"/>
        <Static id="stc_05" text="사용자정의2" class="sta_workLabel1" position="absolute 10 171 108 197" style="font:Dotum,8;" validate=""/>
        <Static id="stc_06" class="sta_workData" position="absolute 107 171 709 197"/>
        <Static id="stc_07" text="사용자정의3" class="sta_workLabel1" position="absolute 10 196 108 222" style="font:Dotum,8;" validate="" onclick="stc_07_onclick"/>
        <Static id="stc_08" class="sta_workData" position="absolute 107 196 709 222"/>
        <Static id="stc_10" text="사용자정의4" class="sta_workLabel1" position="absolute 10 221 108 247" style="font:Dotum,8;" validate=""/>
        <Static id="stc_12" class="sta_workData" position="absolute 107 221 709 247"/>
        <Static id="stc_14" text="사용자정의5" class="sta_workLabel1" position="absolute 10 246 108 272" style="font:Dotum,8;" validate=""/>
        <Static id="stc_15" class="sta_workData" position="absolute 107 246 709 272"/>
        <Static id="stc_16" text="사용자정의6" class="sta_workLabel1" position="absolute 10 271 108 297" style="font:Dotum,8;" validate=""/>
        <Static id="stc_17" class="sta_workData" position="absolute 107 271 709 297"/>
        <Static id="stc_19" text="고객명" class="sta_workLabel1" position="absolute 362 46 460 72" style="font:Dotum,8;" validate=""/>
        <Static id="stc_22" text="휴대전화" class="sta_workLabel1" position="absolute 362 96 460 122" style="font:Dotum,8;" validate=""/>
        <Static id="stc_21" text="사용자정의7" class="sta_workLabel1" position="absolute 10 296 108 322" style="font:Dotum,8;" validate=""/>
        <Static id="stc_23" class="sta_workData" position="absolute 107 296 709 322"/>
        <Static id="stc_24" text="사용자정의8" class="sta_workLabel1" position="absolute 10 321 108 347" style="font:Dotum,8;" validate=""/>
        <Static id="stc_25" class="sta_workData" position="absolute 107 321 709 347"/>
        <Static id="stc_26" text="사용자정의9" class="sta_workLabel1" position="absolute 10 346 108 372" style="font:Dotum,8;" validate=""/>
        <Static id="stc_27" class="sta_workData" position="absolute 107 346 709 372"/>
        <Static id="stc_28" text="사용자정의10" class="sta_workLabel1" position="absolute 10 371 108 397" style="font:Dotum,8;" validate=""/>
        <Static id="stc_29" class="sta_workData" position="absolute 107 371 709 397"/>
        <Edit id="edt_trgt_cust_id" taborder="2" position="absolute 109 48 361 69" readonly="true"/>
        <Edit id="edit_mem_nm" taborder="3" position="absolute 461 48 707 69" readonly="true"/>
        <Edit id="edt_cell" taborder="4" position="absolute 461 99 707 120" readonly="true"/>
        <Edit id="edt_home_tel" taborder="5" position="absolute 109 99 360 120" readonly="true"/>
        <Edit id="edt_home" taborder="6" position="absolute 109 73 707 94" readonly="true"/>
        <Edit id="Edit05" taborder="7" position="absolute 109 123 707 144" readonly="true"/>
        <Edit id="edt_user_defn1_cntn" taborder="8" position="absolute 109 148 707 169" readonly="true"/>
        <Edit id="edt_user_defn2_cntn" taborder="9" position="absolute 109 173 707 194" readonly="true"/>
        <Edit id="edt_user_defn3_cntn" taborder="10" position="absolute 109 198 707 219" readonly="true"/>
        <Edit id="edt_user_defn4_cntn" taborder="11" position="absolute 109 223 707 244" readonly="true"/>
        <Edit id="edt_user_defn5_cntn" taborder="12" position="absolute 109 248 707 269" readonly="true"/>
        <Edit id="edt_user_defn6_cntn" taborder="13" position="absolute 109 274 707 295" readonly="true"/>
        <Edit id="edt_user_defn7_cntn" taborder="14" position="absolute 109 299 707 320" readonly="true"/>
        <Edit id="edt_user_defn8_cntn" taborder="15" position="absolute 109 324 707 345" readonly="true"/>
        <Edit id="edt_user_defn9_cntn" taborder="16" position="absolute 109 348 707 369" readonly="true"/>
        <Edit id="edt_user_defn10_cntn" taborder="17" position="absolute 109 374 707 395" readonly="true"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="edit_mem_nm" propid="value" datasetid="ds_fileCustInfo" columnid="mem_nm"/>
      <BindItem id="item1" compid="edt_trgt_cust_id" propid="value" datasetid="ds_fileCustInfo" columnid="trgt_cust_id"/>
      <BindItem id="item2" compid="Edit05" propid="value" datasetid="ds_fileCustInfo" columnid="email"/>
      <BindItem id="item3" compid="edt_user_defn1_cntn" propid="value" datasetid="ds_fileCustInfo" columnid="user_defn1_cntn"/>
      <BindItem id="item4" compid="edt_user_defn2_cntn" propid="value" datasetid="ds_fileCustInfo" columnid="user_defn2_cntn"/>
      <BindItem id="item5" compid="edt_user_defn3_cntn" propid="value" datasetid="ds_fileCustInfo" columnid="user_defn3_cntn"/>
      <BindItem id="item6" compid="edt_user_defn4_cntn" propid="value" datasetid="ds_fileCustInfo" columnid="user_defn4_cntn"/>
      <BindItem id="item7" compid="edt_user_defn5_cntn" propid="value" datasetid="ds_fileCustInfo" columnid="user_defn5_cntn"/>
      <BindItem id="item8" compid="edt_user_defn6_cntn" propid="value" datasetid="ds_fileCustInfo" columnid="user_defn6_cntn"/>
      <BindItem id="item9" compid="edt_user_defn7_cntn" propid="value" datasetid="ds_fileCustInfo" columnid="user_defn7_cntn"/>
      <BindItem id="item10" compid="edt_user_defn8_cntn" propid="value" datasetid="ds_fileCustInfo" columnid="user_defn8_cntn"/>
      <BindItem id="item11" compid="edt_user_defn9_cntn" propid="value" datasetid="ds_fileCustInfo" columnid="user_defn9_cntn"/>
      <BindItem id="item12" compid="edt_user_defn10_cntn" propid="value" datasetid="ds_fileCustInfo" columnid="user_defn10_cntn"/>
    </Bind>
    <Objects>
      <Dataset id="ds_inqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="trgt_cust_dtpt_id" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileCustInfo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="trgt_cust_dtpt_id" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="trgt_cust_id" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="home_zip" type="STRING" size="256"/>
          <Column id="home_addr" type="STRING" size="256"/>
          <Column id="home_addr2" type="STRING" size="256"/>
          <Column id="home_tel" type="STRING" size="256"/>
          <Column id="cell" type="STRING" size="256"/>
          <Column id="email" type="STRING" size="256"/>
          <Column id="user_defn1_cntn" type="STRING" size="256"/>
          <Column id="user_defn2_cntn" type="STRING" size="256"/>
          <Column id="user_defn3_cntn" type="STRING" size="256"/>
          <Column id="user_defn4_cntn" type="STRING" size="256"/>
          <Column id="user_defn5_cntn" type="STRING" size="256"/>
          <Column id="user_defn6_cntn" type="STRING" size="256"/>
          <Column id="user_defn7_cntn" type="STRING" size="256"/>
          <Column id="user_defn8_cntn" type="STRING" size="256"/>
          <Column id="user_defn9_cntn" type="STRING" size="256"/>
          <Column id="user_defn10_cntn" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="rgsr_id" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_id" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/***************************************************************************
 * Program ID    : PS220602.xfdl
 * Program Name  : 대상고객(File추출) 상세 정보
 * Author        : 정 훈
 * Created On    : 2016.03.23
 * 개    요 	 :
 *
 * =========================================================================
 * 변경일자     수정자       내    용
 * =========================================================================
 * 2016.03.23    정   훈      최초작성
 
 **************************************************************************/


/********************************************************************************************/
/* 1. Include Library include                                                               */
/********************************************************************************************/
include "LIB::lib_All.xjs";




/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트,전역변수,초기화) 처리                         	*/
/********************************************************************************************/
 var g_trgt_cust_dtpt_id  = "";
 var g_trgt_list_id ="";
 
 
//온로드
function PS220602_onload(obj:Form, e:LoadEventInfo)
{
	g_trgt_cust_dtpt_id = trgt_cust_dtpt_id;
	g_trgt_list_id = trgt_list_id;
	gfn_createPagingDataset(obj); // 페이징처리 위한 데이터셋 설정
	fn_commSearch(gfn_getCommTypeInit(), g_trgt_cust_dtpt_id, g_trgt_list_id);//조회
}



/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
//콜백
function fn_callBack(svcid, errcd, errmsg) {
    if (errcd != 0) {
		trace("errcd  :   " +errcd +"   \n errmsg   :   "+ errmsg +"    \n svcid   :   "+ svcid)
		trace(errcd);
		return false;
	} else {
		switch (svcid) {
			case "srchFileCustInfo"://조회콜백
				fn_setVal();
			break;
		}
	}
}



/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/



/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
//조회
function fn_commSearch(sType, trgt_cust_dtpt_id, trgt_list_id)
{	
	ds_inqCndt.clearData();
	ds_inqCndt.addRow();
	ds_inqCndt.setColumn(0, "trgt_cust_dtpt_id", trgt_cust_dtpt_id);
	ds_inqCndt.setColumn(0, "trgt_list_id", trgt_list_id);

	
	var szSvcid       = "srchFileCustInfo";
    var szController  = "/campaign/trgt-cust/view";
    var szInDs        = "ds_input=ds_inqCndt";
    var szOutDs       = "ds_fileCustInfo=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}




/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/
//데이터를 형식에 맞게 변경
function fn_setVal(){
	var rowPosition = ds_fileCustInfo.rowposition;
	if(ds_fileCustInfo.getColumn(rowPosition,'home_zip')!= null){
	edt_home.value = "["+ds_fileCustInfo.getColumn(rowPosition, "home_zip")+"] ";
	edt_home.value += ds_fileCustInfo.getColumn(rowPosition, "home_addr")+" "+ds_fileCustInfo.getColumn(rowPosition, "home_addr2");
	}else{
	edt_home.value = null;
	}

	//일반전화
	var homeTelStr =  ds_fileCustInfo.getColumn(rowPosition,'home_tel');
	if(homeTelStr != null && homeTelStr != "" ){
		edt_home_tel.value = gfn_phoneNumStr(homeTelStr);
	};

	//휴대전화
	var cellStr =  ds_fileCustInfo.getColumn(rowPosition,'cell');
	if(cellStr != null && cellStr != "" ){
		edt_cell.value = gfn_phoneNumStr(cellStr);
	};
  
  
}


/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/

//버튼클릭이벤트
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	close();
}


function PS220602_onactivate(obj:Form, e:ActivateEventInfo)
{
	if (!gfn_isNull(this.userParam)) {
		g_trgt_cust_dtpt_id = this.userParam.trgt_cust_dtpt_id;
		g_trgt_list_id = this.userParam.trgt_list_id;
		fn_commSearch( gfn_getCommTypeInit(),g_trgt_cust_dtpt_id, g_trgt_list_id);
	
		// 폼에 parameter 초기화한다.
		this.userParam = null;
	}
}
]]></Script>
  </Form>
</FDL>

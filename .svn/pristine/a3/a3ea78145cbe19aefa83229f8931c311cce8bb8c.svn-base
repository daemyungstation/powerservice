<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="DL50000104P21" classname="DL410101" inheritanceid="" position="absolute 0 0 695 447" titletext="카드/CMS등록(NEW)" scrollbars="none" onload="DL50000104P21_onload">
    <Layouts>
      <Layout>
        <Static id="stc_31" class="sta_popupBg1" enable="false" position="absolute 0 0 692 441"/>
        <Button id="btn_close" taborder="3" onclick="btn_close_onclick" class="btn_popupClose" position="absolute 660 9 680 28"/>
        <Static id="stc_30" text="CMS/카드등록(NEW)" class="sta_popupTitle" transparenthittest="true" position="absolute 10 8 202 28"/>
        <Tab id="tab_resn" taborder="4" tabindex="0" scrollbars="autoboth" position="absolute 10 48 682 232" onchanged="tab_resn_onchanged">
          <Tabpages>
            <Tabpage id="tp_card" text="카드">
              <Layouts>
                <Layout>
                  <Static id="stc_15" class="sta_workData" position2="absolute l:104 r:9 t:94 h:26" positiontype="position2"/>
                  <Static id="stc_03" class="sta_workData" position2="absolute l:82 r:9 t:69 h:26" positiontype="position2"/>
                  <Static id="stc_08" class="sta_workData" position2="absolute l:82 r:9 t:12 h:26" positiontype="position2"/>
                  <Static id="stc_11" text="회원번호" class="sta_workLabel1" position2="absolute l:8 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_accnt_no" taborder="6" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:85 w:131 t:14 h:22" positiontype="position2" enable="true" readonly="true"/>
                  <Static id="stc_02" text="회원명" class="sta_workLabel1" position2="absolute l:217 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_mem_nm" taborder="7" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:294 w:132 t:14 h:22" positiontype="position2" enable="true" readonly="true"/>
                  <Static id="stc_00" text="생년월일" class="sta_workLabel1" position2="absolute l:428 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_brdt" taborder="8" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:504 w:154 t:14 h:22" positiontype="position2" enable="false"/>
                  <Static id="stc_04" text="카드 신청" class="sta_workTitle2" position2="absolute l:8 w:169 t:50 h:20" positiontype="position2"/>
                  <Static id="stc_06" class="sta_workData" position2="absolute l:82 r:9 t:119 h:26" positiontype="position2"/>
                  <Edit id="edt_birth" taborder="3" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:85 w:102 t:96 h:22" positiontype="position2" enable="true"/>
                  <Static id="stc_01" text="BIRTH" class="sta_workLabel1" position2="absolute l:8 w:75 t:94 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Static id="stc_deprPhone" text="결제일" class="sta_workLabel1" position2="absolute l:188 w:75 t:94 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Static id="stc_14" text="등록일" class="sta_workLabel1" position2="absolute l:488 w:75 t:94 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Calendar id="cal_rgsnDt" taborder="5" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" position2="absolute l:565 w:94 t:97 h:20" positiontype="position2"/>
                  <Static id="stc_07" text="빌키" class="sta_workLabel1" position2="absolute l:341 w:75 t:119 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_bid" taborder="9" inputtype="number" maxlength="2" position2="absolute l:418 w:241 t:121 h:22" positiontype="position2" enable="false"/>
                  <Static id="stc_09" text="카드종류" class="sta_workLabel1" position2="absolute l:8 w:75 t:119 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_cardGubun" taborder="10" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:85 w:102 t:121 h:22" positiontype="position2" enable="false"/>
                  <Static id="stc_13" text="카드사" class="sta_workLabel1" position2="absolute l:488 w:75 t:69 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Combo id="cbo_card" taborder="11" innerdataset="ds_card_cd" codecolumn="cd" datacolumn="cd_nm" onitemchanged="tab_cms_cbo_RltnCd_onitemchanged" position2="absolute l:565 w:94 t:71 h:22" positiontype="position2" enable="false"/>
                  <Edit id="edt_card_no" taborder="0" inputtype="number" maxlength="16" onkillfocus="card_onkillfocus" ontextchanged="card_ontextchanged" position2="absolute l:85 w:161 t:71 h:22" positiontype="position2" inputfilter="dot,sign" onchar="tab_resn_tp_card_edt_card_no_onchar"/>
                  <Static id="stc_12" text="유효기간" class="sta_workLabel1" position2="absolute l:248 w:75 t:69 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_card_year" taborder="1" inputtype="number" maxlength="2" position2="absolute l:325 w:48 t:71 h:22" positiontype="position2" ontextchanged="fn_ontextchanged" onchar="tab_resn_tp_card_edt_card_year_onchar"/>
                  <Static id="stc_cell_bar00" text="년" position2="absolute l:379 w:13 t:72 h:22" positiontype="position2"/>
                  <Edit id="edt_card_mon" taborder="2" inputtype="number" maxlength="2" position2="absolute l:401 w:48 t:71 h:22" positiontype="position2" ontextchanged="fn_ontextchanged"/>
                  <Static id="stc_cell_bar03" text="월" position2="absolute l:457 w:13 t:72 h:22" positiontype="position2"/>
                  <Radio id="rdo_tranDt" taborder="4" columncount="0" rowcount="0" codecolumn="codecolumn" datacolumn="datacolumn" direction="vertical" onitemclick="tab_01_card_rdo_tranDt_onitemclick" position="absolute 273 97 468 118" style="font:Dotum,9;">
                    <Dataset id="innerdataset">
                      <ColumnInfo>
                        <Column id="codecolumn" size="256"/>
                        <Column id="datacolumn" size="256"/>
                      </ColumnInfo>
                      <Rows>
                        <Row>
                          <Col id="codecolumn">05</Col>
                          <Col id="datacolumn">5</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">10</Col>
                          <Col id="datacolumn">10</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">15</Col>
                          <Col id="datacolumn">15</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">20</Col>
                          <Col id="datacolumn">20</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">25</Col>
                          <Col id="datacolumn">25</Col>
                        </Row>
                      </Rows>
                    </Dataset>
                  </Radio>
                  <Static id="stc_10" text="카드번호" class="sta_workLabel1" position2="absolute l:8 w:75 t:69 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <CheckBox id="ckb_cardbenefit" taborder="12" text="카드청구할인(나이스)" value="1" truevalue="100" falsevalue="1" position2="absolute r:81 w:164 t:46 h:20" positiontype="position2" style="color:red;"/>
                  <Button id="btn_chkCard" taborder="13" text="삼성카드 확인" onclick="btn_onclick" position="absolute 565 46 661 66" tooltiptext="카드보유 확인" style="border:0 none #000000ff ;padding:0 0 0 0;"/>
                  <Static id="stc_05" text="PG정보" class="sta_workLabel1" position2="absolute l:188 w:75 t:119 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_pg_info" taborder="14" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" enable="false" position2="absolute l:265 w:74 t:121 h:22" positiontype="position2"/>
                  <Combo id="cbo_inicard" taborder="15" innerdataset="@ds_inicard_cd" codecolumn="cd" datacolumn="cd_nm" onitemchanged="tab_cms_cbo_RltnCd_onitemchanged" enable="false" position2="absolute l:565 w:94 t:71 h:22" positiontype="position2"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tp_cms" text="CMS">
              <Layouts>
                <Layout>
                  <Static id="stc_08" class="sta_workData" position2="absolute l:82 r:9 t:12 h:26" positiontype="position2"/>
                  <Static id="stc_11" text="회원번호" class="sta_workLabel1" position2="absolute l:8 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_accnt_no" taborder="6" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:85 w:151 t:14 h:22" positiontype="position2" enable="false"/>
                  <Static id="stc_02" text="회원명" class="sta_workLabel1" position2="absolute l:238 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_mem_nm" taborder="7" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:315 w:155 t:14 h:22" positiontype="position2" enable="false"/>
                  <Static id="stc_00" text="생년월일" class="sta_workLabel1" position2="absolute l:472 w:75 t:12 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_brdt" taborder="8" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:549 w:109 t:14 h:22" positiontype="position2" enable="false"/>
                  <Static id="stc_04" text="CMS 신청" class="sta_workTitle2" position2="absolute l:8 w:169 t:50 h:20" positiontype="position2"/>
                  <Static id="stc_01" class="sta_workData" position2="absolute l:82 r:9 t:69 h:26" positiontype="position2"/>
                  <Static id="stc_10" text="예금주" class="sta_workLabel1" position="absolute 472 69 547 95" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_depr" taborder="2" readonly="false" position2="absolute l:549 w:109 t:71 h:22" positiontype="position2" style="background:URL('theme://images/bg_compN.png') stretch 5,5;"/>
                  <Static id="stc_03" class="sta_workData" position2="absolute l:82 r:9 t:94 h:26" positiontype="position2"/>
                  <Static id="stc_14" text="등록일" class="sta_workLabel1" position="absolute 472 94 547 120" style="font:Dotum,8;" validate=""/>
                  <Calendar id="cal_rgsnDt" taborder="5" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" position2="absolute l:549 w:109 t:97 h:20" positiontype="position2"/>
                  <Static id="stc_05" class="sta_workData" position2="absolute l:8 r:9 t:119 h:26" positiontype="position2"/>
                  <Static id="stc_file_gb" text="증빙자료" class="sta_workLabel1" position="absolute 191 119 266 145" style="font:Dotum,8;" validate="" visible="true"/>
                  <Combo id="cbo_file_gb" taborder="9" value="2" text="녹취" codecolumn="codecolumn" datacolumn="datacolumn" index="1" onitemchanged="tab_01_cms_cbo_file_gb_onitemchanged" position2="absolute l:268 w:105 t:121 h:22" positiontype="position2" visible="true">
                    <Dataset id="innerdataset">
                      <ColumnInfo>
                        <Column id="codecolumn" size="256"/>
                        <Column id="datacolumn" size="256"/>
                      </ColumnInfo>
                      <Rows>
                        <Row>
                          <Col id="codecolumn">1</Col>
                          <Col id="datacolumn">서면(전자서명)</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">4</Col>
                          <Col id="datacolumn">녹취(TM)</Col>
                        </Row>
                      </Rows>
                    </Dataset>
                  </Combo>
                  <Static id="stc_ext" text="확장자" class="sta_workLabel1" position="absolute 883 119 958 145" style="font:Dotum,8;" validate="" visible="false"/>
                  <Combo id="cbo_ext" taborder="10" innerdataset="ds_ext" codecolumn="cd" datacolumn="cd_nm" position2="absolute l:960 w:105 t:121 h:22" positiontype="position2" index="-1" visible="false"/>
                  <Static id="stc_13" text="관계" class="sta_workLabel1" position2="absolute l:8 w:75 t:119 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Combo id="cbo_RltnCd" taborder="3" innerdataset="ds_rltn_typ" codecolumn="cd" datacolumn="cd_nm" onitemchanged="tab_cms_cbo_RltnCd_onitemchanged" position2="absolute l:85 w:104 t:121 h:22" positiontype="position2"/>
                  <Radio id="rdo_tranDt" taborder="4" columncount="0" rowcount="0" codecolumn="codecolumn" datacolumn="datacolumn" direction="vertical" onitemclick="tab_01_cms_rdo_tranDt_onitemclick" position="absolute 272 97 467 118" style="font:Dotum,9;">
                    <Dataset id="innerdataset">
                      <ColumnInfo>
                        <Column id="codecolumn" size="256"/>
                        <Column id="datacolumn" size="256"/>
                      </ColumnInfo>
                      <Rows>
                        <Row>
                          <Col id="codecolumn">05</Col>
                          <Col id="datacolumn">5</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">10</Col>
                          <Col id="datacolumn">10</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">15</Col>
                          <Col id="datacolumn">15</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">20</Col>
                          <Col id="datacolumn">20</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">25</Col>
                          <Col id="datacolumn">25</Col>
                        </Row>
                      </Rows>
                    </Dataset>
                  </Radio>
                  <CheckBox id="ckb_webModule" taborder="11" text="실시간 웹모듈 연결끊기" value="N" truevalue="Y" falsevalue="N" position2="absolute r:13 w:148 t:123 h:20" positiontype="position2" visible="false"/>
                  <Static id="stc_12" text="은행코드" class="sta_workLabel1" position="absolute 8 69 83 95" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_bankCd" taborder="0" inputtype="number" position2="absolute l:85 w:38 t:71 h:22" positiontype="position2" onkeydown="tab_resn_tp_cms_edt_bankCd_onkeydown"/>
                  <Edit id="edt_bankNm" taborder="12" onkeydown="tab_01_cms_edt_bank_onkeydown" position2="absolute l:124 w:91 t:71 h:22" positiontype="position2"/>
                  <Button id="btn_srcBank" taborder="13" onclick="btn_Bank_onclick" class="btn_workSrcPop" position2="absolute l:216 w:20 t:72 h:20" positiontype="position2"/>
                  <Static id="stc_09" text="계좌번호" class="sta_workLabel1" position2="absolute l:238 w:75 t:69 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_bankaccntNo" taborder="1" inputtype="number" canchange="tab_01_cms_edt_bankaccntNo_canchange" position2="absolute l:315 w:155 t:71 h:22" positiontype="position2"/>
                  <Static id="stc_deprPhone" text="결제일" class="sta_workLabel1" position2="absolute l:191 w:75 t:94 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Static id="stc_06" text="BIRTH" class="sta_workLabel1" position2="absolute l:8 w:75 t:94 h:26" positiontype="position2" style="font:Dotum,8;" validate=""/>
                  <Edit id="edt_birth" taborder="14" onkeydown="edt_accnt_onkeydown" class="edt_clssEnable" position2="absolute l:85 w:104 t:96 h:22" positiontype="position2"/>
                  <Edit id="edt_bankIni" taborder="15" inputtype="number" position2="absolute l:213 w:38 t:44 h:22" positiontype="position2" visible="false"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Button id="btn_save" taborder="5" class="btn_WF_Save" position2="absolute r:13 w:72 t:52 h:20" positiontype="position2" tooltiptext="저장" onclick="btn_save_onclick"/>
        <Button id="btn_delete" taborder="6" class="btn_WF_Del" visible="false" position2="absolute r:88 w:72 t:52 h:20" positiontype="position2" tooltiptext="삭제" style="shadow:drop 0,0 0 #00000033;" onclick="btn_delete_onclick"/>
        <Grid id="grd_history" taborder="12" binddataset="ds_history" useinputpanel="false" cellsizingtype="col" autofittype="col" onvscrolllastover="fn_cmsAplcDtlGrid_onvscrolllastover" position2="absolute l:11 r:13 t:261 b:14" positiontype="position2">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="46"/>
                <Column size="90"/>
                <Column size="90"/>
                <Column size="106"/>
                <Column size="66"/>
                <Column size="83"/>
                <Column size="86"/>
                <Column size="86"/>
                <Column size="91"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" edittype="normal" style="checkboxsize:BIND(Column0);" text="순번" autosizecol="limitmin"/>
                <Cell col="1" text="신청구분"/>
                <Cell col="2" text="카드/은행"/>
                <Cell col="3" text="카드/계좌번호"/>
                <Cell col="4" text="유효일"/>
                <Cell col="5" text="생년월일"/>
                <Cell col="6" text="등록자"/>
                <Cell col="7" text="등록일"/>
                <Cell col="8" text="회원번호"/>
              </Band>
              <Band id="body">
                <Cell text="expr:currow+1"/>
                <Cell col="1" text="bind:app_cl_nm"/>
                <Cell col="2" text="bind:bank_nm"/>
                <Cell col="3" text="bind:bank_accnt_no"/>
                <Cell col="4" text="bind:expire_date"/>
                <Cell col="5" text="bind:idn_no"/>
                <Cell col="6" text="bind:reg_man"/>
                <Cell col="7" displaytype="date" text="bind:reg_dm"/>
                <Cell col="8" displaytype="text" edittype="readonly" text="bind:accnt_no" editdisplay="display"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_Input" taborder="13" text="등록" visible="true" position2="absolute r:87 w:73 t:52 h:20" positiontype="position2" tooltiptext="등록" style="color:red;" onclick="btn_Input_onclick"/>
        <Static id="stc_07" text="결제정보이력" class="sta_workTitle2" position2="absolute l:19 w:169 t:242 h:20" positiontype="position2"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="tab_resn.tp_card.edt_mem_nm" propid="value" datasetid="ds_accnt_list" columnid="mem_nm"/>
      <BindItem id="item1" compid="tab_resn.tp_card.edt_brdt" propid="value" datasetid="ds_accnt_list" columnid="brth_mon_day"/>
      <BindItem id="item2" compid="tab_resn.tp_card.cbo_card" propid="value" datasetid="ds_accnt_list" columnid="card_cd"/>
      <BindItem id="item3" compid="tab_resn.tp_card.edt_card_no" propid="value" datasetid="ds_accnt_list" columnid="card_no"/>
      <BindItem id="item4" compid="tab_resn.tp_card.edt_card_year" propid="value" datasetid="ds_accnt_list" columnid="yy"/>
      <BindItem id="item5" compid="tab_resn.tp_card.edt_card_mon" propid="value" datasetid="ds_accnt_list" columnid="mm"/>
      <BindItem id="item6" compid="tab_resn.tp_card.rdo_tranDt" propid="value" datasetid="ds_accnt_list" columnid="pay_dt"/>
      <BindItem id="item7" compid="tab_resn.tp_card.cal_rgsnDt" propid="value" datasetid="ds_accnt_list" columnid="card_reg_dm"/>
      <BindItem id="item8" compid="tab_resn.tp_cms.edt_mem_nm" propid="value" datasetid="ds_accnt_list" columnid="mem_nm"/>
      <BindItem id="item9" compid="tab_resn.tp_cms.edt_brdt" propid="value" datasetid="ds_accnt_list" columnid="brth_mon_day"/>
      <BindItem id="item10" compid="tab_resn.tp_cms.edt_bankCd" propid="value" datasetid="ds_accnt_list" columnid="bank_cd"/>
      <BindItem id="item11" compid="tab_resn.tp_cms.edt_bankNm" propid="value" datasetid="ds_accnt_list" columnid="bank_nm"/>
      <BindItem id="item12" compid="tab_resn.tp_cms.edt_bankaccntNo" propid="value" datasetid="ds_accnt_list" columnid="bank_accnt_no"/>
      <BindItem id="item13" compid="tab_resn.tp_cms.edt_depr" propid="value" datasetid="ds_accnt_list" columnid="depr"/>
      <BindItem id="item14" compid="tab_resn.tp_cms.rdo_tranDt" propid="value" datasetid="ds_accnt_list" columnid="ichae_dt"/>
      <BindItem id="item15" compid="tab_resn.tp_cms.cbo_RltnCd" propid="value" datasetid="ds_accnt_list" columnid="reltn"/>
      <BindItem id="item16" compid="tab_resn.tp_card.edt_accnt_no" propid="value" datasetid="ds_accnt_list" columnid="accnt_no"/>
      <BindItem id="item17" compid="tab_resn.tp_card.edt_birth" propid="value" datasetid="ds_accnt_list" columnid="card_birth"/>
      <BindItem id="item18" compid="tab_resn.tp_card.edt_cardGubun" propid="value" datasetid="ds_accnt_list" columnid="card_gubun"/>
      <BindItem id="item19" compid="tab_resn.tp_card.edt_bid" propid="value" datasetid="ds_accnt_list" columnid="bid"/>
      <BindItem id="item20" compid="tab_resn.tp_cms.edt_accnt_no" propid="value" datasetid="ds_accnt_list" columnid="accnt_no"/>
      <BindItem id="item21" compid="tab_resn.tp_cms.cal_rgsnDt" propid="value" datasetid="ds_accnt_list" columnid="reg_dm"/>
      <BindItem id="item22" compid="tab_resn.tp_cms.cbo_file_gb" propid="value" datasetid="ds_accnt_list" columnid="agree_mthd"/>
      <BindItem id="item23" compid="tab_resn.tp_card.edt_pg_info" propid="value" datasetid="ds_accnt_list" columnid="pg_info"/>
      <BindItem id="item24" compid="tab_resn.tp_card.cbo_inicard" propid="value" datasetid="ds_accnt_list" columnid="card_cd"/>
      <BindItem id="item25" compid="tab_resn.tp_cms.edt_birth" propid="value" datasetid="ds_accnt_list" columnid="cms_birth"/>
      <BindItem id="item26" compid="tab_resn.tp_cms.edt_bankIni" propid="value" datasetid="ds_accnt_list" columnid="bank_ini"/>
    </Bind>
    <Objects>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_card_cd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accntInqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accnt_info_hs" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="mem_no" type="STRING" size="100"/>
          <Column id="mem_nm" type="STRING" size="100"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="card_join_dt" type="STRING" size="256"/>
          <Column id="cnsl_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="reltn" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="birth" type="STRING" size="256"/>
          <Column id="card_nm" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="accnt_no2" type="STRING" size="256"/>
          <Column id="wdrw_stat" type="STRING" size="256"/>
          <Column id="card_yn" type="STRING" size="256"/>
          <Column id="yyyy" type="STRING" size="256"/>
          <Column id="mm" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="section_thr" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="boon_napply" type="STRING" size="256"/>
          <Column id="ini_bid" type="STRING" size="256"/>
          <Column id="dbl_accnt_no" type="STRING" size="256"/>
          <Column id="double_stat" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmsAplcDtl_list" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="100"/>
          <Column id="app_cl_nm" type="STRING" size="100"/>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="bank_cd" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="app_dt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rltn_typ" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ext" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ext_wav" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="cd">mp3</Col>
            <Col id="cd_nm">mp3</Col>
          </Row>
          <Row>
            <Col id="cd">wav</Col>
            <Col id="cd_nm">wav</Col>
          </Row>
          <Row>
            <Col id="cd">wma</Col>
            <Col id="cd_nm">wma</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_ext_img" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="cd">jpg</Col>
            <Col id="cd_nm">jpg</Col>
          </Row>
          <Row>
            <Col id="cd">jpeg</Col>
            <Col id="cd_nm">jpeg</Col>
          </Row>
          <Row>
            <Col id="cd">gif</Col>
            <Col id="cd_nm">gif</Col>
          </Row>
          <Row>
            <Col id="cd">tif</Col>
            <Col id="cd_nm">tif</Col>
          </Row>
          <Row>
            <Col id="cd">pdf</Col>
            <Col id="cd_nm">pdf</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_accnt_cms_old" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="mem_no" type="STRING" size="100"/>
          <Column id="mem_nm" type="STRING" size="100"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="card_join_dt" type="STRING" size="256"/>
          <Column id="cnsl_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="reltn" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="birth" type="STRING" size="256"/>
          <Column id="card_nm" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="accnt_no2" type="STRING" size="256"/>
          <Column id="wdrw_stat" type="STRING" size="256"/>
          <Column id="card_yn" type="STRING" size="256"/>
          <Column id="yyyy" type="STRING" size="256"/>
          <Column id="mm" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="section_thr" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="dbl_accnt_no" type="STRING" size="256"/>
          <Column id="double_stat" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accnt_list" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="pay_mthd" type="STRING" size="256"/>
          <Column id="bank_cd" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="pay_dt" type="STRING" size="256"/>
          <Column id="join_dt" type="STRING" size="256"/>
          <Column id="cnsl_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="depr" type="STRING" size="256"/>
          <Column id="reltn" type="STRING" size="256"/>
          <Column id="depr_cell" type="STRING" size="256"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="expire_date" type="STRING" size="256"/>
          <Column id="ini_yn" type="STRING" size="256"/>
          <Column id="card_gubun" type="STRING" size="256"/>
          <Column id="card_birth" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="wdrw_stat" type="STRING" size="256"/>
          <Column id="card_reg_man" type="STRING" size="256"/>
          <Column id="reg_dm" type="DATE" size="256"/>
          <Column id="card_reg_dm" type="DATE" size="256"/>
          <Column id="yy" type="STRING" size="256"/>
          <Column id="mm" type="STRING" size="256"/>
          <Column id="pg_info" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="card_use" type="STRING" size="256"/>
          <Column id="cms_use" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="cms_birth" type="STRING" size="256"/>
          <Column id="agree_mthd" type="STRING" size="256"/>
          <Column id="bank_ini" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inicard_cd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accnt_list_old" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="pay_mthd" type="STRING" size="256"/>
          <Column id="bank_cd" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="pay_dt" type="STRING" size="256"/>
          <Column id="join_dt" type="STRING" size="256"/>
          <Column id="cnsl_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="depr" type="STRING" size="256"/>
          <Column id="reltn" type="STRING" size="256"/>
          <Column id="depr_cell" type="STRING" size="256"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="expire_date" type="STRING" size="256"/>
          <Column id="ini_yn" type="STRING" size="256"/>
          <Column id="card_gubun" type="STRING" size="256"/>
          <Column id="card_birth" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="wdrw_stat" type="STRING" size="256"/>
          <Column id="card_reg_man" type="STRING" size="256"/>
          <Column id="reg_dm" type="DATE" size="256"/>
          <Column id="card_reg_dm" type="DATE" size="256"/>
          <Column id="yy" type="STRING" size="256"/>
          <Column id="mm" type="STRING" size="256"/>
          <Column id="pg_info" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="card_use" type="STRING" size="256"/>
          <Column id="cms_use" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="cms_birth" type="STRING" size="256"/>
          <Column id="agree_mthd" type="STRING" size="256"/>
          <Column id="bank_ini" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bankInqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="grp_cd" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bank" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="6"/>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="cd_expi" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_resl_cd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_history" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="app_cl_nm" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="expire_date" type="STRING" size="256"/>
          <Column id="idn_no" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="reg_dm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/********************************************************************************************/
/* 1. Include Library include, variables Declaration 영역                                  */
/********************************************************************************************/
include "LIB::lib_All.xjs";

var gv_rslMsg = "";

var gv_accnt_no = "";	//글로벌 회원번호 
var gv_new_yn = "N";	//신규결제정보 등록 여부
var gv_card_yn = ""; //CARD등록여부(DEL_FG ='N')
var gv_cms_yn = "";	//CMS등록여부(DEL_FG ='N')
var gv_req_yn = "";	//회원 청구 여부(N : 산출, R : 청구)
var gv_dbl_stat = "1";	//CMS다구좌상태(1 : 각각구좌, 2 : 각각구좌에서 통합구좌, 3 : 통합구좌에서 통합구좌)
var gv_pay_mthd = "";
var gv_benefit_yn = "1";

/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트) 처리                                           	*/
/********************************************************************************************/
function DL50000104P21_onload(obj:Form, e:LoadEventInfo)
{	
	///////////////////////////////////////////////////////////////////////////////////////////
	// 프로그램 로그 추가 2018.01.05 정승철
	gvMenuId = GV_LOGMENUID;
	///////////////////////////////////////////////////////////////////////////////////////////	
	
	gv_accnt_no = p_accnt_no;

	gfn_initForm(obj);
	//gfn_getList("dlwCd","07,52,84,0120","fn_callBack",false);   // 대명코드조회 (07:관계, 0120:카드사)	
	gfn_getList("dlwCd","07,52,84,0120,0196","fn_callBack",false);   // 대명코드조회 (07:관계, 0120:카드사)	
	gfn_createPagingDataset(obj); // 페이징처리 위한 데이터셋 설정;	
}

    
/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
function fn_callBack(svcid, errcd, errmsg)
{
	var return_bool = false;
	
	if (errcd != 0) {
		trace(errcd)
		return false;
	} else {
		switch (svcid) {
			case "selectDlwCode":	
				gfn_getCode("0120", "ALL", ds_card_cd, gds_DmlCd); // 나이스카드승인코드
				gfn_getCode("0196", "ALL", ds_inicard_cd, gds_DmlCd); // 이니시스카드스인코드				
				gfn_getCode("07", "ALL", ds_rltn_typ, gds_DmlCd); // 코드조회결과 필터
					
				//회원검색
				fn_commSearch(gfn_getCommTypeInit(), "selectCustaccntList");
				
				//컴퍼넌트 초기화
				fn_setComponent("INIT");
		
			break;
			
			case "selectCustaccntList" :
				gv_pay_mthd = ds_accnt_list.getColumn(0,"pay_mthd");	//선택된 납입방법
				gv_card_yn = ds_accnt_list.getColumn(0,"card_use");		//카드등록여부
				gv_cms_yn = ds_accnt_list.getColumn(0,"cms_use");		//CMS등록여부
				gv_req_yn = ds_accnt_list.getColumn(0,"wdrw_stat");		//청구여부
				gv_benefit_yn = ds_accnt_list.getColumn(0,"section_thr"); //SDP청구할인 여부					
				
				ds_accnt_list_old.assign(ds_accnt_list); //이전데이터 데이터셋저장
				
				// 결과데이터 납입방법에 따른 컴퍼넌트 수정
				switch(gv_pay_mthd){
					case "06" :
						fn_setComponent("CARD_READ");	
					break;
					
					case "04" :
						fn_setComponent("CMS_READ");	
					break;
					
					default :
					break;				
				}
								
			break;
									
			case "updateCard" :
				alert("정상적으로 변경 되었습니다.");
				fn_commSearch(gfn_getCommTypeInit(), "selectCustaccntList");
			break;
			
			case "deleteCard" :
				alert("정상적으로 삭제 되었습니다.");
				//회원검색
				fn_commSearch(gfn_getCommTypeInit(), "selectCustaccntList");
			break;	

			case "insertCard" :
				alert(gv_rslMsg);
				if (gv_rslMsg.substr(0,4) == "[OK]"){
					if(gv_cms_yn == "Y"){
						return_bool = confirm("등록된 CMS정보가 있습니다 삭제하시겠습니까?");
						fn_commSave("deleteCms");
					}	
				
					//회원검색
					fn_commSearch(gfn_getCommTypeInit(), "selectCustaccntList");
				}								
			break;	
			
			case "updateCms" :
				alert("정상적으로 변경 되었습니다.");
				fn_commSearch(gfn_getCommTypeInit(), "selectCustaccntList");
			break;
			
			case "deleteCms" :
				alert("정상적으로 삭제 되었습니다.");
				fn_commSearch(gfn_getCommTypeInit(), "selectCustaccntList");
			break;	
			
			case "insertCms" :
				alert(gv_rslMsg);
				if (gv_rslMsg.substr(0,4) == "[OK]"){
					trace("card_yn : " + gv_card_yn);
					if(gv_card_yn == "Y"){
						return_bool = confirm("등록된 카드정보가 있습니다 삭제하시겠습니까?");
						fn_commSave("deleteCard");
					}				
					fn_commSearch(gfn_getCommTypeInit(), "selectCustaccntList");
				}
			break;
			
			case "selectBankList":							
				if (ds_bank.rowcount > 1) {
					btn_Bank_onclick()
				} else if (ds_bank.rowcount == 1) {
					tab_resn.tp_cms.edt_bankCd.value = ds_bank.getColumn(0, "cd");
					tab_resn.tp_cms.edt_bankIni.value = ds_bank.getColumn(0, "cd_expi");
					tab_resn.tp_cms.edt_bankNm.value = ds_bank.getColumn(0, "cd_nm");					
				} else {
					tab_resn.tp_cms.edt_bankCd.value = "";
					tab_resn.tp_cms.edt_bankNm.value = "";
				}
			break;	
		}
	}
}

/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/

function fn_preSearch(sType) {			
	ds_accntInqCndt.clearData();
	ds_accntInqCndt.addRow();
	ds_accntInqCndt.setColumn(0, "accnt_no", gv_accnt_no);	
}

function fn_preSaveCard(svcid) {
	var return_bool = false;
	var relTn = "20";			// 관계 : 본인, 대리납
	
	switch(svcid) {
		case "updateCard":			
			//변경된 필드가 있는지 확인
			if(!fn_changedColumnCard()){
				alert("변경된 정보가 없습니다.");
				return false;
			}
							
			if (gv_req_yn == "N"){
				return_bool = confirm("산출(청구)중인 회원입니다.[수정 시 해당 월 추가 산출 될수 있음]");
			} else {
				return_bool = confirm("변경 하시겠습니까?[수정 시 해당 월 추가 산출 될수 있음]");
			}			
		break;
		
		case "deleteCard":							
			if (gv_req_yn == "Y"){
				return_bool = confirm("산출(청구)중인 회원이지만 해당 회원의 카드를 삭제 하시겠습니까?");				
			} else {
				return_bool = confirm("해당 회원의 카드를 해지 하시겠습니까?");
			}			
		break;		
		
		case "insertCard":	

			// 생년월일 체크 	
			var sBrthMonDay = tab_resn.tp_card.edt_birth.value;
			if (!gfn_isNull(sBrthMonDay)) {
				var len = String(sBrthMonDay).length;
				if (len != 6) {
					alert("올바른 생년월일을 입력하세요");
					edt_brdt.setFocus();
					return false;
				} 
			} else {
				alert("올바른 생년월일을 입력하세요");
				tab_resn.tp_card.edt_birth.setFocus();
				return false;
			}					
			
			// 카드사 체크 	
			/*
			if(tab_resn.tp_card.cbo_card.index == 0){
				alert("카드사를 선택 하세요");
				tab_resn.tp_card.cbo_card.setFocus();
				return false;
			}
			*/
			
			// 카드번호 체크 			
			var sCardAccnt = tab_resn.tp_card.edt_card_no.value; 
			if (gfn_isNull(sCardAccnt)) {
				alert("올바른 카드번호를 입력하세요");
				tab_resn.tp_card.edt_card_no.setFocus();
				return false;
			}
						
			// 카드 만기 월 체크 	
			var sChkMM = "Y";
			var smm = tab_resn.tp_card.edt_card_mon.value;
			if (!gfn_isNull(smm)) {
				var len = String(smm).length;
				if (len < 2) {
					sChkMM = "N"
				} else {
					if(smm > 12){
						sChkMM = "N"
					}
				}
			} else {
				sChkMM = "N"
			}
			
			if (sChkMM == "N"){
				alert("올바른 카드 만기월을 입력하세요");
				tab_resn.tp_card.edt_card_mon.setFocus();
				return false;
			}
			
			// 카드 만기 년도 체크 	
			var sChkyyyy = "Y";
			var sYYYY = tab_resn.tp_card.edt_card_year.value;
			if (!gfn_isNull(sYYYY)) {
				var Ylen = String(sYYYY).length;
				if (Ylen < 2) {
					sChkyyyy = "N"
				} else {
					if(sYYYY < 19){
						sChkyyyy = "N"
					}
				}
			} else {
				sChkyyyy = "N"
			}
			
			if (sChkyyyy == "N"){
				alert("올바른 카드 만기연도을 입력하세요");
				tab_resn.tp_card.edt_card_year.setFocus();
				return false;
			}						
			
			//20221207 결제정보 등록 시 기본 결제일이 10일로 세팅이 되어 있는데 이것을 선택 하지 않은것으로 변경 요청
			if (gfn_isNull(tab_resn.tp_card.rdo_tranDt.value)) {
				alert("결제일을 선택해주세요");
				tab_resn.tp_card.rdo_tranDt.setFocus();
				return false;
			}	
			
			// 대리납 체크	(생년월일이 틀리거나 예금주명이 틀리면 관계값이 본인이 될수 없음			
			var brth_mon_day = ds_accnt_list.getColumn(0,"brth_mon_day");	
			
			if (sBrthMonDay !=  brth_mon_day){
				relTn = "00";
			}
			
			ds_accnt_list.setColumn(0,"reltn",relTn); // 관계값 강제 입력
						
			if(relTn == "20"){
				return_bool = confirm("해당 회원의 카드를 신청 하시겠습니까?");
			} else {
				return_bool = confirm("해당 회원[대리납]의 카드를 신청 하시겠습니까?");
			}			
		break;			
	}
	return return_bool;
}

function fn_preSaveCms(svcid) {
	var return_bool = false;
	
	switch(svcid) {
		case "updateCms":			
			//변경된 필드가 있는지 확인
			if(!fn_changedColumnCms()){
				alert("변경된 정보가 없습니다.");
				return false;
			}
							
			if (gv_req_yn == "N"){
				return_bool = confirm("산출(청구)중인 회원입니다.[수정 시 해당 월 추가 산출 될수 있음]");
			} else {
				return_bool = true;
			}
		break;
		
		case "deleteCms":						
			if (gv_req_yn == "N"){
				return_bool = confirm("산출(청구)중인 회원이지만 해당 회원의 CMS를 삭제 하시겠습니까?");				
			} else {
				return_bool = confirm("해당 회원의 CMS를 해지 하시겠습니까?");
			}					
		break;		
		
		case "insertCms":	
			// 생년월일 체크 	
			var sBrthMonDay = tab_resn.tp_cms.edt_birth.value;
			if (!gfn_isNull(sBrthMonDay)) {
				var len = String(sBrthMonDay).length;
				if (len < 6 || len > 10) {
					alert("올바른 생년월일을 입력하세요");
					tab_resn.tp_cms.edt_brdt.setFocus();
					return false;
				} 
			} else {
				alert("올바른 생년월일을 입력하세요");
				tab_resn.tp_cms.edt_brdt.setFocus();
				return false;
			}
			// 관계 값 체크 			
			if (tab_resn.tp_cms.cbo_RltnCd.index == 0) {				
				alert("올바른 관계 값을 입력하세요");
				tab_resn.tp_cms.cbo_RltnCd.setFocus();
				return false;				
			}							
			// 은행코드 체크 			
			var sBankCd = tab_resn.tp_cms.edt_bankCd.value; 
			var len = String(sBankCd).length;
			if (len != 3) {
				alert("올바른 은행코드를 입력하세요");
				tab_resn.tp_cms.edt_bankCd.setFocus();
				return false;
			} 
			// 계좌번호 체크 			
			var sBankAccnt = tab_resn.tp_cms.edt_bankaccntNo.value; 
			if (gfn_isNull(sBankAccnt)) {
				alert("올바른 계좌번호를 입력하세요");
				tab_resn.tp_cms.edt_bankaccntNo.setFocus();
				return false;
			}								
			// 예금주 체크 			
			var sDepr = tab_resn.tp_cms.edt_depr.value; 
			if (gfn_isNull(sDepr)) {
				alert("올바른 예금주를 입력하세요");
				tab_resn.tp_cms.edt_depr.setFocus();
				return false;
			}
				
			//20221207 결제정보 등록 시 기본 결제일이 10일로 세팅이 되어 있는데 이것을 선택 하지 않은것으로 변경 요청
			if (gfn_isNull(tab_resn.tp_cms.rdo_tranDt.value)) {
				alert("결제일을 선택해주세요");
				tab_resn.tp_cms.rdo_tranDt.setFocus();
				return false;
			}
			
			// 대리납 체크	(생년월일이 틀리거나 예금주명이 틀리면 관계값이 본인이 될수 없음
			
			var brth_mon_day = ds_accnt_list.getColumn(0,"brth_mon_day");			
			
			if (sBrthMonDay !=  brth_mon_day || tab_resn.tp_cms.edt_mem_nm.value != sDepr){
				if(tab_resn.tp_cms.cbo_RltnCd.index == 1){
					alert("대리납의 경우 관계 값이 본인이 될 수 없습니다.[변경요망]");
					tab_resn.tp_cms.cbo_RltnCd.setFocus();
					return false;
				}
			}												
			
            //웹모듈 연동
            /*
			if(tab_resn.tp_cms.ckb_webModule.value == "N") {
				var resl = fn_rltmWebModuleRequest();
				if (!resl) return false;				
			}
			*/
						
			if(tab_resn.tp_cms.cbo_RltnCd.index == 1){
				return_bool = confirm("해당 회원의 CMS를 신청 하시겠습니까?");
			} else {
				return_bool = confirm("해당 회원[대리납]의 CMS를 신청 하시겠습니까?");
			}
		break;			
	}
			
	return return_bool;
}

/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
//조회
function fn_commSearch(sType, svcId) {
	var szSvcid       = "";
    var szController  = "";
    var szInDs        = "";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "";

	switch(svcId) {	
		//회원번호 기준으로 결제정보 가져오기 				
		case "selectCustaccntList":
			fn_preSearch(svcId);						
			
			szSvcid       = "selectCustaccntList";
			szController  = "/dlw/memPayMthd/getMemPayMthdList";
			szInDs        = "ds_input=ds_accntInqCndt";
			szOutDs       = "ds_accnt_list=ds_output ds_history=ds_output2";
			szParam       = "";
			szRetCallback = "fn_callBack";
		break;		
	}
	
    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

function fn_commSave(saveInfo) {

    var szSvcid = ""
    var szController = ""
    var szInDs = ""
    var szOutDs = ""
    var szParam = ""
    var szRetCallback = ""

    switch(saveInfo) {
		
		// 카드 변경
        case "updateCard":         						
			if(!fn_preSaveCard(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/updateCard";
			szInDs        = "ds_input=ds_accnt_list ds_input_old=ds_accnt_list_old";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";  
        break;   
                  
		// 등록 결제 정보삭제 (CARD - CMS공용)
        case "deleteCard": 
            if(!fn_preSaveCard(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/deleteAccnt";
			szInDs        = "ds_input=ds_accnt_list";
			szOutDs       = "";
			szParam       = "pay_mthd=CARD";
			szRetCallback = "fn_callBack";  
        break;   
                         
		// 이니시스 카드 등록
        case "insertCard_INI": 
            if(!fn_preSaveCard("insertCard")) return false;
			szSvcid       = "insertCard";
			szController  = "/dlw/memPayMthd/saveCard_INI";
			szInDs        = "ds_input=ds_accnt_list";
			szOutDs       = "";			
			szParam       = "";
			szRetCallback = "fn_callBack";  
        break;
        
        // 나이스 카드 등록 (SDP)
        case "insertCard": 
            if(!fn_preSaveCard(saveInfo)) return false;
			szSvcid       = "insertCard";
			szController  = "/dlw/memPayMthd/saveCard";
			szInDs        = "ds_input=ds_accnt_list";
			szOutDs       = "";			
			szParam       = "";
			szRetCallback = "fn_callBack";  
        break;
        
        // CMS정보 업데이트 
        case "updateCms":         						
			if(!fn_preSaveCms(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/updateCms";
			szInDs        = "ds_input=ds_accnt_list ds_input_old=ds_accnt_list_old";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";  
        break;   
                  
		// CMS정보 삭제
        case "deleteCms": 
            if(!fn_preSaveCms(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/deleteAccnt";
			szInDs        = "ds_input=ds_accnt_list";
			szOutDs       = "";
			szParam       = "pay_mthd=CMS";
			szRetCallback = "fn_callBack";  
        break;   
                         
		// CMS정보 등록
        case "insertCms": 
            if(!fn_preSaveCms(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/saveCms";
			szInDs        = "ds_input=ds_accnt_list";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";  
        break;
        
        // CMS로그 등록
        case "insertCmsLog": 
//            if(!fn_preSave(saveInfo)) return false;
			szSvcid       = saveInfo;
			szController  = "/dlw/memPayMthd/saveCmsHistoryLogs";
			szInDs        = "ds_input=ds_cms_log";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";  
        break;
    }

	// 트랜젝션 공통함수 호출
	gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,"","","I",gvMenuId);
}



/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/


//데이터 업데이트시 ASIS데이터와 TOBE데이터 비교 후 변경된 데이터를 넘김
function fn_changedColumnCard(){	
	var arrText = "";
	var asisData = "";
	var tobeData = "";
	var returnVal = false;
	for(var i=0; i<ds_accnt_list.colcount; i++){
		asisData = ds_accnt_list.getOrgColumn(0,i);	
		tobeData = ds_accnt_list.getColumn(0,i);		
		if(asisData == undefined) asisData = "";
		if(tobeData == undefined) tobeData = "";	
				
		if(asisData != tobeData){				
			trace("asisData : " + asisData);
			trace("tobeData : " + tobeData);
			returnVal = true;
		}		
	}	
			
	trace("returnVal : " + returnVal);
	return returnVal;
}

//데이터 업데이트시 ASIS데이터와 TOBE데이터 비교 후 변경된 데이터를 넘김
function fn_changedColumnCms(){	
	var arrText = "";
	var asisData = "";
	var tobeData = "";
	var returnVal = false;
	for(var i=0; i<ds_accnt_list.colcount; i++){
		asisData = ds_accnt_list.getOrgColumn(0,i);	
		tobeData = ds_accnt_list.getColumn(0,i);		
		if(asisData == undefined) asisData = "";
		if(tobeData == undefined) tobeData = "";	
			
		if(asisData != tobeData){				
			returnVal = true;
		} 		
	}			
	return returnVal;
}
/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
// 닫기
function btn_close_onclick(obj:Button,  e:ClickEventInfo)
{
	close();
}

// 버튼 클릭
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	if (obj.name == "btn_chkCard") {		// 카드보유 확인		
		var objExtCommon = new ExtCommon();
		 //var procName = "iexplore.exe";
        var procName = "msedge.exe";
		var url = "https://www.samsungcard.com/hpsub/hpsub/UHPPSU0701P0.jsp";
		
		rtn = objExtCommon.execWebBrowser(procName,url);
		//system.execBrowser(procName, url);
		 if(!rtn){
               trace("설치가 올바르지 않습니다.");
		}
	}
}

function fn_setComponent(sType){
	trace("#########컴퍼넌트(" + sType +") 세팅############");
	switch(sType) {			
		case "INIT":																		
		break;
		
		case "CARD_READ":
		   tab_resn.tabindex = 0;		
           var iniYn = ds_accnt_list.getColumn(0,"pg_info");
           			
			//카드등록한회원여부
			if(gv_card_yn == 'N'){
				btn_Input.visible = true;
				btn_delete.visible = false;
				btn_save.enable = false;								
				tab_resn.tp_card.rdo_tranDt.enable = false;
												
			}else{
				btn_Input.visible = false;
				btn_delete.visible = true;
				btn_save.enable = true;				
				tab_resn.tp_card.rdo_tranDt.enable = true;
				gv_new_yn = 'N';	//기등록 
			}
           
			tab_resn.tp_card.edt_card_no.enable = false;
			tab_resn.tp_card.edt_card_year.enable = false;
			tab_resn.tp_card.edt_card_mon.enable = false;				
			tab_resn.tp_card.edt_birth.enable = false;
			tab_resn.tp_card.cal_rgsnDt.enable = false;
           
           //이니시스 나이스카드의 카드코드값이 다르기 때문에 콤보변경
           if (iniYn == "이니시스"){
				tab_resn.tp_card.cbo_inicard.visible = true;
				tab_resn.tp_card.cbo_card.visible = false;
				tab_resn.tp_card.ckb_cardbenefit.visible = false;
				tab_resn.tp_card.ckb_cardbenefit.value = "1";	
           } else {
				tab_resn.tp_card.cbo_inicard.visible = false;
				tab_resn.tp_card.cbo_card.visible = true;
				tab_resn.tp_card.ckb_cardbenefit.visible = true;
				tab_resn.tp_card.ckb_cardbenefit.value = "100";	
           }
		break;
		
		case "CARD_INPUT":
			btn_Input.visible = false;
			btn_delete.visible = false;
			btn_save.enable = true;
			tab_resn.tp_card.cbo_card.value = false;
			
			tab_resn.tp_card.edt_card_no.enable = true;
			tab_resn.tp_card.edt_card_year.enable = true;
			tab_resn.tp_card.edt_card_mon.enable = true;
			tab_resn.tp_card.rdo_tranDt.enable = true;
			tab_resn.tp_card.edt_birth.enable = true;
			tab_resn.tp_card.cal_rgsnDt.enable = true;
			tab_resn.tp_card.cbo_inicard.value = true;
			
			//gv_card_yn = "NEW";
			gv_new_yn = "Y";  //신규등록
			
			//20221207 결제정보 등록 시 기본 결제일이 10일로 세팅이 되어 있는데 이것을 선택 하지 않은것으로 변경 요청
			//tab_resn.tp_card.rdo_tranDt.value = "10";
			
			//SDP회원의경우 청구할인 필수 체크해줌
			if(gv_benefit_yn=="0010"){				
				tab_resn.tp_card.ckb_cardbenefit.visible = true;
				tab_resn.tp_card.ckb_cardbenefit.value = "100";				
			} else {
				tab_resn.tp_card.ckb_cardbenefit.visible = false;
				tab_resn.tp_card.ckb_cardbenefit.value = "1";
			}			
		break;
		
		case "CMS_READ":
			tab_resn.tabindex = 1;
			
			//CMS등록한회원여부
			if(gv_cms_yn == 'N'){
				btn_Input.visible = true;
				btn_delete.visible = false;
				btn_save.enable = false;								
				tab_resn.tp_cms.rdo_tranDt.enable = false;
												
			}else{
				btn_Input.visible = false;
				btn_delete.visible = true;
				btn_save.enable = true;				
				tab_resn.tp_cms.rdo_tranDt.enable = true;
				gv_new_yn = 'N';	//기등록 
			}
           
			tab_resn.tp_cms.edt_bankCd.enable = false;
			tab_resn.tp_cms.edt_bankNm.enable = false;
			tab_resn.tp_cms.btn_srcBank.enable = false;
			tab_resn.tp_cms.edt_bankaccntNo.enable = false;				
			tab_resn.tp_cms.edt_depr.enable = false;
			tab_resn.tp_cms.cbo_RltnCd.enable = false;
			tab_resn.tp_cms.cal_rgsnDt.enable = false;				
			tab_resn.tp_cms.edt_birth.enable = false;
			tab_resn.tp_cms.cbo_file_gb.enable = false;
											           
											           
		break;
		
		case "CMS_INPUT":
			btn_Input.visible = false;
			btn_delete.visible = false;
			btn_save.enable = true;
			
			tab_resn.tp_cms.cbo_RltnCd.value = "20";
			tab_resn.tp_cms.cbo_file_gb.value = "4";
			
			tab_resn.tp_cms.edt_bankCd.enable = true;
			tab_resn.tp_cms.edt_bankNm.enable = true;
			tab_resn.tp_cms.btn_srcBank.enable = true;
			tab_resn.tp_cms.edt_bankaccntNo.enable = true;				
			tab_resn.tp_cms.edt_depr.enable = true;
			tab_resn.tp_cms.cbo_RltnCd.enable = true;
			tab_resn.tp_cms.rdo_tranDt.enable = true;
			tab_resn.tp_cms.cal_rgsnDt.enable = true;	
			tab_resn.tp_cms.edt_birth.enable = true;
			tab_resn.tp_cms.cbo_file_gb.enable = true;
						
			//gv_card_yn = "NEW";
			gv_new_yn = "Y";  //신규등록
			
			//20221207 결제정보 등록 시 기본 결제일이 10일로 세팅이 되어 있는데 이것을 선택 하지 않은것으로 변경 요청
			//tab_resn.tp_cms.rdo_tranDt.value = "10";								
		break;	
			
			
		/*
		case "SEARCH_CARD":
			//이전 데이터 저장
			ds_accnt_card_old.assign(ds_accnt_card);
			btn_delete.visible = true;
			
			//카드사에 따른 나이스 빌키 사용 체크
			ckb_niceBillkey.enable = false;
			var cardCd = ds_accnt_card.getColumn(0,"card_cd");						

			if(!gfn_isNull(ds_accnt_card.getColumn(0, "bid"))) {
				tab_resn.tp_card.edt_bid.value = ds_accnt_card.getColumn(0, "bid");
			}
			if(!gfn_isNull(ds_accnt_card.getColumn(0, "ini_bid"))) {
				tab_resn.tp_card.edt_bid.value = ds_accnt_card.getColumn(0, "ini_bid");
			}
		break;	
			
		case "ADD_CARD":
			tab_resn.tp_card.cal_rgsnDt.value = gfn_getToday();
			tab_resn.tp_cms.cal_rgsnDt.value = gfn_getToday();																																			
		break;	
		
		case "SEARCH_CMS":
			//이전 데이터 저장
			ds_accnt_cms_old.assign(ds_accnt_cms);
			btn_delete.visible = true;			
		break;	
			
		case "ADD_CMS":
			tab_resn.tp_cms.cal_rgsnDt.value = gfn_getToday();
																					
		break;	
		*/		
	}
	

}
//SAVE BUTTON
function btn_save_onclick(obj:Button,  e:ClickEventInfo)
{	
	
	if(tab_resn.tabindex == 0) {
		var sCardBenefit = tab_resn.tp_card.ckb_cardbenefit.value;	
			
		trace(sCardBenefit);
		
		//카드 정보는 변경이 없고 이체일자만 변경됨
		if (gv_new_yn == "Y"){		
			//삼성디지털 프라자 카드 혜택의 경우 나이스 only
			if(sCardBenefit == "100"){
				fn_commSave("insertCard");			
			} else {
				fn_commSave("insertCard_INI");							
			}			
		} else {			
			fn_commSave("updateCard");
		}
	} else if(tab_resn.tabindex == 1) {
		//카드 정보는 변경이 없고 이체일자만 변경됨
		if (gv_new_yn == "Y"){
			fn_commSave("insertCms");			
		} else {
			fn_commSave("updateCms");
		}
	}
}

//INPUT BUTTON
function btn_Input_onclick(obj:Button,  e:ClickEventInfo)
{
	if(tab_resn.tabindex == 0) {
		fn_setComponent("CARD_INPUT");
	} else {
		fn_setComponent("CMS_INPUT");
	}	
}

function btn_delete_onclick(obj:Button,  e:ClickEventInfo)
{
	if(tab_resn.tabindex == 0) {
		fn_commSave("deleteCard");
	} else if(tab_resn.tabindex == 1) {
		fn_commSave("deleteCms");
	}
}

function tab_01_cms_cbo_file_gb_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_ext.clearData();
	if (obj.value == "1") {
		ds_ext.assign(ds_ext_img);
		tab_resn.tp_cms.cbo_ext.index = "0";
	} else {
		ds_ext.assign(ds_ext_wav);
		tab_resn.tp_cms.cbo_ext.index = "1";
	}
}

function tab_resn_onchanged(obj:Tab, e:TabIndexChangeEventInfo)
{
	if(obj.tabindex == "0"){
		fn_setComponent("CARD_READ");
	}
		
	if(obj.tabindex == "1"){
		fn_setComponent("CMS_READ");
	}	
}

function tab_resn_tp_cms_edt_bankCd_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 13) {
		ds_bankInqCndt.clearData();
		ds_bankInqCndt.addRow();
		ds_bankInqCndt.setColumn(0, "cd", tab_resn.tp_cms.edt_bankCd.value);
		ds_bankInqCndt.setColumn(0, "grp_cd", "63");
		ds_bankInqCndt.setColumn(0, "orderBy", "cd");
		ds_bankInqCndt.setColumn(0, "orderDirection", "asc");
		
		var szSvcid       = "selectBankList";
		var szController  = "/dlw/newTypePop/div4/cd-list";
		var szInDs        = "ds_input=ds_bankInqCndt";
		var szOutDs       = "ds_bank=ds_output";
		var szParam       = "svcid=selectBankList";
		var szRetCallback = "fn_callBack";

		// 트랜젝션 공통함수 호출
		gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
	}
}

function btn_Bank_onclick(obj:Button,  e:ClickEventInfo)
{
	var sPrmr = {p_bank_nm:tab_resn.tp_cms.edt_bankNm.value};
	var reVal = gfn_diaLog("은행 조회", -1, -1, 884, 601, "PS990000::PS99250001.xfdl", false, sPrmr, false, false, true);
	
	if( reVal != null ){
		if(reVal.getColumn(0, "cd") != ""){
		    tab_resn.tp_cms.edt_bankCd.value = reVal.getColumn(0, "cd");
		    tab_resn.tp_cms.edt_bankIni.value = reVal.getColumn(0, "cd_expi");
		    tab_resn.tp_cms.edt_bankNm.value = reVal.getColumn(0, "cd_nm");
		}
	}
}

/********************************************************************************************/
/**   7-1. CMS 웹모듈 관련 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
//웹모듈 결과 요청

/*
function fn_rltmWebModuleRequest()
{
	//결과조회에 사용할 변수 초기화
	aplc_div = "";
	tmpr_resl = "";
   
    var tmpr_resl = ""; //임시결과
    
    var aplc_div = "";  //신규, 해지 구분
    var idn_no = "";    //개인식별번호
    var accnt_no = "";   //회원번호(구좌)
    var bank_cd = tab_resn.tp_cms.edt_bankCd.value;    //은행코드
    var bank_accnt_no = tab_resn.tp_cms.edt_bankaccntNo.value; //은행계좌번호
        bank_accnt_no = bank_accnt_no.replace("-","");
                
    if(gv_cms_yn == "Y"){
        aplc_div = "4";
    } else {
        aplc_div = "3";
    }
    
    accnt_no = gv_accnt_no;
    idn_no = tab_resn.tp_cms.edt_brdt.value;
        
    var file_gb = "2";
    var file_ext = "wav";
         
    //웹모듈 부가서비스요청
	tmpr_resl = gfn_AdditionalServiceReq(aplc_div,bank_cd,bank_accnt_no,accnt_no,idn_no, file_gb, file_ext);
		
	//결과조회에 사용할 변수 저장
	tmp_aplc_div = aplc_div;
	tmp_tmpr_resl = tmpr_resl;
	
    //결과 조회
    var resl_bool = fn_rltmWebModuleResult();
    
    return resl_bool;
}

//웹모듈 결과 조회
function fn_rltmWebModuleResult()
{
    var FlReslCd = gfn_AdditionalServiceRes(tmp_aplc_div,tmp_tmpr_resl);
    var RlReslCd = FlReslCd.substring(0,4);
	//  sleep(2000);
	ds_cms_log.clearData();
            
    if(RlReslCd != "0000") {    
        ds_resl_cd.filter("(cd=='"+ RlReslCd +"')");
		var errMsg = ds_resl_cd.getColumn(0,"cd_nm");
		if (gfn_isNull(errMsg)) {
			alert("부가서비스 등록 실패");
		} else {
			alert(ds_resl_cd.getColumn(0,"cd_nm"));
		}
		if (ds_resl_cd.getColumn(0,"cd_nm") != "정상완료") {
			ds_cms_log.addRow();
			ds_cms_log.setColumn(0, "accnt_no", gv_accnt_no);
			ds_cms_log.setColumn(0, "cd", RlReslCd);
			ds_cms_log.setColumn(0, "cd_nm", gfn_Nvl(errMsg, "부가서비스 등록 실패"));
			
			fn_commSave("insertCmsLog");
			
			return false;
		} else {
			return true;
		}
		ds_resl_cd.filter("");
    } else {
		return true;
    }
}
*/

// 카드번호 16자리를 입력하면 유효기간 년으로 이동
function tab_resn_tp_card_edt_card_no_onchar(obj:Edit,  e:CharEventInfo)
{
	if(String(e.posttext).length > 15){
		tab_resn.tp_card.edt_card_year.setFocus();
	}
}

// 유효기간 년 2자리를 입력하면 유효기간 월로 이동
function tab_resn_tp_card_edt_card_year_onchar(obj:Edit,  e:CharEventInfo)
{
	if(String(e.posttext).length == 2){
		tab_resn.tp_card.edt_card_mon.setFocus();
	}
}
]]></Script>
  </Form>
</FDL>

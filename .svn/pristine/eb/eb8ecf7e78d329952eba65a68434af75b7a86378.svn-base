<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="PS220200" classname="캠페인관리" inheritanceid="" position="absolute 0 0 989 795" titletext="설문지관리" onload="PS220200_onload">
    <Layouts>
      <Layout>
        <Static id="stc_28" class="sta_workData" position2="absolute r:0 w:393 t:656px h:26" positiontype="position2"/>
        <Static id="stc_17" class="sta_workData" position2="absolute r:0 w:393 t:631px h:26" positiontype="position2"/>
        <Static id="stc_16" class="sta_workData" position2="absolute r:0 w:393 t:348px h:26" positiontype="position2"/>
        <Static id="stc_10" class="sta_workData" position2="absolute r:0 w:393 t:373px h:77" positiontype="position2"/>
        <Static id="stc_06" class="sta_workData" position2="absolute r:0 w:393 t:323px h:26" positiontype="position2"/>
        <Static id="stc_00" class="sta_workData" position2="absolute r:0 w:393 t:111px h:26" positiontype="position2"/>
        <Static id="stc_14" class="sta_workData" position2="absolute r:0 w:393 t:136px h:26" positiontype="position2"/>
        <Static id="stc_21" class="sta_workData" position2="absolute r:0 w:393 t:86px h:26" positiontype="position2"/>
        <Static id="stc_04" class="sta_workSrcBg" position2="absolute l:0 r:0 t:7 h:42" positiontype="position2">
          <Layouts>
            <Layout width="989" height="42"/>
          </Layouts>
        </Static>
        <Button id="btn_deleteSuryQsitChc" taborder="2" onclick="btn_onclick" class="btn_WF_Del" tooltiptext="삭제" style="padding:0 0 0 0;" position2="absolute r:0 w:72 t:608 h:20" positiontype="position2"/>
        <Button id="btn_modifySuryQsitChc" taborder="3" onclick="btn_onclick" class="btn_WF_Modif" tooltiptext="수정" style="padding:0 0 0 0;" position2="absolute r:74 w:72 t:608 h:20" positiontype="position2"/>
        <Button id="btn_newSuryQsitChc" taborder="4" onclick="btn_onclick" class="btn_WF_New" tooltiptext="신규" style="padding:0 0 0 0;" position2="absolute r:148 w:72 t:608 h:20" positiontype="position2"/>
        <Combo id="cbo_suryQsitTypCd" taborder="6" innerdataset="@ds_suryQsitTypCd" codecolumn="cd" datacolumn="cd_nm" position2="absolute r:214 w:177 t:325px h:22" positiontype="position2" class="cbo_edit" onitemchanged="cbo_onitemchanged"/>
        <Combo id="cbo_dataTypCd" taborder="7" innerdataset="@ds_dataTypCd" codecolumn="cd" datacolumn="cd_nm" position2="absolute r:214 w:177 t:350px h:22" positiontype="position2" class="cbo_edit"/>
        <Button id="btn_preViewSurs" taborder="9" text="미리보기" onclick="btn_onclick" class="btn_WF_Common" style="padding:0 0 0 0;" position2="absolute r:223 w:72 t:62px h:20" positiontype="position2"/>
        <Button id="btn_newSurs" taborder="10" onclick="btn_onclick" class="btn_WF_New" style="padding:0 0 0 0;" position2="absolute r:297 w:72 t:62px h:20" positiontype="position2"/>
        <Edit id="edt_suryQsitChcNm" taborder="11" position2="absolute r:3 w:387 t:659px h:20" positiontype="position2" class="edt_edit" lengthunit="utf8" maxlength="100" readonly="true"/>
        <Static id="sta_GrayLine01" onclick="div_Work00_sta_GrayLine_onclick" class="sta_WF_Line1" position2="absolute r:2 w:486 t:630px h:1" positiontype="position2"/>
        <Static id="stc_27" text="보기값" class="sta_workLabel1_P" tooltiptext="보기값" validate="" position2="absolute r:392 w:96 t:631px h:26" positiontype="position2"/>
        <Static id="stc_26" text="보기명" class="sta_workLabel1_P" tooltiptext="보기명" validate="" position2="absolute r:392 w:96 t:656px h:26" positiontype="position2"/>
        <Edit id="edt_suryQsitChcVl" taborder="12" position2="absolute r:3 w:387 t:634px h:20" positiontype="position2" class="edt_edit" lengthunit="utf8" maxlength="5" inputtype="number" readonly="true"/>
        <Static id="stc_18" text="설문항목보기 상세정보" class="sta_workTitle2" position2="absolute r:319 w:169 t:610 h:20" positiontype="position2"/>
        <Static id="sta_GrayLine00" onclick="div_Work00_sta_GrayLine_onclick" class="sta_WF_Line1" position2="absolute r:1 w:487 t:322 h:1" positiontype="position2"/>
        <Static id="stc_15" text="설문항목유형" class="sta_workLabel1_P" validate="" position2="absolute r:392 w:96 t:323px h:26" positiontype="position2"/>
        <Static id="stc_12" text="데이터유형" class="sta_workLabel1_P" validate="" position2="absolute r:392 w:96 t:348px h:26" positiontype="position2"/>
        <Button id="btn_deleteSuryQsit" taborder="13" onclick="btn_onclick" class="btn_WF_Del" style="padding:0 0 0 0;" position2="absolute r:0 w:72 t:299 h:20" positiontype="position2"/>
        <Button id="btn_modifySuryQsit" taborder="14" onclick="btn_onclick" class="btn_WF_Modif" style="padding:0 0 0 0;" position2="absolute r:74 w:72 t:299 h:20" positiontype="position2"/>
        <Button id="btn_newSuryQsit" taborder="15" onclick="btn_onclick" class="btn_WF_New" style="padding:0 0 0 0;" position2="absolute r:148 w:72 t:299 h:20" positiontype="position2"/>
        <Static id="stc_08" text="설문항목명" class="sta_workLabel1_P" style="align:left top;" validate="" position2="absolute r:392 w:96 t:373px h:78" positiontype="position2"/>
        <Static id="stc_07" text="설문항목 상세정보" class="sta_workTitle2" position2="absolute r:297 w:191 t:302px h:20" positiontype="position2"/>
        <Static id="stc_02" text="설문항목보기" class="sta_workTitle2" position2="absolute l:0 w:297 t:607px h:28" positiontype="position2"/>
        <Grid id="grd_suryQsitChcList" taborder="16" useinputpanel="false" position2="absolute l:0 r:497 t:630px b:7" positiontype="position2" binddataset="ds_suryQsitChcList" class="grd_list" autofitminwidth="150" autofittype="col">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="160"/>
                <Column size="290"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="NO"/>
                <Cell col="1" text="보기값"/>
                <Cell col="2" text="보기명"/>
              </Band>
              <Band id="body">
                <Cell expr="currow+1"/>
                <Cell col="1" text="bind:sury_qsit_chc_vl"/>
                <Cell col="2" style="align:left;" text="bind:sury_qsit_chc_nm" tooltiptype="mouse" tooltiptext="bind:sury_qsit_chc_nm"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="stc_01" text="설문항목" class="sta_workTitle2" position2="absolute l:0 w:297 t:300 h:24" positiontype="position2"/>
        <Grid id="grd_suryQsitList" taborder="17" useinputpanel="false" position2="absolute l:0 r:497 t:322px h:266" positiontype="position2" class="grd_list" binddataset="ds_suryQsitList" ondrag="grd_suryQsitList_ondrag" ondrop="grd_suryQsitList_ondrop" cellmovingtype="none" autofitminwidth="150" autofittype="col">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="160"/>
                <Column size="108"/>
                <Column size="181"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="NO"/>
                <Cell col="1" text="설문항목유형"/>
                <Cell col="2" text="데이터유형"/>
                <Cell col="3" text="설문항목명"/>
              </Band>
              <Band id="body">
                <Cell expr="currow+1"/>
                <Cell col="1" text="bind:sury_qsit_typ_nm"/>
                <Cell col="2" text="bind:data_typ_nm"/>
                <Cell col="3" style="align:left;" text="bind:sury_qsit_cntn" expr="gfn_deleteRow(sury_qsit_cntn)" tooltiptype="mouse" tooltiptext="bind:sury_qsit_cntn"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="sta_GrayLine" onclick="div_Work00_sta_GrayLine_onclick" class="sta_WF_Line1" position2="absolute r:0 w:489 t:85 h:1" positiontype="position2"/>
        <Static id="stc_20" text="설문지명" class="sta_workLabel1_P" validate="" position2="absolute r:392 w:96 t:86px h:26" positiontype="position2"/>
        <Static id="stc_09" text="할당여부" class="sta_workLabel1" validate="" position2="absolute r:392 w:96 t:111px h:26" positiontype="position2"/>
        <Edit id="edt_sursNmEdit" taborder="18" position2="absolute r:3 w:387 t:89px h:20" positiontype="position2" class="edt_edit" readonly="true" lengthunit="utf8" maxlength="100"/>
        <Button id="btn_copySurs" taborder="19" text="복사" onclick="btn_onclick" class="btn_WF_Common" style="padding:0 0 0 0;" position2="absolute r:1 w:72 t:62px h:20" positiontype="position2"/>
        <Button id="btn_deleteSurs" taborder="20" onclick="btn_onclick" class="btn_WF_Del" style="padding:0 0 0 0;" position2="absolute r:75 w:72 t:62px h:20" positiontype="position2"/>
        <Button id="btn_modifySurs" taborder="21" onclick="btn_onclick" class="btn_WF_Modif" style="padding:0 0 0 0;" position2="absolute r:149 w:72 t:62px h:20" positiontype="position2"/>
        <Grid id="grd_surList" taborder="22" useinputpanel="false" position2="absolute l:0 r:497 t:85px h:203" positiontype="position2" binddataset="ds_sursList" class="grd_list" onvscrolllastover="grd_onvscrolllastover" onheadclick="grd_onheadclick" autofitminwidth="150" autofittype="col">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="160"/>
                <Column size="108"/>
                <Column size="75"/>
                <Column size="107"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="NO"/>
                <Cell col="1" text="설문지명" id="surs_nm"/>
                <Cell col="2" text="할당여부" id="alct_yn"/>
                <Cell col="3" text="수정자" id="amnd_nm"/>
                <Cell col="4" text="수정일시" id="amnd_nm"/>
              </Band>
              <Band id="body">
                <Cell expr="currow+1"/>
                <Cell col="1" style="align:left;" text="bind:surs_nm" tooltiptype="mouse" tooltiptext="bind:surs_nm"/>
                <Cell col="2" style="color:EXPR(alct_yn ==&quot;Y&quot; ? &quot;#FF6075&quot;:&quot;#6087FF&quot;);color2:EXPR(alct_yn ==&quot;Y&quot; ? &quot;#FF6075&quot;:&quot;#6087FF&quot;);selectcolor:EXPR(alct_yn ==&quot;Y&quot; ? &quot;#FF6075&quot;:&quot;#6087FF&quot;);" text="bind:alct_yn" expr="alct_yn ==&quot;Y&quot; ? &quot;할당&quot;:&quot;미할당&quot;"/>
                <Cell col="3" text="bind:amnd_nm"/>
                <Cell col="4" displaytype="date" text="bind:amnt_dttm" mask="yyyy-MM-dd HH:mm"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="stc_13" text="수정자" class="sta_workLabel1" validate="" position2="absolute r:392 w:96 t:136px h:26" positiontype="position2"/>
        <Button id="btn_Init" taborder="23" onclick="btn_onclick" class="btn_WF_Return" tooltiptext="초기화" style="padding:0 0 0 0;" position2="absolute r:20 w:72 t:18px h:20" positiontype="position2"/>
        <Button id="btn_Search" taborder="24" onclick="btn_onclick" class="btn_WF_Search" tooltiptext="조회" style="padding:0 0 0 0;" position2="absolute r:94 w:72 t:18px h:20" positiontype="position2"/>
        <Edit id="edt_sursNm" taborder="25" autoselect="true" autoskip="true" onkeydown="common_onkeydown" position="absolute 83 18 194 38"/>
        <Combo id="cbo_alctYn" taborder="26" codecolumn="codecolumn" datacolumn="datacolumn" position="absolute 279 18 398 38" class="cbo_srch" index="0" text="전체">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">전체</Col>
              </Row>
              <Row>
                <Col id="codecolumn">Y</Col>
                <Col id="datacolumn">할당</Col>
              </Row>
              <Row>
                <Col id="codecolumn">N</Col>
                <Col id="datacolumn">미할당</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="stc05" text="설문지명" class="sta_workSrcLabel1" position="absolute 20 18 77 38"/>
        <Static id="stc_05" text="할당여부" class="sta_workSrcLabel1" position="absolute 214 18 292 38"/>
        <Static id="stc_25" text="설문지 상세정보" class="sta_workTitle2" position2="absolute r:373 w:115 t:65px h:20" positiontype="position2"/>
        <Static id="stc_22" text="수정일시" class="sta_workLabel1" validate="" position2="absolute r:145 w:96 t:136px h:26" positiontype="position2"/>
        <Static id="sta_TotalCnt" text="검색결과   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt; / 전체   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt;" usedecorate="true" class="sta_workTitle5" position="absolute 2 67 218 87"/>
        <Edit id="edt_amndNm" taborder="27" readonly="true" class="edt_edit" position2="absolute r:242 w:149 t:139 h:20" positiontype="position2"/>
        <Edit id="edt_amntDttm" taborder="28" readonly="true" class="edt_edit" position2="absolute r:2 w:142 t:139 h:20" positiontype="position2" oneditclick="edt_amntDttm_oneditclick"/>
        <Combo id="cbo_alctYnEdit" taborder="29" text="전체" codecolumn="codecolumn" datacolumn="datacolumn" index="0" class="cbo_srch" readonly="true" position2="absolute r:271 w:119 t:114px h:20" positiontype="position2">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">전체</Col>
              </Row>
              <Row>
                <Col id="codecolumn">Y</Col>
                <Col id="datacolumn">할당</Col>
              </Row>
              <Row>
                <Col id="codecolumn">N</Col>
                <Col id="datacolumn">미할당</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Button id="btn_saveSurs" taborder="30" onclick="btn_onclick" class="btn_WF_Save" position2="absolute r:-118 w:72 t:64 h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Button id="btn_returnSurs" taborder="31" text="취소" onclick="btn_onclick" class="btn_Cancel" position2="absolute r:-192 w:72 t:64 h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <TextArea id="txt_suryQsitCntn" taborder="32" class="txt_edit" lengthunit="utf8" maxlength="2000" position2="absolute r:2 w:389 t:375px h:73" positiontype="position2" wordwrap="both"/>
        <Button id="btn_saveSuryQsit" taborder="33" onclick="btn_onclick" class="btn_WF_Save" position2="absolute r:-118 w:72 t:299 h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Button id="btn_returnSuryQsit" taborder="34" text="취소" onclick="btn_onclick" class="btn_Cancel" position2="absolute r:-192 w:72 t:299 h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Button id="btn_saveSuryQsitChc" taborder="35" onclick="btn_onclick" class="btn_WF_Save" position2="absolute r:-118 w:72 t:606 h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Button id="btn_returnSuryQsitChc" taborder="36" text="취소" onclick="btn_onclick" class="btn_Cancel" position2="absolute r:-192 w:72 t:606 h:20" positiontype="position2" style="padding:0 0 0 0;"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item3" compid="edt_amndNm" propid="value" datasetid="ds_sursView" columnid="amnd_nm"/>
      <BindItem id="item5" compid="edt_amntDttm" propid="value" datasetid="ds_sursView" columnid="amnt_dttm"/>
      <BindItem id="item0" compid="edt_sursNmEdit" propid="value" datasetid="ds_sursView" columnid="surs_nm"/>
      <BindItem id="item1" compid="cbo_alctYnEdit" propid="value" datasetid="ds_sursView" columnid="alct_yn"/>
      <BindItem id="item2" compid="cbo_suryQsitTypCd" propid="value" datasetid="ds_suryQsitView" columnid="sury_qsit_typ_cd"/>
      <BindItem id="item4" compid="cbo_dataTypCd" propid="value" datasetid="ds_suryQsitView" columnid="data_typ_cd"/>
      <BindItem id="item6" compid="txt_suryQsitCntn" propid="value" datasetid="ds_suryQsitView" columnid="sury_qsit_cntn"/>
      <BindItem id="item7" compid="edt_suryQsitChcVl" propid="value" datasetid="ds_suryQsitChcView" columnid="sury_qsit_chc_vl"/>
      <BindItem id="item8" compid="edt_suryQsitChcNm" propid="value" datasetid="ds_suryQsitChcView" columnid="sury_qsit_chc_nm"/>
    </Bind>
    <Objects>
      <Dataset id="ds_dataTypCd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sursList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_onrowposchanged">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="surs_id" type="STRING" size="256"/>
          <Column id="surs_nm" type="STRING" size="256"/>
          <Column id="surs_expi" type="STRING" size="256"/>
          <Column id="alct_yn" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_tmp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="ancm_mtr_id" type="STRING" size="24"/>
          <Column id="ancm_mtr_titl" type="STRING" size="100"/>
          <Column id="ancm_typ_nm" type="STRING" size="100"/>
          <Column id="ancm_end_dt" type="STRING" size="8"/>
          <Column id="ancm_chpr_nm" type="STRING" size="100"/>
          <Column id="use_yn" type="STRING" size="1"/>
          <Column id="inq_cnt" type="INT" size="5"/>
          <Column id="amnd_nm" type="STRING" size="100"/>
          <Column id="amnt_dttm" type="STRING" size="14"/>
          <Column id="file_flag" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndtSurs" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="surs_nm" type="STRING" size="256"/>
          <Column id="alct_yn" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_suryQsitTypCd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sursView" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="surs_id" type="STRING" size="256"/>
          <Column id="surs_nm" type="STRING" size="256"/>
          <Column id="surs_expi" type="STRING" size="256"/>
          <Column id="alct_yn" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sursList_tmp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="surs_id" type="STRING" size="256"/>
          <Column id="surs_nm" type="STRING" size="256"/>
          <Column id="surs_expi" type="STRING" size="256"/>
          <Column id="alct_yn" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndtSuryQsit" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="surs_id" type="STRING" size="256"/>
          <Column id="alct_yn" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_suryQsitList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_onrowposchanged">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="surs_id" type="STRING" size="256"/>
          <Column id="sury_qsit_id" type="STRING" size="256"/>
          <Column id="sury_qsit_cntn" type="STRING" size="256"/>
          <Column id="sury_qsit_typ_cd" type="STRING" size="256"/>
          <Column id="sury_qsit_typ_nm" type="STRING" size="256"/>
          <Column id="data_typ_cd" type="STRING" size="256"/>
          <Column id="data_typ_nm" type="STRING" size="256"/>
          <Column id="alct_yn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_suryQsitView" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_onrowposchanged">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="surs_id" type="STRING" size="256"/>
          <Column id="sury_qsit_id" type="STRING" size="256"/>
          <Column id="sury_qsit_cntn" type="STRING" size="256"/>
          <Column id="sury_qsit_typ_cd" type="STRING" size="256"/>
          <Column id="sury_qsit_typ_nm" type="STRING" size="256"/>
          <Column id="data_typ_cd" type="STRING" size="256"/>
          <Column id="data_typ_nm" type="STRING" size="256"/>
          <Column id="alct_yn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndtSuryQsitChc" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="surs_id" type="STRING" size="256"/>
          <Column id="sury_qsit_id" type="STRING" size="256"/>
          <Column id="data_typ_cd" type="STRING" size="256"/>
          <Column id="sury_qsit_typ_cd" type="STRING" size="256"/>
          <Column id="alct_yn" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_suryQsitChcList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_onrowposchanged">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="sury_qsit_chc_id" type="STRING" size="256"/>
          <Column id="sury_qsit_id" type="STRING" size="256"/>
          <Column id="surs_id" type="STRING" size="256"/>
          <Column id="sury_qsit_chc_nm" type="STRING" size="256"/>
          <Column id="sury_qsit_chc_vl" type="STRING" size="256"/>
          <Column id="sury_qsit_chc_sqnc" type="STRING" size="256"/>
          <Column id="alct_yn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_suryQsitChcView" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_onrowposchanged">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="sury_qsit_chc_id" type="STRING" size="256"/>
          <Column id="sury_qsit_id" type="STRING" size="256"/>
          <Column id="surs_id" type="STRING" size="256"/>
          <Column id="sury_qsit_chc_nm" type="STRING" size="256"/>
          <Column id="sury_qsit_chc_vl" type="STRING" size="256"/>
          <Column id="sury_qsit_chc_sqnc" type="STRING" size="256"/>
          <Column id="alct_yn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/***************************************************************************
 * Program ID    : PS220200.xfdl
 * Program Name  : 설문지 관리
 * Author        : 정 훈
 * Created On    : 2016.02.23
 * 개    요 	 :
 *
 * =========================================================================
 * 변경일자     수정자       내    용
 * =========================================================================
 * 2016.02.23    정   훈      최초작성
 
 **************************************************************************/


/********************************************************************************************/
/* 1. Include Library include                                                               */
/********************************************************************************************/
include "LIB::lib_All.xjs";


/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트,전역변수,초기화) 처리                         	*/
/********************************************************************************************/
var total_count= 0;
var nCnt = 0;
var nCnt2 = 0;
var nCnt3 = 0;
//온로드
function PS220200_onload(obj:Form, e:LoadEventInfo)
{
	gfn_getList("cd","CAM010,CAM020","fn_callBack",null,"srchCdSet");   // 코드셋
	gfn_createPagingDataset(obj); // 페이징처리 위한 데이터셋 설정
	fn_commSearch(gfn_getCommTypeInit()); // 조회
}


//웹에디터 온로드
//function OnDEXT5_Editor_Loaded(){
//	dex_Cntn.DEXT5SetMethod("setFullScreen", "");	
//	//dex_Cntn.DEXT5SetMethod("setBodyValue", "1234");
//}


//초기화
function fn_init()
{
	edt_sursNm.value = null;
	cbo_alctYn.index = 0;
}


/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
function fn_callBack(svcid, errcd, errmsg) {
    if (errcd != 0) {
		trace(errcd);
		return false;
	} else {
		switch (svcid) {
		    case "srchCdSet": 
		    
			gfn_getCode("CAM010", "SELECT", ds_suryQsitTypCd); // 설문항목유형
			gfn_getCode("CAM020", "SELECT", ds_dataTypCd); //데이터유형
			//cbo_scrtClsfCd.index=0;
			break;
	
			case "srchSurs" : //조회콜백
			gfn_appendSearchDs(ds_sursList, ds_sursList_tmp); // 조회된 결과를 실제보여줄 데이타셋으로 Append처리
			gfn_setTotalRowCount(ds_sursList, sta_TotalCnt, total_count); // 페이지건수 표출
			fn_postSearch("surs");
			break;
			
			case "copySurs" :
			fn_commSearch(gfn_getCommTypeInit()); // 조회
			break;
			
			case "saveSurs": // 저장콜백
			fn_commSearch(gfn_getCommTypeInit()); // 조회
			break;
			
			case "deleteSurs": //삭제콜백
			if(nCnt !=0){ //콜백 숫자 0이 아닐경우 해당 설문지로 캠페인 진행건수 있음 삭제 불가.
				alert("사용중인 설문지는 삭제할 수 없습니다.");
				return false;
			}else{
				fn_commSearch(gfn_getCommTypeInit()); // 조회
			}
			break;
			
			case "srchSuryQsit": //문제 조회콜백
			fn_postSearch("suryQsit");
			break;
			
			case "saveSuryQsit" ://문제 저장콜백
			fn_srchSuryQsit(gfn_getCommTypeInit()); //문제조회
			break;
			
			case "deleteSuryQsit" : //문제 삭제 콜백
			if(nCnt2 !=0){ //콜백 숫자 0이 아닐경우 해당 설문지로 캠페인 진행건수 있음 삭제 불가.
				alert("사용중인 설문지는 삭제할 수 없습니다.");
				return false;
			}else{
				fn_srchSuryQsit(gfn_getCommTypeInit()); //문제조회
			}
			break;
			
			case "srchSuryQsitChc" : //보기조회
			fn_postSearch("suryQsitChc"); 
			break;
			
			case "saveSuryQsitChc": //보기저장
			fn_srchSuryQsitChc(gfn_getCommTypeInit()); //보기조회
			break;
			
			case "deleteSuryQsitChc": //보기삭제
			if(nCnt3 !=0){ //콜백 숫자 0이 아닐경우 해당 설문지로 캠페인 진행건수 있음 삭제 불가.
				alert("사용중인 설문지는 삭제할 수 없습니다.");
				return false;
			}else{
				fn_srchSuryQsitChc(gfn_getCommTypeInit()); //보기조회
			}
			break;
		}
	}
}
/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/
//조회전 처리 조회조건셋팅
function fn_preSearch(sType)
{
	if (sType == gfn_getCommTypeInit())
	{
		// 조회조건 및 default 정렬
		ds_sursList.keystring = ""; // 정렬컬럼 초기화
		
		ds_inqCndtSurs.clearData();
		ds_inqCndtSurs.addRow();
		ds_inqCndtSurs.setColumn(0, "surs_nm", edt_sursNm.value);
		ds_inqCndtSurs.setColumn(0, "alct_yn", cbo_alctYn.value);
		ds_inqCndtSurs.setColumn(0, "orderBy", "amnt_dttm");
		ds_inqCndtSurs.setColumn(0, "orderDirection", "desc");
	}
	
	return true;
}

function fn_preSrchSuryQsit(sType)
{
	if (sType == gfn_getCommTypeInit())
	{
		// 조회조건 및 default 정렬
		ds_suryQsitList.keystring = ""; // 정렬컬럼 초기화
		
		ds_inqCndtSuryQsit.clearData();
		ds_inqCndtSuryQsit.addRow();
		ds_inqCndtSuryQsit.setColumn(0, "surs_id", ds_sursView.getColumn(ds_sursView.rowposition,"surs_id"));
		ds_inqCndtSuryQsit.setColumn(0, "alct_yn", ds_sursView.getColumn(ds_sursView.rowposition,"alct_yn"));
	}
	
	return true;
}

function fn_preSrchSuryQsitChc(sType)
{
	if (sType == gfn_getCommTypeInit())
	{
		// 조회조건 및 default 정렬
		
		ds_suryQsitChcList.keystring = ""; // 정렬컬럼 초기화
		
		ds_inqCndtSuryQsitChc.clearData();
		ds_inqCndtSuryQsitChc.addRow();
		ds_inqCndtSuryQsitChc.setColumn(0, "surs_id", ds_suryQsitView.getColumn(ds_suryQsitView.rowposition,"surs_id"));
		ds_inqCndtSuryQsitChc.setColumn(0, "sury_qsit_id", ds_suryQsitView.getColumn(ds_suryQsitView.rowposition,"sury_qsit_id"));
		ds_inqCndtSuryQsitChc.setColumn(0, "data_typ_cd", ds_suryQsitView.getColumn(ds_suryQsitView.rowposition,"data_typ_cd"));
		ds_inqCndtSuryQsitChc.setColumn(0, "sury_qsit_typ_cd", ds_suryQsitView.getColumn(ds_suryQsitView.rowposition,"sury_qsit_typ_cd"));
		ds_inqCndtSuryQsitChc.setColumn(0, "alct_yn", ds_suryQsitView.getColumn(ds_suryQsitView.rowposition,"alct_yn"));
	}
	
	return true;
}



//저장전 처리
function fn_preSaveData(Type){
	//Type =  surs: 설문지 suryQsit: 문제 suryQsitChc:문항
	switch(Type){
		case "surs" :
		if(gfn_isNull(edt_sursNmEdit.value)){
			alert("설문지 명을 입력하세요.");
			return false;
		}
		
		if(edt_sursNmEdit.value.length < 2){
			alert("설문지명을 2자 이상 입력하세요");
			return false;
		}
		break;
		
		
		case "suryQsit":
		if(gfn_isNull(cbo_suryQsitTypCd.value)){
			alert("설문항목 유형을 입력하세요.");
			return false;
		}
		
		if(gfn_isNull(cbo_dataTypCd.value)){
			alert("데이터유형을 입력하세요.");
			return false;
		}
		
		if(gfn_isNull(txt_suryQsitCntn.value)){
			alert("설문항목명을 입력하세요.");
			return false;
		}
		break;
		
		case "suryQsitChc" :
		if(gfn_isNull(edt_suryQsitChcVl.value)){
			alert("보기값을 입력하세요.");
			return false;
		}
		
		if(gfn_isNull(edt_suryQsitChcNm.value)){
			alert("보기명을 입력하세요.");
			return false;
		}
		break;
	}
	return true;
}

/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
//조회
function fn_commSearch(sType)
{	
    if (!fn_preSearch(sType)) return false;
	
	// 호출 건수 설정 및 조회여부 설정
	if(!gfn_pageSearch(sType, ds_sursList, sta_TotalCnt, 10, total_count)) return; 
	
	var szSvcid       = "srchSurs";
    var szController  = "/campaign/surs/list";
    var szInDs        = "ds_input=ds_inqCndtSurs";
    var szOutDs       = "ds_sursList_tmp=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//저장
function fn_sursSaveData(){
	if(!fn_preSaveData("surs")) return false;
	trace(ds_sursView.getColumn(ds_sursView.rowposition,"alct_yn"));
	var szSvcid       = "saveSurs";
    var szController  = "/campaign/surs/save";
    var szInDs        = "ds_input=ds_sursView::U";
    var szOutDs       = "ds_sursView=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//삭제
function fn_sursDeleteData()
{
	var szSvcid       = "deleteSurs";
    var szController  = "/campaign/surs/delete";
    var szInDs        = "ds_input=ds_sursView";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

//설문지 카피
function fn_copyData(){
	var szSvcid       = "copySurs";
    var szController  = "/campaign/surs/copy";
    var szInDs        = "ds_input=ds_sursView";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}


//문제조회
function fn_srchSuryQsit(sType)
{	
    if (!fn_preSrchSuryQsit(sType)) return false;
	// 호출 건수 설정 및 조회여부 설정
	//if(!gfn_pageSearch(sType, ds_sursList, sta_TotalCnt, 10, total_count)) return; 
	
	var szSvcid       = "srchSuryQsit";
    var szController  = "/campaign/sury-qsit/list";
    var szInDs        = "ds_input=ds_inqCndtSuryQsit";
    var szOutDs       = "ds_suryQsitList=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//문제저장
function fn_suryQsitSaveData(){
	if(!fn_preSaveData("suryQsit")) return false;
	
	var szSvcid       = "saveSuryQsit";
    var szController  = "/campaign/sury-qsit/save";
    var szInDs        = "ds_input=ds_suryQsitView";
    var szOutDs       = "ds_suryQsitView=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//문제삭제
function fn_suryQsitDeleteData()
{
	var szSvcid       = "deleteSuryQsit";
    var szController  = "/campaign/sury-qsit/delete";
    var szInDs        = "ds_input=ds_suryQsitView";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

//보기조회
function fn_srchSuryQsitChc(sType)
{	
    if (!fn_preSrchSuryQsitChc(sType)) return false;
	// 호출 건수 설정 및 조회여부 설정
	//if(!gfn_pageSearch(sType, ds_sursList, sta_TotalCnt, 10, total_count)) return; 
	
	var szSvcid       = "srchSuryQsitChc";
    var szController  = "/campaign/sury-qsit/exam-list";
    var szInDs        = "ds_input=ds_inqCndtSuryQsitChc";
    var szOutDs       = "ds_suryQsitChcList=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//보기저장
function fn_suryQsitChcSaveData(){
	if(!fn_preSaveData("suryQsitChc")) return false;
	
	var szSvcid       = "saveSuryQsitChc";
    var szController  = "/campaign/sury-qsit/exam-save";
    var szInDs        = "ds_input=ds_suryQsitChcView";
    var szOutDs       = "ds_suryQsitChcView=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//보기삭제
function fn_suryQsitChcDeleteData()
{
	var szSvcid       = "deleteSuryQsitChc";
    var szController  = "/campaign/sury-qsit/exam-delete";
    var szInDs        = "ds_input=ds_suryQsitChcView";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/
//조회 결과 
function fn_postSearch(Type)
{	
	//Type =  surs: 설문지 suryQsit: 문제 suryQsitChc:문항
	switch(Type){
		case "surs":
		if(ds_sursList.rowcount < 1) {
			ds_sursView.clearData();
			ds_suryQsitView.clearData();
			ds_suryQsitList.clearData();
			ds_suryQsitChcView.clearData();
			ds_suryQsitChcList.clearData();
			fn_componentStatChange(3,"R");
			fn_componentStatChange(2,"R");
			fn_componentStatChange(1,"R");
			sta_TotalCnt.text = "조회 결과가 없습니다.";
		} else {
			fn_setDsView(ds_sursList,ds_sursView);
			fn_componentStatChange(1,"R");
			fn_srchSuryQsit(gfn_getCommTypeInit()); //문제조회
		}
		break;
		
		case "suryQsit" :
		if(ds_suryQsitList.rowcount < 1) {
			ds_suryQsitView.clearData();
			ds_suryQsitChcView.clearData();
			ds_suryQsitChcList.clearData();
			fn_componentStatChange(3,"R");
			fn_componentStatChange(2,"R");
		} else {
			fn_setDsView(ds_suryQsitList,ds_suryQsitView);
			fn_componentStatChange(2,"R");
			fn_srchSuryQsitChc(gfn_getCommTypeInit()); //보기조회
		}
		break;
		
		case "suryQsitChc" :
		if(ds_suryQsitChcList.rowcount < 1) {
			ds_suryQsitChcView.clearData();
			fn_componentStatChange(3,"R");
		} else {
 			fn_setDsView(ds_suryQsitChcList,ds_suryQsitChcView);
 			fn_componentStatChange(3,"R");
		}
		break;
		
	}
}

//버튼 및 컨포넌트들 제어
function fn_componentStatChange(lv,Mode){
	
	if(lv == 1){
		switch(Mode){
			case "R":	
			if(ds_sursList.rowcount <1){
				btn_newSurs.enable = true; // 신규버튼
				btn_preViewSurs.enable = false; //미리보기버튼
				btn_modifySurs.enable = false ; // 수정버튼
				btn_deleteSurs.enable = false ; //삭제버튼
				btn_copySurs.enable = false; // 복사버튼
				
				cbo_alctYnEdit.visible = false;
 				
 				btn_newSuryQsit.enable =false;
 				btn_newSuryQsitChc.enable =false;
			}else{
				btn_newSurs.enable = true;
				btn_preViewSurs.enable = true;
				btn_modifySurs.enable = true ;
				btn_deleteSurs.enable = true ;
				btn_copySurs.enable = true;
							
				cbo_alctYnEdit.visible = true;
			}
			btn_newSurs.visible = true;
			btn_preViewSurs.visible = true;
			btn_modifySurs.visible = true ;
			btn_deleteSurs.visible = true ;
			btn_copySurs.visible = true;
			btn_returnSurs.visible = false;
			btn_saveSurs.visible= false;
		
			edt_sursNmEdit.readonly = true;
			//cbo_alctYnEdit.readonly = true;
			
			break;
			
			case "C" :
			btn_saveSurs.move(btn_deleteSurs.position.left,btn_deleteSurs.position.top);
			btn_returnSurs.move(btn_copySurs.position.left,btn_copySurs.position.top);
			btn_newSurs.visible = false;
			btn_preViewSurs.visible = false;
			btn_modifySurs.visible = false ;
			btn_deleteSurs.visible = false ;
			btn_copySurs.visible = false;
			
			btn_returnSurs.visible = true;
			btn_saveSurs.visible= true;
			
			edt_sursNmEdit.readonly = false;
					
			btn_newSuryQsit.enable =false;
			btn_newSuryQsitChc.enable = false;
			break;
			
			case "U" :
			btn_saveSurs.move(btn_deleteSurs.position.left,btn_deleteSurs.position.top);
			btn_returnSurs.move(btn_copySurs.position.left,btn_copySurs.position.top);
			btn_newSurs.visible = false;
			btn_preViewSurs.visible = false;
			btn_modifySurs.visible = false ;
			btn_deleteSurs.visible = false ;
			btn_copySurs.visible = false;
			
			btn_returnSurs.visible = true;
			btn_saveSurs.visible= true;
			
			edt_sursNmEdit.readonly = false;
			btn_newSuryQsit.enable =false;
			btn_newSuryQsitChc.enable = false;
			break;
		}	
	}else if(lv == 2){
		switch(Mode){
			case "R":
			if(ds_suryQsitList.rowcount < 1){
				//enable 처리
				btn_newSuryQsit.enable = true;
				btn_modifySuryQsit.enable = false;
				btn_deleteSuryQsit.enable = false;
				
				cbo_suryQsitTypCd.visible = false;
				cbo_dataTypCd.visible = false;
			}else{
				//enable 처리
				btn_newSuryQsit.enable = true;
				btn_modifySuryQsit.enable = true;
				btn_deleteSuryQsit.enable = true;
				
				cbo_suryQsitTypCd.visible = true;
				cbo_dataTypCd.visible = true;
			}
			
			//visible 처리
			btn_newSuryQsit.visible = true;
			btn_modifySuryQsit.visible = true;
			btn_deleteSuryQsit.visible = true;
			btn_returnSuryQsit.visible = false;
			btn_saveSuryQsit.visible = false;
			
			//컨포넌트 처리 readonly 처리
			cbo_suryQsitTypCd.readonly = true;
			cbo_dataTypCd.readonly = true;
			txt_suryQsitCntn.readonly = true;
			break;
			
			case "C":
			btn_saveSuryQsit.move(btn_modifySuryQsit.position.left,btn_modifySuryQsit.position.top);
			btn_returnSuryQsit.move(btn_deleteSuryQsit.position.left,btn_deleteSuryQsit.position.top);
			
			//visible 처리
			btn_newSuryQsit.visible = false;
			btn_modifySuryQsit.visible = false;
			btn_deleteSuryQsit.visible = false;
			btn_returnSuryQsit.visible = true;
			btn_saveSuryQsit.visible = true;
			
			cbo_suryQsitTypCd.readonly = false;
			cbo_dataTypCd.readonly = false;
			txt_suryQsitCntn.readonly = false;
			
			cbo_suryQsitTypCd.visible = true;
			cbo_dataTypCd.visible = true;
			btn_newSuryQsitChc.enable = false;
			
			cbo_suryQsitTypCd.index = 0;
			cbo_dataTypCd.index = 0;
			break;
			
			case "U":
			btn_saveSuryQsit.move(btn_modifySuryQsit.position.left,btn_modifySuryQsit.position.top);
			btn_returnSuryQsit.move(btn_deleteSuryQsit.position.left,btn_deleteSuryQsit.position.top);
			
			//visible 처리
			btn_newSuryQsit.visible = false;
			btn_modifySuryQsit.visible = false;
			btn_deleteSuryQsit.visible = false;
			btn_returnSuryQsit.visible = true;
			btn_saveSuryQsit.visible = true;
			
			if(cbo_suryQsitTypCd.value == "10"){
				cbo_dataTypCd.enable = true;
			}else{
				cbo_dataTypCd.enable = false;
			}	
			
			cbo_suryQsitTypCd.readonly = false;
			cbo_dataTypCd.readonly = false;
			txt_suryQsitCntn.readonly = false;
			
			cbo_suryQsitTypCd.visible = true;
			cbo_dataTypCd.visible = true;
			btn_newSuryQsitChc.enable = false;
			break;
		}
	}else if(lv == 3){
		switch(Mode){
			case "R" :
			//설문항목 보기는 데이터유형이 단일선택,다중선택 일경우에만 신규가 가능 
			if(ds_suryQsitList.getColumn(ds_suryQsitList.rowposition,"data_typ_cd") == "10" || 
											ds_suryQsitList.getColumn(ds_suryQsitList.rowposition,"data_typ_cd") == "30"){
				if(ds_suryQsitChcList.rowcount <1){
					btn_newSuryQsitChc.enable = true;
					btn_modifySuryQsitChc.enable = false;
					btn_deleteSuryQsitChc.enable = false;
				}else{
					btn_newSuryQsitChc.enable = true;
					btn_modifySuryQsitChc.enable = true;
					btn_deleteSuryQsitChc.enable = true;
				}
			}else{
				btn_newSuryQsitChc.enable = false;
				btn_modifySuryQsitChc.enable = false;
				btn_deleteSuryQsitChc.enable = false;
			}
			btn_newSuryQsitChc.visible = true;
			btn_modifySuryQsitChc.visible = true;
			btn_deleteSuryQsitChc.visible = true;
			btn_saveSuryQsitChc.visible = false;
			btn_returnSuryQsitChc.visible = false;
			
			edt_suryQsitChcNm.readonly = true;
			edt_suryQsitChcVl.readonly = true;
			break;
			
			case "C" :
			btn_saveSuryQsitChc.move(btn_modifySuryQsitChc.position.left,btn_modifySuryQsitChc.position.top);
			btn_returnSuryQsitChc.move(btn_deleteSuryQsitChc.position.left,btn_deleteSuryQsitChc.position.top);
			
			btn_newSuryQsitChc.visible = false;
			btn_modifySuryQsitChc.visible = false;
			btn_deleteSuryQsitChc.visible = false;
			btn_saveSuryQsitChc.visible = true;
			btn_returnSuryQsitChc.visible = true;
			
			edt_suryQsitChcNm.readonly = false;
			edt_suryQsitChcVl.readonly = false;
			break;
		}
	}
	
	//할당여부에따른 버튼 제어
	if(ds_sursList.getColumn(ds_sursList.rowposition,"alct_yn") == "Y"){
		btn_modifySurs.enable = false ; // 수정버튼
		//btn_deleteSurs.enable = false ; //삭제버튼
		
		btn_newSuryQsit.enable = false;
		btn_modifySuryQsit.enable = false;
		btn_deleteSuryQsit.enable = false;
		
		btn_newSuryQsitChc.enable =false;
		btn_modifySuryQsitChc.enable = false;
		btn_deleteSuryQsitChc.enable = false;
	}
}



// 데이터셋 1건 복사 후 상세부에 바인딩
function fn_setDsView(parentDs , childDs){
	childDs.clearData();
	childDs.addRow();
	childDs.copyRow(childDs.rowposition, parentDs, parentDs.rowposition);
	
	//등록 수정일시 데이터타입에 맞게
	if(parentDs == ds_sursList){	
		var amntDttmStr = edt_amntDttm.value;
		edt_amntDttm.value = gfn_strDttm(amntDttmStr);
	}
}

//수정,삭제시 할당 vaildation 
function fn_alctYnVaildation(Mode){
	if(ds_sursList.getColumn(ds_sursList.rowposition,"alct_yn") == "Y"){ //할당여부 조회
		if(Mode =="U"){
			alert("할당된 설문지는 수정할 수 없습니다.");
		}else if(Mode =="D"){
			alert("할당된 설문지는 삭제할 수 없습니다.");
		}
		return false;
	}
	return true;
}

/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
//버튼클릭이벤트
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj){
		case btn_Search: //조회버튼
		fn_commSearch(gfn_getCommTypeInit()); // 조회
		break;
		
		case btn_Init : //초기화버튼
		fn_init();
		break;
	
				
		case btn_newSurs://신규버튼
		ds_sursView.clearData();
		ds_sursView.addRow();
		ds_suryQsitList.clearData();
		ds_suryQsitView.clearData();
		fn_componentStatChange(2,"R");
		fn_componentStatChange(1,"C");
		break;
		
		case btn_modifySurs: //수정버튼
		if(!fn_alctYnVaildation("U")) return false;
		
		ds_suryQsitList.clearData();
		ds_suryQsitView.clearData();
		fn_componentStatChange(2,"R");
		fn_componentStatChange(1,"U");
		break;
		
		case btn_deleteSurs://삭제버튼
		//if(!fn_alctYnVaildation("D")) return false;
		if(confirm("해당 설문지를 삭제 하시겠습니까?")) {
			fn_sursDeleteData();//트랜잭션 호출
		}
		break;
		
		case btn_saveSurs: //저장 버튼
		fn_sursSaveData();
		break;
		
		case btn_returnSurs: //취소버튼
		if(ds_sursList.rowcount < 1){
			ds_sursView.clearData();
			fn_componentStatChange(1,"R");
			fn_srchSuryQsit(gfn_getCommTypeInit()); //문제조회
		}else{
			fn_setDsView(ds_sursList,ds_sursView);
			fn_componentStatChange(1,"R");
			fn_srchSuryQsit(gfn_getCommTypeInit()); //문제조회
		}
 
		case btn_copySurs ://복사버튼
		fn_copyData();
		break;
		
		case btn_preViewSurs : //미리보기버튼
		var sPrmr = {surs_nm:ds_sursList.getColumn(ds_sursList.rowposition, "surs_nm"), surs_id:ds_sursList.getColumn(ds_sursList.rowposition, "surs_id")};	
		gfn_openPreViewSursPop(sPrmr,false);
		break;
		
    /********************************설문항목 BTN***********************************/
		case btn_newSuryQsit : //신규버튼클릭
		ds_suryQsitView.clearData();
		ds_suryQsitView.addRow();
		ds_suryQsitView.setColumn(ds_suryQsitView.rowposition, "surs_id" , ds_sursList.getColumn(ds_sursList.rowposition, "surs_id"));
		ds_suryQsitChcList.clearData();
		ds_suryQsitChcView.clearData();
		fn_componentStatChange(3,"R");
		fn_componentStatChange(2,"C");
		break;

		case btn_modifySuryQsit : // 수정버튼
		if(!fn_alctYnVaildation("U")) return false;
		
		fn_componentStatChange(2,"U");
		break;

		case btn_deleteSuryQsit : //삭제버튼
		if(!fn_alctYnVaildation("D")) return false;
		if(confirm("해당 설문지항목 삭제 하시겠습니까?")) {
			fn_suryQsitDeleteData();//트랜잭션 호출
		}
		break;

		case btn_saveSuryQsit : //저장버튼 클릭
		fn_suryQsitSaveData();
		break;

		case btn_returnSuryQsit ://취소버튼클릭 
		fn_setDsView(ds_suryQsitList,ds_suryQsitView);
		fn_componentStatChange(2,"R");
		fn_srchSuryQsitChc(gfn_getCommTypeInit()); 
		break;
		
// 		***********************************설문보기 BTN****************************************
		
		case btn_newSuryQsitChc://신규버튼 클릭시
		ds_suryQsitChcView.clearData();
		ds_suryQsitChcView.addRow();
		ds_suryQsitChcView.setColumn(ds_suryQsitChcView.rowposition, "surs_id" , ds_suryQsitList.getColumn(ds_suryQsitList.rowposition, "surs_id"));
		ds_suryQsitChcView.setColumn(ds_suryQsitChcView.rowposition, "sury_qsit_id" , ds_suryQsitList.getColumn(ds_suryQsitList.rowposition, "sury_qsit_id"));
		
		fn_componentStatChange(3,"C");
		break;
		
		case btn_modifySuryQsitChc : //수정버튼 클릭시
		
		break;
		
		case btn_deleteSuryQsitChc : //삭제버튼
		if(!fn_alctYnVaildation("D")) return false;
		if(confirm("해당 설문지항목보기를 삭제 하시겠습니까?")) {
			fn_suryQsitChcDeleteData();//트랜잭션 호출
		}
		break;
		
		case btn_saveSuryQsitChc: //저장버튼
		fn_suryQsitChcSaveData();
		break;
		
		case btn_returnSuryQsitChc: //취소버튼
		fn_setDsView(ds_suryQsitChcList,ds_suryQsitChcView);
		fn_componentStatChange(3,"R");
		break;
	}
}

//ds 로우포지션 이동시 
function ds_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	switch(obj){
		case ds_sursList:
		fn_setDsView(ds_sursList,ds_sursView);
		fn_componentStatChange(1,"R");	
		fn_srchSuryQsit(gfn_getCommTypeInit());// 해당 설문항목 조회
		break;
	
		case ds_suryQsitList :
		fn_setDsView(ds_suryQsitList,ds_suryQsitView);
		fn_componentStatChange(2,"R");
		fn_srchSuryQsitChc(gfn_getCommTypeInit()); //보기조회
		break;
		
		case ds_suryQsitChcList :
		fn_setDsView(ds_suryQsitChcList,ds_suryQsitChcView);
		fn_componentStatChange(3,"R");
		break;
	}
}


//그리드 오버스크롤
function grd_onvscrolllastover(obj:Grid, e:ScrollEventInfo)
{ 
	if(obj==grd_surList){
		fn_commSearch(gfn_getCommTypeAppend());
	}
}

//정렬
function grd_onheadclick(obj:Grid, e:GridClickEventInfo)
{
	switch(obj){
		case grd_surList:
		//if (!fn_preSearch()) return false;
		ds_inqCndtSurs.setColumn(0, "sController", "/campaign/surs/list");
		ds_inqCndtSurs.setColumn(0, "dsName", "ds_output");
		
		if(!gfn_pageSearch(gfn_getCommTypeOrderBy(), ds_sursList, sta_TotalCnt, 40, total_count)) return;
		
		gfn_grdHeadClick(obj, e, ds_inqCndtSurs,null,ds_sursList_tmp);
		
		gfn_setTotalRowCount(ds_sursList, sta_TotalCnt, total_count); // 페이지건수 표출
		break;
	}
}


//콤보박스변경시
function cbo_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if(obj == cbo_suryQsitTypCd){
		trace("cbo_suryQsitTypCd"+cbo_suryQsitTypCd.value);
		if(cbo_suryQsitTypCd.value == "10"){
		    cbo_dataTypCd.enable = true;
		}else{
			cbo_dataTypCd.value = 20;
			cbo_dataTypCd.enable = false;
		}
	}
}
]]></Script>
  </Form>
</FDL>

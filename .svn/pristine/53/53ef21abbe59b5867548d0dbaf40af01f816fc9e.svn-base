<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="PS993700" classname="PS993700" inheritanceid="" position="absolute 0 0 569 204" titletext="삼성카드 등록" onload="PS993700_onload" scrollbars="none">
    <Layouts>
      <Layout>
        <Static id="stc_popup" class="sta_popupBg1" enable="false" position="absolute 0 0 569 204"/>
        <Button id="btn_close" taborder="0" onclick="btn_close_onclick" class="btn_popupClose" position="absolute 541 8 561 27"/>
        <Static id="stc_30" text="삼성카드 등록" class="sta_popupTitle" transparenthittest="true" position="absolute 10 8 152 28"/>
        <Static id="sta_GrayLine" class="sta_WF_Line1" position="absolute 11 65 557 66"/>
        <Static id="stc_17" class="sta_workData" position="absolute 104 66 558 92"/>
        <Static id="stc_01" onclick="div_Work_tab_02_tabpage1_stc_01_onclick" class="sta_workData" position="absolute 104 91 558 117"/>
        <Static id="stc_04" class="sta_workData" position="absolute 104 116 558 142" enable="false"/>
        <Static id="stc_txt_05" class="sta_workData" position="absolute 104 141 558 167" visible="false"/>
        <Static id="stc_09" text="회원명" class="sta_workLabel1" position="absolute 279 91 373 117" style="font:Dotum,8;" validate=""/>
        <Static id="stc_txt_01" text="카드사" class="sta_workLabel1" position="absolute 11 141 105 167" style="font:Dotum,8;" validate="" visible="false"/>
        <Edit id="edt_mem_nm" taborder="6" inputtype="number" position="absolute 374 94 540 114" maxlength="16" enable="true" readonly="true"/>
        <Static id="stc_txt_02" text="카드번호" class="sta_workLabel1" visible="false" position="absolute 279 141 373 167" style="font:Dotum,8;" validate=""/>
        <Edit id="edt_card_no" taborder="14" maxlength="16" visible="false" position="absolute 374 144 540 164" ontextchanged="fn_ontextchanged" enable="true" inputtype="number"/>
        <Button id="btn_cancel" taborder="15" text="닫기" onclick="btn_close_onclick" position="absolute 485 42 557 62" tooltiptext="닫기" style="border:0 none #000000ff ;padding:0 0 0 0;"/>
        <Button id="btn_save" taborder="18" text="임시카드 등록" position="absolute 392 42 482 62" tooltiptext="임시카드 등록" style="border:0 none #000000ff ;padding:0 0 0 0;" onclick="btn_onclick"/>
        <Static id="stc_text_card" text="카드번호" class="sta_workLabel1" position="absolute 11 116 105 142" style="font:Dotum,8;" validate=""/>
        <Static id="stc_11" text="카드구분" class="sta_workLabel1" position="absolute 11 66 105 92" style="font:Dotum,8;" validate=""/>
        <Static id="stc_03" text="회원번호" class="sta_workLabel1" position="absolute 11 91 105 117" style="font:Dotum,8;" validate=""/>
        <Static id="stc_txt_06" class="sta_workData" position="absolute 104 166 558 192" visible="false"/>
        <Static id="stc_txt_03" text="유효일*" class="sta_workLabel1" position="absolute 11 166 105 192" style="font:Dotum,8;" validate="" visible="false"/>
        <Static id="stc_alert2" visible="true" position2="absolute r:274 w:68 t:94 h:23" positiontype="position2" style="color:red;font:arial,8;"/>
        <Button id="btn_chkCard" taborder="29" text="카드보유 확인" onclick="btn_onclick" position="absolute 299 42 389 62" tooltiptext="카드보유 확인" style="border:0 none #000000ff ;padding:0 0 0 0;"/>
        <Static id="stc_txt_04" text="결제일" class="sta_workLabel1" position="absolute 279 166 373 192" style="font:Dotum,8;" validate="" visible="false"/>
        <Edit id="edt_pay_dt" taborder="30" inputtype="number" maxlength="2" enable="true" position="absolute 374 169 432 189" visible="false" style="align:center middle;"/>
        <Edit id="edt_card_year" taborder="31" inputtype="number" maxlength="2" position="absolute 107 169 152 189" visible="false" ontextchanged="fn_ontextchanged" style="align:center middle;"/>
        <Edit id="edt_card_mon" taborder="32" inputtype="number" maxlength="2" position="absolute 179 169 224 189" visible="false" ontextchanged="fn_ontextchanged" style="align:center middle;"/>
        <Static id="stc_txt_07" text="년" position="absolute 157 169 180 189" visible="false"/>
        <Static id="stc_txt_08" text="월" position="absolute 229 169 252 189" visible="false"/>
        <Combo id="cbo_card" taborder="33" anchor="default" position="absolute 107 143 196 165" positiontype="position" innerdataset="@ds_cardCd" datacolumn="cd_nm" codecolumn="cd" visible="false"/>
        <Edit id="edt_birth" taborder="34" maxlength="15" position="absolute 560 119 674 139" enable="false" visible="false" style=":disabled {align:center middle;}"/>
        <Edit id="edt_imsi_cn1" taborder="35" inputtype="number" maxlength="4" position="absolute 107 119 165 139" ontextchanged="fn_ontextchanged" style="align:center middle;"/>
        <Edit id="edt_imsi_cn2" taborder="36" inputtype="number" maxlength="4" ontextchanged="fn_ontextchanged" position="absolute 182 119 240 139" style="align:center middle;"/>
        <Edit id="edt_imsi_cn3" taborder="37" inputtype="number" maxlength="4" position="absolute 257 119 315 139" ontextchanged="fn_ontextchanged" style="align:center middle;"/>
        <Edit id="edt_imsi_cn4" taborder="38" inputtype="number" maxlength="4" position="absolute 332 119 390 139" style="align:center middle;"/>
        <Static id="stc_text_gubun1" text="-" position="absolute 170 120 179 140"/>
        <Static id="stc_text_gubun2" text="-" position="absolute 245 120 254 140"/>
        <Static id="stc_text_gubun3" text="-" position="absolute 320 120 329 140"/>
        <Edit id="edt_accnt_no" taborder="39" inputtype="number" readonly="true" maxlength="16" position="absolute 107 94 273 114"/>
        <Radio id="rdo_dtl_flag" taborder="40" columncount="0" rowcount="0" position="absolute 113 68 478 88" codecolumn="codecolumn" datacolumn="datacolumn" direction="vertical" style="padding:0 0 0 0;" onitemchanged="fn_onitemchanged" onitemclick="rdo_dtl_flag_onitemclick">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn">I</Col>
                <Col id="datacolumn">임시카드 등록(신규카드고객)</Col>
              </Row>
              <Row>
                <Col id="codecolumn">S</Col>
                <Col id="datacolumn">삼성카드 등록(기존카드고객)</Col>
              </Row>
            </Rows>
          </Dataset>
        </Radio>
        <Static id="stc_txt_msg" position="absolute 485 69 552 89" style="color:red;"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cardCd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_smartLifeCard" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="dtl_flag" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="pay_dt" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="expr_yy" type="STRING" size="256"/>
          <Column id="expr_mm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_smartLifeCardInfo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="dtl_flag" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="inv_tg_dt" type="STRING" size="256"/>
          <Column id="exp_dt" type="STRING" size="256"/>
          <Column id="app_cl" type="STRING" size="256"/>
          <Column id="rgsn_dt" type="STRING" size="256"/>
          <Column id="idn_no" type="STRING" size="256"/>
          <Column id="expr_year" type="STRING" size="256"/>
          <Column id="exp_year" type="STRING" size="256"/>
          <Column id="exp_mon" type="STRING" size="256"/>
          <Column id="expr_mon" type="STRING" size="256"/>
          <Column id="issue_stat" type="STRING" size="256"/>
          <Column id="cnsl_stat" type="STRING" size="256"/>
          <Column id="imsi_card_no" type="STRING" size="256"/>
          <Column id="pay_no" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="rdo_dtl_flag" propid="value" datasetid="ds_smartLifeCard" columnid="dtl_flag"/>
      <BindItem id="item1" compid="edt_card_no" propid="value" datasetid="ds_smartLifeCard" columnid="card_no"/>
      <BindItem id="item2" compid="edt_card_year" propid="value" datasetid="ds_smartLifeCard" columnid="expr_yy"/>
      <BindItem id="item3" compid="edt_card_mon" propid="value" datasetid="ds_smartLifeCard" columnid="expr_mm"/>
      <BindItem id="item4" compid="edt_pay_dt" propid="value" datasetid="ds_smartLifeCard" columnid="pay_dt"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/********************************************************************************************/
/* 1. Include Library include, variables Declaration 영역                                  */
/********************************************************************************************/
include "LIB::lib_All.xjs";

var gv_rslMsg = "";

/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트) 처리                                           	*/
/********************************************************************************************/
function PS993700_onload(obj:Form, e:LoadEventInfo)
{
	gfn_getList("dlwCd", "0120", null, null, null, "ds_cardCd"); // 공통코드조회
}

/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
function fn_callBack(svcid, errcd, errmsg)
{
	if (errcd != 0) {
		trace(errcd)
		return false;
	} else {
		switch (svcid) {
			case "selectDlwCode":
				fn_init();
			break;
			
			case "srchSmartLifeCardInfo": // 스마트라이프 카드조회 콜백
				if (ds_smartLifeCard.rowcount > 0) {
					fn_setSmartLifeCardInfo();
				} else {
					rdo_dtl_flag.value = "I";
					fn_setVisible();
				}
			break;
			
			case "saveSmartLifeCard":
				if (gv_rslMsg == "success") {
					alert("카드정보가 저장되었습니다.");
					close();
				} else {
					alert("카드정보 저장에 실패하였습니다. " + gv_rslMsg);
				}
			break;
		}
	}
}

/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/
// 스마트라이프 카드 조회전
function fn_preSrchSmartLifeCardInfo()
{
	if (gfn_isNull(edt_accnt_no.value)) {
		alert("회원번호가 없습니다.");
		return false;
	}
	return true;
}

// 스마트라이프 카드 저장전
function fn_preSmartLifeCardSave()
{
	if (rdo_dtl_flag.value == "S") {
		if (gfn_isNull(cbo_card.value)) {
			alert("카드사를 선택하세요.");
			return false;
		}
		//ds_smartLifeCard.setColumn(0, "card_cd", cbo_card.value);
		
		if (gfn_isNull(edt_card_no.value)) {
			alert("카드번호를 입력하세요.");
			edt_card_no.setFocus();
		    return false;
		} else if (String(edt_card_no.value).length < 15) {
			alert("카드번호는 15자리 이상이어야 합니다.");
			edt_card_no.setFocus();
			return false;
		}
		if (gfn_isNull(edt_card_year.value) || gfn_isNull(edt_card_mon.value)) {
			alert("유효기간을 입력하세요.");
			return false;
		} else if (edt_card_mon.value <= 0) {
			alert("유효일의 월은 1보다 작을 수 없습니다.");
			edt_card_mon.setFocus();
			return false;
		} else if (edt_card_mon.value > 12) {
			alert("유효일의 월은 12보다 클 수 없습니다.");
			edt_card_mon.setFocus();
			return false;
		}
		if (gfn_isNull(edt_pay_dt.value)) {
			alert("결제일을 입력하세요.");
			return false;
		} else if (edt_pay_dt.value >= 31) {
			alert("결제일은 31일 보다 작아야 합니다.");
			return false;
		} else if (edt_pay_dt.value < 0) {
			alert("결제일은 1일 보다 커야 합니다.");
			return false;
		}
		
		ds_smartLifeCardInfo.clearData();
		ds_smartLifeCardInfo.addRow();
		ds_smartLifeCardInfo.setColumn(0, "accnt_no", edt_accnt_no.value);
		ds_smartLifeCardInfo.setColumn(0, "dtl_flag", rdo_dtl_flag.value);
		ds_smartLifeCardInfo.setColumn(0, "card_cd", cbo_card.value);
		ds_smartLifeCardInfo.setColumn(0, "card_no", edt_card_no.value);
		
		//20180723 37회 SDP카드변경 이슈로 인한 추가(삼성카드 등록의 경우 최초만 등록)
		ds_smartLifeCardInfo.setColumn(0, "pay_no", "1");  // 상담중
		
		var pay_dt_len = edt_pay_dt.value.length
		if  (pay_dt_len <  2)  {
		   var  pay_dt = "0"+edt_pay_dt.value
		} else { 
		   var  pay_dt =  edt_pay_dt.value
		}
		//alert(pay_dt);
		//return;
		ds_smartLifeCardInfo.setColumn(0, "inv_tg_dt",pay_dt);
		
		var sCardYear = "";
		if (String(edt_card_year.value).length == 1) {
			sCardYear = "0" + edt_card_year.value;
		} else {
			sCardYear = edt_card_year.value;
		}
		
		var sCardMon = "";
		if (String(edt_card_mon.value).length == 1) {
			sCardMon = "0" + edt_card_mon.value;
		} else {
			sCardMon = edt_card_mon.value;
		}
		
		ds_smartLifeCardInfo.setColumn(0, "exp_dt", sCardYear + sCardMon);
		ds_smartLifeCardInfo.setColumn(0, "app_cl", "1");
		
		var sToday = gfn_getToday();
		ds_smartLifeCardInfo.setColumn(0, "rgsn_dt", sToday.substr(0,4) + "" + sToday.substr(4,2) + "" + sToday.substr(6,2)); // 현재일자 YYYY/MM/DD
		ds_smartLifeCardInfo.setColumn(0, "idn_no", edt_birth.value);
		ds_smartLifeCardInfo.setColumn(0, "expr_year", sCardYear);
		ds_smartLifeCardInfo.setColumn(0, "expr_mon", sCardMon);
		ds_smartLifeCardInfo.setColumn(0, "exp_year", sCardYear);
		ds_smartLifeCardInfo.setColumn(0, "exp_mon", sCardMon);
		ds_smartLifeCardInfo.setColumn(0, "issue_stat", "0002"); // 정상발급
		ds_smartLifeCardInfo.setColumn(0, "cnsl_stat", "0003");  // 상담완료
	} else {
		if (gfn_isNull(edt_imsi_cn1.value) || String(edt_imsi_cn1.value).length < 4) {
		    alert("카드번호 첫번째 4자리를 입력하세요.");
		    edt_imsi_cn1.setFocus();
		    return false;
		}
		if (gfn_isNull(edt_imsi_cn2.value) || String(edt_imsi_cn2.value).length < 4) {
		    alert("카드번호 두번째 4자리를 입력하세요.");
		    edt_imsi_cn2.setFocus();
		    return false;
		}
		if (gfn_isNull(edt_imsi_cn3.value) || String(edt_imsi_cn3.value).length < 4) {
		    alert("카드번호 세번째 4자리를 입력하세요.");
		    edt_imsi_cn3.setFocus();
		    return false;
		}
		if (gfn_isNull(edt_imsi_cn4.value) || String(edt_imsi_cn4.value).length < 4) {
		    alert("카드번호 네번째 4자리를 입력하세요.");
		    edt_imsi_cn4.setFocus();
		    return false;
		}
		
		var sCardNo = edt_imsi_cn1.value + edt_imsi_cn2.value + edt_imsi_cn3.value + edt_imsi_cn4.value;
		//ds_smartLifeCard.setColumn(0, "card_no", sCardNo);
		
		ds_smartLifeCardInfo.clearData();
		ds_smartLifeCardInfo.addRow();
		ds_smartLifeCardInfo.setColumn(0, "accnt_no", edt_accnt_no.value);
		ds_smartLifeCardInfo.setColumn(0, "dtl_flag", rdo_dtl_flag.value);
		ds_smartLifeCardInfo.setColumn(0, "imsi_card_no", sCardNo);
		ds_smartLifeCardInfo.setColumn(0, "issue_stat", "0001"); // 미발급
		ds_smartLifeCardInfo.setColumn(0, "cnsl_stat", "0002");  // 상담중
		ds_smartLifeCardInfo.setColumn(0, "cnsl_stat", "0002");  // 상담중		
	}
	
	return true;
}

/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
// 스마트라이프 카드 조회
function fn_srchSmartLifeCardInfo()
{
	if (!fn_preSrchSmartLifeCardInfo()) return false;
	
	var szSvcid       = "srchSmartLifeCardInfo";
    var szController  = "/dlw/cons-prod/smart-life/card";
    var szInDs        = "";
    var szOutDs       = "ds_smartLifeCard=ds_output";
    var szParam       = "accnt_no=" + edt_accnt_no.value;
    var szRetCallback = "fn_callBack";
	
    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

// 스마트라이프 카드 저장
function fn_smartLifeCardSave()
{
	if (!fn_preSmartLifeCardSave()) return false;
	
	var szSvcid       = "saveSmartLifeCard";
    var szController  = "/dlw/card/smart-life/card-save";
    var szInDs        = "ds_input=ds_smartLifeCardInfo";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";
	
    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/
// 초기화
function fn_init()
{
	edt_pay_dt.value = "";     // 결제일
	edt_imsi_cn1.value = "9410"; // 카드번호1
	edt_imsi_cn2.value = "5910"; // 카드번호2
	
	edt_accnt_no.value = p_accnt_no;   // 회원번호
	edt_mem_nm.value = p_mem_nm;       // 회원명
	if (!gfn_isNull(p_brth_mon_day)) {
		edt_birth.value = p_brth_mon_day.substring(2, 8); // 생년월일
	}
	
	fn_srchSmartLifeCardInfo();
}

// visible
function fn_setVisible()
{	
	var sType = rdo_dtl_flag.value;
	
	if (sType == "I") {		   // 임시카드 등록(신규카드고객)
		stc_text_card.text = "카드번호";
		btn_save.text = "임시카드 등록";
		
		edt_imsi_cn1.visible = true;
		edt_imsi_cn2.visible = true;
		edt_imsi_cn3.visible = true;
		edt_imsi_cn4.visible = true;
		stc_text_gubun1.visible = true;
		stc_text_gubun2.visible = true;
		stc_text_gubun3.visible = true;
		edt_imsi_cn1.position = "absolute 107 119 165 139";
		edt_imsi_cn2.position = "absolute 182 119 240 139";
		edt_imsi_cn3.position = "absolute 257 119 315 139";
		edt_imsi_cn4.position = "absolute 332 119 390 139";
		stc_text_gubun1.position = "absolute 170 120 179 140";
		stc_text_gubun2.position = "absolute 245 120 254 140";
		stc_text_gubun3.position = "absolute 320 120 329 140";
		
		edt_birth.visible = false;
		
		stc_txt_01.visible = false;
		stc_txt_02.visible = false;
		stc_txt_03.visible = false;
		stc_txt_04.visible = false;
		stc_txt_05.visible = false;
		stc_txt_06.visible = false;
		stc_txt_07.visible = false;
		stc_txt_08.visible = false;
		
		cbo_card.visible = false;
		edt_card_no.visible = false;
		edt_card_year.visible = false;
		edt_card_mon.visible = false;
		edt_pay_dt.visible = false;
	} else if (sType == "S") { // 삼성카드 등록(기존카드고객)
		stc_text_card.text = "생년월일";
		btn_save.text = "삼성카드 등록";
		
		edt_imsi_cn1.visible = false;
		edt_imsi_cn2.visible = false;
		edt_imsi_cn3.visible = false;
		edt_imsi_cn4.visible = false;
		stc_text_gubun1.visible = false;
		stc_text_gubun2.visible = false;
		stc_text_gubun3.visible = false;
		
		edt_birth.visible = true;
		edt_birth.position = "absolute 107 119 170 139";
		
		stc_txt_01.visible = true;
		stc_txt_02.visible = true;
		stc_txt_03.visible = true;
		stc_txt_04.visible = true;
		stc_txt_05.visible = true;
		stc_txt_06.visible = true;
		stc_txt_07.visible = true;
		stc_txt_08.visible = true;
		
		cbo_card.visible = true;
		edt_card_no.visible = true;
		edt_card_year.visible = true;
		edt_card_mon.visible = true;
		edt_pay_dt.visible = true;
		
		if (gfn_isNull(edt_pay_dt.value)) edt_pay_dt.value = "";
	}
}

// 스마트라이프 카드정보 설정
function fn_setSmartLifeCardInfo()
{
	var sDtlFlag = ds_smartLifeCard.getColumn(0, "dtl_flag");
	
	if (sDtlFlag == "I") {
		var sCardNo = ds_smartLifeCard.getColumn(0, "card_no");
		edt_imsi_cn1.value = sCardNo.substring(0, 4);
		edt_imsi_cn2.value = sCardNo.substring(4, 8);
		edt_imsi_cn3.value = sCardNo.substring(8, 12);
		edt_imsi_cn4.value = sCardNo.substring(12, 16);
		
		cbo_card.value = "04";    // 삼성카드 설정
	} else if (sDtlFlag == "S") {
		var sCardCd = ds_smartLifeCard.getColumn(0, "card_cd");
		cbo_card.value = sCardCd; // 카드 설정
		
		stc_txt_msg.text = "*등록완료";
		btn_save.visible = false;
	} else {
		rdo_dtl_flag.value = "I";
		cbo_card.value = "04";    // 삼성카드 설정
	}
	
	fn_setVisible();
}

/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
// 카드구분 선택
function fn_onitemchanged(obj:Radio, e:ItemChangeEventInfo)
{
	fn_setVisible();
}

// 닫기
function btn_close_onclick(obj:Button,  e:ClickEventInfo)
{
	close();
}

// 버튼 클릭
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	if (obj.name == "btn_chkCard") {		// 카드보유 확인
		//var url = "https://www.samsungcard.com/hpsub/jhsvc/NHPSPITAK611.do?method=viewForm";
		var url = "https://www.samsungcard.com/hpsub/hpsub/UHPPSU0701P0.jsp";
		system.execBrowser(url);
	} else if (obj.name == "btn_save") {    // 카드등록
		if (gfn_isNull(rdo_dtl_flag.value)) {
			alert("카드구분을 선택해 주십시요.");
			return;
		}
		if (confirm("저장하시겠습니까?")) {
			fn_smartLifeCardSave();
		}
	}
}

function fn_ontextchanged(obj:Edit,  e:TextChangedEventInfo)
{
	if (obj.name == "edt_imsi_cn1") {
		if (String(obj.value).length == 4) {
			edt_imsi_cn2.setFocus();
		}
	} else if (obj.name == "edt_imsi_cn2") {
		if (String(obj.value).length == 4) {
			edt_imsi_cn3.setFocus();
		}
	} else if (obj.name == "edt_imsi_cn3") {
		if (String(obj.value).length == 4) {
			edt_imsi_cn4.setFocus();
		}
	} else if (obj.name == "edt_card_no") {
		if (String(obj.value).length == 16) {
			edt_card_year.setFocus();
		}
	} else if (obj.name == "edt_card_year") {
		if (String(obj.value).length == 2) {
			edt_card_mon.setFocus();
		}
	} else if (obj.name == "edt_card_mon") {
		if (String(obj.value).length == 2) {
			edt_pay_dt.setFocus();
		}
	}
}

]]></Script>
  </Form>
</FDL>

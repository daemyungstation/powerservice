<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="Sample_06" classname="Sample_06" inheritanceid="" position="absolute 0 0 843 635" titletext="EASY PAY 7.0 플러그인" onload="FrmDev_onload">
    <Layouts>
      <Layout>
        <Static id="stc_09" class="sta_workSrcBg" position="absolute 7 285 836 510"/>
        <Static id="stc_01" text="가맹점 정보(필수)" class="sta_workTitle3" position="absolute 10 24 216 44"/>
        <Static id="stc_33" class="sta_workSrcBg" position="absolute 7 45 836 136"/>
        <Edit id="EP_mall_id" taborder="0" onkeydown="edt_email2_onkeydown" oneditclick="edt_email2_oneditclick" position="absolute 132 61 382 86" value="T0002095" tabstop="false" autoselect="true"/>
        <Static id="stc_00" text="가맹점 아이디" class="sta_workSrcLabel1" position="absolute 17 64 117 84"/>
        <Static id="stc_02" text="가맹점명" class="sta_workSrcLabel1" position="absolute 17 96 117 116"/>
        <Edit id="EP_mall_nm" taborder="2" onkeydown="edt_email2_onkeydown" oneditclick="edt_email2_oneditclick" position="absolute 132 93 382 118" value="교원 테스트 가맹점 1호" autoselect="true"/>
        <Edit id="EP_mall_pwd" taborder="1" onkeydown="edt_email2_onkeydown" oneditclick="edt_email2_oneditclick" position="absolute 572 61 822 86" value="T0002095" autoselect="true"/>
        <Static id="stc_07" text="가맹점 패스워드" class="sta_workSrcLabel1" position="absolute 457 64 557 84"/>
        <Static id="stc_03" text="가맹점 CI URL" class="sta_workSrcLabel1" position="absolute 457 96 557 116"/>
        <Edit id="EP_ci_url" taborder="3" onkeydown="edt_email2_onkeydown" oneditclick="edt_email2_oneditclick" position="absolute 572 93 822 118" value="http://testoffice.easypay.co.kr" autoselect="true"/>
        <Static id="stc_04" class="sta_workSrcBg" position="absolute 7 181 836 239"/>
        <Static id="stc_05" text="고객 주민번호" class="sta_workSrcLabel1" position="absolute 17 200 117 220" style="font:dotum,9,bold;"/>
        <Edit id="EP_soc_no" taborder="4" onkeydown="edt_email2_onkeydown" oneditclick="edt_email2_oneditclick" position="absolute 132 197 382 222" style="compositecolor:#ffffff67;" autoselect="true"/>
        <Static id="stc_06" text="플러그인 정보(필수)" class="sta_workTitle3" position="absolute 10 160 216 180"/>
        <Static id="stc_08" text="플러그인 정보(필수)" class="sta_workTitle3" position="absolute 10 264 216 284"/>
        <Edit id="EP_user_mail" taborder="9" onkeydown="edt_email2_onkeydown" oneditclick="edt_email2_oneditclick" position="absolute 132 301 382 326" value="test@kicc.co.kr" autoselect="true"/>
        <Static id="stc_12" text="고객 Email" class="sta_workSrcLabel1" position="absolute 17 304 117 324"/>
        <Edit id="EP_user_phone2" taborder="11" onkeydown="edt_email2_onkeydown" oneditclick="edt_email2_oneditclick" position="absolute 132 333 382 358" value="01012345678" autoselect="true"/>
        <Static id="stc_13" text="고객 휴대폰" class="sta_workSrcLabel1" position="absolute 17 336 117 356"/>
        <Edit id="EP_user_addr" taborder="12" onkeydown="edt_email2_onkeydown" oneditclick="edt_email2_oneditclick" position="absolute 132 365 822 395" value="서울 금천구 가산동 459-9 " autoselect="true"/>
        <Static id="stc_14" text="고객 주소" class="sta_workSrcLabel1" position="absolute 17 373 117 393"/>
        <Edit id="EP_product_nm" taborder="13" onkeydown="edt_email2_onkeydown" oneditclick="edt_email2_oneditclick" position="absolute 132 402 382 427" value="교원 동화책" autoselect="true"/>
        <Static id="stc_15" text="상품명" class="sta_workSrcLabel1" position="absolute 17 407 117 427"/>
        <Static id="stc_16" text="상품 구분" class="sta_workSrcLabel1" position="absolute 17 437 117 457"/>
        <Static id="stc_19" text="고객 전화번호" class="sta_workSrcLabel1" position="absolute 457 302 557 322"/>
        <Edit id="EP_user_phone1" taborder="10" onkeydown="edt_email2_onkeydown" oneditclick="edt_email2_oneditclick" position="absolute 572 299 822 324" value="0212344567" autoselect="true"/>
        <Edit id="EP_product_amt" taborder="14" onkeydown="edt_email2_onkeydown" oneditclick="edt_email2_oneditclick" position="absolute 572 402 822 427" value="500000" autoselect="true"/>
        <Static id="stc_20" text="상품 금액" class="sta_workSrcLabel1" position="absolute 457 407 557 427"/>
        <Combo id="EP_product_type" taborder="15" innerdataset="@itemType" codecolumn="value" datacolumn="title" index="0" position="absolute 133 434 203 459" value="0" text="실물" onitemchanged="EP_product_type_onitemchanged"/>
        <ActiveX id="plugin_obj" position="absolute 7 520 180 554" taborder="19" progid="{5BBC9EAD-D958-4F1F-8778-31F3F0DD2254}" codebase="http://testpg.easypay.co.kr/plugin/file/EasyPayPlugin.cab#Version=1,0,0,4"/>
        <Static id="stc_21" text="무이자 여부" class="sta_workSrcLabel1" position="absolute 17 468 117 488"/>
        <Combo id="EP_noint" taborder="17" innerdataset="@noint" codecolumn="value" datacolumn="title" index="0" position="absolute 133 465 203 490" value="00" text="예"/>
        <Static id="stc_22" text="할부 개월" class="sta_workSrcLabel1" position="absolute 456 437 556 457"/>
        <Combo id="EP_install_period" taborder="16" innerdataset="@installPeriod" codecolumn="value" datacolumn="title" index="0" position="absolute 572 434 656 459" value="00" text="일시불"/>
        <Button id="btn_Submit00" taborder="1" text="결제 요청" onclick="fn_easypay_submit" position="absolute 308 544 391 571"/>
        <Button id="btn_Submit01" taborder="1" text="결제 취소" onclick="fn_easypay_cancle" position="absolute 400 544 483 571"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item1" compid="EP_mall_id" propid="value" datasetid="ds_input" columnid="prdtNm"/>
      <BindItem id="item0" compid="EP_mall_nm" propid="value" datasetid="ds_input" columnid="prdtNm"/>
      <BindItem id="item6" compid="EP_mall_pwd" propid="value" datasetid="ds_input" columnid="prdtNm"/>
      <BindItem id="item2" compid="EP_ci_url" propid="value" datasetid="ds_input" columnid="prdtNm"/>
      <BindItem id="item3" compid="EP_soc_no" propid="value" datasetid="ds_input" columnid="prdtNm"/>
      <BindItem id="item7" compid="EP_user_mail" propid="value" datasetid="ds_input" columnid="prdtNm"/>
      <BindItem id="item8" compid="EP_user_phone2" propid="value" datasetid="ds_input" columnid="prdtNm"/>
      <BindItem id="item9" compid="EP_user_addr" propid="value" datasetid="ds_input" columnid="prdtNm"/>
      <BindItem id="item10" compid="EP_product_nm" propid="value" datasetid="ds_input" columnid="prdtNm"/>
      <BindItem id="item14" compid="EP_user_phone1" propid="value" datasetid="ds_input" columnid="prdtNm"/>
      <BindItem id="item15" compid="EP_product_amt" propid="value" datasetid="ds_input" columnid="prdtNm"/>
    </Bind>
    <Objects>
      <Dataset id="userType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="title" type="STRING" size="256"/>
          <Column id="value" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="title">일반</Col>
            <Col id="value">1</Col>
          </Row>
          <Row>
            <Col id="title">회원</Col>
            <Col id="value">2</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="itemType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="title" type="STRING" size="256"/>
          <Column id="value" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="title">실물</Col>
            <Col id="value">0</Col>
          </Row>
          <Row>
            <Col id="title">컨텐츠</Col>
            <Col id="value">1</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="installPeriod" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="title" type="STRING" size="256"/>
          <Column id="value" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="title">일시불</Col>
            <Col id="value">00</Col>
          </Row>
          <Row>
            <Col id="title">02 개월</Col>
            <Col id="value">02</Col>
          </Row>
          <Row>
            <Col id="title">03 개월</Col>
            <Col id="value">03</Col>
          </Row>
          <Row>
            <Col id="title">04 개월</Col>
            <Col id="value">04</Col>
          </Row>
          <Row>
            <Col id="title">05 개월</Col>
            <Col id="value">05</Col>
          </Row>
          <Row>
            <Col id="title">06 개월</Col>
            <Col id="value">06</Col>
          </Row>
          <Row>
            <Col id="title">07 개월</Col>
            <Col id="value">07</Col>
          </Row>
          <Row>
            <Col id="title">08 개월</Col>
            <Col id="value">08</Col>
          </Row>
          <Row>
            <Col id="title">09 개월</Col>
            <Col id="value">09</Col>
          </Row>
          <Row>
            <Col id="title">10 개월</Col>
            <Col id="value">10</Col>
          </Row>
          <Row>
            <Col id="title">11 개월</Col>
            <Col id="value">11</Col>
          </Row>
          <Row>
            <Col id="title">12 개월</Col>
            <Col id="value">12</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="noint" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="title" type="STRING" size="256"/>
          <Column id="value" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="title">일반</Col>
            <Col id="value">00</Col>
          </Row>
          <Row>
            <Col id="title">무이자</Col>
            <Col id="value">02</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[include "LIB::lib_All.xjs"; //공통함수 호출

function FrmDev_onload(obj:Form, e:LoadEventInfo)
{
	// 시스템 공통함수 호출
	//gfn_commInit(obj);
	_gfn_createPagingDataset(obj);	
		
	gfn_installCehckEasyPay();
}



function fn_easypay_submit(obj:Button,  e:ClickEventInfo)
{	
	var objEP = gfn_getEasyPay_PaymentObj();
	//고객 코드
	objEP.user_code = "0000000";
	//주민등록 번호
	objEP.soc_no	= EP_soc_no.value;
	//고객 이메일 주소
	objEP.user_mail		= EP_user_mail.value;	 
	//고객 집 전화번호
	objEP.user_phone1	= EP_user_phone1.value;
	//고객 휴대폰 전화번호
	objEP.user_phone2	= EP_user_phone2.value;
	//고객 주소
	objEP.user_addr		= EP_user_addr.value;
	//상품명
	objEP.product_nm	= EP_product_nm.value;
	//상품금액
	objEP.product_amt	= EP_product_amt.value;
	//상품종류
	objEP.product_type	= EP_product_type.value;
	
	//신용카드
	var cardNo = "11";
	//계좌이체 
	var bankNo = "21";
	
	objEP.pay_type	= cardNo ;
	// 플러그인으로 인증요청(XP->EasyPay)
	
	var outDs = gfn_reqEasyPay(objEP);
	trace("주문번호 : " + outDs.getColumn(0, "cno"));
	trace("결과 코드 : " + outDs.getColumn(0, "resCd"));
	trace("결과 메시지 : " + outDs.getColumn(0, "resMsg"));
}

//결제 취소
function fn_easypay_cancle(obj:Button,  e:ClickEventInfo)
{
	var objEP = gfn_getEasyPay_CancleObj();	
	objEP.cno		= '00212213041601049838';

	var outDs = gfn_cancleEasyPay(objEP);	
	trace("결과 코드 : " + outDs.getColumn(0, "resCd"));
	trace("결과 메시지 : " + outDs.getColumn(0, "resMsg"));
}



]]></Script>
  </Form>
</FDL>

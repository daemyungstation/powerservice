<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="PS220100" classname="캠페인관리" inheritanceid="" position="absolute 0 0 989 795" titletext="캠페인 관리" scrollbars="none" onload="PS220100_onload">
    <Layouts>
      <Layout>
        <Static id="stc_02" class="sta_workData" position2="absolute l:55.71% r:0 t:342 h:51" positiontype="position2"/>
        <TextArea id="tea_cmpg_expi" taborder="23" wordwrap="both" readonly="false" lengthunit="utf8" maxlength="500" position2="absolute l:55.92% r:3 t:344 h:47" positiontype="position2" imemode="hangul"/>
        <Static id="stc_12" class="sta_workSrcBg" position2="absolute l:0 r:0 b:0 h:42" positiontype="position2">
          <Layouts>
            <Layout width="989" height="42"/>
          </Layouts>
        </Static>
        <Static id="stc_10" class="sta_workData" position2="absolute l:9.61% r:53.69% t:342 h:26" positiontype="position2"/>
        <Static id="stc_21" class="sta_workData" position2="absolute l:9.61% r:0 t:292 h:26" positiontype="position2"/>
        <Grid id="grd_list_cmpgAssign" taborder="33" binddataset="ds_list_assign" useinputpanel="false" autofittype="col" position2="absolute l:0 r:0 t:470 b:50" positiontype="position2" onheadclick="grd_onheadclick" onvscrolllastover="grd_onvscrolllastover" oncelldblclick="grd_oncelldblclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="46"/>
                <Column size="162"/>
                <Column size="186"/>
                <Column size="149"/>
                <Column size="131"/>
                <Column size="159"/>
                <Column size="157"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="checkbox" edittype="checkbox" style="checkboxsize:BIND(Column0);" autosizecol="limitmin"/>
                <Cell col="1" text="상담그룹" id="team_nm"/>
                <Cell col="2" text="상담사명" id="user_nm"/>
                <Cell col="3" text="배정건수" id="assignnum"/>
                <Cell col="4" text="처리완료" id="st30"/>
                <Cell col="5" text="처리중" id="st20"/>
                <Cell col="6" text="미처리" id="st10"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="checkbox" text="bind:_chk"/>
                <Cell col="1" text="bind:team_nm"/>
                <Cell col="2" text="bind:user_nm"/>
                <Cell col="3" style="align:right;" text="bind:assignnum" expr="assignnum ==null ?'0':gfn_commaStr(assignnum)+&quot; 건&quot;"/>
                <Cell col="4" style="align:right;" text="bind:st30" expr="st30==null?'0':gfn_commaStr(st30)+&quot; 건&quot;"/>
                <Cell col="5" style="align:right;" text="bind:st20" expr="st20 ==null ? '0' : gfn_commaStr(st20)+&quot; 건&quot;"/>
                <Cell col="6" style="align:right;" text="bind:st10" expr="st10 == null ?'0':gfn_commaStr(st10)+&quot; 건&quot;"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="stc_25" text="캠페인 상세정보보기" class="sta_workTitle2" position="absolute 0 271 297 291"/>
        <Static id="sta_GrayLine" class="sta_WF_Line1" position2="absolute l:0 r:0 t:291 h:1" positiontype="position2"/>
        <Static id="stc_04" class="sta_workSrcBg" position2="absolute l:0 r:0 t:7 h:46" positiontype="position2">
          <Layouts>
            <Layout width="989" height="42"/>
          </Layouts>
        </Static>
        <Static id="stc_05" text="실행채널" class="sta_workSrcLabel1" position="absolute 1013 18 1091 38" visible="false"/>
        <Static id="stc05" text="캠페인구분" class="sta_workSrcLabel1" position="absolute 526 20 607 40"/>
        <Static id="stc_06" text="조사방법" class="sta_workSrcLabel1" position="absolute 1195 18 1251 38" visible="false"/>
        <Combo id="cbo_srch_cmpg_div_cd" taborder="2" position="absolute 602 19 729 39" innerdataset="ds_cmpgDivCd_srch" datacolumn="hrch_cd_nm" codecolumn="hrch_cd" onitemchanged="cbo_onitemchanged" onkeydown="cbo_onkeydown"/>
        <Edit id="edt_srch_cmpg_nm" taborder="0" autoselect="true" autoskip="true" onkeydown="srch_onkeydown" enable="true" position="absolute 87 18 327 38" imemode="hangul"/>
        <Combo id="cbo_srch_cmpg_invt_mthd_cd" taborder="41" innerdataset="ds_cmpgInvtMthdCd_srch" codecolumn="cd" datacolumn="cd_nm" onitemchanged="div_Search_cbo_areaType_onitemchanged" oncloseup="Tab00_tabpage1_cbo_prdtDiv_oncloseup" position="absolute 1262 18 1357 38" visible="false"/>
        <Button id="btn_search" taborder="3" onclick="btn_onclick" class="btn_WF_Search" tooltiptext="조회" style="padding:0 0 0 0;" position2="absolute r:94 w:72 t:19 h:20" positiontype="position2"/>
        <Button id="btn_init" taborder="4" onclick="btn_onclick" class="btn_WF_Return" tooltiptext="초기화" style="padding:0 0 0 0;" position2="absolute r:20 w:72 t:19 h:20" positiontype="position2"/>
        <Static id="stc_15" text="상담사 배정목록" class="sta_workTitle2" position="absolute 0 429 297 449"/>
        <Static id="stc_01" class="sta_workData" position2="absolute l:9.61% r:0 t:317 h:26" positiontype="position2"/>
        <Static id="stc_11" text="진행상태" onclick="div_Work00_stc_11_onclick" class="sta_workLabel1_P" validate="" position2="absolute l:74.12% w:9.71% t:317 h:26" positiontype="position2"/>
        <Calendar id="cal_cmpg_stt_dt" taborder="15" displaynulltext="____-__-__" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" enable="false" position2="absolute l:9.91% w:89 t:320 h:20" positiontype="position2"/>
        <Calendar id="cal_cmpg_end_dt" taborder="16" displaynulltext="____-__-__" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" enable="false" position2="absolute l:20.32% w:89 t:320 h:20" positiontype="position2"/>
        <Static id="Static00" text="~" position2="absolute l:19.21% w:8 t:324 h:15" positiontype="position2"/>
        <Edit id="edt_trgt_list_nm" taborder="13" enable="false" position2="absolute l:55.92% w:33.97% t:295 h:20" positiontype="position2" readonly="false"/>
        <Static id="stc_08" class="sta_workData" position2="absolute l:9.61% r:53.69% t:367 h:26" positiontype="position2"/>
        <Static id="stc_14" class="sta_workData" position2="absolute l:9.61% r:0 t:392 h:26" positiontype="position2"/>
        <Static id="stc_18" text="수정자" class="sta_workLabel1" validate="" position2="absolute l:46.11% w:9.71% t:392 h:26" positiontype="position2"/>
        <Static id="stc_19" text="수정일시" class="sta_workLabel1" validate="" position2="absolute l:73.91% w:9.71% t:392 h:26" positiontype="position2"/>
        <Static id="stc_22" text="등록일시" class="sta_workLabel1" validate="" position2="absolute l:23.56% w:9.71% t:392 h:26" positiontype="position2"/>
        <Button id="btn_assignEqas" taborder="34" text="균등할당" class="btn_WF_Common" style="padding:0 0 0 0;" position2="absolute r:347 w:69 b:12 h:20" positiontype="position2" onclick="btn_onclick"/>
        <Edit id="edt_rdasnum" taborder="35" position2="absolute r:285 w:60 b:12 h:20" positiontype="position2" inputtype="number" style="align:right middle;" oneditclick="edt_rdasnum_oneditclick"/>
        <Button id="btn_assignRdas" taborder="36" text="수치할당" class="btn_WF_Common" style="padding:0 0 0 0;" position2="absolute r:214 w:69 b:12 h:20" positiontype="position2" onclick="btn_onclick"/>
        <Button id="btn_assignEqwd" taborder="37" text="선택회수" class="btn_WF_Common" style="padding:0 0 0 0;" position2="absolute r:144 w:69 b:12 h:20" positiontype="position2" onclick="btn_onclick"/>
        <Button id="btn_assignRdwd" taborder="39" text="수치회수" class="btn_WF_Common" style="padding:0 0 0 0;" position2="absolute r:8 w:67 b:12 h:20" positiontype="position2" onclick="btn_onclick"/>
        <Edit id="edt_rdwdnum" taborder="38" position2="absolute r:77 w:65 b:12 h:20" positiontype="position2" inputtype="number" style="align:right middle;"/>
        <Static id="Static01" style="align:right middle;font:Dotum,9;" usedecorate="true" position2="absolute r:0 w:381 t:422 h:19" positiontype="position2"/>
        <Grid id="grd_list_cmpg" taborder="6" binddataset="ds_list_cmpg" useinputpanel="false" position2="absolute l:0 r:0 t:87 h:174" positiontype="position2" class="grd_list" autofittype="col" oncellclick="grd_oncellclick" onheadclick="grd_onheadclick" onvscrolllastover="grd_onvscrolllastover" autoenter="none" areaselecttype="limitband" findtype="none" cellsizingtype="col">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="139"/>
                <Column size="139"/>
                <Column size="116"/>
                <Column size="79"/>
                <Column size="76"/>
                <Column size="69"/>
                <Column size="94"/>
                <Column size="104"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="NO"/>
                <Cell col="1" text="캠페인명" id="cmpg_nm"/>
                <Cell col="2" text="캠페인구분" id="cmpg_div_cd"/>
                <Cell col="3" text="실행채널" id="cmpg_pran_chnl_cd"/>
                <Cell col="4" text="진행상태" id="cmpg_prgr_stat_cd"/>
                <Cell col="5" text="시작일" id="cmpg_stt_dt"/>
                <Cell col="6" text="종료일" id="cmpg_end_dt"/>
                <Cell col="7" text="수정자" id="amnd_nm"/>
                <Cell col="8" text="수정일시" id="amnt_dttm"/>
              </Band>
              <Band id="body">
                <Cell expr="currow+1"/>
                <Cell col="1" displaytype="normal" edittype="none" style="align:left;" text="bind:cmpg_nm" editdisplay="edit" tooltiptype="mouse" tooltiptext="bind:cmpg_nm"/>
                <Cell col="2" text="bind:cmpg_div_nm"/>
                <Cell col="3" text="bind:cmpg_pran_chnl_nm"/>
                <Cell col="4" style="color:EXPR(cmpg_prgr_stat_cd =='20'? &quot;#FF6075&quot; :&quot;&quot;);color2:EXPR(cmpg_prgr_stat_cd =='20'? &quot;#FF6075&quot; :&quot;&quot;);selectcolor:EXPR(cmpg_prgr_stat_cd =='20'? &quot;red&quot; :&quot;&quot;);" text="bind:cmpg_prgr_stat_nm"/>
                <Cell col="5" displaytype="date" text="bind:cmpg_stt_dt" mask="yyyy-MM-dd"/>
                <Cell col="6" displaytype="date" text="bind:cmpg_end_dt" mask="yyyy-MM-dd"/>
                <Cell col="7" text="bind:amnd_nm"/>
                <Cell col="8" displaytype="date" text="bind:amnt_dttm" mask="yyyy-MM-dd HH:mm"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Edit id="edt_cmpg_nm" taborder="12" position2="absolute l:9.91% w:36.1% t:295 h:20" positiontype="position2" readonly="false" maxlength="100" lengthunit="utf8" imemode="hangul"/>
        <Static id="sta_totalCnt" text="검색결과   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt; / 전체   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt;" usedecorate="true" class="sta_workTitle5" position="absolute 2 66 218 86"/>
        <Combo id="cbo_srch_cmpg_pran_chnl_cd" taborder="40" innerdataset="ds_cmpgPranChnlCd_srch" codecolumn="cd" datacolumn="cd_nm" onitemchanged="div_Search_cbo_areaType_onitemchanged" oncloseup="Tab00_tabpage1_cbo_prdtDiv_oncloseup" position="absolute 1081 18 1176 38" enable="true" visible="false"/>
        <Static id="stc_03" text="실행채널" class="sta_workLabel1_P" position2="absolute l:46.11% w:9.71% t:317 h:26" positiontype="position2" validate=""/>
        <Edit id="edt_rgsn_dttm" taborder="25" readonly="true" class="edt_edit" position2="absolute l:33.37% w:12.64% t:395 h:20" positiontype="position2"/>
        <Edit id="edt_amnd_nm" taborder="26" readonly="true" class="edt_edit" position2="absolute l:55.92% w:17.9% t:395 h:20" positiontype="position2"/>
        <Edit id="edt_amnt_dttm" taborder="27" readonly="true" class="edt_edit" position2="absolute l:83.72% r:2 t:395 h:20" positiontype="position2"/>
        <Edit id="edt_rgsr_nm" taborder="24" readonly="true" class="edt_edit" position2="absolute l:9.91% w:13.45% t:395 h:20" positiontype="position2"/>
        <Button id="btn_cancel" taborder="11" text="취소" onclick="btn_onclick" class="btn_Cancel" position2="absolute r:-168 w:72 t:245 h:20" positiontype="position2" tooltiptext="취소" style="padding:0 0 0 0;"/>
        <Button id="btn_save" taborder="10" onclick="btn_onclick" class="btn_WF_Save" position2="absolute r:-94 w:72 t:269 h:20" positiontype="position2" tooltiptext="신규" style="padding:0 0 0 0;"/>
        <Button id="btn_delete" taborder="9" onclick="btn_onclick" class="btn_WF_Del" position2="absolute r:0 w:72 t:269 h:20" positiontype="position2" tooltiptext="삭제" style="padding:0 0 0 0;"/>
        <Button id="btn_update" taborder="8" onclick="btn_onclick" class="btn_WF_Modif" position2="absolute r:74 w:72 t:269 h:20" positiontype="position2" tooltiptext="수정" style="padding:0 0 0 0;"/>
        <Button id="btn_create" taborder="7" onclick="btn_onclick" class="btn_WF_New" position2="absolute r:148 w:72 t:269 h:20" positiontype="position2" tooltiptext="신규" style="padding:0 0 0 0;"/>
        <Static id="sta_totalCnt_assign" text="검색결과   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt; / 전체   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt;" usedecorate="true" class="sta_workTitle5" position="absolute 1 450 203 470"/>
        <Button id="btn_addCnsr" taborder="31" text="상담사추가" class="btn_WF_Common" style="padding:0 0 0 0;" position2="absolute r:59 w:81 t:447 h:20" positiontype="position2" onclick="btn_onclick"/>
        <Button id="btn_deleteCnsr" taborder="32" text="삭제" class="btn_WF_Common" style="padding:0 0 0 0;" position2="absolute r:0 w:57 t:447 h:20" positiontype="position2" onclick="btn_onclick"/>
        <Static id="stc_00" text="캠페인설명" class="sta_workLabel1" style="align:left top;" validate="" position2="absolute l:46.11% w:9.71% t:342 h:51" positiontype="position2"/>
        <Static id="stc_sub_trgt_list" text="서브 대상 고객" class="sta_workSrcLabel1" position="absolute 200 448 333 468"/>
        <Edit id="edt_sub_trgt_list_nm" taborder="28" autoselect="true" autoskip="true" onkeydown="common_onkeydown" position2="absolute l:291 w:295 t:447 h:20" positiontype="position2" enable="false"/>
        <Button id="btn_subTrgtListPop" taborder="29" onclick="btn_onclick" class="btn_WF_Search" position2="absolute l:588 w:72 t:447 h:20" positiontype="position2" tooltiptext="조회" style="padding:0 0 0 0;"/>
        <Static id="stc_33" text="캠페인구분" class="sta_workLabel1_P" validate="" position2="absolute l:0% w:9.71% t:367 h:26" positiontype="position2"/>
        <Static id="stc_20" text="캠페인명" class="sta_workLabel1_P" validate="" position2="absolute l:0% w:9.71% t:292 h:26" positiontype="position2"/>
        <Static id="stc_09" text="수행일자" class="sta_workLabel1_P" validate="" position2="absolute l:0% w:9.71% t:317 h:26" positiontype="position2"/>
        <Static id="stc_07" text="대상목록" class="sta_workLabel1_P" validate="" position2="absolute l:46.11% w:9.71% t:292 h:26" positiontype="position2"/>
        <Static id="stc_13" text="등록자" class="sta_workLabel1" validate="" position2="absolute l:0% w:9.71% t:392 h:26" positiontype="position2"/>
        <Static id="stc_16" text="캠페인명" class="sta_workSrcLabel1" position="absolute 20 18 98 38"/>
        <Static id="stc_17" text="진행상태" class="sta_workSrcLabel1" position="absolute 339 19 395 39"/>
        <Combo id="cbo_srch_cmpg_prgr_stat_cd" taborder="1" innerdataset="@ds_cmpgPrgrStatCd_srch" codecolumn="cd" datacolumn="cd_nm" position="absolute 401 19 508 39" onkeydown="cbo_onkeydown"/>
        <Combo id="cbo_cmpg_prgr_stat_cd" taborder="18" innerdataset="ds_cmpgPrgrStatCd" codecolumn="cd" datacolumn="cd_nm" position2="absolute l:83.92% w:15.87% t:320px h:20" positiontype="position2" onitemchanged="cbo_onitemchanged"/>
        <Combo id="cbo_cmpg_pran_chnl_cd" taborder="17" innerdataset="ds_cmpgPranChnlCd" codecolumn="cd" datacolumn="cd_nm" onitemchanged="div_Search_cbo_areaType_onitemchanged" oncloseup="Tab00_tabpage1_cbo_prdtDiv_oncloseup" position2="absolute l:55.92% w:18% t:320 h:20" positiontype="position2" enable="true"/>
        <Combo id="cbo_cmpg_div_cd" taborder="22" innerdataset="ds_cmpgDivCd" codecolumn="hrch_cd" datacolumn="hrch_cd_nm" onitemchanged="div_Search_cbo_areaType_onitemchanged" oncloseup="Tab00_tabpage1_cbo_prdtDiv_oncloseup" position2="absolute l:9.81% w:18% t:370 h:20" positiontype="position2" enable="false"/>
        <Button id="btn_open_trgt_list_Pop" taborder="14" onclick="btn_onclick" class="btn_workSrcPop" visible="false" position2="absolute l:90.09% w:20 t:295 h:20" positiontype="position2"/>
        <Button id="btn_resrch" taborder="30" text="새로고침" onclick="btn_onclick" class="btn_WF_Common" position2="absolute l:661 w:65 t:447 h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Static id="stc_team_trgt_list" text="수행그룹" class="sta_workLabel1_P" position2="absolute l:0 w:9.71% t:342px h:26" positiontype="position2" validate=""/>
        <Combo id="cbo_cmpg_prfm_team_cd" taborder="19" innerdataset="@ds_teamCd01" codecolumn="team_cd" datacolumn="team_nm" onitemchanged="cbo_onitemchanged" position2="absolute l:9.81% r:75.33% t:344px h:22" positiontype="position2" enable="false"/>
        <Combo id="cbo_cmpg_prfm_team_cd2" taborder="20" displaynulltext="선택" innerdataset="@ds_teamCd02" codecolumn="team_cd" datacolumn="team_nm" position2="absolute l:24.77% r:60.36% t:344 h:22" positiontype="position2" enable="false"/>
        <Edit id="edt_trgt_list_team_nm" taborder="21" class="edt_edit" visible="false" position2="absolute l:9.81% r:58.85% t:344 h:22" positiontype="position2"/>
        <Button id="btn_custAlctMain" taborder="5" text="고객별 할당" onclick="btn_onclick" class="btn_WF_Common" position2="absolute r:2 w:81 t:64px h:20" positiontype="position2" style="padding:0 0 0 0;"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="edt_cmpg_nm" propid="value" datasetid="ds_cmpg" columnid="cmpg_nm"/>
      <BindItem id="item2" compid="edt_rgsr_nm" propid="value" datasetid="ds_cmpg" columnid="rgsr_nm"/>
      <BindItem id="item4" compid="edt_rgsn_dttm" propid="value" datasetid="ds_cmpg" columnid="rgsn_dttm"/>
      <BindItem id="item3" compid="edt_amnd_nm" propid="value" datasetid="ds_cmpg" columnid="amnd_nm"/>
      <BindItem id="item5" compid="edt_amnt_dttm" propid="value" datasetid="ds_cmpg" columnid="amnt_dttm"/>
      <BindItem id="item1" compid="cal_cmpg_stt_dt" propid="value" datasetid="ds_cmpg" columnid="cmpg_stt_dt"/>
      <BindItem id="item6" compid="cal_cmpg_end_dt" propid="value" datasetid="ds_cmpg" columnid="cmpg_end_dt"/>
      <BindItem id="item9" compid="tea_cmpg_expi" propid="value" datasetid="ds_cmpg" columnid="cmpg_expi"/>
      <BindItem id="item10" compid="edt_trgt_list_nm" propid="value" datasetid="ds_cmpg" columnid="trgt_list_nm"/>
      <BindItem id="item7" compid="cbo_cmpg_pran_chnl_cd" propid="value" datasetid="ds_cmpg" columnid="cmpg_pran_chnl_cd"/>
      <BindItem id="item8" compid="cbo_cmpg_prgr_stat_cd" propid="value" datasetid="ds_cmpg" columnid="cmpg_prgr_stat_cd"/>
      <BindItem id="item11" compid="cbo_cmpg_div_cd" propid="value" datasetid="ds_cmpg" columnid="cmpg_div_cd"/>
      <BindItem id="item12" compid="edt_sub_trgt_list_nm" propid="value" datasetid="ds_list_subTrgtList" columnid="sub_trgt_list_nm"/>
      <BindItem id="item24" compid="cbo_cmpg_prfm_team_cd" propid="value" datasetid="ds_cmpg" columnid="hgrn_team_cd"/>
      <BindItem id="item25" compid="cbo_cmpg_prfm_team_cd2" propid="value" datasetid="ds_cmpg" columnid="cmpg_prfm_team_cd"/>
    </Bind>
    <Objects>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgPrgrStatCd_srch" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgDivCd_srch" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="hrch_typ_cd" type="STRING" size="256"/>
          <Column id="hgrn_hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd_nm" type="STRING" size="256"/>
          <Column id="hrch_cd_lvl_cnt" type="STRING" size="256"/>
          <Column id="hrch_adtl_cd" type="STRING" size="256"/>
          <Column id="hrch_adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmpg_nm" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_cd" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_cd" type="STRING" size="256"/>
          <Column id="cmpg_div_cd" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_cd" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
          <Column id="cmpg_prfm_team_cd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_cmpg" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="cmpg_div_cd" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_cd" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_cd" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd" type="STRING" size="256"/>
          <Column id="cmpg_nm" type="STRING" size="256"/>
          <Column id="cmpg_expi" type="STRING" size="256"/>
          <Column id="cmpg_stt_dt" type="STRING" size="256"/>
          <Column id="cmpg_end_dt" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_cd" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="rgsr_id" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_id" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_nm" type="STRING" size="256"/>
          <Column id="cmpg_div_nm" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_nm" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_nm" type="STRING" size="256"/>
          <Column id="trgt_list_nm" type="STRING" size="256"/>
          <Column id="old_campaignstatecd" type="STRING" size="256"/>
          <Column id="modifyfg" type="STRING" size="256"/>
          <Column id="cmpg_prfm_team_cd" type="STRING" size="256"/>
          <Column id="cmpg_prfm_team_nm" type="STRING" size="256"/>
          <Column id="hgrn_team_nm" type="STRING" size="256"/>
          <Column id="hgrn_team_cd" type="STRING" size="256"/>
          <Column id="alct_fg" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_tmp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="targetlistid_old" type="STRING" size="256"/>
          <Column id="methodcd_old" type="STRING" size="256"/>
          <Column id="mthdcntid_old" type="STRING" size="256"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="cmpg_nm" type="STRING" size="256"/>
          <Column id="cmpg_expi" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd" type="STRING" size="256"/>
          <Column id="cmpg_typ_nm" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_cd" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_nm" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_cd" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_nm" type="STRING" size="256"/>
          <Column id="old_campaignstatecd" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_cd" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_nm" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="invt_cnts_id" type="STRING" size="256"/>
          <Column id="cmpg_stt_dt" type="STRING" size="256"/>
          <Column id="cmpg_end_dt" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="assignnum" type="STRING" size="256"/>
          <Column id="invt_cnts_nm" type="STRING" size="256"/>
          <Column id="trgt_list_nm" type="STRING" size="256"/>
          <Column id="modifyfg" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="fileIds" type="STRING" size="256"/>
          <Column id="initialFiles" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd2" type="STRING" size="256"/>
          <Column id="cmpg_typ_nm2" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgInvtMthdCd_srch" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgPranChnlCd_srch" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_methodcdList_bak" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="reset" loadfiltermode="reset" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgTypCdList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="hrch_typ_cd" type="STRING" size="256"/>
          <Column id="hgrn_hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd_nm" type="STRING" size="256"/>
          <Column id="hrch_cd_lvl_cnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt_assign" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
          <Column id="sub_trgt_list_id" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_assign" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="team_nm" type="STRING" size="256"/>
          <Column id="team_cd" type="STRING" size="256"/>
          <Column id="cnsr_id" type="STRING" size="256"/>
          <Column id="user_nm" type="STRING" size="256"/>
          <Column id="assignnum" type="STRING" size="256"/>
          <Column id="st10" type="STRING" size="256"/>
          <Column id="st20" type="STRING" size="256"/>
          <Column id="st30" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="totalassignnum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_assignData" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="team_nm" type="STRING" size="256"/>
          <Column id="team_cd" type="STRING" size="256"/>
          <Column id="cnsr_id" type="STRING" size="256"/>
          <Column id="user_nm" type="STRING" size="256"/>
          <Column id="assignnum" type="STRING" size="256"/>
          <Column id="st10" type="STRING" size="256"/>
          <Column id="st20" type="STRING" size="256"/>
          <Column id="st30" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="totalassignnum" type="STRING" size="256"/>
          <Column id="Column0" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt_assignData" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_tmp_assign" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="team_nm" type="STRING" size="256"/>
          <Column id="team_cd" type="STRING" size="256"/>
          <Column id="cnsr_id" type="STRING" size="256"/>
          <Column id="user_nm" type="STRING" size="256"/>
          <Column id="assignnum" type="STRING" size="256"/>
          <Column id="st10" type="STRING" size="256"/>
          <Column id="st20" type="STRING" size="256"/>
          <Column id="st30" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="totalassignnum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_selectUser" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="user_id" type="STRING" size="256"/>
          <Column id="user_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileParam" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="rltn_item_id" type="STRING" size="256"/>
          <Column id="rltn_tbl_nm" type="STRING" size="256"/>
          <Column id="atch_typ_cd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cdSet" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_tmp_sub" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_onrowposchanged"/>
      <Dataset id="ds_inqCndt_sub" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_assignum" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="xRowStatusType" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="assignum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_tmp_assignum" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_onrowposchanged"/>
      <Dataset id="ds_inqCndt_assignum" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="sub_trgt_list_id" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgPranChnlCd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgPrgrStatCd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgDivCd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="hrch_typ_cd" type="STRING" size="256"/>
          <Column id="hgrn_hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd_nm" type="STRING" size="256"/>
          <Column id="hrch_cd_lvl_cnt" type="STRING" size="256"/>
          <Column id="hrch_adtl_cd" type="STRING" size="256"/>
          <Column id="hrch_adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpg" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="cmpg_div_cd" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_cd" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_cd" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd" type="STRING" size="256"/>
          <Column id="cmpg_nm" type="STRING" size="256"/>
          <Column id="cmpg_expi" type="STRING" size="256"/>
          <Column id="cmpg_stt_dt" type="STRING" size="256"/>
          <Column id="cmpg_end_dt" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_cd" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="rgsr_id" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_id" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_nm" type="STRING" size="256"/>
          <Column id="cmpg_div_nm" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_nm" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_nm" type="STRING" size="256"/>
          <Column id="trgt_list_nm" type="STRING" size="256"/>
          <Column id="old_campaignstatecd" type="STRING" size="256"/>
          <Column id="modifyfg" type="STRING" size="256"/>
          <Column id="cmpg_prfm_team_cd" type="STRING" size="256"/>
          <Column id="cmpg_prfm_team_nm" type="STRING" size="256"/>
          <Column id="hgrn_team_nm" type="STRING" size="256"/>
          <Column id="hgrn_team_cd" type="STRING" size="256"/>
          <Column id="alct_fg" type="STRING" size="256"/>
          <Column id="old_trgt_list_id" type="STRING" size="256"/>
          <Column id="trgt_list_chng_fg" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_subTrgtList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="hgrn_team_nm" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="sub_trgt_list_id" type="STRING" size="256"/>
          <Column id="sub_trgt_list_nm" type="STRING" size="256"/>
          <Column id="sub_trgt_list_expi" type="STRING" size="256"/>
          <Column id="invt_cnts_id" type="STRING" size="256"/>
          <Column id="cmpg_prfm_team_cd" type="STRING" size="256"/>
          <Column id="trgt_list_extc_typ_cd" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="dfct_data_cnt" type="STRING" size="256"/>
          <Column id="rgsr_id" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_id" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="hgrn_team_cd" type="STRING" size="256"/>
          <Column id="team_nm" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_cd" type="STRING" size="256"/>
          <Column id="invt_cnts_nm" type="STRING" size="256"/>
          <Column id="trgt_list_extc_typ_nm" type="STRING" size="256"/>
          <Column id="delete_fg" type="STRING" size="256"/>
          <Column id="assignnum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_teamCd01" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="team_cd" type="STRING" size="6"/>
          <Column id="team_nm" type="STRING" size="50"/>
          <Column id="hgrn_team_cd" type="STRING" size="6"/>
          <Column id="cntr_cd" type="STRING" size="6"/>
          <Column id="team_lvl_cnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_teamCd02" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="team_cd" type="STRING" size="6"/>
          <Column id="team_nm" type="STRING" size="50"/>
          <Column id="hgrn_team_cd" type="STRING" size="6"/>
          <Column id="cntr_cd" type="STRING" size="6"/>
          <Column id="team_lvl_cnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_teamCd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="team_cd" type="STRING" size="6"/>
          <Column id="team_nm" type="STRING" size="50"/>
          <Column id="hgrn_team_cd" type="STRING" size="6"/>
          <Column id="team_lvl_cnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/***************************************************************************
 * Program ID    : PS220100.xfdl
 * Program Name  : 우수상담사례 수정
 * Author        : 정 훈
 * Created On    : 2016.03.14
 * 개    요 	 :
 *
 * =========================================================================
 * 변경일자     수정자       내    용
 * =========================================================================
 * 2016.03.14    정   훈      최초작성
 
 **************************************************************************/


/********************************************************************************************/
/* 1. Include Library include                                                               */
/********************************************************************************************/
include "LIB::lib_All.xjs";


/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트,전역변수,초기화) 처리                         	*/
/********************************************************************************************/
//전역변수
var total_count = 0;
var total_count_assing = 0;
var checkUserIds = "";
var gv_totalassignnum = 0;
var gv_alct_count = 0;


//온로드
function PS220100_onload(obj:Form, e:LoadEventInfo)
{
	gfn_getList("cd","CAM050,CAM060,CAM120,CAM070","fn_callBack",null,"srchCdSet","ds_cdSet");   // 코드셋
	gfn_getList("hrchCd","CAM990","fn_callBack",null,"srchHrchCdSet");   //캠페인유형(계층유형코드)
	gfn_getList("teamCd","", "fn_callBack", null, null, "ds_teamCd"); //팀코드조회
	gfn_createPagingDataset(obj); // 페이징처리 위한 데이터셋 설정
	fn_commSearch(gfn_getCommTypeInit());//조회
}

//초기화
function fn_init()
{
	cbo_srch_cmpg_div_cd.index = 0; //캠페인 구분코드
	cbo_srch_cmpg_pran_chnl_cd.index = 0; //실행태널 코드
	cbo_srch_cmpg_invt_mthd_cd.index =0; //조사방법코드
	edt_srch_cmpg_nm.value = null;
	cbo_srch_cmpg_prgr_stat_cd.index = 0; //캠페인상태코드
}
/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
//콜백
function fn_callBack(svcid, errcd, errmsg) {
    if (errcd != 0) {
		if(errcd == -2){
			fn_commSearch_assign(gfn_getCommTypeInit()); //상담사 배정리스트 검색
		}
		
		trace("errcd  :   " +errcd +"   \n errmsg   :   "+ errmsg +"    \n svcid   :   "+ svcid)
		trace(errcd);
		
		return false;
		
	} else {
		switch (svcid) {
		    case "srchCdSet": //코드셋
				gfn_getCode("CAM050", "ALL", ds_cmpgPrgrStatCd_srch,ds_cdSet); //캠페인상태코드
				gfn_getCode("CAM050", "SELECT", ds_cmpgPrgrStatCd,ds_cdSet); //캠페인상태코드
				cbo_srch_cmpg_prgr_stat_cd.index = 0;
				
				gfn_getCode("CAM060", "ALL", ds_cmpgInvtMthdCd_srch,ds_cdSet); //조사방법코드
				cbo_srch_cmpg_invt_mthd_cd.index =0;
				
				gfn_getCode("CAM120", "ALL", ds_cmpgPranChnlCd_srch,ds_cdSet); //캠페인실행채널코두
				gfn_getCode("CAM120", "", ds_cmpgPranChnlCd,ds_cdSet); //캠페인실행채널코두
				cbo_srch_cmpg_pran_chnl_cd.index = 0;
		    break;
		    
		    case "srchHrchCdSet": //캠페인유형 계층코드
				gfn_getHrchCodeLoad("","ALL",ds_cmpgDivCd_srch,null,1);
				gfn_getHrchCodeLoad("","SELECT",ds_cmpgDivCd,null,1);
				cbo_srch_cmpg_div_cd.index = 0;
		    break;
		    
		    case "selectTeamCode": //팀코드 조회
				gfn_getTeamCodeLoad("", "SELECT", ds_teamCd01, ds_teamCd, "1");
			break;
		    
		    case "srchCmpg" : //캠페인 조회
				gfn_appendSearchDs(ds_list_cmpg, ds_list_tmp); // 조회된 결과를 실제보여줄 데이타셋으로 Append처리
				gfn_setTotalRowCount(ds_list_cmpg, sta_totalCnt, total_count); // 페이지건수 표출
				fn_postSearch();
		    break;
		    
		    case "saveCmpg": //캠페인 저장 
				fn_commSearch(gfn_getCommTypeInit());//조회
		    break;
		    
		    case "deleteCmpg" : //캠페인 삭제
				fn_commSearch(gfn_getCommTypeInit());//조회
		    break;
		    
		    case "srchAssign" : //할당 상담사 조회
				gfn_appendSearchDs(ds_list_assign, ds_list_tmp_assign); // 조회된 결과를 실제보여줄 데이타셋으로 Append처리
				gfn_setTotalRowCount(ds_list_assign, sta_totalCnt_assign, total_count_assing); // 페이지건수 표출
				fn_postSearch_assign();
		    break;
		    
		    case "deleteCmpgAlct" :// 상담사 삭제
				fn_commSearch_assign(gfn_getCommTypeInit());
		    break;
		    
		    case "saveCmpgAssignData" : //할당
				checkUserIds = "";
				edt_rdasnum.value = null;
				edt_rdwdnum.value = null;
				ds_list_subTrgtList.setColumn(ds_list_subTrgtList.rowposition,'assignnum',gv_totalassignnum);
				if(parseInt(gv_alct_count)>0){
					ds_list_cmpg.setColumn(ds_list_cmpg.rowposition,'alct_fg','Y');
					ds_cmpg.setColumn(ds_cmpg.rowposition,'alct_fg','Y');
				}else{
					ds_list_cmpg.setColumn(ds_list_cmpg.rowposition,'alct_fg','N');
					ds_cmpg.setColumn(ds_cmpg.rowposition,'alct_fg','N');
				}
				fn_commSearch_assign(gfn_getCommTypeInit());
		    break;
		}
	}
}

/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/
//조회전 처리 조회조건셋팅
function fn_preSearch(sType)
{
	if (sType == gfn_getCommTypeInit())
	{
		// 조회조건 및 default 정렬
		ds_list_cmpg.keystring = ""; // 정렬컬럼 초기화
		
		ds_inqCndt.clearData();
		ds_inqCndt.addRow();
		
		//정훈 소스변경 업체간 검색조건 변경
		var sUserAthrCd =gds_UserInfo.getColumn(gds_UserInfo.rowposition,'athr_cd');
		if(sUserAthrCd.substr(0,2)=='TM'){
			ds_inqCndt.setColumn(0, "cmpg_prfm_team_cd", gds_UserInfo.getColumn(gds_UserInfo.rowposition,'team_cd'));
		}
		ds_inqCndt.setColumn(0, "cmpg_nm", edt_srch_cmpg_nm.value);
		ds_inqCndt.setColumn(0, "cmpg_pran_chnl_cd", cbo_srch_cmpg_pran_chnl_cd.value);
		ds_inqCndt.setColumn(0, "cmpg_invt_mthd_cd", cbo_srch_cmpg_invt_mthd_cd.value);
		ds_inqCndt.setColumn(0, "cmpg_prgr_stat_cd", cbo_srch_cmpg_prgr_stat_cd.value);
		ds_inqCndt.setColumn(0, "cmpg_div_cd", cbo_srch_cmpg_div_cd.value);
		
		
		ds_inqCndt.setColumn(0, "orderBy", "amnt_dttm");
		ds_inqCndt.setColumn(0, "orderDirection", "desc");
	}
	return true;
}

//삭제전 처리
function fn_preDelete(){
	if(ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_prgr_stat_cd')!=10 && ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_prgr_stat_cd')!=30){
		alert("진행상태가 대기,중지일 경우에만 삭제 가능합니다.");
		return false;
	}
	
	if(confirm("해당 정보를 삭제하시겠습니까?")) {
		return true;
	}else{
		return false;
	}
}

//저장전 처리
function fn_preSaveData(){

	if(gfn_isNull(edt_cmpg_nm.value)){
		alert("캠페인명을 입력하세요.");
		return false;
	}
		
	if(gfn_isNull(cal_cmpg_stt_dt.value)){
		alert("수행 시작일을 입력해 주세요");
		return false;
	}
	

	if(ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_id') == null){
		if(cal_cmpg_stt_dt.value < gfn_getToday()){
			alert("수행 시작일은 오늘 이전으로 선택하실 수 없습니다.");
			cal_cmpg_stt_dt.value = gfn_getToday();
			return false;
		}
	}
	
	if(gfn_isNull(cal_cmpg_end_dt.value)){
		alert("수행 종료일을 입력해 주세요");
		return false;
	}
	
	
	if(cal_cmpg_end_dt.value < gfn_getToday()){
		alert("수행 종료일은 오늘 이전으로 선택하실 수 없습니다.");
		cal_cmpg_end_dt.value = gfn_getToday();
		return false;
	}
	
	
	if(cal_cmpg_stt_dt.value > cal_cmpg_end_dt.value){
		alert("시작일자 종료일자를 확인하세요");
		return false;
	}
	
	if(gfn_isNull(cbo_cmpg_pran_chnl_cd.value)){
		alert("실행채널을 선택하세요.");
		return false;
	}
		
	if(gfn_isNull(cbo_cmpg_prgr_stat_cd.value)){
		alert("진행상태를 선택하세요.");
		return false;
	}
		
	if(gfn_isNull(edt_trgt_list_nm.value)){
		alert("대상목록을 선택하세요.");
		return false;
	}	
	
	if(gfn_isNull(cbo_cmpg_div_cd.value)){
		alert("캠페인 구분을 선택하세요.");
		return false;
	}	
	
	if(gfn_isNull(cbo_cmpg_prfm_team_cd.value)){
		alert("수행그룹을 선택하세요.");
		return false;
	}
	
	if(gfn_isNull(cbo_cmpg_prfm_team_cd2.value)){
		alert("수행그룹을 선택하세요.");
		return false;
	}
	
	if(cbo_cmpg_prgr_stat_cd.value == 10 && ds_cmpg.getColumn(ds_cmpg.rowposition,'alct_fg')=='N' && ds_cmpg.getColumn(ds_cmpg.rowposition,'old_trgt_list_id') != null){ //대기이고 할당안됬을때
		if(ds_cmpg.getColumn(ds_cmpg.rowposition,'old_trgt_list_id')==ds_cmpg.getColumn(ds_cmpg.rowposition,'trgt_list_id')){
			ds_cmpg.setColumn(ds_cmpg.rowposition,'trgt_list_chng_fg','N');
		}else{
			ds_cmpg.setColumn(ds_cmpg.rowposition,'trgt_list_chng_fg','Y');
		}
	}else{
		ds_cmpg.setColumn(ds_cmpg.rowposition,'trgt_list_chng_fg','N');
	}
	return true;
}

//조회전 처리 조회조건셋팅
function fn_preSearch_assign(sType)
{
	if (sType == gfn_getCommTypeInit())
	{
		// 조회조건 및 default 정렬
		ds_list_assign.keystring = ""; // 정렬컬럼 초기화
		
		ds_inqCndt_assign.clearData();
		ds_inqCndt_assign.addRow();
		
		//나중에 변경
		ds_inqCndt_assign.setColumn(0, "cmpg_id", ds_list_cmpg.getColumn(ds_list_cmpg.rowposition,'cmpg_id'));
		ds_inqCndt_assign.setColumn(0, "trgt_list_id", ds_list_cmpg.getColumn(ds_list_cmpg.rowposition,'trgt_list_id'));
	}
	
	return true;
}

//조회전 처리 조회조건셋팅
function fn_preSearch_assign(sType)
{
	if (sType == gfn_getCommTypeInit())
	{
		// 조회조건 및 default 정렬
		ds_list_assign.keystring = ""; // 정렬컬럼 초기화
		
		ds_inqCndt_assign.clearData();
		ds_inqCndt_assign.addRow();
		
		ds_inqCndt_assign.setColumn(0, "cmpg_id", ds_list_cmpg.getColumn(ds_list_cmpg.rowposition,'cmpg_id'));
		ds_inqCndt_assign.setColumn(0, "trgt_list_id", ds_list_cmpg.getColumn(ds_list_cmpg.rowposition,'trgt_list_id'));
		ds_inqCndt_assign.setColumn(0, "sub_trgt_list_id", ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition,'sub_trgt_list_id'));
		
	}
	
	return true;
}

//삭제전 처리
function fn_preDelete_cmpgAlct(){
	if(confirm("선택된 상담사을 삭제하시겠습니까?")) {
		return true;
	}else{
		return false;
	}
}

//할당전 체크
function fn_preAssignData(mode,selectedAll){
	
	var usercnt = ds_list_assign.rowcount;
	var totalassignnum = ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition,'assignnum');
	var cust_data_extc_cnt = ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition,'cust_data_extc_cnt'); 
	if (usercnt == 0) {
		alert("상담사을 추가하세요.");
		return false;
	}
	
	if((mode == "RDAS" || mode == "RDWD") && (selectedAll != null && selectedAll== false)){
		if(!gfn_chkSelectValidation(ds_list_assign)){
			alert("상담사 목록을 선택하세요.");
			return false;
		}
		
		if (mode == "RDAS") {//수치할당
			if(cust_data_extc_cnt == totalassignnum){
				alert("대상고객이 모두 배정되어 있습니다.");
				return false;
			}
			
			if (edt_rdasnum.value == null || edt_rdasnum.value == "0") {
				alert("할당할 건수를 입력하십시요.");
				return false;
			}
		}else if (mode == "RDWD") { //수치회수
			if (totalassignnum == 0) {
				alert("배정된 대상고객이 없습니다.");
				return;
			}
			if (edt_rdwdnum.value == null || edt_rdwdnum.value == "0") {
				alert("회수할 건수를 입력하십시요.");
				return;
			}
		}
		
	}else {
		if (mode == "EQAS" && cust_data_extc_cnt == totalassignnum) { //균등할당
			alert("대상고객이 모두 배정되어 있습니다.");
			return false;
		}
		
		if (mode == "EQWD" && totalassignnum == 0) { //선택회수
			alert("배정된 대상고객이 없습니다.");
			return;
		}
		
		if(selectedAll != null && selectedAll== false){
			if(!gfn_chkSelectValidation(ds_list_assign)){
				alert("상담사 목록을 선택하세요.");
				return false;
			}
		}
	}
	//user_id ,구분자로 변경
	if(selectedAll != null && selectedAll== false){//전체선택이 아닐때
		checkUserIds =  ""
		for(var i=ds_list_assign.rowcount-1; i>=0; i--) {
			if(ds_list_assign.getColumn(i, "_chk") == 1) {
				if (checkUserIds == "") {
					checkUserIds = ds_list_assign.getColumn(i, "cnsr_id");
				} else {
					checkUserIds += "," + ds_list_assign.getColumn(i, "cnsr_id");
				}
			}
		}
	} else{//전체선택일때
		if(mode != "EQWD"){
			checkUserIds = fn_strChangeUserId(ds_list_assign);
		}else{
			checkUserIds = fn_strChangeUserId(ds_list_assign);
		}
	}
	return true;
}

/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
//조회
function fn_commSearch(sType)
{	
    if (!fn_preSearch(sType)) return false;
	
	// 호출 건수 설정 및 조회여부 설정
	if(!gfn_pageSearch(sType, ds_list_cmpg, sta_totalCnt, 100, total_count)) return; 
	
	var szSvcid       = "srchCmpg";
    var szController  = "/cmpg/cmpg/list";
    var szInDs        = "ds_input=ds_inqCndt";
    var szOutDs       = "ds_list_tmp=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//삭제
function fn_deleteData()
{
	 if (!fn_preDelete()) return false;
	 
	var szSvcid       = "deleteCmpg";
    var szController  = "/cmpg/cmpg/delete";
    var szInDs        = "ds_input=ds_cmpg";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback, false
    );
}

//저장
function fn_saveData(){
	if(!fn_preSaveData()) return false;
	
	var szSvcid       = "saveCmpg";
    var szController  = "/cmpg/cmpg/save";
    var szInDs        = "ds_input=ds_cmpg";
    var szOutDs       = "ds_cmpg=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//상담사 배정리스트 조회
function fn_commSearch_assign(sType)
{	
    if (!fn_preSearch_assign(sType)) return false;
	
	// 호출 건수 설정 및 조회여부 설정
	if(!gfn_pageSearch(sType, ds_list_assign, sta_totalCnt_assign, 500, total_count_assing)) return; 
	
	var szSvcid       = "srchAssign";
    var szController  = "/cmpg/cmpg-alct/list";
    var szInDs        = "ds_input=ds_inqCndt_assign";
    var szOutDs       = "ds_list_tmp_assign=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//상담사 배정리스트 삭제
function fn_deleteData_cmpgAlct()
{
	if (!fn_preDelete_cmpgAlct()) return false;
	
	// 삭제할 정보 PARAM로 처리
	var selectcheck = "";
	for(var i=ds_list_assign.rowcount-1; i>=0; i--) {
		if(ds_list_assign.getColumn(i, "_chk") == 1) {
			if (selectcheck == "") {
				selectcheck = ds_list_assign.getColumn(i, "cnsr_id");
			} else {
				selectcheck += "," + ds_list_assign.getColumn(i, "cnsr_id");
			}
		}
	}
	
	var szSvcid       = "deleteCmpgAlct";
    var szController  = "/cmpg/cmpg-alct/delete";
    var szInDs        = "";
    var szOutDs       = "";
    var szParam       = "cmpg_id="+gfn_trim(ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_id'))+" selectcheck="+selectcheck
                        +" sub_trgt_list_id="+ ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition,'sub_trgt_list_id')
                        +" trgt_list_id="+gfn_trim(ds_cmpg.getColumn(ds_cmpg.rowposition,'trgt_list_id'))
                        +" cmpg_typ_cd="+gfn_trim(ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_typ_cd'))
                        +" cmpg_div_cd="+gfn_trim(ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_div_cd'));
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

//할당
function fn_saveData_assignData(mode,selectedAll){
	
	if (!fn_preAssignData(mode,selectedAll)) return false;
	
	var szSvcid       = "saveCmpgAssignData";
    var szController  = "/cmpg/trgt-cust-alct/alct";
    var szInDs        = "";
    var szOutDs       = "";
    var szParam       = "cmpg_id="+gfn_trim(ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_id'))+" trgt_list_id="
					  + gfn_trim(ds_cmpg.getColumn(ds_cmpg.rowposition,'trgt_list_id'))+" mode="+mode
					  +" rdasnum="+edt_rdasnum.value+" selectcheck="+ checkUserIds+" rdwdnum="+edt_rdwdnum.value
					  +" sub_trgt_list_id="+ ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition,'sub_trgt_list_id')
					  +" cmpg_div_cd="+ gfn_trim(ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_div_cd'))
					  +" cmpg_typ_cd="+ gfn_trim(ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_typ_cd'));
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/
//조회 결과 
function fn_postSearch()
{
	if(ds_list_cmpg.rowcount < 1) {
		sta_totalCnt.text = "조회 결과가 없습니다.";
		fn_copyRow();
		fn_changeComponent("R"); //컴포넌트 셋팅
		ds_list_subTrgtList.clearData();
		ds_list_assign.clearData();
		fn_changeComponent_assign();
 	} else {
		fn_copyRow();
 		fn_changeComponent("R"); //컴포넌트 셋팅
 		ds_list_subTrgtList.clearData();
 		ds_list_assign.clearData();
 		fn_changeComponent_assign();
	}
	return;
}

//리스트 데이터셋 뷰 데이터셋에 카피
function fn_copyRow(){
	if(ds_list_cmpg.rowcount<1){
		ds_cmpg.clearData();
		ds_cmpg.addRow();
	}else{
		ds_cmpg.clearData();
		ds_cmpg.addRow();
		ds_cmpg.copyRow(ds_cmpg.rowposition,ds_list_cmpg,ds_list_cmpg.rowposition);
		
		//등록 수정일시 데이터타입에 맞게
		var rgsnDttmStr = edt_rgsn_dttm.value;
		edt_rgsn_dttm.value = gfn_strDttm(rgsnDttmStr);
			
		var amntDttmStr = edt_amnt_dttm.value;
		edt_amnt_dttm.value = gfn_strDttm(amntDttmStr);
	}
}

//버튼 AND 컴포넌트 변경함수
function fn_changeComponent(rMode){
	switch(rMode){
		case "R" : //읽기모드
		if(ds_list_cmpg.rowcount<1){
			btn_create.enable = true;
			btn_update.enable = false;
			btn_delete.enable = false;
			btn_subTrgtListPop.enable = false; // 서브타겟 조회버튼
			cbo_cmpg_pran_chnl_cd.value= null;
			cbo_cmpg_prgr_stat_cd.value = null;
			cbo_cmpg_div_cd.value = null;
			edt_trgt_list_team_nm.value= null;
			btn_custAlctMain.enable = false;
		}else{
			btn_create.enable = true;
			
			if(ds_list_cmpg.getColumn(ds_list_cmpg.rowposition,'cmpg_prgr_stat_cd')==40){ //진행상태 완료건인경우
				btn_update.enable = false;	
				btn_delete.enable = false;
				btn_custAlctMain.enable = false;
			}else{
				btn_update.enable = true;
				btn_custAlctMain.enable = true;
				if(ds_cmpg.getColumn(ds_cmpg.rowposition , 'modifyfg') == 'Y'){ //진행중인건이있을경우 삭제 x
				//소스변경 
				//변경자 : 정훈
				//변경이유 웹DB 추가에 따른 소스길이 간소화
					var sTrgtId = ds_cmpg.getColumn(ds_cmpg.rowposition , 'trgt_list_id');
					if((ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_typ_cd')== '4100' && ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_prfm_team_cd') =='T20300')&& (sTrgtId.substr(0,15)=='TAR999999999999')){
						btn_delete.enable = false;
					}else{
						btn_delete.enable = true;
					}
				}else{
					btn_delete.enable = false;
				}
			}
			
			
			
			if(ds_list_cmpg.getColumn(ds_list_cmpg.rowposition, 'cmpg_prfm_team_nm') == null){
				edt_trgt_list_team_nm.value= null;				
			}else{
				//수행부서
				edt_trgt_list_team_nm.value = ds_list_cmpg.getColumn(ds_list_cmpg.rowposition, 'hgrn_team_nm') + ' > '+ 
									ds_list_cmpg.getColumn(ds_list_cmpg.rowposition, 'cmpg_prfm_team_nm');
			}
			
	
			btn_subTrgtListPop.enable = true; // 서브타겟 조회버튼
		}
		Static01.visible = false;
		
		btn_create.visible = true;
		btn_update.visible = true;
		btn_delete.visible = true;
		
		btn_save.visible = false;
		btn_cancel.visible = false;
		
		//캠페인명
		edt_cmpg_nm.readonly = true;
		
		//수행일자
		cal_cmpg_stt_dt.enable = false;
		cal_cmpg_end_dt.enable = false;
		
		//실행채널
		cbo_cmpg_pran_chnl_cd.readonly = true;
		
		//진행상태
		cbo_cmpg_prgr_stat_cd.readonly = true;
		cbo_cmpg_prgr_stat_cd.enable = true;
		
		//대상목록
		edt_trgt_list_nm.readonly = true;
		edt_trgt_list_nm.enable = true;
		btn_open_trgt_list_Pop.visible = false;
		
		//캠페인설명
		tea_cmpg_expi.readonly = true;
		
		//캠페인구분
		cbo_cmpg_div_cd.readonly = true;
		cbo_cmpg_div_cd.enable = true;
		
		//수행부서
		cbo_cmpg_prfm_team_cd.visible = false;
		cbo_cmpg_prfm_team_cd2.visible = false;
		edt_trgt_list_team_nm.visible = true;
		//edt_trgt_list_team_nm.move(stc_team_trgt_list.position.right+1,stc_team_trgt_list.position.top+3);
		edt_trgt_list_team_nm.readonly= true;
		break;
		
		case "C" : //신규모드
		//버튼
		btn_create.visible = false;
		btn_update.visible = false;
		btn_delete.visible = false;
		
		btn_save.move(btn_update.position.left , btn_update.position.top);
		btn_cancel.move(btn_delete.position.left , btn_delete.position.top);
		
		btn_save.visible = true;
		btn_cancel.visible = true;
		
		btn_subTrgtListPop.enable =false; // 서브타겟 조회버튼
		Static01.visible = false;
		
		//캠페인 명
		edt_cmpg_nm.readonly = false;
		
		//수행일자
		cal_cmpg_stt_dt.enable = true;
		cal_cmpg_end_dt.enable = true;
		
		//실행채널
		cbo_cmpg_pran_chnl_cd.readonly = true;
		cbo_cmpg_pran_chnl_cd.index = 0;
		
		//진행상태
		cbo_cmpg_prgr_stat_cd.readonly = false;
		cbo_cmpg_prgr_stat_cd.enable = false;
		cbo_cmpg_prgr_stat_cd.index = 1;
		
		//대상목록
		edt_trgt_list_nm.readonly = false;
		edt_trgt_list_nm.enable = false;
		btn_open_trgt_list_Pop.visible = true;
		
		//캠페인설명
		tea_cmpg_expi.readonly = false;
		
		//캠페인구분
		cbo_cmpg_div_cd.readonly = false;
		cbo_cmpg_div_cd.index = 0;
		cbo_cmpg_div_cd.enable = false;
		
		//수행부서
		cbo_cmpg_prfm_team_cd.visible = true;
		cbo_cmpg_prfm_team_cd.index = 0;
		cbo_cmpg_prfm_team_cd2.visible = true;
		cbo_cmpg_prfm_team_cd2.index = 0;
		edt_trgt_list_team_nm.visible =false;
		
		break;
		
		case "U" :// 수정모드
		//버튼
		btn_create.visible = false;
		btn_update.visible = false;
		btn_delete.visible = false;
		
		btn_save.move(btn_update.position.left , btn_update.position.top);
		btn_cancel.move(btn_delete.position.left , btn_delete.position.top);
		
		btn_save.visible = true;
		btn_cancel.visible = true;
		
		btn_subTrgtListPop.enable =false; // 서브타겟 조회버튼
		Static01.visible = false;
		
		//캠페인 명
		edt_cmpg_nm.readonly = false;
		if(cbo_cmpg_prgr_stat_cd.value == 10 && ds_cmpg.getColumn(ds_cmpg.rowposition,'alct_fg')=='N'){ //대기이고 할당안됬을때
			//대상목록
			edt_trgt_list_nm.readonly = false;
			edt_trgt_list_nm.enable = false;
			btn_open_trgt_list_Pop.visible = true;
		}
		//수행일자
		cal_cmpg_stt_dt.enable = true;
		cal_cmpg_end_dt.enable = true;
		
		//진행상태
		cbo_cmpg_prgr_stat_cd.readonly = false;
		cbo_cmpg_prgr_stat_cd.enable = true;
		
		//캠페인설명
		tea_cmpg_expi.readonly = false;
		
		cbo_cmpg_prfm_team_cd.visible = true;
		
		cbo_cmpg_prfm_team_cd2.visible = true;
		gfn_getTeamCodeLoad(cbo_cmpg_prfm_team_cd.value, "SELECT", ds_teamCd02, ds_teamCd);
		edt_trgt_list_team_nm.visible =false;
		break;
	}	
}
//할당 컴포넌트 변경
function fn_changeComponent_assign(sParam){
	if(edt_sub_trgt_list_nm.value == null || sParam == 'U'){//서브타겟 선택안됬을때 
		btn_addCnsr.enable = false;
		btn_deleteCnsr.enable = false;
		btn_assignEqas.enable =false;//균등할당
		edt_rdasnum.enable = false;
		btn_assignRdas.enable = false;//수치할당
		btn_assignEqwd.enable = false;//선택회수
		edt_rdwdnum.enable = false;
		btn_assignRdwd.enable = false;//수치회수
		//btn_custAlct.enable = false; // 고객별할당
		btn_resrch.enable = false;
		grd_list_cmpgAssign.enable =false;
	}else{
		grd_list_cmpgAssign.enable = true;
		btn_resrch.enable = true;
		if(ds_list_assign.rowcount < 1){
			btn_addCnsr.enable = true;
			btn_deleteCnsr.enable = false;
			btn_assignEqas.enable =false;//균등할당
			edt_rdasnum.enable = false;
			btn_assignRdas.enable = false;//수치할당
			btn_assignEqwd.enable = false;//선택회수
			edt_rdwdnum.enable = false;
			btn_assignRdwd.enable = false;//수치회수
			//btn_custAlct.enable = false; // 고객별할당
		}else{
			var v_cmpgPrgrStatCd = ds_list_cmpg.getColumn(ds_list_cmpg.rowposition,'cmpg_prgr_stat_cd');
			if(v_cmpgPrgrStatCd=='10'){//대기
				btn_addCnsr.enable = true;
				btn_deleteCnsr.enable = true;
				btn_assignEqas.enable =true;//균등할당
				edt_rdasnum.enable = true;
				btn_assignRdas.enable = true;//수치할당
				btn_assignEqwd.enable = true;//선택회수
				edt_rdwdnum.enable = true;
				btn_assignRdwd.enable = true;//수치회수
				//btn_custAlct.enable = true; // 고객별할당
			}else if(v_cmpgPrgrStatCd == '20'){//진행중
				btn_addCnsr.enable = true;
				btn_deleteCnsr.enable = true;
				btn_assignEqas.enable =true;//균등할당
				edt_rdasnum.enable = true;
				btn_assignRdas.enable = true;//수치할당
				btn_assignEqwd.enable = false;//선택회수
				edt_rdwdnum.enable = false;
				btn_assignRdwd.enable = false;//수치회수
				//btn_custAlct.enable = true; // 고객별할당
			}else if(v_cmpgPrgrStatCd == '30'){//중지
				btn_addCnsr.enable = true;
				btn_deleteCnsr.enable = true;
				btn_assignEqas.enable =true;//균등할당
				edt_rdasnum.enable = true;
				btn_assignRdas.enable = true;//수치할당
				btn_assignEqwd.enable = true;//선택회수
				edt_rdwdnum.enable = true;
				btn_assignRdwd.enable = true;//수치회수
				//btn_custAlct.enable = true; // 고객별할당
			}else{
				btn_addCnsr.enable = false;
				btn_deleteCnsr.enable = false;
				btn_assignEqas.enable =false;//균등할당
				edt_rdasnum.enable = false;
				btn_assignRdas.enable = false;//수치할당
				btn_assignEqwd.enable = false;//선택회수
				edt_rdwdnum.enable = false;
				btn_assignRdwd.enable = false;//수치회수
				//btn_custAlct.enable = false; // 고객별할당
			}
		}
	}
}

// 상담사배치리스트  조회
function fn_postSearch_assign()
{
    fn_createdUserDs();
	var cust_data_extc_cnt = ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition,"cust_data_extc_cnt");
	var totalassignnum = ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition,"assignnum")
	Static01.visible = true;
	Static01.text = "<fs v='9'><fc v='#333333ff'><b v='true'>대상 : </fs></fc></b>";
	Static01.text +=  "<fs v='9'>"+cust_data_extc_cnt+"</fs>"; 
	Static01.text += "<fs v='9'><fc v='#333333ff'> 건</fs></fc>";
	Static01.text += "<fs v='9'><fc v='#333333ff'><b v='true'> 배정 : </fs></fc></b>";
	Static01.text +=  "<fs v='9'>"+totalassignnum+"</fs>"; 
	Static01.text += "<fs v='9'><fc v='#333333ff'> 건</fs></fc>";
	Static01.text += "<fs v='9'><fc v='#333333ff'><b v='true'> 미배정 : </fs></fc></b>";
	Static01.text +=  "<fs v='9'>"+(cust_data_extc_cnt-totalassignnum)+"</fs>"; 
	Static01.text += "<fs v='9'><fc v='#333333ff'> 건</fs></fc>";
	
	fn_changeComponent_assign();
	return;
}

//팝업창에 던질 Userid String으로 만들기
function fn_strChangeUserId(inDs){
	var userIds = "";
	
	for(var i=0; inDs.rowcount > i; i++) {
		if (userIds == "") {
			userIds = inDs.getColumn(i, "cnsr_id");
		} else {
			userIds += "," + inDs.getColumn(i, "cnsr_id");
		}
	}
	return userIds;
}

//상담사 목록만들기
function fn_createdUserDs(){
	ds_selectUser.clearData();
	ds_selectUser.addRow();
	ds_selectUser.setColumn(ds_selectUser.rowposition,'user_nm','전체');
	
	if(ds_list_assign.rowcount >0){
		for(var i=0; ds_list_assign.rowcount > i; i++){
			ds_selectUser.addRow();
			ds_selectUser.copyRow(ds_selectUser.rowposition,ds_list_assign,i,"user_id=cnsr_id,user_nm=user_nm");
		}
	}
}

/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
//버튼클릭이벤트
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj){
		case btn_search : //조회버튼
			fn_commSearch(gfn_getCommTypeInit());//조회
		break;
		
		case btn_init : //초기화 버튼
			fn_init();
		break;
		
 		case btn_create: //신규버튼클릭
			ds_cmpg.clearData();
			ds_cmpg.addRow();
			fn_changeComponent("C"); //컴포넌트 셋팅
			ds_list_subTrgtList.clearData();
			ds_list_assign.clearData();
			fn_changeComponent_assign();
 		break;
 		
 		case btn_update: //수정버튼 클릭
			ds_cmpg.setColumn(ds_cmpg.rowposition, 'old_trgt_list_id', ds_cmpg.getColumn(ds_cmpg.rowposition, 'trgt_list_id')); // old_trgt_list setting
			fn_changeComponent("U"); //컴포넌트 셋팅
			//ds_list_subTrgtList.clearData();
			//ds_list_assign.clearData();
			fn_changeComponent_assign('U');
 		break;
 		
 		case btn_delete://삭제버튼 클릭
			fn_deleteData();//트랜잭션 호출
 		break;
 		
 		case btn_save: //저장버튼 클릭
			fn_saveData();
 		break;
 		
 		case btn_cancel: //취소버튼 클릭
			fn_copyRow(); // 상세부에 데이터셋 카피
			fn_changeComponent("R"); //컴포넌트 셋팅
			fn_changeComponent_assign();
 		break;
 		
 		case btn_open_trgt_list_Pop : //대상목록 팝업
			var sPrmr = {trgt_list_typ_cd:ds_cmpg.getColumn(ds_cmpg.rowposition, "cmpg_pran_chnl_cd")};	
			gfn_diaLog("대상목록 선택", -1, -1, 719, 388, "PS220000::PS220101.xfdl", false, sPrmr, false, true, true, null ,null ,true);
 		break;
 		
 		case btn_subTrgtListPop : //서브타겟리스트 오픈팝
			var sPrmr = {trgt_list_id:ds_cmpg.getColumn(ds_cmpg.rowposition, "trgt_list_id"),page_url:"PS220100"};	
			gfn_diaLog("서브타겟리스트 선택", -1, -1, 719, 388, "PS220000::PS220101_01.xfdl", false, sPrmr, false, true, true, null ,null ,true);
 		break;
 		
 		case btn_addCnsr ://상담사추가
 		    //ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition, 'cmpg_prfm_team_cd')  원본
 		    //ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_prfm_team_cd') 변경
			var sPrmr = {user_id:fn_strChangeUserId(ds_list_assign),cmpg_prfm_team_cd:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_prfm_team_cd'),
						sub_trgt_list_id:ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition,"sub_trgt_list_id"),
						hgrn_team_cd:ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition,"hgrn_team_cd"), cmpg_id:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_id')};	
			gfn_diaLog("대상목록 선택", -1, -1, 855, 541, "PS220000::PS220106.xfdl", false, sPrmr, false, true, true, null ,null ,true);
 		break;
 		
 		case btn_deleteCnsr://상담사 삭제
			if(!gfn_chkSelectValidation(ds_list_assign)){ 
				alert("삭제할 상담사를 선택하세요.")
				return false;
			}else{
				fn_deleteData_cmpgAlct();
			}
 		break;
		
		case btn_assignEqas: // 균등할당
		    if(confirm("균등할당 하시겠습니까?")){
				fn_saveData_assignData('EQAS',false);
			}
 		break;
 		
 		case btn_assignRdas://수치할당
			if(confirm("수치할당 하시겠습니까?")){
				fn_saveData_assignData('RDAS',false);
			}
 		break;
 		
 		case btn_assignEqwd://선택회수 
			 if(confirm("선택회수 하시겠습니까?")){
				fn_saveData_assignData('EQWD',false);
			 }
 		break;
 		
 		case btn_assignRdwd: //수치회수
			if(confirm("수치회수 하시겠습니까?")){
				fn_saveData_assignData('RDWD',false);
			}
 		break;
 		
 		case btn_resrch : //새로고침
 		fn_commSearch_assign(gfn_getCommTypeInit());
 		break;
 		
//  		case btn_custAlct: //고객별 할당
// 			var sPrmr = {cmpg_id:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_id') 
// 						 , cmpg_div_cd:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_div_cd') 
// 						 , cmpg_typ_cd:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_typ_cd') 
// 			             , sub_trgt_list_id:ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition,"sub_trgt_list_id")
// 			            };	
// 			gfn_diaLog("고객별 할당", -1, -1, 988, 794, "PS220000::PS22080001.xfdl", false, sPrmr, false, true, true, null ,null ,true);
//  		break;
 		
 		case btn_custAlctMain: //고객별할당 메인
			var sPrmr = {cmpg_id:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_id') 
						 , cmpg_div_cd:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_div_cd') 
						 , cmpg_typ_cd:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_typ_cd') 
			             , trgt_list_id:ds_cmpg.getColumn(ds_cmpg.rowposition, "trgt_list_id")
			             , cmpg_prfm_team_cd:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_prfm_team_cd')
			             , cmpg_nm:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_nm')
			             };	
			
			if (ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_typ_cd') == '4101'){ 
				gfn_diaLog("고객별 할당(NEWTYPE)", -1, -1, 1200, 794, "PS220000::PS22080002.xfdl", false, sPrmr, false, true, true, null ,null ,true);
			} else if (ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_typ_cd') == '4102'){ 
				gfn_diaLog("고객별 할당(DIRECT)", -1, -1, 1200, 794, "PS220000::PS22080003.xfdl", false, sPrmr, false, true, true, null ,null ,true);
			} else if (ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_typ_cd') == '4103'){ 
				gfn_diaLog("고객별 할당(U+)", -1, -1, 1200, 794, "PS220000::PS22080004.xfdl", false, sPrmr, false, true, true, null ,null ,true);
			} else if (ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_typ_cd') == '1701'){ 
				gfn_diaLog("고객별 할당(만기방어)", -1, -1, 1200, 794, "PS220000::PS22080005.xfdl", false, sPrmr, false, true, true, null ,null ,true);
			} else if (ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_typ_cd') == '4104'){ 
				gfn_diaLog("고객별 할당(SDP)", -1, -1, 1200, 794, "PS220000::PS22080006.xfdl", false, sPrmr, false, true, true, null ,null ,true);
			} else {
				gfn_diaLog("고객별 할당", -1, -1, 988, 794, "PS220000::PS22080001.xfdl", false, sPrmr, false, true, true, null ,null ,true);
			}
 		break;
	}
}

//콤보변환 이벤트
function cbo_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	switch(obj){
		//진행상태
		case cbo_cmpg_prgr_stat_cd:
		if(ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_id') != null && ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_id') != ""){
			if(ds_cmpg.getColumn(ds_cmpg.rowposition , 'modifyfg') != 'Y'&&!(ds_cmpg.getColumn(ds_cmpg.rowposition , 'old_campaignstatecd') == "30") && parseInt(cbo_cmpg_prgr_stat_cd.value) < parseInt(ds_cmpg.getColumn(ds_cmpg.rowposition , 'old_campaignstatecd'))){
				 cbo_cmpg_prgr_stat_cd.value = ds_cmpg.getColumn(ds_cmpg.rowposition , 'old_campaignstatecd');
				 alert("이전상태로 수정이 불가능 합니다.\r\n진행된 캠페인이 1건이상 존재합니다.");
				 return;
			}else{
				if(ds_cmpg.getColumn(ds_cmpg.rowposition , 'old_campaignstatecd') == "30" && cbo_cmpg_prgr_stat_cd.value == '10'){
					cbo_cmpg_prgr_stat_cd.value = ds_cmpg.getColumn(ds_cmpg.rowposition , 'old_campaignstatecd');
					alert("중지 상태에서 대기상태로 수정이 불가능 합니다.");
					return;
				}
			}
		}
	    break;
	    
	    case cbo_cmpg_prfm_team_cd: //서브대상목록 상세 수행그룹 대 변경시
			gfn_getTeamCodeLoad(cbo_cmpg_prfm_team_cd.value, "SELECT", ds_teamCd02, ds_teamCd);
			cbo_cmpg_prfm_team_cd2.index = 0;
			if(obj.value != "" && obj.value != null){
				cbo_cmpg_prfm_team_cd2.enable = true;
			}else{
				cbo_cmpg_prfm_team_cd2.enable = false;
				cbo_cmpg_prfm_team_cd2.value = "";
			}
		break;
	}
}

//그리드 셀 클릭 이벤트
function grd_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	switch(obj){
		case grd_list_cmpg : //캠페인 리스트 
			fn_copyRow();
			fn_changeComponent("R"); //컴포넌트 셋팅
			ds_list_subTrgtList.clearData();
			ds_list_assign.clearData();
			fn_changeComponent_assign();
		break;
	}
}


//페이징
function grd_onvscrolllastover(obj:Grid, e:ScrollEventInfo)
{
	switch(obj){
		case grd_list_cmpg :
			fn_commSearch(gfn_getCommTypeAppend());
		break;
		
		case grd_list_cmpgAssign :
			fn_commSearch_assign(gfn_getCommTypeAppend());
		break;
	}
}

//그리드 온해더 클릭
function grd_onheadclick(obj:Grid, e:GridClickEventInfo)
{
	switch(obj){
		case grd_list_cmpg :
			if (!fn_preSearch()) return false;
			ds_inqCndt.setColumn(0, "sController", "/cmpg/cmpg/list");
			ds_inqCndt.setColumn(0, "dsName", "ds_output");
			
			if(!gfn_pageSearch(gfn_getCommTypeOrderBy(), ds_list_cmpg, sta_totalCnt, 100, total_count)) return;
			gfn_grdHeadClick(obj, e, ds_inqCndt);
			gfn_setTotalRowCount(ds_list_cmpg, sta_totalCnt, total_count); // 페이지건수 표출
			
			//정렬후 클릭 
			fn_copyRow();
			fn_changeComponent("R"); //컴포넌트 셋팅
			ds_list_subTrgtList.clearData();
			ds_list_assign.clearData();
			fn_changeComponent_assign();
		break;
		
		case grd_list_cmpgAssign :
			if (!fn_preSearch()) return false;
			ds_inqCndt_assign.setColumn(0, "sController", "/cmpg/cmpg-alct/list");
			ds_inqCndt_assign.setColumn(0, "dsName", "ds_output");
			
			if(!gfn_pageSearch(gfn_getCommTypeOrderBy(), ds_list_assign, sta_totalCnt_assign, 500, total_count_assing)) return;
			gfn_grdHeadClick(obj, e, ds_inqCndt_assign);
			gfn_setTotalRowCount(ds_list_assign, sta_totalCnt_assign, total_count_assing); // 페이지건수 표출
		break;

	}
}

// onkeydown
function srch_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 13) { // 엔터
		fn_commSearch(gfn_getCommTypeInit());
	}
}

function cbo_onkeydown(obj:Combo, e:KeyEventInfo)
{
	if (e.keycode == 13) { // 엔터
		fn_commSearch(gfn_getCommTypeInit());
	}
}


//그리드 더블클릭 
function grd_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	if(ds_list_assign.getColumn(ds_list_assign.rowposition , 'assignnum') != '0'){
		var sPrmr = {cmpg_id:ds_list_cmpg.getColumn(ds_list_cmpg.rowposition, 'cmpg_id'), 
					user_id :ds_list_assign.getColumn(ds_list_assign.rowposition,'cnsr_id'),
					ds_selectUser:ds_selectUser,
				    cmpg_div_cd:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_div_cd') ,
					cmpg_typ_cd:ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_typ_cd'), 
					cmpg_prgr_stat_cd:ds_list_cmpg.getColumn(ds_list_cmpg.rowposition,'cmpg_prgr_stat_cd'),
					sub_trgt_list_id:ds_list_subTrgtList.getColumn(ds_list_subTrgtList.rowposition,"sub_trgt_list_id")};	
		gfn_diaLog("할당고객목록", -1, -1, 855, 541, "PS220000::PS220104.xfdl", false, sPrmr, false, true, true, null ,null ,true);
	}else{
		alert('선택된 담당자는 배정건수가 없습니다.');
		return;
	}
}



]]></Script>
  </Form>
</FDL>

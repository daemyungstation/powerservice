<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="PS310100" classname="캠페인관리" inheritanceid="" position="absolute 0 0 989 795" titletext="이관상담(처리,관리)" onload="PS310100_onload">
    <Layouts>
      <Layout>
        <Static id="stc_01" class="sta_workSrcBg" position2="absolute l:0 r:0 t:7px h:66" positiontype="position2"/>
        <Grid id="grd_list" taborder="31" useinputpanel="false" position2="absolute l:0 r:0 t:102 b:243" positiontype="position2" binddataset="ds_list_bswrDmndDtl" autofitminwidth="1000" autofittype="col" oncellclick="grd_oncellclick" onheadclick="grd_list_onheadclick" tabstop="false">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="50"/>
                <Column size="160"/>
                <Column size="108"/>
                <Column size="89"/>
                <Column size="87"/>
                <Column size="118"/>
                <Column size="140"/>
                <Column size="100"/>
                <Column size="145"/>
                <Column size="136"/>
                <Column size="154"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="NO"/>
                <Cell col="1" text="상담번호" id="consno"/>
                <Cell col="2" text="처리상태" id="bswr_dmnd_stat_nm"/>
                <Cell col="3" text="이관구분" id="trct_typ_cd"/>
                <Cell col="4" text="상담상태" id="cons_stat_nm"/>
                <Cell col="5" text="이관요청자" id="trct_actp_nm"/>
                <Cell col="6" text="요청일시" id="trct_acpg_dttm"/>
                <Cell col="7" text="이관담당자" id="trct_chpr_nm"/>
                <Cell col="8" text="확인일시" id="bswr_dmnd_cnft_dttm"/>
                <Cell col="9" text="처리일시" id="trnm_dsps_dttm"/>
                <Cell col="10" text="경과시간" id="calb_resr_term"/>
              </Band>
              <Band id="body">
                <Cell expr="currow+1"/>
                <Cell col="1" style="color:#6087ffff;color2:#6087ffff;font:Dotum,9,underline;cursor:hand;selectcolor:#6087ffff;selectfont:Dotum,9,underline;" text="bind:consno"/>
                <Cell col="2" text="bind:bswr_dmnd_stat_nm"/>
                <Cell col="3" style="color:EXPR(trct_typ_cd == '10' ? '#FF6075'  : '#6087FF');color2:EXPR(trct_typ_cd == '10' ? '#FF6075'  : '#6087FF');selectcolor:EXPR(trct_typ_cd == '10' ? '#FF6075'  : '#6087FF');" text="bind:trct_typ_nm"/>
                <Cell col="4" text="bind:cons_stat_nm"/>
                <Cell col="5" text="bind:trct_actp_nm"/>
                <Cell col="6" displaytype="expr:trct_acpg_dttm != null ? &quot;date&quot; :&quot;normal&quot; " text="bind:trct_acpg_dttm" mask="expr:trct_acpg_dttm != null ? &quot;yyyy-MM-dd HH:mm&quot; :&quot;&quot; "/>
                <Cell col="7" text="bind:trct_chpr_nm"/>
                <Cell col="8" displaytype="expr:bswr_dmnd_cnft_dttm != null ? &quot;date&quot; :&quot;normal&quot; " text="bind:bswr_dmnd_cnft_dttm" mask="expr:bswr_dmnd_cnft_dttm != null ? &quot;yyyy-MM-dd HH:mm&quot; :&quot;&quot;"/>
                <Cell col="9" displaytype="expr:trnm_dsps_dttm != null ? &quot;date&quot; :&quot;normal&quot; " text="bind:trnm_dsps_dttm" mask="expr:trnm_dsps_dttm != null ? &quot;yyyy-MM-dd HH:mm&quot; :&quot;&quot;"/>
                <Cell col="10" text="bind:calb_resr_term"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="stc_17" text="검색기간" class="sta_workSrcLabel1" position="absolute 20 18 82 38"/>
        <Button id="btn_search" taborder="10" onclick="btn_onclick" class="btn_WF_Search" tooltiptext="조회" position2="absolute r:95 w:72 t:42px h:20" positiontype="position2"/>
        <Button id="btn_init" taborder="11" onclick="btn_onclick" class="btn_WF_Return" tooltiptext="초기화" position2="absolute r:21 w:72 t:42px h:20" positiontype="position2" tabstop="false"/>
        <Static id="stc_12" text="검색어" onclick="div_Work_stc_12_onclick" class="sta_workSrcLabel1" position="absolute 20 42 82 62"/>
        <Combo id="cbo_srch_srch_typ" taborder="6" position="absolute 85 43 178 63" codecolumn="codecolumn" datacolumn="datacolumn" index="0" text="전체">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">전체</Col>
              </Row>
              <Row>
                <Col id="codecolumn">trct_actp</Col>
                <Col id="datacolumn">이관요청자</Col>
              </Row>
              <Row>
                <Col id="codecolumn">trct_chpr</Col>
                <Col id="datacolumn">이관담당자</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="stc_00" text="처리상태" class="sta_workSrcLabel1" position="absolute 465 43 527 63"/>
        <Edit id="edt_srch_srch_val" taborder="7" autoselect="true" autoskip="true" onkeydown="common_onkeydown" position="absolute 181 43 312 63"/>
        <Combo id="cbo_srch_dt_typ" taborder="0" position="absolute 85 18 162 38" codecolumn="codecolumn" datacolumn="datacolumn" index="0" value="trct_acpg_dttm" text="요청일자">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn">trct_acpg_dttm</Col>
                <Col id="datacolumn">요청일자</Col>
              </Row>
              <Row>
                <Col id="codecolumn">bswr_dmnd_cnft_dttm</Col>
                <Col id="datacolumn">확인일자</Col>
              </Row>
              <Row>
                <Col id="codecolumn">trnm_dsps_dttm</Col>
                <Col id="datacolumn">처리일자</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="stc_02" text="이관유형" class="sta_workSrcLabel1" position="absolute 464 19 526 39"/>
        <Combo id="cbo_srch_trct_typ" taborder="4" position="absolute 527 18 604 38" innerdataset="ds_trctTypCdList_srch" datacolumn="cd_nm" codecolumn="cd"/>
        <Static id="stc_04" text="경과시간" class="sta_workSrcLabel1" position="absolute 623 19 685 39"/>
        <Combo id="cbo_srch_elps_hr" taborder="5" position="absolute 686 18 779 38" codecolumn="codecolumn" datacolumn="datacolumn" index="0" text="전체">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">전체</Col>
              </Row>
              <Row>
                <Col id="codecolumn">24</Col>
                <Col id="datacolumn">1일이상</Col>
              </Row>
              <Row>
                <Col id="codecolumn">36</Col>
                <Col id="datacolumn">3일이상</Col>
              </Row>
              <Row>
                <Col id="codecolumn">168</Col>
                <Col id="datacolumn">1주일이상</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Combo id="cbo_srch_bswr_dmnd_stat_cd" taborder="9" position="absolute 608 42 725 62" displaynulltext="전체" innerdataset="@ds_bswrdmndTypCdList_srch" datacolumn="cd_nm" codecolumn="cd" enable="true" onitemchanged="cbo_srch_bswr_dmnd_stat_cd_onitemchanged"/>
        <Combo id="cbo_srch_bswr_dmnd_stat_typ" taborder="8" position="absolute 528 42 605 62" codecolumn="codecolumn" datacolumn="datacolumn" index="0" text="전체" onitemchanged="cbo_onitemchanged">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">전체</Col>
              </Row>
              <Row>
                <Col id="codecolumn">ytun</Col>
                <Col id="datacolumn">미처리</Col>
              </Row>
              <Row>
                <Col id="codecolumn">dsps_cmpl</Col>
                <Col id="datacolumn">처리완료</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="stc_08" class="sta_workData" position2="absolute l:9.61% w:36.6% b:111 h:26" positiontype="position2"/>
        <Static id="stc_06" class="sta_workData" position2="absolute l:9.61% w:90.39% b:161 h:26" positiontype="position2"/>
        <Static id="stc_25" text="이관상담 상세" class="sta_workTitle2" position2="absolute l:0 w:297 b:213 h:20" positiontype="position2"/>
        <Static id="sta_GrayLine" class="sta_WF_Line1" position2="absolute l:0 r:0 b:212 h:1" positiontype="position2"/>
        <Static id="stc_21" class="sta_workData" position2="absolute l:9.61% r:0 b:186 h:26" positiontype="position2"/>
        <Static id="stc_33" text="상담처리상태" class="sta_workLabel1" validate="" position2="absolute l:46.11% w:9.71% b:186 h:26" positiontype="position2"/>
        <Static id="stc_09" text="이관정보" class="sta_workLabel1" validate="" position2="absolute l:0 w:9.71% b:161 h:26" positiontype="position2"/>
        <Static id="stc_10" class="sta_workData" position2="absolute l:9.61% w:36.6% b:136 h:26" positiontype="position2"/>
        <Static id="stc_16" text="이관요청자" class="sta_workLabel1" validate="" position2="absolute l:0 w:9.71% b:136 h:26" positiontype="position2"/>
        <Static id="stc_07" text="담당자" class="sta_workLabel1_P" validate="" position2="absolute l:0 w:9.71% b:111 h:26" positiontype="position2"/>
        <Static id="stc_13" text="요청내용" class="sta_workLabel1" validate="" position2="absolute l:0 w:9.71% b:36 h:76" positiontype="position2"/>
        <Static id="stc_14" class="sta_workData" position2="absolute l:9.61% r:0 b:36 h:76" positiontype="position2"/>
        <Static id="stc_18" text="처리내용" class="sta_workLabel1_P" validate="" position2="absolute l:46.11% w:9.71% b:36 h:76" positiontype="position2"/>
        <Static id="stc_27" text="처리상태" class="sta_workLabel1_P" validate="" position2="absolute l:72.7% w:9.71% b:186 h:26" positiontype="position2"/>
        <Static id="stc_41" text="등록자" class="sta_workLabel1" validate="" position2="absolute l:0 w:9.71% b:11 h:26" positiontype="position2"/>
        <Static id="stc_42" class="sta_workData" position2="absolute l:9.61% r:0 b:11 h:26" positiontype="position2"/>
        <Static id="stc_43" text="처리자" class="sta_workLabel1" validate="" position2="absolute l:46.11% w:9.71% b:11 h:26" positiontype="position2"/>
        <Static id="stc_44" text="처리일시" class="sta_workLabel1" validate="" position2="absolute l:72.7% w:9.71% b:11 h:26" positiontype="position2"/>
        <Static id="stc_45" text="등록일시" class="sta_workLabel1" validate="" position2="absolute l:23.56% w:9.71% b:11 h:26" positiontype="position2"/>
        <Static id="stc_20" text="상담번호" class="sta_workLabel1" validate="" position2="absolute l:0 w:9.71% b:186 h:26" positiontype="position2"/>
        <Static id="stc_05" text="요청일시" class="sta_workLabel1" validate="" position2="absolute l:46.11% w:9.71% b:136 h:26" positiontype="position2"/>
        <Static id="stc_11" text="확인일시" class="sta_workLabel1" validate="" position2="absolute l:46.11% w:9.71% b:111 h:26" positiontype="position2"/>
        <Static id="stc_03" class="sta_workData" position2="absolute l:55.71% r:0 b:136 h:26" positiontype="position2"/>
        <Static id="stc_15" class="sta_workData" position2="absolute l:55.71% r:0 b:111 h:26" positiontype="position2"/>
        <Static id="stc_49" text="경과시간" class="sta_workLabel1" validate="" position2="absolute l:72.7% w:9.71% b:111 h:26" positiontype="position2"/>
        <CheckBox id="chk_trct_cons_atmt_cmpl_yn" taborder="32" text="상담자동완료" onclick="CheckBox00_onclick" position2="absolute l:10.01% w:23.26% b:91 h:20" positiontype="position2" readonly="true" truevalue="Y" falsevalue="N"/>
        <Button id="btn_delete" taborder="13" onclick="btn_onclick" class="btn_WF_Del" position2="absolute r:0 w:72 b:215 h:20" positiontype="position2" tooltiptext="삭제" style="shadow:drop 0,0 0 #00000033;" tabstop="false"/>
        <Button id="btn_save" taborder="14" onclick="btn_onclick" class="btn_WF_Save" position2="absolute r:-118 w:72 b:235 h:20" positiontype="position2" tooltiptext="저장" tabstop="false"/>
        <Button id="btn_cancel" taborder="15" text="취소" onclick="btn_onclick" class="btn_Cancel" position2="absolute r:-191 w:72 b:235 h:20" positiontype="position2" tooltiptext="취소" style="padding:0 0 0 0;" tabstop="false"/>
        <Button id="btn_disposal" taborder="12" text="처리" onclick="btn_onclick" class="btn_Cancel" position2="absolute r:73 w:72 b:215 h:20" positiontype="position2" tooltiptext="취소" style="padding:0 0 0 0;" tabstop="false"/>
        <Combo id="cbo_srch_dateSelect" taborder="1" value="0" text="전체" codecolumn="codecolumn" datacolumn="datacolumn" index="0" onitemchanged="cbo_onitemchanged" class="cbo_srch" position="absolute 163 18 240 38">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn">0</Col>
                <Col id="datacolumn">전체</Col>
              </Row>
              <Row>
                <Col id="codecolumn">1</Col>
                <Col id="datacolumn">금일</Col>
              </Row>
              <Row>
                <Col id="codecolumn">2</Col>
                <Col id="datacolumn">전일</Col>
              </Row>
              <Row>
                <Col id="codecolumn">3</Col>
                <Col id="datacolumn">1주일</Col>
              </Row>
              <Row>
                <Col id="codecolumn">4</Col>
                <Col id="datacolumn">1개월</Col>
              </Row>
              <Row>
                <Col id="codecolumn">5</Col>
                <Col id="datacolumn">3개월</Col>
              </Row>
              <Row>
                <Col id="codecolumn">6</Col>
                <Col id="datacolumn">6개월</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Calendar id="cal_srch_sttDt" taborder="2" displaynulltext="____-__-__" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" class="cal_srch" position="absolute 241 18 330 38"/>
        <Static id="Static25" text="~" position="absolute 339 22 363 37"/>
        <Calendar id="cal_srch_endDt" taborder="3" displaynulltext="____-__-__" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" class="cal_srch" position="absolute 357 18 446 38"/>
        <Static id="sta_totalCnt" text="검색결과   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt; / 전체   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt;" usedecorate="true" class="sta_workTitle5" position="absolute 2 82 218 102"/>
        <Edit id="edt_consno" taborder="17" position2="absolute l:9.81% w:36.2% b:188 h:23" positiontype="position2" readonly="true"/>
        <Edit id="edt_cons_stat_nm" taborder="18" position2="absolute l:55.92% w:16.68% b:188 h:23" positiontype="position2" readonly="true"/>
        <Combo id="cbo_bswr_dmnd_stat_cd" taborder="19" innerdataset="@ds_bswrdmndTypCdList_edit" codecolumn="cd" datacolumn="cd_nm" position2="absolute l:82.61% w:17.19% b:188 h:23" positiontype="position2" readonly="true" onitemchanged="cbo_onitemchanged"/>
        <TextArea id="tea_bswr_dmnd_acpg_cntn" taborder="25" position2="absolute l:9.91% w:36% b:38 h:56" positiontype="position2" wordwrap="both" readonly="true"/>
        <TextArea id="tea_bswr_dmnd_dsps_cntn" taborder="26" position2="absolute l:56.02% w:43.68% b:38 h:71" positiontype="position2" wordwrap="both" readonly="true"/>
        <Static id="Static00" position2="absolute l:9.71% w:90.29% b:163 h:23" positiontype="position2"/>
        <Edit id="edt_trct_acpg_dttm" taborder="21" position2="absolute l:55.92% w:43.88% b:138 h:22" positiontype="position2" readonly="true"/>
        <Edit id="edt_trct_acpg_info" taborder="20" position2="absolute l:9.81% w:36.2% b:138 h:22" positiontype="position2" readonly="true"/>
        <Edit id="edt_bswr_dmnd_cnft_dttm" taborder="23" position2="absolute l:55.92% w:16.68% b:113 h:22" positiontype="position2" readonly="true"/>
        <Edit id="edt_calb_resr_term" taborder="24" position2="absolute l:82.51% w:17.29% b:113 h:22" positiontype="position2" readonly="true"/>
        <Edit id="edt_rgsr_nm" taborder="27" readonly="true" class="edt_edit" position2="absolute l:9.91% w:13.45% b:14 h:20" positiontype="position2"/>
        <Edit id="edt_rgsn_dttm" taborder="28" readonly="true" class="edt_edit" position2="absolute l:33.37% w:12.64% b:14 h:20" positiontype="position2"/>
        <Edit id="edt_amnd_nm" taborder="29" readonly="true" class="edt_edit" position2="absolute l:55.92% w:16.68% b:14 h:20" positiontype="position2"/>
        <Edit id="edt_amnt_dttm" taborder="30" readonly="true" class="edt_edit" position2="absolute l:82.51% r:3 b:14 h:20" positiontype="position2"/>
        <Static id="sta_trct_typ_nm" style="border:0 none #808080ff ;" position2="absolute l:9.91% w:89.89% b:164 h:20" positiontype="position2" usedecorate="true"/>
        <Combo id="cbo_trct_chpr_id" taborder="22" readonly="true" innerdataset="@ds_trctChprId" codecolumn="user_id" datacolumn="user_nm" position2="absolute l:9.81% w:17.19% b:113 h:22" positiontype="position2"/>
        <Button id="btn_accept" taborder="16" text="접수" onclick="btn_onclick" class="btn_Cancel" position2="absolute r:-118 w:72 b:212 h:20" positiontype="position2" tooltiptext="취소" style="padding:0 0 0 0;" visible="false" tabstop="false"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="edt_consno" propid="value" datasetid="ds_bswrDmndDtl" columnid="consno"/>
      <BindItem id="item1" compid="edt_cons_stat_nm" propid="value" datasetid="ds_bswrDmndDtl" columnid="cons_stat_nm"/>
      <BindItem id="item2" compid="cbo_bswr_dmnd_stat_cd" propid="value" datasetid="ds_bswrDmndDtl" columnid="bswr_dmnd_stat_cd"/>
      <BindItem id="item3" compid="edt_trct_acpg_dttm" propid="value" datasetid="ds_bswrDmndDtl" columnid="trct_acpg_dttm"/>
      <BindItem id="item4" compid="edt_bswr_dmnd_cnft_dttm" propid="value" datasetid="ds_bswrDmndDtl" columnid="bswr_dmnd_cnft_dttm"/>
      <BindItem id="item5" compid="edt_calb_resr_term" propid="value" datasetid="ds_bswrDmndDtl" columnid="calb_resr_term"/>
      <BindItem id="item6" compid="chk_trct_cons_atmt_cmpl_yn" propid="value" datasetid="ds_bswrDmndDtl" columnid="trct_cons_atmt_cmpl_yn"/>
      <BindItem id="item7" compid="tea_bswr_dmnd_acpg_cntn" propid="value" datasetid="ds_bswrDmndDtl" columnid="bswr_dmnd_acpg_cntn"/>
      <BindItem id="item8" compid="tea_bswr_dmnd_dsps_cntn" propid="value" datasetid="ds_bswrDmndDtl" columnid="bswr_dmnd_dsps_cntn"/>
      <BindItem id="item9" compid="edt_rgsr_nm" propid="value" datasetid="ds_bswrDmndDtl" columnid="rgsr_nm"/>
      <BindItem id="item10" compid="edt_rgsn_dttm" propid="value" datasetid="ds_bswrDmndDtl" columnid="rgsn_dttm"/>
      <BindItem id="item11" compid="edt_amnd_nm" propid="value" datasetid="ds_bswrDmndDtl" columnid="amnd_nm"/>
      <BindItem id="item12" compid="edt_amnt_dttm" propid="value" datasetid="ds_bswrDmndDtl" columnid="amnt_dttm"/>
      <BindItem id="item13" compid="sta_trct_typ_nm" propid="text" datasetid="ds_bswrDmndDtl" columnid="trct_typ_nm"/>
      <BindItem id="item14" compid="cbo_trct_chpr_id" propid="value" datasetid="ds_bswrDmndDtl" columnid="trct_chpr_id"/>
    </Bind>
    <Objects>
      <Dataset id="ds_cdSet" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_trctTypCdList_srch" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="dt_typ" type="STRING" size="256"/>
          <Column id="srch_typ" type="STRING" size="256"/>
          <Column id="elps_hr" type="STRING" size="256"/>
          <Column id="srch_val" type="STRING" size="256"/>
          <Column id="bswr_dmnd_stat_typ" type="STRING" size="256"/>
          <Column id="bswr_dmnd_stat_cd" type="STRING" size="256"/>
          <Column id="trct_typ" type="STRING" size="256"/>
          <Column id="stt_dt" type="STRING" size="256"/>
          <Column id="end_dt" type="STRING" size="256"/>
          <Column id="srch_todo" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bswrdmndTypCdList_srch" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_bswrDmndDtl" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="false" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_nobdTypList_onrowposchanged">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="bswr_dmnd_id" type="STRING" size="256"/>
          <Column id="consno" type="STRING" size="256"/>
          <Column id="bswr_dmnd_stat_cd" type="STRING" size="256"/>
          <Column id="bswr_dmnd_stat_nm" type="STRING" size="256"/>
          <Column id="trct_typ_nm" type="STRING" size="256"/>
          <Column id="trct_typ_cd" type="STRING" size="256"/>
          <Column id="trct_cons_sctr_cd" type="STRING" size="256"/>
          <Column id="trct_cons_sctr_nm" type="STRING" size="256"/>
          <Column id="trct_trgt_div_cd" type="STRING" size="256"/>
          <Column id="trct_box_id" type="STRING" size="256"/>
          <Column id="trct_box_nm" type="STRING" size="256"/>
          <Column id="cons_stat_nm" type="STRING" size="256"/>
          <Column id="trct_actp_id" type="STRING" size="256"/>
          <Column id="trct_acpg_dept_cd" type="STRING" size="256"/>
          <Column id="trct_acpg_dept_nm" type="STRING" size="256"/>
          <Column id="trct_actp_nm" type="STRING" size="256"/>
          <Column id="trct_acpg_dttm" type="STRING" size="256"/>
          <Column id="trct_chpr_id" type="STRING" size="256"/>
          <Column id="trct_chpr_dept_nm" type="STRING" size="256"/>
          <Column id="trct_chpr_nm" type="STRING" size="256"/>
          <Column id="bswr_dmnd_cnft_dttm" type="STRING" size="256"/>
          <Column id="calb_resr_term" type="STRING" size="256"/>
          <Column id="bswr_dmnd_acpg_cntn" type="STRING" size="256"/>
          <Column id="trnm_dsps_dttm" type="STRING" size="256"/>
          <Column id="bswr_dmnd_dsps_cntn" type="STRING" size="256"/>
          <Column id="cons_typ1_cd" type="STRING" size="256"/>
          <Column id="cons_typ2_cd" type="STRING" size="256"/>
          <Column id="cons_typ3_cd" type="STRING" size="256"/>
          <Column id="trct_cons_atmt_cmpl_yn" type="STRING" size="256"/>
          <Column id="cons_typ1_nm" type="STRING" size="256"/>
          <Column id="cons_typ2_nm" type="STRING" size="256"/>
          <Column id="cons_typ3_nm" type="STRING" size="256"/>
          <Column id="cons_memo_cntn" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="consno_grop_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="home_tel" type="STRING" size="256"/>
          <Column id="cell" type="STRING" size="256"/>
          <Column id="email" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="rgsr_id" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_id" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="trct_trgt_div_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_tmp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="false" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_nobdTypList_onrowposchanged">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="bswr_dmnd_id" type="STRING" size="256"/>
          <Column id="consno" type="STRING" size="256"/>
          <Column id="bswr_dmnd_stat_cd" type="STRING" size="256"/>
          <Column id="bswr_dmnd_stat_nm" type="STRING" size="256"/>
          <Column id="trct_typ_nm" type="STRING" size="256"/>
          <Column id="trct_typ_cd" type="STRING" size="256"/>
          <Column id="trct_cons_sctr_cd" type="STRING" size="256"/>
          <Column id="trct_cons_sctr_nm" type="STRING" size="256"/>
          <Column id="trct_trgt_div_cd" type="STRING" size="256"/>
          <Column id="trct_box_id" type="STRING" size="256"/>
          <Column id="trct_box_nm" type="STRING" size="256"/>
          <Column id="cons_stat_nm" type="STRING" size="256"/>
          <Column id="trct_actp_id" type="STRING" size="256"/>
          <Column id="trct_acpg_dept_cd" type="STRING" size="256"/>
          <Column id="trct_acpg_dept_nm" type="STRING" size="256"/>
          <Column id="trct_actp_nm" type="STRING" size="256"/>
          <Column id="trct_acpg_dttm" type="STRING" size="256"/>
          <Column id="trct_chpr_id" type="STRING" size="256"/>
          <Column id="trct_chpr_dept_nm" type="STRING" size="256"/>
          <Column id="trct_chpr_nm" type="STRING" size="256"/>
          <Column id="bswr_dmnd_cnft_dttm" type="STRING" size="256"/>
          <Column id="calb_resr_term" type="STRING" size="256"/>
          <Column id="bswr_dmnd_acpg_cntn" type="STRING" size="256"/>
          <Column id="trnm_dsps_dttm" type="STRING" size="256"/>
          <Column id="bswr_dmnd_dsps_cntn" type="STRING" size="256"/>
          <Column id="cons_typ1_cd" type="STRING" size="256"/>
          <Column id="cons_typ2_cd" type="STRING" size="256"/>
          <Column id="cons_typ3_cd" type="STRING" size="256"/>
          <Column id="trct_cons_atmt_cmpl_yn" type="STRING" size="256"/>
          <Column id="cons_typ1_nm" type="STRING" size="256"/>
          <Column id="cons_typ2_nm" type="STRING" size="256"/>
          <Column id="cons_typ3_nm" type="STRING" size="256"/>
          <Column id="cons_memo_cntn" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="consno_grop_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="home_tel" type="STRING" size="256"/>
          <Column id="cell" type="STRING" size="256"/>
          <Column id="email" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="rgsr_id" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_id" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="trct_trgt_div_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bswrDmndDtl" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="false" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_nobdTypList_onrowposchanged">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="bswr_dmnd_id" type="STRING" size="256"/>
          <Column id="consno" type="STRING" size="256"/>
          <Column id="bswr_dmnd_stat_cd" type="STRING" size="256"/>
          <Column id="bswr_dmnd_stat_nm" type="STRING" size="256"/>
          <Column id="trct_typ_nm" type="STRING" size="256"/>
          <Column id="trct_typ_cd" type="STRING" size="256"/>
          <Column id="trct_cons_sctr_cd" type="STRING" size="256"/>
          <Column id="trct_cons_sctr_nm" type="STRING" size="256"/>
          <Column id="trct_trgt_div_cd" type="STRING" size="256"/>
          <Column id="trct_box_id" type="STRING" size="256"/>
          <Column id="trct_box_nm" type="STRING" size="256"/>
          <Column id="cons_stat_nm" type="STRING" size="256"/>
          <Column id="trct_actp_id" type="STRING" size="256"/>
          <Column id="trct_acpg_dept_cd" type="STRING" size="256"/>
          <Column id="trct_acpg_dept_nm" type="STRING" size="256"/>
          <Column id="trct_actp_nm" type="STRING" size="256"/>
          <Column id="trct_acpg_dttm" type="STRING" size="256"/>
          <Column id="trct_chpr_id" type="STRING" size="256"/>
          <Column id="trct_chpr_dept_nm" type="STRING" size="256"/>
          <Column id="trct_chpr_nm" type="STRING" size="256"/>
          <Column id="bswr_dmnd_cnft_dttm" type="STRING" size="256"/>
          <Column id="calb_resr_term" type="STRING" size="256"/>
          <Column id="bswr_dmnd_acpg_cntn" type="STRING" size="256"/>
          <Column id="trnm_dsps_dttm" type="STRING" size="256"/>
          <Column id="bswr_dmnd_dsps_cntn" type="STRING" size="256"/>
          <Column id="cons_typ1_cd" type="STRING" size="256"/>
          <Column id="cons_typ2_cd" type="STRING" size="256"/>
          <Column id="cons_typ3_cd" type="STRING" size="256"/>
          <Column id="trct_cons_atmt_cmpl_yn" type="STRING" size="256"/>
          <Column id="cons_typ1_nm" type="STRING" size="256"/>
          <Column id="cons_typ2_nm" type="STRING" size="256"/>
          <Column id="cons_typ3_nm" type="STRING" size="256"/>
          <Column id="cons_memo_cntn" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="consno_grop_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="home_tel" type="STRING" size="256"/>
          <Column id="cell" type="STRING" size="256"/>
          <Column id="email" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="rgsr_id" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_id" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="trct_trgt_div_nm" type="STRING" size="256"/>
          <Column id="trct_chpr_fg" type="STRING" size="256"/>
          <Column id="page_typ" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bswrdmndTypCdList_edit" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_trctChprId" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="user_nm" type="STRING" size="256"/>
          <Column id="user_id" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt_chpr" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="trct_box_id" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[
/***************************************************************************
 * Program ID    : PS.xfdl
 * Program Name  : 이관상담처리 관리
 * Author        : 정 훈
 * Created On    : 2016.02.
 * 개    요 	 :
 *
 * =========================================================================
 * 변경일자     수정자       내    용
 * =========================================================================
 * 2016.0    정   훈      최초작성
 
 **************************************************************************/


/********************************************************************************************/
/* 1. Include Library include                                                               */
/********************************************************************************************/
include "LIB::lib_All.xjs";




/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트,전역변수,초기화) 처리                         	*/
/********************************************************************************************/
//온로드
var tc_trctCons = 0;
var oParameter;

var calStt = cal_srch_sttDt;
var calEnd = cal_srch_endDt;
var calSelect = cbo_srch_dateSelect;
var userId = gds_UserInfo.getColumn(0, 'user_id');
var cntrCd = gds_UserInfo.getColumn(0, 'cntr_cd');

//권한
var rgsnYn; //등록권한
var inqYn; //조회권한
var amntYn; //수정권한
var dltnYn; //삭제권한
var pritYn; //출력권한
var xlsYn; //엑셀권한
var athrPpupYn; //팝업오픈권한
var xlsRrnoYn; //엑셀 개인정보 권한 여부

var gvMenuId;  // 프로그램 로그 추가 2017.12.14
/********************************************************************************************/

function PS310100_onload(obj:Form, e:LoadEventInfo)
{
	///////////////////////////////////////////////////////////////////////////////////////////
	// 프로그램 로그 추가 2017.12.12 정승철
	gvMenuId = GV_LOGMENUID;
	///////////////////////////////////////////////////////////////////////////////////////////
	
	gfn_athrPgm(gfn_gdsCd_admin()); //권한조회
	oParameter = parent.pv_usrParameter.oParameter;
	gfn_getList("cd","USR100,CNS160","fn_callBack",null,"srchCdSet","ds_cdSet");   // 코드셋
	gfn_createPagingDataset(obj); // 페이징처리 위한 데이터셋 설정
	fn_init();
	fn_commSearch(gfn_getCommTypeInit()); // 조회
	
}

//검색조건 초기화
function fn_init()
{
	cbo_srch_dt_typ.index = 0;  //검색기간
	cbo_srch_dateSelect.index = 3;//일주일
	gfn_dateSrchDefaultChangeEvnt(calSelect,calStt,calEnd);
	cbo_srch_trct_typ.index = 0; //이관유형
	cbo_srch_elps_hr.index = 0; //경과시간
	cbo_srch_srch_typ.index = 0;
	edt_srch_srch_val.value = null;
	
	cbo_srch_bswr_dmnd_stat_typ.index = 0;
	ds_bswrdmndTypCdList_srch.filter("");
	ds_bswrdmndTypCdList_srch.filter('cd == "" || (cd >= 00 && cd <= 20)');
	cbo_srch_bswr_dmnd_stat_cd.index = 0;
	
}

/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
//콜백
function fn_callBack(svcid, errcd, errmsg) {
    if (errcd != 0) {
		if(errcd == 'BSWR'){
			alert(errmsg);
		}else{
			trace("errcd  :   " +errcd +"   \n errmsg   :   "+ errmsg +"    \n svcid   :   "+ svcid);
			return false;
		}
	} else {
		switch(svcid){
			case "srchCdSet": //코드셋
		    gfn_getCode("USR100", "ALL", ds_trctTypCdList_srch,ds_cdSet); 
		    gfn_getCode("CNS160", "ALL", ds_bswrdmndTypCdList_srch,ds_cdSet); 
		    gfn_getCode("CNS160", "SELECT", ds_bswrdmndTypCdList_edit,ds_cdSet); 
		    //gfn_getCode("CNS160", "ALL", ds_trctTypCdList_srch,ds_cdSet);
		    
		    ds_bswrdmndTypCdList_srch.filter("");
			ds_bswrdmndTypCdList_srch.filter('cd == "" || (cd >= 00 && cd <= 20)');
			cbo_srch_trct_typ.index = 0;
			cbo_srch_bswr_dmnd_stat_cd.index = 0;
		    break;
		    
		    case "srchBswrDmndDtl": //조회콜백
				gfn_appendSearchDs(ds_list_bswrDmndDtl, ds_list_tmp); // 조회된 결과를 실제보여줄 데이타셋으로 Append처리
				gfn_setTotalRowCount(ds_list_bswrDmndDtl, sta_totalCnt, tc_trctCons); // 페이지건수 표출
				fn_postSearch();
		    break;
		    
		    case "srchChprId": //이관 
				ds_trctChprId.insertRow(0);
				ds_trctChprId.setColumn(0,'user_id','');
				ds_trctChprId.setColumn(0,'user_nm','선택');
				
		    break;
		    
		    case "deleteBswrDmndDtl" : //삭제콜백
				fn_commSearch(gfn_getCommTypeInit()); // 조회
		    break;
		    
			case "saveBswrDmndDtl" : //저장
				fn_commSearch(gfn_getCommTypeInit()); // 조회
		    break;
		    
		    case "acceptBswrDmndDtl" : //접수
				fn_commSearch(gfn_getCommTypeInit()); // 조회
		    break;
		}
	}
}




/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/
//조회전
function fn_preSearch(sType)
{
	if (sType == gfn_getCommTypeInit())
	{
		//ds_list_faqDtlList.keystring = ""; // 정렬컬럼 초기화
		
		ds_inqCndt.clearData();
		ds_inqCndt.addRow();
		ds_inqCndt.setColumn(0, "dt_typ", cbo_srch_dt_typ.value);
		ds_inqCndt.setColumn(0, "srch_typ", cbo_srch_srch_typ.value);
		ds_inqCndt.setColumn(0, "srch_val", edt_srch_srch_val.value);
		ds_inqCndt.setColumn(0, "elps_hr", cbo_srch_elps_hr.value);
		ds_inqCndt.setColumn(0, "bswr_dmnd_stat_typ", cbo_srch_bswr_dmnd_stat_typ.value);
		ds_inqCndt.setColumn(0, "bswr_dmnd_stat_cd", cbo_srch_bswr_dmnd_stat_cd.value);
		ds_inqCndt.setColumn(0, "trct_typ", cbo_srch_trct_typ.value);
		ds_inqCndt.setColumn(0, "stt_dt", calStt.value);
		ds_inqCndt.setColumn(0, "end_dt", calEnd.value);
		
		ds_inqCndt.setColumn(0, "orderBy", "amnt_dttm");
		ds_inqCndt.setColumn(0, "orderDirection", "desc");
	}
	return true;
}

//저장전 처리
function fn_preSaveData(){

	if(gfn_isNull(cbo_bswr_dmnd_stat_cd.value)){
		alert("처리상태를 입력하세요.");
		return false;
	}
	
	if(gfn_isNull(cbo_trct_chpr_id.value)){
		alert("담당자를 선택하세요.");
		return false;
	}
	
	if(gfn_isNull(tea_bswr_dmnd_dsps_cntn.value)){
		alert("처리내용을 입력하세요");
		return false;
	}
		
	return true;
}


/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
//조회
function fn_commSearch(sType)
{	
    if (!fn_preSearch(sType)) return false;	
	
	// 호출 레코드 수
	if(!gfn_pageSearch(sType, ds_list_bswrDmndDtl, sta_totalCnt, 50, tc_trctCons)) return; 
	
	var szSvcid       = "srchBswrDmndDtl";
    var szController  = "/cons/bswr-dmnd-dtl/trct-cons-list/"+oParameter;
    var szInDs        = "ds_input=ds_inqCndt";
    var szOutDs       = "ds_list_tmp=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";


    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,"","","S",gvMenuId);
}


//삭제
function fn_deleteData()
{
	var szSvcid       = "deleteBswrDmndDtl";
    var szController  = "/cons/bswr-dmnd-dtl/delete";
    var szInDs        = "ds_input=ds_bswrDmndDtl";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,"","","I",gvMenuId);
}

//이관박스 담당자 조회
function fn_srchChprId(trctBoxId)
{
	ds_inqCndt_chpr.clearData();
	ds_inqCndt_chpr.addRow();
	ds_inqCndt_chpr.setColumn(ds_inqCndt_chpr.rowposition, 'trct_box_id', trctBoxId);
	
	var szSvcid       = "srchChprId";
    var szController  = "/user/trct-chpr-admn/list";
    var szInDs        = "ds_input=ds_inqCndt_chpr";
    var szOutDs       = "ds_trctChprId=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,"","","S",gvMenuId);
}

//저장
function fn_saveData(){
	if(!fn_preSaveData()) return false;
	ds_bswrDmndDtl.setColumn(ds_bswrDmndDtl.rowposition, 'page_typ' , oParameter);
	var szSvcid       = "saveBswrDmndDtl";
    var szController  = "/cons/bswr-dmnd-dtl/save";
    var szInDs        = "ds_input=ds_bswrDmndDtl";
    var szOutDs       = "ds_bswrDmndDtl=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,"","","I",gvMenuId);
}

//접수
function fn_accept(){
	ds_bswrDmndDtl.setColumn(ds_bswrDmndDtl.rowposition, 'trct_chpr_fg' , "S");
	ds_bswrDmndDtl.setColumn(ds_bswrDmndDtl.rowposition, 'page_typ' , oParameter);
	var szSvcid       = "acceptBswrDmndDtl";
    var szController  = "/cons/bswr-dmnd-dtl/save";
    var szInDs        = "ds_input=ds_bswrDmndDtl";
    var szOutDs       = "ds_bswrDmndDtl=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,"","","I",gvMenuId);
}
/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/
//조회결과
function fn_postSearch()
{
	if(ds_list_bswrDmndDtl.rowcount < 1) {
		fn_copyRow();
		fn_changeComponent("R");
		sta_totalCnt.text = "조회 결과가 없습니다.";
	} else {
		fn_srchChprId(ds_list_bswrDmndDtl.getColumn(ds_list_bswrDmndDtl.rowposition, 'trct_box_id'));
		fn_copyRow();
		fn_changeComponent("R");
	}
	return;
}

function fn_copyRow(){
	if(ds_list_bswrDmndDtl.rowcount < 1) {
		ds_bswrDmndDtl.clearData();
		ds_bswrDmndDtl.addRow();
	} else{
		ds_bswrDmndDtl.clearData();
		ds_bswrDmndDtl.addRow();
		ds_bswrDmndDtl.copyRow(ds_bswrDmndDtl.rowposition, ds_list_bswrDmndDtl ,ds_list_bswrDmndDtl.rowposition);
		
		//이관정보
		sta_trct_typ_nm.text = "<fs v='9'><fc v='blue'>[";
		sta_trct_typ_nm.text += ds_bswrDmndDtl.getColumn(ds_bswrDmndDtl.rowposition,'trct_typ_nm');
		sta_trct_typ_nm.text += "] </fs></fc>";
		sta_trct_typ_nm.text += ds_bswrDmndDtl.getColumn(ds_bswrDmndDtl.rowposition,'trct_cons_sctr_nm')+" > ";
		sta_trct_typ_nm.text += ds_bswrDmndDtl.getColumn(ds_bswrDmndDtl.rowposition,'trct_trgt_div_nm')+" > ";
		sta_trct_typ_nm.text += ds_bswrDmndDtl.getColumn(ds_bswrDmndDtl.rowposition,'trct_box_nm');
		
		//이관요청자
		edt_trct_acpg_info.value = ds_bswrDmndDtl.getColumn(ds_bswrDmndDtl.rowposition,'trct_acpg_dept_nm')+" > ";
		edt_trct_acpg_info.value += ds_bswrDmndDtl.getColumn(ds_bswrDmndDtl.rowposition,'trct_actp_nm');
		
		
		//등록 수정일시 데이터타입에 맞게
		var rgsnDttmStr = edt_rgsn_dttm.value;
		edt_rgsn_dttm.value = gfn_strDttm(rgsnDttmStr);
		
		//수정일시
		var amntDttmStr = edt_amnt_dttm.value;
		edt_amnt_dttm.value = gfn_strDttm(amntDttmStr);
		
		//요청일시
		var trctAcpgDttm = edt_trct_acpg_dttm.value;
		edt_trct_acpg_dttm.value = gfn_strDttm(trctAcpgDttm);
		
		//확인일시
		if(edt_bswr_dmnd_cnft_dttm.value != null){
			var bswrDmndCnftDttm = edt_bswr_dmnd_cnft_dttm.value;
			edt_bswr_dmnd_cnft_dttm.value = gfn_strDttm(bswrDmndCnftDttm);
		}
	}
}

//버튼 AND 컴포넌트 변경함수
function fn_changeComponent(rMode){
	switch(rMode){ 
		case "R":
			if(ds_list_bswrDmndDtl.rowcount < 1) {
				btn_disposal.enable = false;
				btn_delete.enable = false;
				
				edt_trct_acpg_info.value = null;
			}else{
				if(oParameter != "admin"){
					if(cbo_bswr_dmnd_stat_cd.value =='00'){
						btn_accept.move(btn_disposal.position.left,btn_disposal.position.top);
						btn_accept.visible = true;
						btn_disposal.visible = false;
					}else if(cbo_bswr_dmnd_stat_cd.value =='10' || cbo_bswr_dmnd_stat_cd.value =='20'){
						btn_accept.visible = false;
						
						btn_disposal.visible = true;
						btn_disposal.enable = true;
					}else{
						btn_accept.visible = false;
						btn_disposal.visible = true;
						btn_disposal.enable = false;
					}
					
					btn_delete.enable = false;
				}else{
					btn_disposal.visible = true;
					
					if(cbo_bswr_dmnd_stat_cd.value == "30"){
						btn_disposal.enable = false;
					}else{
						btn_disposal.enable = true;
					}
					
					btn_delete.enable = true;
				}
			}
			
			btn_delete.visible = true;
			btn_save.visible = false;
			btn_cancel.visible = false;
			
			cbo_bswr_dmnd_stat_cd.readonly = true;
			tea_bswr_dmnd_dsps_cntn.readonly = true;
			cbo_trct_chpr_id.readonly = true;
		break;
		
		case "U":
			btn_disposal.visible = false;
			btn_delete.visible = false;
			btn_save.visible =  true;
			btn_cancel.visible =  true;
			btn_save.move(btn_disposal.position.left , btn_disposal.position.top);
			btn_cancel.move(btn_delete.position.left , btn_delete.position.top);
			cbo_bswr_dmnd_stat_cd.readonly = false;
			tea_bswr_dmnd_dsps_cntn.readonly = false;
			cbo_trct_chpr_id.readonly = false;
			if(ds_list_bswrDmndDtl.getColumn(ds_list_bswrDmndDtl.rowposition , 'trct_chpr_id') == null){
				cbo_trct_chpr_id.index = 0;
			}
		break; 
	}
	fn_setAthr();
}


//권한
function fn_setAthr(){
	if(rgsnYn != "Y"){
	
	}
	
	if(inqYn != "Y"){
		btn_search.enable = false;
	}
	
	if(amntYn != "Y"){
		btn_disposal.enable = false;
		btn_accept.enable = false;
	}
	
	if(dltnYn != "Y"){
		btn_delete.enable = false;
	}
	
	if(pritYn != "Y"){
		
	}
	
	if(xlsYn != "Y"){
		
	}
	
	if(athrPpupYn != "Y"){
		
	}
	
	if(xlsRrnoYn != "Y"){
		
	}
}


/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
//콤보변환 이벤트
function cbo_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	switch(obj){
		case cbo_srch_dateSelect : //검색기간
			gfn_dateSrchDefaultChangeEvnt(calSelect,calStt,calEnd);
		break;
		
		case cbo_srch_bswr_dmnd_stat_typ: //처리상태
			if(obj.index == 0){
				ds_bswrdmndTypCdList_srch.filter("");
				cbo_srch_bswr_dmnd_stat_cd.index = 0;
				cbo_srch_bswr_dmnd_stat_cd.enable = false;
			}else if (obj.index == 1){
				ds_bswrdmndTypCdList_srch.filter("");
				ds_bswrdmndTypCdList_srch.filter('cd == "" || (cd >= 00 && cd <= 20)');
				cbo_srch_bswr_dmnd_stat_cd.enable = true;
			}else if (obj.index == 2){
				ds_bswrdmndTypCdList_srch.filter("");
				ds_bswrdmndTypCdList_srch.filter('cd == "" || cd >= 30');
				cbo_srch_bswr_dmnd_stat_cd.enable = true;
			}
		break;
		
		case cbo_bswr_dmnd_stat_cd : //처리상태
			if(ds_list_bswrDmndDtl.getColumn(ds_list_bswrDmndDtl.rowposition, 'bswr_dmnd_stat_cd') > cbo_bswr_dmnd_stat_cd.value){
				alert("처리상태는 다음상태로만 변경이 가능합니다.");
				cbo_bswr_dmnd_stat_cd.value = ds_list_bswrDmndDtl.getColumn(ds_list_bswrDmndDtl.rowposition, 'bswr_dmnd_stat_cd');
			}
		break;
	}
	
}

//버튼클릭이벤트
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj){
		case btn_init: //초기화버튼
			fn_init();
		break;
		
		case btn_search: //조회버튼
			fn_commSearch(gfn_getCommTypeInit()); // 조회
		break;
		
		case btn_delete://삭제버튼
			if(confirm("삭제하시겠습니까?")){
				fn_deleteData();
			}else {
				return;
			}
		break;
		
		case btn_disposal: //처리버튼 
			if(oParameter == "usr"){
				if(userId != cbo_trct_chpr_id.value && cbo_trct_chpr_id.value != null){
					alert("본인 담당건만 처리가 가능합니다.");
					return;
				}
			}
			
			if(cbo_bswr_dmnd_stat_cd.value == "30"){
				alert("처리완료건은 수정이 불가능합니다.");
				return;
			}
			
			fn_changeComponent("U");
		break;
		
		case btn_cancel :// 취소버튼
			fn_copyRow(); // 상세부에 데이터셋 카피
			fn_changeComponent("R");
		break;
		
		case btn_save://저장버튼
			fn_saveData();
		break;
		
		case btn_accept://접수
			if (confirm("접수하시겠습니까?")){
				fn_accept();
			}
		break;
	}
}

//그리드 클릭이벤트
function grd_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	if(e.cell == 1){
	var sPrmr = {p_consno:ds_list_bswrDmndDtl.getColumn(ds_list_bswrDmndDtl.rowposition,'consno')};
	        var reVal = gfn_diaLog("상담상세정보", -1, -1, 884, 601, "PS020000::PS020503.xfdl", false, sPrmr, true, false, true, null, null, true);
// 		var sPrmr = {mem_no:ds_list_bswrDmndDtl.getColumn(ds_list_bswrDmndDtl.rowposition,'mem_no') ,consno:ds_list_bswrDmndDtl.getColumn(ds_list_bswrDmndDtl.rowposition,'consno')};
// 		
// 		gfn_openConsHstrBswrDmndDtlPop(sPrmr,true);
	}
	fn_copyRow();
	fn_changeComponent("R");
}

//그리드 해드클릭 이벤트 
function grd_list_onheadclick(obj:Grid, e:GridClickEventInfo)
{
	if (!fn_preSearch()) return false;
	ds_inqCndt.setColumn(0, "sController", "/cons/bswr-dmnd-dtl/trct-cons-list/"+oParameter);
	ds_inqCndt.setColumn(0, "dsName", "ds_output");
	
	if(!gfn_pageSearch(gfn_getCommTypeOrderBy(), ds_list_bswrDmndDtl, sta_totalCnt, 100, tc_trctCons)) return;
	
	gfn_grdHeadClick(obj, e, ds_inqCndt);
	
	gfn_setTotalRowCount(ds_list_bswrDmndDtl, sta_totalCnt, tc_trctCons); // 페이지건수 표출
	
	fn_copyRow();
	fn_changeComponent("R");
}
]]></Script>
  </Form>
</FDL>

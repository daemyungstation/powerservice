<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="PS020502" classname="PS020502" inheritanceid="" position="absolute 0 0 814 733" titletext="상담상세정보" scrollbars="none" onload="PS020502_onload" onactivate="PS020502_onactivate">
    <Layouts>
      <Layout>
        <Static id="stc_31" class="sta_popupBg1" enable="false" position="absolute 0 0 814 733"/>
        <Button id="btn_close" taborder="1" onclick="btn_close_onclick" class="btn_popupClose" position="absolute 787 8 807 27"/>
        <Static id="stc_30" text="상담상세정보" class="sta_popupTitle" transparenthittest="true" position="absolute 10 8 185 28"/>
        <Static id="stc_25" text="고객 상세 정보" class="sta_workTitle2" position="absolute 11 46 308 66"/>
        <Static id="stc_00" text="상담이력보기" class="sta_workTitle2" position="absolute 11 397 308 417"/>
        <Static id="stc_28" class="sta_workData" position="absolute 94 494 408 520"/>
        <Static id="stc_26" class="sta_workData" position="absolute 94 469 408 495"/>
        <Static id="stc_27" class="sta_workData" position="absolute 94 444 408 470"/>
        <Static id="stc_37" text="접수번호" class="sta_workLabel1" position="absolute 10 419 95 445" validate=""/>
        <Static id="stc_40" text="처리방법" class="sta_workLabel1" position="absolute 10 494 95 520" validate=""/>
        <Static id="stc_58" class="sta_workData" position="absolute 94 419 803 445"/>
        <Static id="stc_67" text="상담메모" class="sta_workLabel1" position="absolute 407 444 492 520" validate=""/>
        <Static id="stc_80" text="처리상태" class="sta_workLabel1" position="absolute 209 494 294 520" validate=""/>
        <Static id="sta_GrayLine00" class="sta_WF_Line1" position="absolute 10 418 803 419"/>
        <Static id="stc_01" text="접수자" class="sta_workLabel1" position="absolute 10 519 95 545" validate=""/>
        <Static id="stc_02" class="sta_workData" position="absolute 94 519 803 545"/>
        <Static id="stc_04" text="접수일시" class="sta_workLabel1" position="absolute 209 519 294 545" validate=""/>
        <Static id="stc_05" text="담당자" class="sta_workLabel1" position="absolute 407 519 492 545" validate=""/>
        <Static id="stc_06" text="처리일시" class="sta_workLabel1" position="absolute 605 519 690 545" validate=""/>
        <Static id="stc_08" text="상담유형" class="sta_workLabel1" position="absolute 407 419 492 445" validate=""/>
        <Static id="stc_59" class="sta_workData" position="absolute 491 444 803 520"/>
        <Static id="stc_21" text="접수채널" class="sta_workLabel1" position="absolute 10 444 95 470" validate=""/>
        <Static id="stc_22" text="인입번호" class="sta_workLabel1" position="absolute 209 444 294 470" validate=""/>
        <Static id="stc_23" text="내담자" class="sta_workLabel1" position="absolute 10 469 95 495" validate=""/>
        <Edit id="edt_consno" taborder="54" tabstop="false" readonly="true" position="absolute 97 422 301 442"/>
        <Edit id="edt_clnt_nm" taborder="56" tabstop="false" readonly="true" position="absolute 97 472 177 492"/>
        <Edit id="edt_cons_stat_nm" taborder="60" tabstop="false" readonly="true" position="absolute 296 497 393 517"/>
        <Edit id="edt_actp_nm" taborder="61" tabstop="false" readonly="true" position="absolute 97 522 194 542"/>
        <Edit id="edt_chpr_nm" taborder="63" tabstop="false" readonly="true" position="absolute 494 522 591 542"/>
        <Edit id="edt_full_cons_typ_nm" taborder="65" tabstop="false" readonly="true" position="absolute 494 422 800 442"/>
        <Button id="btn_rec" taborder="66" class="btn_Record" enable="false" position="absolute 384 472 404 492" onclick="btn_onclick"/>
        <CheckBox id="chk_conc_yn" taborder="67" text="계약여부" value="N" truevalue="Y" falsevalue="N" readonly="true" enable="false" position="absolute 184 473 246 493" style="border:0 none #808080ff ;"/>
        <TextArea id="tae_cons_memo_cntn" taborder="68" readonly="true" position="absolute 494 447 800 517" wordwrap="both"/>
        <Edit id="edt_cons_dspsmddl_dtpt_nm" taborder="69" tabstop="false" readonly="true" position="absolute 97 497 194 517"/>
        <Static id="sta_GrayLine" class="sta_WF_Line1" position="absolute 10 66 803 67"/>
        <Static id="stc_03" class="sta_workData" position="absolute 94 92 803 118"/>
        <Static id="stc_20" class="sta_workData" position="absolute 94 67 803 93"/>
        <Static id="stc_35" text="신용등급" class="sta_workLabel1" position="absolute 10 167 95 193" style="font:Dotum,8;" validate=""/>
        <Static id="stc_12" text="회사전화" class="sta_workLabel1" position="absolute 10 142 95 168" style="font:Dotum,8;" validate=""/>
        <Static id="stc_09" text="자택전화" class="sta_workLabel1" position="absolute 10 117 95 143" style="font:Dotum,8;" validate=""/>
        <Static id="stc_11" text="회원번호" class="sta_workLabel1" position="absolute 10 92 95 118" style="font:Dotum,8;" validate=""/>
        <Static id="stc_13" text="고유번호" class="sta_workLabel1" position="absolute 10 67 95 93" style="font:Dotum,8;" validate=""/>
        <Static id="stc_18" class="sta_workData" position="absolute 94 117 803 143"/>
        <Static id="stc_19" class="sta_workData" position="absolute 94 142 803 168"/>
        <Static id="stc_56" class="sta_workData" position="absolute 94 167 408 193"/>
        <Static id="stc_57" class="sta_workData" position="absolute 94 192 408 218"/>
        <Static id="stc_69" text="담당사원" class="sta_workLabel1" position="absolute 209 192 294 218" validate=""/>
        <Static id="stc_70" text="비고" class="sta_workLabel1" position="absolute 407 167 492 218" validate=""/>
        <Static id="stc_71" text="성별" class="sta_workLabel1" position="absolute 407 67 492 93" validate=""/>
        <Static id="stc_memNm" text="회원명" class="sta_workLabel1" position="absolute 209 67 294 93" validate=""/>
        <Static id="stc_73" text="생년월일" class="sta_workLabel1" position="absolute 605 67 690 93" validate=""/>
        <Static id="stc_74" text="수령지" class="sta_workLabel1" position="absolute 407 117 492 168" style="align:left top;" validate=""/>
        <Static id="stc_75" text="E-MAIL" class="sta_workLabel1" position="absolute 10 192 95 218" validate=""/>
        <Static id="stc_76" text="관리번호" class="sta_workLabel1" position="absolute 209 167 294 193" validate=""/>
        <Edit id="edt_mem_no" taborder="70" tabstop="false" position="absolute 97 70 194 90" readonly="true"/>
        <Edit id="edt_accnt_no" taborder="71" tabstop="false" position="absolute 97 95 194 115" readonly="true"/>
        <Edit id="edt_wrpl_tel" taborder="72" tabstop="false" position="absolute 97 145 194 165" readonly="true"/>
        <Edit id="edt_home_tel" taborder="73" tabstop="false" position="absolute 97 120 194 140" readonly="true"/>
        <Static id="stc_10" text="사업자여부" class="sta_workLabel1" position="absolute 209 92 294 118" validate=""/>
        <Static id="stc_ciVal" text="CI/DI" class="sta_workLabel1" position="absolute 407 92 492 118" validate=""/>
        <Static id="stc_16" text="휴대전화" class="sta_workLabel1" position="absolute 209 117 294 143" validate=""/>
        <Static id="stc_17" text="가입일자" class="sta_workLabel1" position="absolute 209 142 294 168" validate=""/>
        <Edit id="edt_mem_nm" taborder="75" tabstop="false" position="absolute 296 70 393 90" readonly="true"/>
        <Edit id="edt_cell" taborder="76" tabstop="false" position="absolute 296 120 393 140" readonly="true"/>
        <Edit id="edt_crdt_mng_no" taborder="77" tabstop="false" position="absolute 296 170 393 190" readonly="true"/>
        <Edit id="edt_ci_val" taborder="78" tabstop="false" position="absolute 494 95 700 115" readonly="true"/>
        <Edit id="edt_home_addr" taborder="79" tabstop="false" position="absolute 551 120 799 140" readonly="true"/>
        <Edit id="edt_home_addr2" taborder="80" tabstop="false" position="absolute 494 145 799 165" readonly="true"/>
        <Edit id="edt_emple_nm" taborder="82" tabstop="false" position="absolute 296 195 393 215" readonly="true"/>
        <Edit id="edt_email" taborder="85" tabstop="false" position="absolute 97 195 206 215" readonly="true"/>
        <Combo id="cbo_credit_rating" taborder="86" innerdataset="@ds_creditRating" codecolumn="cd" datacolumn="cd_nm" enable="false" position="absolute 97 169 194 191" readonly="false" displaynulltext="선택"/>
        <MaskEdit id="mae_idn_no" taborder="87" type="string" mask="###-##-#####" autoskip="true" visible="false" position="absolute 718 95 801 115" readonly="false"/>
        <MaskEdit id="mae_home_zip" taborder="88" tabstop="false" type="string" autoselect="true" position="absolute 494 120 548 140" style="align:left middle;" readonly="true"/>
        <CheckBox id="chk_business_yn" taborder="89" text="사업자" value="N" truevalue="Y" falsevalue="N" readonly="true" enable="false" position="absolute 300 96 362 116" style="border:0 none #808080ff ;"/>
        <MaskEdit id="mae_join_dt" taborder="90" tabstop="false" type="string" position="absolute 296 145 379 165" style="align:left middle;" readonly="true"/>
        <MaskEdit id="mae_brth_mon_day" taborder="91" tabstop="false" type="string" position="absolute 692 70 775 90" style="align:left middle;" readonly="true"/>
        <Combo id="cbo_sex" taborder="92" innerdataset="ds_sex" codecolumn="cd" datacolumn="cd_nm" enable="false" position="absolute 494 69 591 91"/>
        <Edit id="edt_acpg_chnl_nm" taborder="93" tabstop="false" readonly="true" position="absolute 97 447 169 467"/>
        <MaskEdit id="mae_acpg_dttm" taborder="94" position="absolute 296 522 406 542" tabstop="false" readonly="true" mask="####-##-## ##:##" type="string" style="align:left middle;"/>
        <MaskEdit id="mae_cons_dsps_dttm" taborder="95" tabstop="false" position="absolute 694 522 800 542" readonly="true" type="string"/>
        <Edit id="edt_inco_tlno" taborder="96" tabstop="false" readonly="true" position="absolute 296 447 393 467"/>
        <Static id="stc_txt_subTit" text="상담이력 리스트" class="sta_workTitle2" visible="true" position="absolute 10 223 307 243"/>
        <Button id="btn_gdInit_consHstr" taborder="97" onclick="btn_gdInit_onclick" class="btn_grd_Change" visible="true" position="absolute 784 227 800 243" tooltiptext="다중정렬"/>
        <Grid id="grd_list_consHstr" taborder="98" binddataset="ds_list_consHstr" useinputpanel="false" cellsizingtype="col" autofittype="none" visible="true" position="absolute 10 244 803 394" oncellclick="grd_list_oncellclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="35"/>
                <Column size="105"/>
                <Column size="140"/>
                <Column size="80"/>
                <Column size="105"/>
                <Column size="80"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="105"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="NO"/>
                <Cell col="1" text="변경일시"/>
                <Cell col="2" text="회원번호"/>
                <Cell col="3" text="접수자"/>
                <Cell col="4" text="접수일시"/>
                <Cell col="5" text="접수채널"/>
                <Cell col="6" text="인입번호"/>
                <Cell col="7" text="자택전화"/>
                <Cell col="8" text="휴대전화"/>
                <Cell col="9" text="상담유형1"/>
                <Cell col="10" text="상담유형2"/>
                <Cell col="11" text="상담유형3"/>
                <Cell col="12" text="처리방법"/>
                <Cell col="13" text="처리상태"/>
                <Cell col="14" text="처리자"/>
                <Cell col="15" text="처리일시"/>
              </Band>
              <Band id="body">
                <Cell text="expr:currow+1"/>
                <Cell col="1" text="bind:chng_dttm" mask="####-##-## ##:##"/>
                <Cell col="2" text="bind:accnt_no"/>
                <Cell col="3" text="bind:actp_nm"/>
                <Cell col="4" text="bind:acpg_dttm" mask="####-##-## ##:##"/>
                <Cell col="5" text="bind:acpg_chnl_nm"/>
                <Cell col="6" displaytype="expr:gfn_isNull(inco_tlno) ? &quot;none&quot; : &quot;mask&quot;" text="bind:inco_tlno" expr="expr:expr:expr:gfn_isNull(inco_tlno) ? &quot;&quot; : inco_tlno" mask="expr:gfn_SetTelNoGrdMask(inco_tlno)"/>
                <Cell col="7" displaytype="expr:gfn_isNull(home_tel) ? &quot;none&quot; : &quot;mask&quot;" text="bind:home_tel" expr="expr:expr:gfn_isNull(home_tel) ? &quot;&quot; : home_tel" mask="expr:gfn_SetTelNoGrdMask(home_tel)"/>
                <Cell col="8" displaytype="expr:gfn_isNull(cell) ? &quot;none&quot; : &quot;mask&quot;" text="bind:cell" expr="expr:expr:gfn_isNull(cell) ? &quot;&quot; : cell" mask="expr:gfn_SetTelNoGrdMask(cell)"/>
                <Cell col="9" text="bind:cons_typ1_nm"/>
                <Cell col="10" text="bind:cons_typ2_nm"/>
                <Cell col="11" text="bind:cons_typ3_nm"/>
                <Cell col="12" text="bind:cons_dspsmddl_dtpt_nm"/>
                <Cell col="13" text="bind:cons_stat_nm"/>
                <Cell col="14" text="bind:amnd_nm"/>
                <Cell col="15" text="bind:amnt_dttm" mask="####-##-## ##:##"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Grid id="grd_list_bswrDmndHstr" taborder="99" binddataset="ds_list_bswrDmndHstr" useinputpanel="false" cellsizingtype="col" oncellclick="grd_list_oncellclick" onheadclick="grd_list_onheadclick" oncelldblclick="grd_list_oncelldblclick" position="absolute 10 571 803 721">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="30"/>
                <Column size="105"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="80"/>
                <Column size="105"/>
                <Column size="80"/>
                <Column size="105"/>
                <Column size="105"/>
                <Column size="100"/>
              </Columns>
              <Rows>
                <Row size="25" band="head"/>
                <Row size="25"/>
              </Rows>
              <Band id="head">
                <Cell text="NO"/>
                <Cell col="1" text="변경일시" id="consno"/>
                <Cell col="2" text="이관처리상태" id="bswr_dmnd_stat_nm"/>
                <Cell col="3" text="이관구분" id="trct_typ_nm"/>
                <Cell col="4" text="상담처리상태" id="cons_stat_nm"/>
                <Cell col="5" text="이관요청자" id="trct_actp_nm"/>
                <Cell col="6" text="요청일시" id="trct_acpg_dttm"/>
                <Cell col="7" text="이관담당자" id="trct_chpr_nm"/>
                <Cell col="8" text="확인일시" id="bswr_dmnd_cnft_dttm"/>
                <Cell col="9" text="처리일시" id="trnm_dsps_dttm"/>
                <Cell col="10" text="경과시간" id="calb_resr_term"/>
              </Band>
              <Band id="body">
                <Cell text="expr:currow+1"/>
                <Cell col="1" style="selectfont: ;" text="bind:chng_dttm" mask="####-##-## ##:##"/>
                <Cell col="2" text="bind:bswr_dmnd_stat_nm"/>
                <Cell col="3" text="bind:trct_typ_nm"/>
                <Cell col="4" text="bind:cons_stat_nm"/>
                <Cell col="5" text="bind:trct_actp_nm"/>
                <Cell col="6" text="bind:trct_acpg_dttm" mask="####-##-## ##:##"/>
                <Cell col="7" text="bind:trct_chpr_nm"/>
                <Cell col="8" displaytype="expr:gfn_isNull(bswr_dmnd_cnft_dttm) ? &quot;none&quot; : &quot;mask&quot;" text="bind:bswr_dmnd_cnft_dttm" expr="expr:gfn_isNull(bswr_dmnd_cnft_dttm) ? &quot;&quot; : bswr_dmnd_cnft_dttm" mask="expr:gfn_SetDateGrdMask(bswr_dmnd_cnft_dttm)"/>
                <Cell col="9" displaytype="expr:gfn_isNull(trnm_dsps_dttm) ? &quot;none&quot; : &quot;mask&quot;" text="bind:trnm_dsps_dttm" expr="expr:gfn_isNull(trnm_dsps_dttm) ? &quot;&quot; : trnm_dsps_dttm" mask="expr:gfn_SetDateGrdMask(trnm_dsps_dttm)"/>
                <Cell col="10" text="bind:calb_resr_term"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="stc_07" text="상담이관이력 리스트" class="sta_workTitle2" position="absolute 11 550 308 570"/>
        <Button id="btn_gdInit_bswrDmndHstr" taborder="100" onclick="btn_gdInit_onclick" class="btn_grd_Change" position="absolute 784 554 800 570" tooltiptext="다중정렬"/>
        <Combo id="cbo_rec_id" taborder="101" displaynulltext="선택" innerdataset="ds_list_rec" codecolumn="rec_id" datacolumn="rec_id" onitemchanged="cbo_onitemchanged" anchor="default" position="absolute 255 472 383 492" positiontype="position" enable="false"/>
        <Static id="stc_14" class="sta_workData" position="absolute 491 167 803 218"/>
        <TextArea id="tae_note" taborder="103" anchor="default" position="absolute 493 170 801 216" positiontype="position" wordwrap="both" readonly="true"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item17" compid="edt_consno" propid="value" datasetid="ds_consHstr" columnid="consno"/>
      <BindItem id="item21" compid="edt_clnt_nm" propid="value" datasetid="ds_consHstr" columnid="clnt_nm"/>
      <BindItem id="item24" compid="edt_cons_stat_nm" propid="value" datasetid="ds_consHstr" columnid="cons_stat_nm"/>
      <BindItem id="item25" compid="edt_actp_nm" propid="value" datasetid="ds_consHstr" columnid="actp_nm"/>
      <BindItem id="item27" compid="edt_chpr_nm" propid="value" datasetid="ds_consHstr" columnid="chpr_nm"/>
      <BindItem id="item22" compid="chk_conc_yn" propid="value" datasetid="ds_consHstr" columnid="conc_yn"/>
      <BindItem id="item29" compid="tae_cons_memo_cntn" propid="value" datasetid="ds_consHstr" columnid="cons_memo_cntn"/>
      <BindItem id="item23" compid="edt_cons_dspsmddl_dtpt_nm" propid="value" datasetid="ds_consHstr" columnid="cons_dspsmddl_dtpt_nm"/>
      <BindItem id="item1" compid="edt_mem_no" propid="value" datasetid="ds_consHstr" columnid="mem_no"/>
      <BindItem id="item3" compid="edt_accnt_no" propid="value" datasetid="ds_consHstr" columnid="accnt_no"/>
      <BindItem id="item11" compid="edt_wrpl_tel" propid="value" datasetid="ds_consHstr" columnid="wrpl_tel"/>
      <BindItem id="item6" compid="edt_home_tel" propid="value" datasetid="ds_consHstr" columnid="home_tel"/>
      <BindItem id="item2" compid="edt_mem_nm" propid="value" datasetid="ds_consHstr" columnid="mem_nm"/>
      <BindItem id="item7" compid="edt_cell" propid="value" datasetid="ds_consHstr" columnid="cell"/>
      <BindItem id="item13" compid="edt_crdt_mng_no" propid="value" datasetid="ds_consHstr" columnid="crdt_mng_no"/>
      <BindItem id="item5" compid="edt_ci_val" propid="value" datasetid="ds_consHstr" columnid="ci_val"/>
      <BindItem id="item10" compid="edt_home_addr" propid="value" datasetid="ds_consHstr" columnid="home_addr"/>
      <BindItem id="item12" compid="edt_home_addr2" propid="value" datasetid="ds_consHstr" columnid="home_addr2"/>
      <BindItem id="item16" compid="edt_emple_nm" propid="value" datasetid="ds_consHstr" columnid="emple_nm"/>
      <BindItem id="item15" compid="edt_email" propid="value" datasetid="ds_consHstr" columnid="email"/>
      <BindItem id="item18" compid="cbo_credit_rating" propid="value" datasetid="ds_consHstr" columnid="credit_rating"/>
      <BindItem id="item35" compid="mae_idn_no" propid="value" datasetid="ds_consHstr" columnid="idn_no"/>
      <BindItem id="item14" compid="mae_home_zip" propid="value" datasetid="ds_consHstr" columnid="home_zip"/>
      <BindItem id="item8" compid="chk_business_yn" propid="value" datasetid="ds_consHstr" columnid="business_yn"/>
      <BindItem id="item4" compid="mae_join_dt" propid="value" datasetid="ds_consHstr" columnid="join_dt"/>
      <BindItem id="item0" compid="mae_brth_mon_day" propid="value" datasetid="ds_consHstr" columnid="brth_mon_day"/>
      <BindItem id="item9" compid="cbo_sex" propid="value" datasetid="ds_consHstr" columnid="sex"/>
      <BindItem id="item19" compid="edt_acpg_chnl_nm" propid="value" datasetid="ds_consHstr" columnid="acpg_chnl_nm"/>
      <BindItem id="item20" compid="mae_acpg_dttm" propid="value" datasetid="ds_consHstr" columnid="acpg_dttm"/>
      <BindItem id="item26" compid="mae_cons_dsps_dttm" propid="value" datasetid="ds_consHstr" columnid="acpg_dttm"/>
      <BindItem id="item28" compid="edt_inco_tlno" propid="value" datasetid="ds_consHstr" columnid="inco_tlno"/>
      <BindItem id="item31" compid="tae_note" propid="value" datasetid="ds_consHstr" columnid="note"/>
    </Bind>
    <Objects>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_creditRating" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sex" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_consHstr" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="chng_dttm" type="STRING" size="256"/>
          <Column id="consno" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="sex" type="STRING" size="256"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="business_yn" type="STRING" size="256"/>
          <Column id="ci_val" type="STRING" size="256"/>
          <Column id="home_tel" type="STRING" size="256"/>
          <Column id="cell" type="STRING" size="256"/>
          <Column id="wrpl_tel" type="STRING" size="256"/>
          <Column id="home_zip" type="STRING" size="256"/>
          <Column id="home_addr" type="STRING" size="256"/>
          <Column id="home_addr2" type="STRING" size="256"/>
          <Column id="join_dt" type="STRING" size="256"/>
          <Column id="credit_rating" type="STRING" size="256"/>
          <Column id="crdt_mng_no" type="STRING" size="256"/>
          <Column id="emple_no" type="STRING" size="256"/>
          <Column id="emple_nm" type="STRING" size="256"/>
          <Column id="email" type="STRING" size="256"/>
          <Column id="cons_typ1_nm" type="STRING" size="256"/>
          <Column id="cons_typ2_nm" type="STRING" size="256"/>
          <Column id="cons_typ3_nm" type="STRING" size="256"/>
          <Column id="acpg_chnl_cd" type="STRING" size="256"/>
          <Column id="acpg_chnl_nm" type="STRING" size="256"/>
          <Column id="inco_tlno" type="STRING" size="256"/>
          <Column id="clnt_nm" type="STRING" size="256"/>
          <Column id="conc_yn" type="STRING" size="256"/>
          <Column id="cons_memo_cntn" type="STRING" size="4000"/>
          <Column id="cons_dspsmddl_dtpt_nm" type="STRING" size="256"/>
          <Column id="cons_stat_nm" type="STRING" size="256"/>
          <Column id="actp_nm" type="STRING" size="256"/>
          <Column id="acpg_dttm" type="STRING" size="256"/>
          <Column id="chpr_nm" type="STRING" size="256"/>
          <Column id="cons_dsps_dttm" type="STRING" size="256"/>
          <Column id="note" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_consHstr" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="chng_dttm" type="STRING" size="256"/>
          <Column id="consno" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="sex" type="STRING" size="256"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="business_yn" type="STRING" size="256"/>
          <Column id="ci_val" type="STRING" size="256"/>
          <Column id="home_tel" type="STRING" size="256"/>
          <Column id="cell" type="STRING" size="256"/>
          <Column id="wrpl_tel" type="STRING" size="256"/>
          <Column id="home_zip" type="STRING" size="256"/>
          <Column id="home_addr" type="STRING" size="256"/>
          <Column id="home_addr2" type="STRING" size="256"/>
          <Column id="join_dt" type="STRING" size="256"/>
          <Column id="credit_rating" type="STRING" size="256"/>
          <Column id="crdt_mng_no" type="STRING" size="256"/>
          <Column id="emple_no" type="STRING" size="256"/>
          <Column id="emple_nm" type="STRING" size="256"/>
          <Column id="email" type="STRING" size="256"/>
          <Column id="cons_typ1_nm" type="STRING" size="256"/>
          <Column id="cons_typ2_nm" type="STRING" size="256"/>
          <Column id="cons_typ3_nm" type="STRING" size="256"/>
          <Column id="acpg_chnl_cd" type="STRING" size="256"/>
          <Column id="acpg_chnl_nm" type="STRING" size="256"/>
          <Column id="inco_tlno" type="STRING" size="256"/>
          <Column id="clnt_nm" type="STRING" size="256"/>
          <Column id="conc_yn" type="STRING" size="256"/>
          <Column id="cons_memo_cntn" type="STRING" size="256"/>
          <Column id="cons_dspsmddl_dtpt_nm" type="STRING" size="256"/>
          <Column id="cons_stat_nm" type="STRING" size="256"/>
          <Column id="actp_nm" type="STRING" size="256"/>
          <Column id="acpg_dttm" type="STRING" size="256"/>
          <Column id="chpr_nm" type="STRING" size="256"/>
          <Column id="cons_dsps_dttm" type="STRING" size="256"/>
          <Column id="note" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_bswrDmndHstr" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="chng_dttm" type="STRING" size="256"/>
          <Column id="consno" type="STRING" size="256"/>
          <Column id="consno_grop_no" type="STRING" size="256"/>
          <Column id="consno_sqno" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="bswr_dmnd_stat_cd" type="STRING" size="256"/>
          <Column id="bswr_dmnd_stat_nm" type="STRING" size="256"/>
          <Column id="trct_typ_cd" type="STRING" size="256"/>
          <Column id="trct_typ_nm" type="STRING" size="256"/>
          <Column id="cons_stat_cd" type="STRING" size="256"/>
          <Column id="cons_stat_nm" type="STRING" size="256"/>
          <Column id="trct_actp_id" type="STRING" size="256"/>
          <Column id="trct_actp_nm" type="STRING" size="256"/>
          <Column id="trct_acpg_dttm" type="STRING" size="256"/>
          <Column id="trct_chpr_id" type="STRING" size="256"/>
          <Column id="trct_chpr_nm" type="STRING" size="256"/>
          <Column id="bswr_dmnd_cnft_dttm" type="STRING" size="256"/>
          <Column id="trnm_dsps_dttm" type="STRING" size="256"/>
          <Column id="calb_resr_term" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_rec" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="consno" type="STRING" size="256"/>
          <Column id="rec_id" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt_rec" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="consno" type="STRING" size="256"/>
          <Column id="rec_cons_yn" type="STRING" size="256"/>
          <Column id="rec_prod_yn" type="STRING" size="256"/>
          <Column id="rec_ob_yn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/********************************************************************************************/
/* 1. Include Library include, variables Declaration 영역                                  */
/********************************************************************************************/
include "LIB::lib_All.xjs";

var gv_consno = "";

/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트) 처리                                           	*/
/********************************************************************************************/
function PS020502_onload(obj:Form, e:LoadEventInfo)
{
	grd_list_consHstr.useGridPopup = 'Y';
	grd_list_bswrDmndHstr.useGridPopup = 'Y';
	gfn_initForm(obj);
	
	gv_consno = p_consno;
	gfn_getList("dlwCd", "0123,0153"); // 공통코드조회
}

/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
function fn_callBack(svcid, errcd, errmsg)
{
	if (errcd != 0) {
		trace(errcd)
		return false;
	} else {
		switch (svcid) {
			case "selectDlwCode": // 공통코드 조회 callBack Service ID
			gfn_getCode("0123", "SELECT", ds_sex, gds_DmlCd); 			// 코드조회결과 필터
			gfn_getCode("0153", "SELECT", ds_creditRating, gds_DmlCd); // 코드조회결과 필터
			
			fn_srchHstrList();
			break;
			
			case "srchConsHstrList":
			fn_postSearchConsHstr();
			break;
			
			case "srchConsRecList":
			cbo_rec_id.index = 0;
			if (ds_list_rec.rowcount > 0) {
				cbo_rec_id.enable = true;
				btn_rec.enable = true;
			} else {
				cbo_rec_id.enable = false;
				btn_rec.enable = false;
			}
			break;
		}
	}
}

/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/
// 조회
function fn_preSearch()
{
	if (gfn_isNull(gv_consno)) {
		alert("상담번호가 없습니다.");
		colse();
		return false;
	}
	
	return true;
}

/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
// 상담이력 목록 조회
function fn_commSearchConsHstr()
{	
	var szSvcid       = "srchConsHstrList";
    var szController  = "/cons/hstr/list";
    var szInDs        = "";
    var szOutDs       = "ds_list_consHstr=ds_output";
    var szParam       = "consno="+gv_consno;
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

// 상담이관이력 목록 조회
function fn_commSearchBswrDmndHstr()
{	
	var szSvcid       = "srchBswrDmndHstrList";
    var szController  = "/cons/bswr-dmnd-dtl-hstr/list";
    var szInDs        = "";
    var szOutDs       = "ds_list_bswrDmndHstr=ds_output";
    var szParam       = "consno="+gv_consno;
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

// 녹취 목록 조회
function fn_commSearchRecList()
{
	ds_inqCndt_rec.clearData();
	ds_inqCndt_rec.addRow();
	ds_inqCndt_rec.setColumn(0, "consno", gv_consno);
	ds_inqCndt_rec.setColumn(0, "rec_cons_yn", "Y");
	ds_inqCndt_rec.setColumn(0, "rec_prod_yn", "N");
	ds_inqCndt_rec.setColumn(0, "rec_ob_yn", "N");
	
	var szSvcid       = "srchConsRecList";
    var szController  = "/cti-hstr/list";
    var szInDs        = "ds_input=ds_inqCndt_rec";
    var szOutDs       = "ds_list_rec=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/
// 이력 리스트 조회
function fn_srchHstrList()
{
	if (!fn_preSearch()) return false;
	
	//fn_commSearchRecList();
	fn_commSearchConsHstr();
	fn_commSearchBswrDmndHstr();
}

// 상담이력 조회결과
function fn_postSearchConsHstr()
{
	if (ds_list_consHstr.rowcount > 0) {
		fn_setConsHstr();
		
		// 권한(관리자) 및 처리자(본인)일 경우에만 녹취청취 가능
		var sAthrCd = gds_UserInfo.getColumn(0, "athr_cd");		// 권한
		var sUserId = gds_UserInfo.getColumn(0, "user_id");		// 권한
		var sChprId = ds_list_consHstr.getColumn(0, "chpr_id");	// 처리자
		if (sAthrCd=="AT01" || sAthrCd=="CC10" || sAthrCd=="CC20" || sAthrCd=="OP10" || sAthrCd=="OP20"
		 || sAthrCd=="TM10" || sAthrCd=="TM20" || sAthrCd=="TM30" || sAthrCd=="TM11" || sUserId == sChprId) {
			fn_commSearchRecList();
		}
	} else {
		ds_consHstr.clearData();
	}
}

// 상담이력 설정
function fn_setConsHstr()
{
	ds_consHstr.clearData();
	ds_consHstr.addRow();
	ds_consHstr.copyRow(0, ds_list_consHstr, ds_list_consHstr.rowposition);
	
	fn_businessYn(ds_consHstr.getColumn(0, "business_yn"));
	if (gfn_isNull(ds_consHstr.getColumn(0, "cons_typ1_nm"))) {
		edt_full_cons_typ_nm.value = "";
	} else {
		edt_full_cons_typ_nm.value = ds_consHstr.getColumn(0, "cons_typ1_nm") + " > " + ds_consHstr.getColumn(0, "cons_typ2_nm") + " > " + ds_consHstr.getColumn(0, "cons_typ3_nm");
	}
	
	if (!gfn_isNull(ds_consHstr.getColumn(0, "join_dt"))) {
		mae_join_dt.mask = "####-##-##";
	} else {
		mae_join_dt.mask = "";
	}
	
	if (!gfn_isNull(ds_consHstr.getColumn(0, "brth_mon_day"))) {
		mae_brth_mon_day.mask = "####-##-##";
	} else {
		mae_brth_mon_day.mask = "";
	}
	
	gfn_SetHomeZipMask(mae_home_zip);
	
	gfn_phoneNumObj(edt_cell);
	gfn_phoneNumObj(edt_home_tel);
	gfn_phoneNumObj(edt_wrpl_tel);
	gfn_phoneNumObj(edt_inco_tlno);
	
	if (gfn_isNull(mae_cons_dsps_dttm)) {
		mae_cons_dsps_dttm.mask = "";
	} else {
		mae_cons_dsps_dttm.mask = "####-##-## ##:##";
	}
	
	if (cbo_sex.value == undefined) {
		cbo_sex.value = "";
	}
	if (cbo_credit_rating.value == undefined) {
		cbo_credit_rating.value = "";
	}
}

// 사업자 여부 설정
function fn_businessYn(sType)
{
	if (sType == "Y") {
		stc_ciVal.text = "사업자번호";
		edt_ci_val.value = "";
		edt_ci_val.visible = false;
		
		stc_memNm.text = "업체명";
		mae_idn_no.move(494, 95);
		mae_idn_no.visible = true;
	} else {
		stc_ciVal.text = "CI/DI";
		edt_ci_val.visible = true;
		
		stc_memNm.text = "회원명";
		mae_idn_no.visible = false;
		mae_idn_no.value = "";
	}
}

/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
// 닫기
function btn_close_onclick(obj:Button,  e:ClickEventInfo)
{
	close();
}

// onactivate
function PS020502_onactivate(obj:Form, e:ActivateEventInfo)
{
	if (!gfn_isNull(this.userParam)) {
		gv_consno = this.userParam.p_consno;
		fn_srchHstrList();
	
		// 폼에 parameter 초기화한다.
		this.userParam = null;
	}
}

// 그리드 셀 선택
function grd_list_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	if (obj.name == "grd_list_consHstr") {
		fn_setConsHstr();
	}
}

// 그리드 헤더 사이즈 초기화
function btn_gdInit_onclick(obj:Button,  e:ClickEventInfo)
{
	if (obj.name == "btn_gdInit_consHstr") {
		gfn_resetColsize(grd_list_consHstr);
	} else if (obj.name == "btn_gdInit_bswrDmndHstr") {
		gfn_resetColsize(grd_list_bswrDmndHstr);
	}
}

// button onclick
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	if (gfn_isNull(cbo_rec_id.value)) return;
	if (obj.name == "btn_rec") {
		ap_TopFrame.form.gfn_play(cbo_rec_id.value);
	}
}

]]></Script>
  </Form>
</FDL>

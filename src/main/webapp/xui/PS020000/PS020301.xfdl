<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="PS020301" classname="PS020301" inheritanceid="" position="absolute 0 0 760 259" titletext="CMS/카드 출금이체신청/해지 부가서비스" scrollbars="none" onload="PS020301_onload">
    <Layouts>
      <Layout>
        <ActiveX id="CMSCommAX" useautobitmapcache="1" taborder="1" progid="{60601393-834E-44DA-84BE-99E08C9734FE}" visible="false" anchor="default" position="absolute 768 40 906 67" positiontype="position"/>
        <Static id="stc_31" class="sta_popupBg1" enable="false" position="absolute 0 0 760 259"/>
        <Tab id="tab_01" taborder="2" tabindex="0" position="absolute 12 47 748 247" anchor="default" positiontype="position">
          <Tabpages>
            <Tabpage id="cms" text="CMS" scrollbars="none">
              <Layouts>
                <Layout width="739" height="223">
                  <Static id="stc_bzop" text="사업자번호" class="sta_workLabel1" position="absolute 513 59 598 85" style="font:Dotum,8;" validate=""/>
                  <Button id="btn_Init" taborder="109" onclick="btn_Init_onclick" class="btn_WF_Return" tooltiptext="초기화" anchor="default" position="absolute 651 9 723 29" positiontype="position" positionstep="0"/>
                  <Static id="stc_00" text="CMS신청" class="sta_workTitle2" position="absolute 11 12 100 32" anchor="default" positiontype="position"/>
                  <Static id="sta_GrayLine" class="sta_WF_Line1" anchor="default" position="absolute 11 33 724 34" positiontype="position"/>
                  <Static id="stc_11" text="회원번호" class="sta_workLabel1" position="absolute 11 34 96 60" style="font:Dotum,8;" validate="" anchor="default" positiontype="position"/>
                  <Static id="stc_brdt" text="생년월일" class="sta_workLabel1" position="absolute 11 59 96 85" style="font:Dotum,8;" validate="" anchor="default" positiontype="position"/>
                  <Static id="stc_12" text="은행코드" class="sta_workLabel1" position="absolute 11 84 96 110" style="font:Dotum,8;" validate="" anchor="default" positiontype="position"/>
                  <Button id="btn_Init02" taborder="110" onclick="btn_saveCmsRgsnInfo_onclick" class="btn_WF_Save" tooltiptext="저장" anchor="default" position="absolute 575 9 647 29" positiontype="position" positionstep="0"/>
                  <Radio id="rdo_cmsApcl" taborder="111" columncount="0" rowcount="0" index="-1" innerdataset="@ds_Radio" codecolumn="lv" datacolumn="text" onitemchanged="tab_cms_Radio00_onitemchanged" anchor="default" position="absolute 107 12 251 30" positiontype="position" direction="vertical" style="textpadding:0 0 0 5;"/>
                  <CheckBox id="ckb_dfrTrmt" taborder="112" text="보류해지" value="N" truevalue="Y" falsevalue="N" visible="false" anchor="default" position="absolute 260 11 328 31" positiontype="position"/>
                  <CheckBox id="ckb_bankDsps" taborder="113" text="은행처리분" value="N" truevalue="Y" falsevalue="N" visible="false" anchor="default" position="absolute 332 11 411 31" positiontype="position"/>
                  <CheckBox id="ckb_webModule" taborder="114" text="실시간 웹모듈 연결끊기" value="N" truevalue="Y" falsevalue="N" visible="false" anchor="default" position="absolute 414 11 578 31" positiontype="position"/>
                  <Static id="stc_17" class="sta_workData" anchor="default" position="absolute 94 34 724 60" positiontype="position"/>
                  <Static id="stc_02" text="회원명" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 290 34 375 60" positiontype="position"/>
                  <Static id="stc_03" text="고유번호" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 513 34 598 60" positiontype="position"/>
                  <Static id="stc_01" onclick="div_Work_tab_02_tabpage1_stc_01_onclick" class="sta_workData" anchor="default" position="absolute 94 59 724 85" positiontype="position"/>
                  <Static id="stc_04" class="sta_workData" anchor="default" position="absolute 94 84 724 110" positiontype="position"/>
                  <CheckBox id="ckb_bzop" taborder="115" text="사업자" value="N" truevalue="Y" falsevalue="N" onchanged="tab_cms_ckb_bzop_onchanged" anchor="default" position="absolute 216 63 284 83" positiontype="position"/>
                  <Static id="stc_09" text="계좌번호" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 290 84 375 110" positiontype="position"/>
                  <Static id="stc_14" text="등록일" class="sta_workLabel1" position="absolute 11 134 96 160" style="font:Dotum,8;" validate="" anchor="default" positiontype="position"/>
                  <Static id="stc_15" class="sta_workData" anchor="default" position="absolute 94 134 724 160" positiontype="position"/>
                  <Edit id="edt_custaccntNo" taborder="117" readonly="true" class="edt_clssEnable" anchor="default" position="absolute 97 37 217 57" positiontype="position"/>
                  <Edit id="edt_mmbrNm" taborder="118" readonly="true" class="edt_clssEnable" anchor="default" position="absolute 377 37 467 57" positiontype="position"/>
                  <Edit id="edt_mmbrNo" taborder="119" readonly="true" class="edt_clssEnable" anchor="default" position="absolute 600 37 715 57" positiontype="position"/>
                  <Edit id="edt_brdt" taborder="120" inputtype="number" maxlength="6" class="edt_clssEnable" anchor="default" position="absolute 97 62 212 82" positiontype="position" style="align:center middle;"/>
                  <Edit id="edt_bankCd" taborder="121" inputtype="number" readonly="true" class="edt_clssEnable" anchor="default" position="absolute 97 87 137 107" positiontype="position" style="align:center middle;"/>
                  <Edit id="edt_bankNm" taborder="122" readonly="true" class="edt_clssEnable" anchor="default" position="absolute 141 87 261 107" positiontype="position"/>
                  <Edit id="edt_bankaccntNo" taborder="123" inputtype="number" anchor="default" position="absolute 377 87 507 107" positiontype="position" lengthunit="utf8" maxlength="0"/>
                  <Calendar id="cal_rgsnDt" taborder="126" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" anchor="default" position="absolute 97 137 192 157" positiontype="position"/>
                  <Button id="btn_13" taborder="127" onclick="btn_Bank_onclick" class="btn_workSrcPop" anchor="default" position="absolute 265 87 285 107" positiontype="position"/>
                  <Static id="stc_16" text="이체일자" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 513 84 598 110" positiontype="position"/>
                  <Edit id="edt_tranDt" taborder="130" inputtype="number" maxlength="2" anchor="default" position="absolute 600 87 715 107" positiontype="position"/>
                  <Static id="stc_05" text="예금주" class="sta_workLabel1" position="absolute 11 109 96 135" style="font:Dotum,8;" validate=""/>
                  <Static id="stc_08" class="sta_workData" anchor="default" position="absolute 94 109 724 135" positiontype="position"/>
                  <Edit id="edt_depr" taborder="124" class="edt_clssEnable" anchor="default" position="absolute 97 112 261 132" positiontype="position"/>
                  <Combo id="cbo_RltnCd" taborder="125" innerdataset="@ds_rltn_typ" codecolumn="cd" datacolumn="cd_nm" onitemchanged="tab_cms_cbo_RltnCd_onitemchanged" anchor="default" position="absolute 377 112 475 132" positiontype="position"/>
                  <Edit id="edt_cell" taborder="132" inputtype="number" maxlength="15" onkillfocus="phone_onkillfocus" ontextchanged="phone_ontextchanged" visible="false" position="absolute 600 112 715 132" anchor="default" positiontype="position"/>
                  <Static id="stc_13" text="관계" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 290 109 375 135" positiontype="position"/>
                  <Static id="stc_deprPhone" text="예금주휴대폰" class="sta_workLabel1" visible="false" style="padding:6 0 0 8;font:Dotum,8;" validate="" anchor="default" position="absolute 513 109 598 135" positiontype="position"/>
                  <Edit id="edt_bzop" taborder="131" inputtype="number" maxlength="15" onkillfocus="brno_onkillfocus" ontextchanged="brno_ontextchanged" class="edt_clssEnable" visible="false" style="align:left middle;" anchor="default" position="absolute 600 62 715 82" positiontype="position"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="card" text="카드" scrollbars="none">
              <Layouts>
                <Layout>
                  <Button id="btn_Init" taborder="4" onclick="btn_card_Init_onclick" class="btn_WF_Return" position="absolute 651 9 723 29" anchor="default" positiontype="position" positionstep="0" tooltiptext="초기화"/>
                  <Button id="btn_Init02" taborder="5" onclick="btn_saveCardRgsnInfo_onclick" class="btn_WF_Save" position="absolute 575 9 647 29" anchor="default" positiontype="position" tooltiptext="저장" positionstep="0"/>
                  <Static id="stc_00" text="카드 신청" class="sta_workTitle2" anchor="default" position="absolute 11 12 180 32" positiontype="position"/>
                  <Static id="sta_GrayLine" class="sta_WF_Line1" anchor="default" position="absolute 11 33 724 34" positiontype="position"/>
                  <Static id="stc_11" text="회원번호" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 11 34 96 60" positiontype="position"/>
                  <Radio id="rdo_cardApcl" taborder="101" columncount="0" rowcount="0" index="-1" innerdataset="@ds_Radio" codecolumn="lv" datacolumn="text" onitemchanged="tab_cms_Radio00_onitemchanged" anchor="default" position="absolute 107 12 251 30" positiontype="position" direction="vertical"/>
                  <Static id="stc_17" class="sta_workData" anchor="default" position="absolute 94 34 724 60" positiontype="position"/>
                  <Static id="stc_02" text="회원명" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 290 34 375 60" positiontype="position"/>
                  <Static id="stc_03" text="고유번호" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 513 34 598 60" positiontype="position"/>
                  <Static id="stc_13" text="카드사" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 11 109 96 135" positiontype="position"/>
                  <Edit id="edt_accntNo" taborder="103" readonly="true" class="edt_clssEnable" anchor="default" position="absolute 97 37 217 57" positiontype="position"/>
                  <Edit id="edt_mmbrNm" taborder="104" readonly="true" class="edt_clssEnable" anchor="default" position="absolute 377 37 467 57" positiontype="position"/>
                  <Edit id="edt_mmbrNo" taborder="105" readonly="true" class="edt_clssEnable" anchor="default" position="absolute 600 37 715 57" positiontype="position"/>
                  <Static id="stc_deprPhone" text="결제일" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 11 134 96 160" positiontype="position"/>
                  <Static id="stc_08" class="sta_workData" anchor="default" position="absolute 94 109 724 135" positiontype="position"/>
                  <Static id="stc_10" text="카드번호" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 290 109 375 135" positiontype="position"/>
                  <Combo id="cbo_CardCd" taborder="111" innerdataset="@ds_card_cd" codecolumn="cd" datacolumn="cd_nm" onitemchanged="tab_cms_cbo_RltnCd_onitemchanged" anchor="default" position="absolute 97 112 195 132" positiontype="position"/>
                  <Static id="stc_15" class="sta_workData" anchor="default" position="absolute 94 134 724 160" positiontype="position"/>
                  <Static id="stc_14" text="등록일" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 290 134 375 160" positiontype="position"/>
                  <Edit id="edt_tranDt" taborder="119" inputtype="number" maxlength="2" anchor="default" position="absolute 97 137 243 157" positiontype="position" style="align:center middle;" lengthunit="utf8"/>
                  <Edit id="edt_cardNo" taborder="110" inputtype="number" maxlength="21" onkillfocus="card_onkillfocus" ontextchanged="card_ontextchanged" anchor="default" position="absolute 377 112 511 132" positiontype="position"/>
                  <Calendar id="cal_rgsnDt" taborder="116" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" anchor="default" position="absolute 377 137 472 157" positiontype="position"/>
                  <Edit id="edt_bid" taborder="120" inputtype="number" maxlength="2" visible="false" anchor="default" position="absolute 600 137 688 157" positiontype="position"/>
                  <Static id="stc_brdt" text="생년월일" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 11 59 96 85" positiontype="position"/>
                  <Static id="stc_bzop" text="사업자번호" class="sta_workLabel1" visible="false" style="font:Dotum,8;" validate="" anchor="default" position="absolute 513 59 598 85" positiontype="position"/>
                  <Static id="stc_12" text="상품정보" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 11 84 96 110" positiontype="position"/>
                  <Static id="stc_04" class="sta_workData" anchor="default" position="absolute 94 84 724 110" positiontype="position"/>
                  <Edit id="edt_PrdtCd" taborder="107" inputtype="number" readonly="true" class="edt_clssEnable" anchor="default" position="absolute 97 87 137 107" positiontype="position" style="align:center middle;"/>
                  <Edit id="edt_PrdtNm" taborder="108" readonly="true" class="edt_clssEnable" anchor="default" position="absolute 141 87 285 107" positiontype="position"/>
                  <Static id="stc_16" text="전화번호" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 290 84 375 110" positiontype="position"/>
                  <Static id="stc_06" text="유효기간" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 513 109 598 135" positiontype="position"/>
                  <Static id="stc_09" text="이메일" class="sta_workLabel1" style="font:Dotum,8;" validate="" anchor="default" position="absolute 513 84 598 110" positiontype="position"/>
                  <Static id="stc_07" text="빌키" class="sta_workLabel1" visible="false" style="font:Dotum,8;" validate="" anchor="default" position="absolute 513 134 598 160" positiontype="position"/>
                  <Edit id="edt_emil" taborder="109" anchor="default" position="absolute 600 87 715 107" positiontype="position"/>
                  <Static id="stc_cell_bar03" text="월" anchor="default" position="absolute 705 111 718 133" positiontype="position"/>
                  <Edit id="edt_exp_year" taborder="117" inputtype="number" maxlength="2" anchor="default" position="absolute 600 112 640 132" positiontype="position" style="align:center middle;" lengthunit="utf8"/>
                  <Static id="stc_cell_bar00" text="년" anchor="default" position="absolute 643 112 656 134" positiontype="position"/>
                  <Edit id="edt_exp_mon" taborder="118" inputtype="number" maxlength="2" anchor="default" position="absolute 662 112 702 132" positiontype="position" style="align:center middle;" lengthunit="utf8"/>
                  <Static id="stc_01" onclick="div_Work_tab_02_tabpage1_stc_01_onclick" class="sta_workData" anchor="default" position="absolute 94 59 724 85" positiontype="position"/>
                  <CheckBox id="ckb_bzop" taborder="102" text="사업자" value="N" truevalue="Y" falsevalue="N" onchanged="tab_card_ckb_bzop_onchanged" anchor="default" position="absolute 216 63 273 83" positiontype="position"/>
                  <Edit id="edt_brdt" taborder="106" inputtype="number" maxlength="6" anchor="default" position="absolute 97 62 212 82" positiontype="position" style="align:center middle;"/>
                  <Edit id="edt_bzop" taborder="115" inputtype="number" maxlength="15" onkillfocus="brno_onkillfocus" ontextchanged="brno_ontextchanged" visible="false" style="align:left middle;" anchor="default" position="absolute 600 62 715 82" positiontype="position"/>
                  <Edit id="edt_cell" taborder="114" inputtype="number" maxlength="13" onkillfocus="phone_onkillfocus" ontextchanged="phone_ontextchanged" anchor="default" position="absolute 377 87 498 107" positiontype="position"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Button id="btn_close" taborder="3" onclick="btn_close_onclick" class="btn_popupClose" position="absolute 727 8 747 27"/>
        <Static id="stc_30" text="CMS/카드 출금이체신청/해지 부가서비스" class="sta_popupTitle" transparenthittest="true" position="absolute 10 8 363 28"/>
      </Layout>
    </Layouts>
    <Bind/>
    <Objects>
      <Dataset id="ds_Radio" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="text" type="STRING" size="256"/>
          <Column id="lv" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="text">신규신청</Col>
            <Col id="lv">1</Col>
          </Row>
          <Row>
            <Col id="text">해지신청</Col>
            <Col id="lv">2</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_inqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmsAplcDtl_list" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="app_dt" type="STRING" size="256"/>
          <Column id="payr_no" type="STRING" size="256"/>
          <Column id="payr_nm" type="STRING" size="256"/>
          <Column id="dept_nm" type="STRING" size="256"/>
          <Column id="bank_cd" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="idn_no" type="STRING" size="256"/>
          <Column id="inv_tg_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="app_cl" type="STRING" size="256"/>
          <Column id="app_cl_nm" type="STRING" size="256"/>
          <Column id="reg_dm" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="upd_dm" type="STRING" size="256"/>
          <Column id="upd_man" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmsAplcDtl_list_tmp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="app_dt" type="STRING" size="256"/>
          <Column id="payr_no" type="STRING" size="256"/>
          <Column id="payr_nm" type="STRING" size="256"/>
          <Column id="dept_nm" type="STRING" size="256"/>
          <Column id="bank_cd" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="idn_no" type="STRING" size="256"/>
          <Column id="inv_tg_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="app_cl" type="STRING" size="256"/>
          <Column id="app_cl_nm" type="STRING" size="256"/>
          <Column id="reg_dm" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="upd_dm" type="STRING" size="256"/>
          <Column id="upd_man" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rltn_typ" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_srchCms" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="6"/>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="mem_no" type="STRING" size="100"/>
          <Column id="mem_nm" type="STRING" size="100"/>
          <Column id="home_tel" type="STRING" size="100"/>
          <Column id="cell" type="STRING" size="100"/>
          <Column id="wrpl_tel" type="STRING" size="100"/>
          <Column id="idn_no" type="STRING" size="100"/>
          <Column id="prod_cd" type="STRING" size="100"/>
          <Column id="prod_nm" type="STRING" size="100"/>
          <Column id="prod_amt" type="STRING" size="100"/>
          <Column id="mon_pay_amt" type="STRING" size="100"/>
          <Column id="expr_no" type="STRING" size="100"/>
          <Column id="emple_no" type="STRING" size="100"/>
          <Column id="emple_nm" type="STRING" size="100"/>
          <Column id="appfm_no" type="STRING" size="100"/>
          <Column id="join_dt" type="STRING" size="100"/>
          <Column id="compt_dt" type="STRING" size="100"/>
          <Column id="bef_emple_cd" type="STRING" size="100"/>
          <Column id="pay_perd" type="STRING" size="100"/>
          <Column id="pay_mthd" type="STRING" size="100"/>
          <Column id="join_prod" type="STRING" size="100"/>
          <Column id="new_chan_gunsu" type="STRING" size="100"/>
          <Column id="certf_rcv_chk" type="STRING" size="100"/>
          <Column id="pay_stat_1no" type="STRING" size="100"/>
          <Column id="ichae_dt" type="STRING" size="100"/>
          <Column id="bank_accnt_no" type="STRING" size="100"/>
          <Column id="old_mid" type="STRING" size="100"/>
          <Column id="reg_dm" type="STRING" size="100"/>
          <Column id="reg_man" type="STRING" size="100"/>
          <Column id="upd_dm" type="STRING" size="100"/>
          <Column id="upd_man" type="STRING" size="100"/>
          <Column id="accnt_stat" type="STRING" size="100"/>
          <Column id="total_pay" type="STRING" size="100"/>
          <Column id="last_no" type="STRING" size="100"/>
          <Column id="real_pay_no" type="STRING" size="100"/>
          <Column id="ded_no" type="STRING" size="100"/>
          <Column id="join_cl" type="STRING" size="100"/>
          <Column id="trans_gubun" type="STRING" size="100"/>
          <Column id="brth_mon_day" type="STRING" size="100"/>
          <Column id="pay_mthd" type="STRING" size="100"/>
          <Column id="emp_cell" type="STRING" size="100"/>
          <Column id="join_stat" type="STRING" size="100"/>
          <Column id="pay_stat" type="STRING" size="100"/>
          <Column id="pay_no" type="STRING" size="100"/>
          <Column id="pay_allt_no" type="STRING" size="100"/>
          <Column id="pay_add_no" type="STRING" size="100"/>
          <Column id="pay_amt" type="STRING" size="100"/>
          <Column id="pay_allt_amt" type="STRING" size="100"/>
          <Column id="pay_add_amt" type="STRING" size="100"/>
          <Column id="model_cl_nm" type="STRING" size="100"/>
          <Column id="sync_no" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rgsnCms" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="idn_no" type="STRING" size="256"/>
          <Column id="bank_cd" type="STRING" size="256"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="inv_tg_dt" type="STRING" size="256"/>
          <Column id="depr_nm" type="STRING" size="256"/>
          <Column id="rltn_cd" type="STRING" size="256"/>
          <Column id="depr_cell" type="STRING" size="256"/>
          <Column id="rgsn_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="app_cl" type="STRING" size="256"/>
          <Column id="rltm_web_module" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_resl_cd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rgsnCons" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="cons_memo" type="STRING" size="256"/>
          <Column id="cnsl_con" type="STRING" size="256"/>
          <Column id="gubn" type="STRING" size="256"/>
          <Column id="cnsl_cd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_card_cd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="adtl_cd" type="STRING" size="256"/>
          <Column id="adtl_cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_srchCard" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="6"/>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="mem_no" type="STRING" size="100"/>
          <Column id="mem_nm" type="STRING" size="100"/>
          <Column id="home_tel" type="STRING" size="100"/>
          <Column id="cell" type="STRING" size="100"/>
          <Column id="wrpl_tel" type="STRING" size="100"/>
          <Column id="idn_no" type="STRING" size="100"/>
          <Column id="prod_cd" type="STRING" size="100"/>
          <Column id="prod_nm" type="STRING" size="100"/>
          <Column id="prod_amt" type="STRING" size="100"/>
          <Column id="mon_pay_amt" type="STRING" size="100"/>
          <Column id="expr_no" type="STRING" size="100"/>
          <Column id="emple_no" type="STRING" size="100"/>
          <Column id="emple_nm" type="STRING" size="100"/>
          <Column id="appfm_no" type="STRING" size="100"/>
          <Column id="join_dt" type="STRING" size="100"/>
          <Column id="compt_dt" type="STRING" size="100"/>
          <Column id="bef_emple_cd" type="STRING" size="100"/>
          <Column id="pay_perd" type="STRING" size="100"/>
          <Column id="pay_mthd" type="STRING" size="100"/>
          <Column id="join_prod" type="STRING" size="100"/>
          <Column id="new_chan_gunsu" type="STRING" size="100"/>
          <Column id="certf_rcv_chk" type="STRING" size="100"/>
          <Column id="pay_stat_1no" type="STRING" size="100"/>
          <Column id="ichae_dt" type="STRING" size="100"/>
          <Column id="bank_accnt_no" type="STRING" size="100"/>
          <Column id="old_mid" type="STRING" size="100"/>
          <Column id="reg_dm" type="STRING" size="100"/>
          <Column id="reg_man" type="STRING" size="100"/>
          <Column id="upd_dm" type="STRING" size="100"/>
          <Column id="upd_man" type="STRING" size="100"/>
          <Column id="accnt_stat" type="STRING" size="100"/>
          <Column id="total_pay" type="STRING" size="100"/>
          <Column id="last_no" type="STRING" size="100"/>
          <Column id="real_pay_no" type="STRING" size="100"/>
          <Column id="ded_no" type="STRING" size="100"/>
          <Column id="join_cl" type="STRING" size="100"/>
          <Column id="trans_gubun" type="STRING" size="100"/>
          <Column id="brth_mon_day" type="STRING" size="100"/>
          <Column id="pay_mthd" type="STRING" size="100"/>
          <Column id="emp_cell" type="STRING" size="100"/>
          <Column id="join_stat" type="STRING" size="100"/>
          <Column id="pay_stat" type="STRING" size="100"/>
          <Column id="pay_no" type="STRING" size="100"/>
          <Column id="pay_allt_no" type="STRING" size="100"/>
          <Column id="pay_add_no" type="STRING" size="100"/>
          <Column id="pay_amt" type="STRING" size="100"/>
          <Column id="pay_allt_amt" type="STRING" size="100"/>
          <Column id="pay_add_amt" type="STRING" size="100"/>
          <Column id="model_cl_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cardAplcDtl_list" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="app_dt" type="STRING" size="256"/>
          <Column id="card_nm" type="STRING" size="256"/>
          <Column id="dept_nm" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="expr_dt" type="STRING" size="256"/>
          <Column id="pay_dt" type="STRING" size="256"/>
          <Column id="app_cl" type="STRING" size="256"/>
          <Column id="reg_dm" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="card_birth" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cardAplcDtl_list_tmp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="app_dt" type="STRING" size="256"/>
          <Column id="card_nm" type="STRING" size="256"/>
          <Column id="dept_nm" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="expr_dt" type="STRING" size="256"/>
          <Column id="pay_dt" type="STRING" size="256"/>
          <Column id="app_cl" type="STRING" size="256"/>
          <Column id="reg_dm" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="card_birth" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rgsnCard" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="prdt_cd" type="STRING" size="256"/>
          <Column id="prdt_nm" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="exp_dt" type="STRING" size="256"/>
          <Column id="exp_year" type="STRING" size="256"/>
          <Column id="exp_mon" type="STRING" size="256"/>
          <Column id="inv_tg_dt" type="STRING" size="256"/>
          <Column id="idn_no" type="STRING" size="256"/>
          <Column id="emil" type="STRING" size="256"/>
          <Column id="cell" type="STRING" size="256"/>
          <Column id="rgsn_dt" type="STRING" size="256"/>
          <Column id="acpt_mthd" type="STRING" size="256"/>
          <Column id="app_cl" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="card_apcl" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accnt_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="6"/>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="mem_no" type="STRING" size="100"/>
          <Column id="mem_nm" type="STRING" size="100"/>
          <Column id="home_tel" type="STRING" size="100"/>
          <Column id="cell" type="STRING" size="100"/>
          <Column id="wrpl_tel" type="STRING" size="100"/>
          <Column id="idn_no" type="STRING" size="100"/>
          <Column id="prod_cd" type="STRING" size="100"/>
          <Column id="prod_nm" type="STRING" size="100"/>
          <Column id="prod_amt" type="STRING" size="100"/>
          <Column id="mon_pay_amt" type="STRING" size="100"/>
          <Column id="expr_no" type="STRING" size="100"/>
          <Column id="emple_no" type="STRING" size="100"/>
          <Column id="emple_nm" type="STRING" size="100"/>
          <Column id="appfm_no" type="STRING" size="100"/>
          <Column id="join_dt" type="STRING" size="100"/>
          <Column id="compt_dt" type="STRING" size="100"/>
          <Column id="bef_emple_cd" type="STRING" size="100"/>
          <Column id="pay_perd" type="STRING" size="100"/>
          <Column id="pay_mthd" type="STRING" size="100"/>
          <Column id="join_prod" type="STRING" size="100"/>
          <Column id="new_chan_gunsu" type="STRING" size="100"/>
          <Column id="certf_rcv_chk" type="STRING" size="100"/>
          <Column id="pay_stat_1no" type="STRING" size="100"/>
          <Column id="ichae_dt" type="STRING" size="100"/>
          <Column id="bank_accnt_no" type="STRING" size="100"/>
          <Column id="old_mid" type="STRING" size="100"/>
          <Column id="reg_dm" type="STRING" size="100"/>
          <Column id="reg_man" type="STRING" size="100"/>
          <Column id="upd_dm" type="STRING" size="100"/>
          <Column id="upd_man" type="STRING" size="100"/>
          <Column id="accnt_stat" type="STRING" size="100"/>
          <Column id="total_pay" type="STRING" size="100"/>
          <Column id="last_no" type="STRING" size="100"/>
          <Column id="real_pay_no" type="STRING" size="100"/>
          <Column id="ded_no" type="STRING" size="100"/>
          <Column id="join_cl" type="STRING" size="100"/>
          <Column id="trans_gubun" type="STRING" size="100"/>
          <Column id="brth_mon_day" type="STRING" size="100"/>
          <Column id="pay_mthd" type="STRING" size="100"/>
          <Column id="emp_cell" type="STRING" size="100"/>
          <Column id="join_stat" type="STRING" size="100"/>
          <Column id="pay_stat" type="STRING" size="100"/>
          <Column id="pay_no" type="STRING" size="100"/>
          <Column id="pay_allt_no" type="STRING" size="100"/>
          <Column id="pay_add_no" type="STRING" size="100"/>
          <Column id="pay_amt" type="STRING" size="100"/>
          <Column id="pay_allt_amt" type="STRING" size="100"/>
          <Column id="pay_add_amt" type="STRING" size="100"/>
          <Column id="model_cl_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cms_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="bank_cd" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="ichae_limit_gunsu" type="STRING" size="256"/>
          <Column id="idn_no" type="STRING" size="256"/>
          <Column id="depr_cell" type="STRING" size="256"/>
          <Column id="depr_cell1" type="STRING" size="256"/>
          <Column id="depr_cell2" type="STRING" size="256"/>
          <Column id="depr_cell3" type="STRING" size="256"/>
          <Column id="depr" type="STRING" size="256"/>
          <Column id="reltn" type="STRING" size="256"/>
          <Column id="reltn_nm" type="STRING" size="256"/>
          <Column id="cms_join_dt" type="STRING" size="256"/>
          <Column id="sync_no" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_onlineCmsMember" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="bank_cd" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="idn_no" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="depr" type="STRING" size="256"/>
          <Column id="reltn" type="STRING" size="256"/>
          <Column id="depr_cell" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_onlineCardMember" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="expire_date" type="STRING" size="256"/>
          <Column id="ichae_dt" type="STRING" size="256"/>
          <Column id="card_birth" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_card_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="card_cd" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="pay_dt" type="STRING" size="256"/>
          <Column id="expire_date" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="card_birth" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/********************************************************************************************/
/* 1. Include Library include, variables Declaration 영역                                  */
/********************************************************************************************/
include "LIB::lib_All.xjs";
var tab_main = tab_01;
var tab_cms = tab_01.cms;
var tab_card = tab_01.card;

var tc_cmsR = "";  //CMS 실시간 부가서비스 사용여부

var tc_cmsAplcDtl = 0;    // CMS 회원 건수
var tc_cardAplcDtl = 0;   // Card 회원 건수

var cmsWdrwChk = "";    //CMS 산출여부 결과
var cardWdrwChk = "";    //Card 산출여부 결과
var cardDplcChk = "";   // Card 중복등록 여부 결과

var tmp_aplc_div = "";     //웹모듈 요청시 저장(신규,해지 구분)
var tmp_tmpr_resl = "";    //웹모듈 요청시 저장(웹모듈요청결과)

var cmsReslMsg = "";   //CMS 등록 결과 메세지
var cardReslMsg = "";   //Card 등록 결과 메세지

var ncaIdnNo = "";

/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트) 처리                                           	*/
/********************************************************************************************/
function PS020301_onload(obj:Form, e:LoadEventInfo)
{
	// 2016. 04. 12 최현식
	if (opener.gv_bugaCmsFg == "N") {
		tab_01.removeTabpage(0);
	} else if (opener.gv_bugaCmsFg == "N") {
		tab_01.removeTabpage(1);
	} else {
		if (opener.cbo_pay_mthd.value == "06") {
			tab_01.tabindex = 1;
		} else {
			tab_01.tabindex = 0;
		}
	}
	//tab_01.tabindex = 0;
	gfn_initForm(obj);
    gfn_getList("dlwCd","07,84,0120","fn_callBack",false);   // 대명코드조회 (07:관계, 0120:카드사)
	gfn_createPagingDataset(obj); // 페이징처리 위한 데이터셋 설정;
	
	//권한별 제어 
	//은행처리분 권한 제어
	//tab_cms.ckb_bankDsps.visible = true;
	//웹모듈권한 제어
	//tab_cms.ckb_webModule.visible = true;
	
	//특정아이디 제어
	var sUserId = gds_UserInfo.getColumn(0, "user_id");
	if (sUserId == "2011040028" || sUserId == "2011040028" || sUserId == "2011040028" || sUserId == "2011040028" || sUserId == "2011040028" || 
		sUserId == "2011040028" || sUserId == "2011040028" || sUserId == "2011040028" || sUserId == "2011040028" || sUserId == "2011040028" || 
		sUserId == "2011040028" || sUserId == "2011040028" || sUserId == "2011040028") {
		tab_cms.ckb_bankDsps.visible = true;
		tab_cms.ckb_webModule.visible = true;
	}
	
	//CMS 실시간웹모듈 초기화
	if(gfn_CmsInit() != 1) {
		alert("CMS WebModule 초기화 실패\n관리자에게 문의하세요.");
	}
// 추후 작업	
// 1. 권한별 버튼제어
// 2. 타 화면 파라미터값 넘어왔을경우 값세팅 처리
}

/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
function fn_callBack(svcid, errcd, errmsg) 
{
	if (errcd != 0) {
	    switch (svcid) {
	        // 공통
  			case "selectDlwCode":
			alert("코드 적재를 실패하였습니다.");
			break;
	    
	        // CMS
			case "srchCmsAplcDtl": //CMS 금일 부가서비스등록 이력조회
			alert("CMS 금일 부가서비스등록 이력조회를 실패하였습니다.\n" + errmsg);
			break;
			case "srchCmsWdrwChk": // CMS 산출여부 조회
			alert("CMS 산출여부 조회를 실패하였습니다.\n" + errmsg);
			break;
			case "saveCmsRgsnAnxtSrvc": // CMS 부가서비스등록
			alert("CMS 부가서비스등록을 실패하였습니다.\n" + errmsg);
			break;
			case "srchCmsInfoByAccnt":
			break;
			case "srchOnlineMemberCms":
			break;
			case "srchOnlineMemberCmsSs":
			break;

			//Card
			case "srchCardAplcDtl": //Card 등록 이력 조회
			alert("Card 금일 등록 이력조회를 실패하였습니다.\n" + errmsg);
			break;
			case "saveCardWdrwChk": //Card 산출중 여부 조회
			alert("Card 회원 산출중여부 확인을 실패하였습니다.\n" + errmsg);
			break;
			case "srchCardDplcChk": //Card 중복여부 조회
			alert("Card 회원 중복여부 확인을 실패하였습니다.\n" + errmsg);
			break;
			case "saveCardRgsnAnxtSrvc": //Card 등록
			alert("Card 등록을 실패하였습니다.\n" + errmsg);
			break;
			case "srchCardInfoByAccnt":
			break;
			case "srchOnlineMemberCard":
			break;
			case "srchOnlineMemberCardSs":
			break;
			
			//상담저장
			case "saveCons":
			break;
			
			    
	    }
		return false;
	} else {
		switch (svcid) {
		    // 공통
			case "selectDlwCode": // 공통코드 조회 callBack Service ID
			gfn_getCode("07", "SELECT", ds_rltn_typ, gds_DmlCd); // 코드조회결과 필터
			gfn_getCode("84", "", ds_resl_cd, gds_DmlCd); // 코드조회결과 필터
			gfn_getCode("0120", "SELECT", ds_card_cd, gds_DmlCd); // 코드조회결과 필터
			tab_cms.cbo_RltnCd.index = 0;
			tab_card.cbo_CardCd.index = 0;
			fn_init();
			fn_card_init();
			
			//param >> cnslMsg넘어올경우 추가작업
			//(from > 상담관리, 해피콜업무, 회원 상세조회/수정)
			//fn_setAccntNo(ds_accnt_info);
			
			break;
			
			// CMS
			case "srchCmsAplcDtl": // CMS 금일 부가서비스등록이력 조회
		    gfn_appendSearchDs(ds_cmsAplcDtl_list, ds_cmsAplcDtl_list_tmp); // 조회된 결과를 실제보여줄 데이타셋으로 Append처리
		    gfn_setTotalRowCount(ds_cmsAplcDtl_list, tab_cms.sta_cmsTotalCnt, tc_cmsAplcDtl, null, true, null); // 페이지건수 표출
		    fn_postSearch(svcid);
			break;
			case "srchCmsWdrwChk": // CMS 산출여부 조회
			if ("" == cmsWdrwChk) {
			    fn_commSave("saveCmsRgsnAnxtSrvc");
			} else {
			    alert(cmsWdrwChk + " 산출중인 건입니다.");
			    return false;
			}
			break;
			case "saveCmsRgsnAnxtSrvc": // CMS 부가서비스등록
			if("proxy" == cmsReslMsg) {
				alert("대리납 입니다.");
			}
			tab_cms.ckb_webModule.value = "N";
			fn_commSave("saveCons", "cms");
			//fn_commSearch(gfn_getCommTypeInit(), "srchCmsAplcDtl");
			break;
			case "srchCmsInfoByAccnt":
			fn_setAddCmsInfo();
			break;
			case "srchOnlineMemberCms":
			fn_setOnlineCmsInfo();
			break;
			case "srchOnlineMemberCmsSs":
			fn_setOnlineCmsInfo();
			break;
						
			//Card
			case "srchCardAplcDtl":
		    gfn_appendSearchDs(ds_cardAplcDtl_list, ds_cardAplcDtl_list_tmp); // 조회된 결과를 실제보여줄 데이타셋으로 Append처리
		    gfn_setTotalRowCount(ds_cardAplcDtl_list, tab_card.sta_cardTotalCnt, tc_cardAplcDtl, null, true, null); // 페이지건수 표출
		    fn_postSearch(svcid);
			break;
			case "srchCardWdrwChk": // Card 산출중여부 확인
			if ("" == cardWdrwChk) {
			    if(confirm("카드 결제 서비스를 해지 하시겠습니까?")){
					fn_commSave("saveCardRgsnAnxtSrvc");
			    } else{return false;}
			} else {
			    alert(cardWdrwChk + " 산출중인 건입니다.");
			    return false;
			}
		    break;
		    case "srchCardDplcChk": // Card 중복여부 확인
		    if ("N" == cardDplcChk) {
				if(!confirm("카드 결제 서비스를 신청 하시겠습니까?")){return false;}
		    } else {
				if(!confirm("이미 등록된 카드번호입니다.\n카드 결제 서비스를 신청 하시겠습니까?")){return false;}
		    }
		    fn_commSave("saveCardRgsnAnxtSrvc");
		    break;
		    case "saveCardRgsnAnxtSrvc": //Card 등록
			if("proxy" == cardReslMsg || "success" == cardReslMsg) {
				if("proxy" == cardReslMsg) {
					alert("대리납입입니다.")
				}
				//상담저장
				fn_commSave("saveCons", "card");
				//금일 카드등록 조회
				//fn_commSearch(gfn_getCommTypeInit(), "srchCardAplcDtl"); // 조회

			} else {
				//오류
				if("empty" == cardReslMsg) {
					alert("존재하지않는 회원입니다.");
				} else if ("overlap" ==cardReslMsg) {
					alert("이미 등록된 회원입니다.");
				} else {
					alert(cardReslMsg);
				}
			}	
		    break;
			case "srchCardInfoByAccnt":
			if (ds_card_info.rowcount != 0) fn_setAddCardInfo();
			break;
			case "srchOnlineMemberCard":
			fn_setOnlineCardInfo();
			break;
			case "srchOnlineMemberCardSs":
			fn_setOnlineCardInfo();
			break;
		    
		    case "saveCons": //상담저장
			opener.fn_srch_prod_info();
			close();
			break;
		}
	}
}

/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/
function fn_preSearch(sType, svcid) {
    var return_bool = false;
    switch(svcid) {
        case "srchCmsAplcDtl": // CMS 금일 부가서비스등록이력 조회
		if (sType == gfn_getCommTypeInit())
		{
			// 조회조건 및 default 정렬
			ds_cmsAplcDtl_list.keystring = ""; // 정렬컬럼 초기화
			
			ds_inqCndt.clearData();
			ds_inqCndt.addRow();
			ds_inqCndt.setColumn(0, "orderBy", "reg_dm");
			ds_inqCndt.setColumn(0, "orderDirection", "desc");
		}
		return_bool = true;
        break;   
        case "srchCardAplcDtl": //Card 등록이력 조회
		if (sType == gfn_getCommTypeInit())
		{
			// 조회조건 및 default 정렬
			ds_cardAplcDtl_list.keystring = ""; // 정렬컬럼 초기화
			
			ds_inqCndt.clearData();
			ds_inqCndt.addRow();
			ds_inqCndt.setColumn(0, "orderBy", "reg_dm");
			ds_inqCndt.setColumn(0, "orderDirection", "desc");
		}
		return_bool = true;
        break;
        case "srchCardWdrwChk": //Card 산출중 여부 조회
		if (gfn_isNull(tab_card.edt_accntNo.value)) {
			alert("구좌를 선택하세요.")
			return false;
		}
		return_bool = true;
        break;
        case "srchCardDplcChk": //Card 중복 여부 조회
		if (gfn_isNull(tab_card.edt_cardNo.value)) {
			alert("카드번호를 입력하세요.")
			return false;
		}
		return_bool = true;
        break;
    }
	return return_bool;
}

function fn_preSave(svcid, consTyp) {

    var return_bool = false;
    
    switch(svcid) {
		// CMS 부가서비스 등록
        case "saveCmsRgsnAnxtSrvc":
        if (gfn_isNull(ds_srchCms.getColumn(0,"accnt_no"))) {
			alert("구좌를 선택하세요.");
			return false;
		}
        if(!fn_chk_idn_no("cms")) return false;
        if (gfn_isNull(tab_cms.edt_bankCd.value)) {
			alert("은행정보를 입력 하세요.");
			return false;
		}
        if (gfn_isNull(tab_cms.edt_bankaccntNo.value)) {
			alert("계좌를 입력 하세요.");
			return false;
		}
        if (gfn_isNull(tab_cms.edt_tranDt.value)) {
			alert("이체일자를 입력 하세요.");
			return false;
		} else {
		    if(toNumber(tab_cms.edt_tranDt.value) > 31) {
		        alert("이체일자가 31일을 초과 하였습니다.");
		        tab_cms.edt_tranDt.value = "";
		        return false;
		    }
		}
        if (gfn_isNull(tab_cms.edt_depr.value) || gfn_isNull(tab_cms.cbo_RltnCd.value)) {
			alert("예금주 정보를 설정하세요.");
			return false;
		}
        if (gfn_isNull(tab_cms.cal_rgsnDt.value)) {
			alert("등록일을 입력 하세요.");
			return false;
		}
		// 조회조건 및 default 정렬
		ds_cmsAplcDtl_list.keystring = ""; // 정렬컬럼 초기화
		
		var idn_no = "";
		if(tab_cms.ckb_bzop.value == "N") {
		    idn_no = tab_cms.edt_brdt.value;
		} else {
		    idn_no = tab_cms.edt_bzop.value;
		    idn_no= idn_no.replace(/[^0-9]/g,"");
		}
		var depr_cell = tab_cms.edt_cell.value;
		depr_cell = depr_cell.replace(/[^0-9]/g,"");
		var acpt_mthd = ""; // 처리방법
		var app_cl = "";  // 처리구분
		if(tab_cms.rdo_cmsApcl.value == "1") {//신규
		    if(tab_cms.ckb_bankDsps.value == "Y") {//은행처리분 체크
		       acpt_mthd = "06"; //은행신규
		       app_cl = "1";   //신규
		    } else {
               acpt_mthd = "03"; //부가신규 
		       app_cl = "1";   //신규
		    }
		} else {//해지
		    if(tab_cms.ckb_bankDsps.value == "Y") {//은행처리분 체크
		       acpt_mthd = "07"; //은행해지
		       app_cl = "3";   //해지
		    } else {
		        if (tab_cms.ckb_dfrTrmt.value == "Y") {
				    acpt_mthd = "05"; //보류부가해지
				    app_cl = "7";   //보류해지
		        } else {
				    acpt_mthd = "04"; //정상부가해지
				    app_cl = "3";   //해지
		        }
		    }
		}

		ds_rgsnCms.clearData();
		ds_rgsnCms.addRow();
		ds_rgsnCms.setColumn(0, "accnt_no", ds_srchCms.getColumn(0,"accnt_no"));
		ds_rgsnCms.setColumn(0, "mem_no", ds_srchCms.getColumn(0,"mem_no"));
		ds_rgsnCms.setColumn(0, "mem_nm", ds_srchCms.getColumn(0,"mem_nm"));
		ds_rgsnCms.setColumn(0, "idn_no", idn_no);
		ds_rgsnCms.setColumn(0, "bank_cd", tab_cms.edt_bankCd.value);
		ds_rgsnCms.setColumn(0, "bank_accnt_no", tab_cms.edt_bankaccntNo.value);
		ds_rgsnCms.setColumn(0, "inv_tg_dt", tab_cms.edt_tranDt.value);
		ds_rgsnCms.setColumn(0, "depr_nm", tab_cms.edt_depr.value);
		ds_rgsnCms.setColumn(0, "rltn_cd", tab_cms.cbo_RltnCd.value);
		ds_rgsnCms.setColumn(0, "depr_cell", depr_cell);
		ds_rgsnCms.setColumn(0, "rgsn_dt", tab_cms.cal_rgsnDt.value);
		ds_rgsnCms.setColumn(0, "acpt_mthd", acpt_mthd);
		ds_rgsnCms.setColumn(0, "app_cl", app_cl);
		ds_rgsnCms.setColumn(0, "rltm_web_module", tab_cms.ckb_webModule.value);	
		return_bool =  true;
        break;
        
        // Card 부가서비스 등록
        case "saveCardRgsnAnxtSrvc":
        if (gfn_isNull(ds_srchCard.getColumn(0,"accnt_no"))) {
			alert("회원을 선택 하세요.");
			return false;
		}
        if(!fn_chk_idn_no("card")) return false; // 식별번호 체크
        
        if (gfn_isNull(tab_card.cbo_CardCd.value)) {
			alert("카드사를 선택하세요.");
			return false;
        }
        if (gfn_isNull(tab_card.edt_tranDt.value)) {
			alert("결제일을 입력 하세요.");
			return false;
		} else {
		    if(toNumber(tab_card.edt_tranDt.value) > 31) {
		        alert("결제일자는 최대 31일입니다.");
		        tab_card.edt_tranDt.value = "";
		        return false;
		    }
		}
        if (gfn_isNull(tab_card.edt_exp_year.value)) {
			alert("유효기간(년)을 입력하세요.");
			return false;
		} 
        if (gfn_isNull(tab_card.edt_exp_mon.value)) {
			alert("유효기간(월)을 입력하세요.");
			return false;
		} else {
		    if(toNumber(tab_card.edt_exp_mon.value) <= 0) {
		        alert("유효기간의 월은 최소 1월입니다.");
		        tab_card.edt_exp_mon.value = "";
		        return false;
		    }
		    if(toNumber(tab_card.edt_exp_mon.value) <= 0) {
		        alert("유효기간의 월은 최대 12월입니다.");
		        tab_card.edt_exp_mon.value = "";
		        return false;
		    }
		}
		
		// 조회조건 및 default 정렬
		ds_cardAplcDtl_list.keystring = ""; // 정렬컬럼 초기화
		
		var idn_no = "";
		if(tab_card.ckb_bzop.value == "N") {
		    idn_no = tab_card.edt_brdt.value;
		} else {
		    idn_no = tab_card.edt_bzop.value;
		    idn_no = idn_no.replace(/[^0-9]/g,"");
		}
		var cell = tab_card.edt_cell.value;
		cell = cell.replace(/[^0-9]/g,"");
		var vld_yr = tab_card.edt_exp_year.value;
		if (toNumber(tab_card.edt_exp_year.value) < 10 && tab_card.edt_exp_year.value.length == 1) {
			vld_yr = "0"+tab_card.edt_exp_year.value;
		}
		var vld_mnth = tab_card.edt_exp_mon.value;
		if (toNumber(tab_card.edt_exp_mon.value) < 10 && tab_card.edt_exp_mon.value.length == 1) {
			vld_mnth = "0"+tab_card.edt_exp_mon.value;
		}
		var vld_dt = vld_yr + vld_mnth;
		var app_cl = "";  // 처리구분
		var acpt_mthd = ""  // 처리방법
		var card_apcl = "";
		if(tab_card.rdo_cardApcl.value == "1") {//신규
			app_cl = "1";   //신규
			acpt_mthd = "06"
			card_apcl = "new";
		} else {//해지
			app_cl = "3";   //해지
			acpt_mthd = "01"
			card_apcl = "can";
		}
		var card_no = tab_card.edt_cardNo.value;
		card_no = card_no.replace("-","");

		ds_rgsnCard.clearData();
		ds_rgsnCard.addRow();
		ds_rgsnCard.setColumn(0, "accnt_no", ds_srchCard.getColumn(0,"accnt_no"));
		ds_rgsnCard.setColumn(0, "mem_no", ds_srchCard.getColumn(0,"mem_no"));
		ds_rgsnCard.setColumn(0, "mem_nm", ds_srchCard.getColumn(0,"mem_nm"));
		ds_rgsnCard.setColumn(0, "prdt_cd", tab_card.edt_PrdtCd.value);
		ds_rgsnCard.setColumn(0, "prdt_nm", tab_card.edt_PrdtNm.value);
		ds_rgsnCard.setColumn(0, "card_cd", tab_card.cbo_CardCd.value);
		ds_rgsnCard.setColumn(0, "card_no", card_no);
		ds_rgsnCard.setColumn(0, "exp_dt", vld_dt);
		ds_rgsnCard.setColumn(0, "exp_year", vld_yr);
		ds_rgsnCard.setColumn(0, "exp_mon", vld_mnth);
		ds_rgsnCard.setColumn(0, "inv_tg_dt", tab_card.edt_tranDt.value);
		ds_rgsnCard.setColumn(0, "idn_no", idn_no);
		ds_rgsnCard.setColumn(0, "emil", tab_card.edt_emil.value);
		ds_rgsnCard.setColumn(0, "cell", tab_card.edt_cell.value.replace(/[^0-9]/g,""));
		ds_rgsnCard.setColumn(0, "rgsn_dt", tab_card.cal_rgsnDt.value);
		ds_rgsnCard.setColumn(0, "app_cl", app_cl);
		ds_rgsnCard.setColumn(0, "acpt_mthd", acpt_mthd);
		ds_rgsnCard.setColumn(0, "bid", tab_card.edt_bid.value);
		ds_rgsnCard.setColumn(0, "card_apcl", card_apcl);
			
		return_bool =  true;
        break;
        
        //상담저장 (CMS)
        case "saveCmsCons":
        var bank_nm = tab_cms.edt_bankNm.value
        var bank_cd = tab_cms.edt_bankCd.value;
        var bank_accnt_no = tab_cms.edt_bankaccntNo.value;
        var depr_nm = tab_cms.edt_depr.value;
        var rntn_nm = tab_cms.cbo_RltnCd.text;
        var inv_tg_dt = tab_cms.edt_tranDt.value;
		var idn_no = "";
		if(tab_cms.ckb_bzop.value == "N") {
		    idn_no = tab_cms.edt_brdt.value;
		} else {
		    idn_no = tab_cms.edt_bzop.value;
		    idn_no = idn_no.replace(/[^0-9]/g,"");
		}
		
		var cons_cntn = "";
		var cons_dtbt_cntn = "";
        if(tab_cms.rdo_cmsApcl.value == "1") {//신규
            cons_cntn = "CMS등록";
            cons_dtbt_cntn = '[신청]';
        } else {
			cons_cntn = "CMS해지";
            cons_dtbt_cntn = '[해지]';
        }
        cons_dtbt_cntn += '['+ bank_nm +'/'+ bank_cd +']'
    				   +' 계좌번호:'+ bank_accnt_no
	     			   +' 예금주명 :'+ depr_nm +'('+ rntn_nm +'|'+ idn_no + ')'
		     		   +' 이체일 :'+ inv_tg_dt;       
        
        ds_rgsnCons.clearData();
        ds_rgsnCons.addRow();
        ds_rgsnCons.setColumn(0, "accnt_no", ds_srchCms.getColumn(0,"accnt_no"));
        ds_rgsnCons.setColumn(0, "mem_no", ds_srchCms.getColumn(0,"mem_no"));
        ds_rgsnCons.setColumn(0, "mem_nm", ds_srchCms.getColumn(0,"mem_nm"));
        ds_rgsnCons.setColumn(0, "cons_memo", cons_cntn);
		ds_rgsnCons.setColumn(0, "cnsl_con", cons_dtbt_cntn);
		ds_rgsnCons.setColumn(0, "gubn", "80");
		ds_rgsnCons.setColumn(0, "cnsl_cd", "01");
		
        return_bool =  true;
        break;
        
        //상담저장 (Card)
        case "saveCardCons":
      
        var inv_tg_dt = tab_card.edt_tranDt.value;
        var card_nm = tab_card.cbo_CardCd.text;
        var card_no = tab_card.edt_cardNo.value;
        
		var vld_yr = tab_card.edt_exp_year.value;
		if (toNumber(tab_card.edt_exp_year.value) < 10 && tab_card.edt_exp_year.value.length == 1) {
			vld_yr = "0"+tab_card.edt_exp_year.value;
		}
		var vld_mnth = tab_card.edt_exp_mon.value;
		if (toNumber(tab_card.edt_exp_mon.value) < 10 && tab_card.edt_exp_mon.value.length == 1) {
			vld_mnth = "0"+tab_card.edt_exp_mon.value;
		}
		var vld_dt = vld_yr +'/'+vld_mnth;
        
		var cons_cntn = "";
		var cons_dtbt_cntn = "";
        if(tab_card.rdo_cardApcl.value == "1") {//신규
            cons_cntn = "CARD등록";
            cons_dtbt_cntn = '[신청]';
        } else {
			cons_cntn = "CARD해지";
            cons_dtbt_cntn = '[해지]';
        }
        //[신청][신한] 카드번호 :5428796648283998 결제일 :20 유효일 :19/06
        cons_dtbt_cntn += '['+ card_nm +']' 
    				   +' 카드번호:'+ card_no
	     			   +' 결제일 :'+ inv_tg_dt
		     		   +' 유효일 :'+ vld_dt;        
        
        ds_rgsnCons.clearData();
        ds_rgsnCons.addRow();
        ds_rgsnCons.setColumn(0, "accnt_no", ds_srchCard.getColumn(0,"accnt_no"));
        ds_rgsnCons.setColumn(0, "mem_no", ds_srchCard.getColumn(0,"mem_no"));
        ds_rgsnCons.setColumn(0, "mem_nm", ds_srchCard.getColumn(0,"mem_nm"));
        ds_rgsnCons.setColumn(0, "cons_memo", cons_cntn);
		ds_rgsnCons.setColumn(0, "cnsl_con", cons_dtbt_cntn);
		ds_rgsnCons.setColumn(0, "gubn", "80");
		ds_rgsnCons.setColumn(0, "cnsl_cd", "01");

        return_bool =  true;
        break;
    }
    
    return return_bool;

}
/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
//조회
function fn_commSearch(sType, searchInfo) {
	
	var szSvcid       = "";
    var szController  = "";
    var szInDs        = "";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "";
    
    switch(searchInfo) {
        //CMS
        case "srchCmsAplcDtl": // CMS 금일 부가서비스 등록이력 조회
        if (!fn_preSearch(sType,"srchCmsAplcDtl")) return false;
	    if(!gfn_pageSearch(sType, ds_cmsAplcDtl_list, tab_cms.sta_cmsTotalCnt, 50, tc_cmsAplcDtl)) return;
	    szSvcid       = "srchCmsAplcDtl";
		szController  = "/dlw/cms/cms-aplc_dtl/list";
		szInDs        = "ds_input=ds_inqCndt";
		szOutDs       = "ds_cmsAplcDtl_list_tmp=ds_output";
		szParam       = "";
		szRetCallback = "fn_callBack";
        break;
        case "srchCmsWdrwChk": // CMS 산출중 여부 확인
	    szSvcid       = "srchCmsWdrwChk";
		szController  = "/dlw/cms/cms-wdrw-chk";
		szInDs        = "ds_input=ds_inqCndt";
		szOutDs       = "ds_cmsAplcDtl_list_tmp=ds_output";
		szParam       = "accnt_no="+ds_srchCms.getColumn(0,"accnt_no");
		szRetCallback = "fn_callBack";
        break;
        case "srchCmsReslCd": //에러코드 조회
	    szSvcid       = "srchCmsReslCd";
		szController  = "/dlw-syst/cd/cms-resl-cd";
		szInDs        = "ds_input=ds_inqCndt";
		szOutDs       = "ds_cmsAplcDtl_list_tmp=ds_output";
		szParam       = "resl_cd="+tc_RlReslCd;
		szRetCallback = "fn_callBack";
        break;
        case "srchCmsInfoByAccnt": //구좌조회후 CMS 납입 구좌일경우 나머지 정보 가져옴.
	    szSvcid       = "srchCmsInfoByAccnt";
		szController  = "/dlw/cms/cms-info";
		szInDs        = "";
		szOutDs       = "ds_cms_info=ds_output";
		szParam       = "accnt_no="+ds_srchCms.getColumn(0,"accnt_no");
		szRetCallback = "fn_callBack";
        break;
        case "srchOnlineMemberCms": //온라인회원 조회
	    szSvcid       = "srchOnlineMemberCms";
		szController  = "/dlw/cust/online-accnt/list";
		szInDs        = "";
		szOutDs       = "ds_onlineCmsMember=ds_output";
		szParam       = "gubun=cms accnt_no="+ds_srchCms.getColumn(0,"accnt_no");
		szRetCallback = "fn_callBack";
        break;
        case "srchOnlineMemberCmsSs": //온라인회원 조회(결합, 이벤트)
	    szSvcid       = "srchOnlineMemberCmsSs";
		szController  = "/dlw/cust/online-accnt/list";
		szInDs        = "";
		szOutDs       = "ds_onlineCmsMember=ds_output";
		szParam       = "gubun=cms accnt_no="+ds_srchCms.getColumn(0,"accnt_no");
		if(ds_srchCms.getColumn(0,"join_cl") == "03") szParam+=" site_id=001";
		if(ds_srchCms.getColumn(0,"join_cl") == "05") szParam+=" site_id=002";
		szRetCallback = "fn_callBack";
        break;
        
        //Card 
        case "srchCardAplcDtl": //Card 등록 이력 조회
        if (!fn_preSearch(sType,"srchCardAplcDtl")) return false;
	    if(!gfn_pageSearch(sType, ds_cardAplcDtl_list, tab_card.sta_cardTotalCnt, 50, tc_cardAplcDtl)) return;
	    szSvcid       = "srchCardAplcDtl";
		szController  = "/dlw/card/card-aplc_dtl/list";
		szInDs        = "ds_input=ds_inqCndt";
		szOutDs       = "ds_cardAplcDtl_list_tmp=ds_output";
		szParam       = "";
		szRetCallback = "fn_callBack";
        break;
        case "srchCardWdrwChk": //Card 산출중여부확인
        if (!fn_preSearch(sType,"srchCardWdrwChk")) return false;
		szSvcid       = "srchCardWdrwChk";
		szController  = "/dlw/card/card-wdrw-chk";
		szInDs        = "ds_input=ds_inqCndt";
		szOutDs       = "ds_cardWdrwHist_list_tmp=ds_output";
		szParam       = "accnt_no=" + tab_card.edt_accntNo.value;
		szRetCallback = "fn_callBack";
        break;
        case "srchCardDplcChk": //Card 중복여부 확인
        if (!fn_preSearch(sType,"srchCardDplcChk")) return false;
        var card_no = tab_card.edt_cardNo.value;
		card_no = card_no.replace("-","");
		szSvcid       = "srchCardDplcChk";
		szController  = "/dlw/card/card-dplc-chk";
		szInDs        = "ds_input=ds_inqCndt";
		szOutDs       = "ds_cardWdrwHist_list_tmp=ds_output";
		szParam       = "card_no=" + card_no;
		szRetCallback = "fn_callBack";
        break;
        case "srchCardInfoByAccnt": //구좌조회후 CMS 납입 구좌일경우 나머지 정보 가져옴.
	    szSvcid       = "srchCardInfoByAccnt";
		szController  = "/dlw/card/card-info";
		szInDs        = "";
		szOutDs       = "ds_card_info=ds_output";
		szParam       = "accnt_no="+ds_srchCard.getColumn(0,"accnt_no");
		szRetCallback = "fn_callBack";
        break;
		case "srchOnlineMemberCard": //온라인회원 조회
	    szSvcid       = "srchOnlineMemberCard";
		szController  = "/dlw/cust/online-accnt/list";
		szInDs        = "";
		szOutDs       = "ds_onlineCardMember=ds_output";
		szParam       = "gubun=card accnt_no="+ds_srchCard.getColumn(0,"accnt_no");
		szRetCallback = "fn_callBack";
		break;
		case "srchOnlineMemberCardSs": //온라인회원 조회(결합, 이벤트)
	    szSvcid       = "srchOnlineMemberCardSs";
		szController  = "/dlw/cust/online-accnt/list";
		szInDs        = "";
		szOutDs       = "ds_onlineCardMember=ds_output";
		szParam       = "gubun=card accnt_no="+ds_srchCard.getColumn(0,"accnt_no");
		if(ds_srchCms.getColumn(0,"join_cl") == "03") szParam+=" site_id=001";
		if(ds_srchCms.getColumn(0,"join_cl") == "05") szParam+=" site_id=002";
		szRetCallback = "fn_callBack";
		break;
    }
    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

//저장
function fn_commSave(saveInfo, consTyp) {

    var szSvcid = ""
    var szController = ""
    var szInDs = ""
    var szOutDs = ""
    var szParam = ""
    var szRetCallback = ""

    switch(saveInfo) {
        case "saveCmsRgsnAnxtSrvc": //CMS 부가서비스 등록
		if (!fn_preSave("saveCmsRgsnAnxtSrvc")) return false;
		if(confirm("[경고] CMS출금에 대한 개인정보\n수집 및 이용동의 / 제3자 제공 동의\n녹취를 완료하셨습니까?")) {
		    if(confirm("CMS 부가서비스를 신청 하시겠습니까?")) {
		        //웹모듈 연동O
		        if(tab_cms.ckb_webModule.value == "N") {
					var resl = fn_rltmWebModuleRequest();
					if (!resl) {return false;}
				} 
				//웹모듈 연동X
				szSvcid       = "saveCmsRgsnAnxtSrvc";
				szController  = "/dlw/cms/cms-anxt-srvc/save";
				szInDs        = "ds_input=ds_rgsnCms";
				szOutDs       = "";
				szParam       = "";
				szRetCallback = "fn_callBack";   
		    } else{return false;}
		} else{return false;} 
        break;
        
        case "saveCardRgsnAnxtSrvc": //Card 등록
		if (!fn_preSave("saveCardRgsnAnxtSrvc")) return false;
		szSvcid       = "saveCardRgsnAnxtSrvc";
		szController  = "/dlw/card/card-anxt-srvc/save";
		szInDs        = "ds_input=ds_rgsnCard";
		szOutDs       = "";
		szParam       = "";
		szRetCallback = "fn_callBack";
        break;
        
        case "saveCons": //상담등록
        if ("cms" == consTyp) {
			if (!fn_preSave("saveCmsCons")) return false;
        } else if ("card" == consTyp) {
			if (!fn_preSave("saveCardCons")) return false;
        } else {return false;}
        
		szSvcid       = "saveCons";
		szController  = "/dlw/cms/save-cons";
		szInDs        = "ds_input=ds_rgsnCons";
		szOutDs       = "";
		szParam       = "";
		szRetCallback = "fn_callBack";  
        break;

              
    }

	// 트랜젝션 공통함수 호출
	gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}
/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/
// CMS 초기화
function fn_init(datasetclear)
{
	//tab_cms.srch_typ.index = 1;
	var objDate = new Date();
	var strDate = objDate.toFormatString("%Y%m%d");
	tab_cms.cal_rgsnDt.value = strDate;
	
	if(!gfn_isNull(datasetclear) && datasetclear != "N") {
		ds_srchCms.clearData();
	}	
	
	tab_cms.edt_custaccntNo.value = "";
    tab_cms.edt_mmbrNm.value = "";
	tab_cms.edt_mmbrNo.value = "";
    tab_cms.edt_brdt.value = "";
    tab_cms.ckb_bzop.value = "";
    tab_cms.edt_bzop.value = "";
    tab_cms.edt_bankCd.value = "";
    tab_cms.edt_bankNm.value = "";
    tab_cms.edt_bankaccntNo.value = "";
    tab_cms.edt_tranDt.value = "";
    tab_cms.edt_depr.value = "";
    tab_cms.cbo_RltnCd.value = "";
    tab_cms.edt_cell.value = "";
    
    tab_cms.edt_brdt.readonly = false;
    tab_cms.edt_bzop.readonly = false;
    tab_cms.edt_depr.readonly = false;
    
    // CMS/카드 출금이체 신청/해지 부가서비스 메인화면 저장 추가
    tab_cms.rdo_cmsApcl.value = "1";
	tab_cms.edt_custaccntNo.value = p_accnt_no;
	tab_cms.edt_mmbrNm.value = p_mem_nm;
	tab_cms.edt_mmbrNo.value = p_mem_no;
	if (opener.cbo_pay_mthd.value != "06") {
		tab_cms.edt_bankaccntNo.value = opener.ds_prod.getColumn(0, "bank_accnt_no");
	} else {
		tab_cms.edt_bankaccntNo.value = "";
	}
	if (!gfn_isNull(p_idn_no)) {
		if (String(p_idn_no).length == 6) { // 생년월일
			tab_cms.stc_brdt.visible = true;
			tab_cms.edt_brdt.visible = true;
			tab_cms.edt_brdt.value = p_idn_no;
			
			tab_cms.ckb_bzop.value = "N";
			tab_cms.stc_bzop.visible = false;
			tab_cms.edt_bzop.visible = false;
			tab_cms.edt_bzop.value = "";
		} else {
			tab_cms.stc_brdt.visible = false;
			tab_cms.edt_brdt.visible = false;
			tab_cms.edt_brdt.value = "";
			
			tab_cms.ckb_bzop.value = "Y";
			tab_cms.stc_bzop.visible = true;
			tab_cms.edt_bzop.visible = true;
			tab_cms.edt_bzop.value = p_idn_no;
		}
	}
	
	ds_srchCms.clearData();
	ds_srchCms.addRow();
	ds_srchCms.setColumn(0, "accnt_no", p_accnt_no);
	ds_srchCms.setColumn(0, "mem_nm", p_mem_nm);
	ds_srchCms.setColumn(0, "mem_no", p_mem_no);
	ds_srchCms.setColumn(0, "idn_no", p_idn_no);
	ds_srchCms.setColumn(0, "bank_accnt_no", tab_cms.edt_bankaccntNo.value);
	
	tab_cms.cbo_RltnCd.index = 1;
	fn_setRltnCd("20");
}
// Card 초기화
function fn_card_init(datasetclear)
{
	var objDate = new Date();
	var strDate = objDate.toFormatString("%Y%m%d");
	tab_card.cal_rgsnDt.value = strDate;
	
	if(!gfn_isNull(datasetclear) && datasetclear != "N") {
		ds_srchCard.clearData();
	}
	
	tab_card.edt_accntNo.value = "";
    tab_card.edt_mmbrNm.value = "";
	tab_card.edt_mmbrNo.value = "";
    tab_card.edt_brdt.value = "";
    tab_card.ckb_bzop.value = "";
    tab_card.edt_bzop.value = "";
    tab_card.edt_PrdtCd.value = "";
    tab_card.edt_PrdtNm.value = "";
    tab_card.edt_tranDt.value = "";
    tab_card.edt_cell.value = "";
    tab_card.edt_emil.value = "";
    tab_card.cbo_CardCd.value = "";
    tab_card.edt_cardNo.value = "";
    tab_card.edt_exp_year.value = "";
    tab_card.edt_exp_mon.value = "";
    
    // 2016. 04. 12 최현식
    // CMS/카드 출금이체 신청/해지 부가서비스 메인화면 저장 추가
    tab_card.rdo_cardApcl.value = "1";
    tab_card.edt_accntNo.value = p_accnt_no;
	tab_card.edt_mmbrNm.value = p_mem_nm;
	tab_card.edt_mmbrNo.value = p_mem_no;
	if (opener.cbo_pay_mthd.value == "06") {
		tab_card.edt_cardNo.value = opener.ds_prod.getColumn(0, "bank_accnt_no");
	} else {
		tab_card.edt_cardNo.value = "";
	}
	tab_card.edt_PrdtCd.value = opener.edt_prod_cd.value;
	tab_card.edt_PrdtNm.value = opener.edt_prod_nm.value;
	tab_card.edt_cell.value = opener.edt_inspl_phone.value;
	tab_card.edt_emil.value = p_email;
	
	if (!gfn_isNull(p_idn_no)) {
		if (String(p_idn_no).length == 6) { // 생년월일
			tab_card.stc_brdt.visible = true;
			tab_card.edt_brdt.visible = true;
			tab_card.edt_brdt.value = p_idn_no;
			
			tab_card.ckb_bzop.value = "N";
			tab_card.stc_bzop.visible = false;
			tab_card.edt_bzop.visible = false;
			tab_card.edt_bzop.value = "";
		} else {
			tab_card.stc_brdt.visible = false;
			tab_card.edt_brdt.visible = false;
			tab_card.edt_brdt.value = "";
			
			tab_card.ckb_bzop.value = "Y";
			tab_card.stc_bzop.visible = true;
			tab_card.edt_bzop.visible = true;
			tab_card.edt_bzop.value = p_idn_no;
		}
	}
	
	ds_srchCard.clearData();
	ds_srchCard.addRow();
	ds_srchCard.setColumn(0, "accnt_no", p_accnt_no);
	ds_srchCard.setColumn(0, "mem_nm", p_mem_nm);
	ds_srchCard.setColumn(0, "mem_no", p_mem_no);
	ds_srchCard.setColumn(0, "idn_no", p_idn_no);
	ds_srchCard.setColumn(0, "prod_cd", tab_card.edt_PrdtNm.value);
	ds_srchCard.setColumn(0, "prod_nm", tab_card.edt_PrdtNm.value);
	ds_srchCard.setColumn(0, "bank_accnt_no", tab_card.edt_cardNo.value);
}

//조회 결과
function fn_postSearch(svcid)
{
    switch(svcid) {
        case "srchCmsAplcDtl": // CMS 등록이력 조회
		if(ds_cmsAplcDtl_list.rowcount < 1) {
			alert("조회 결과가 없습니다.");
		} 
        break;
        
        case "srchCardAplcDtl": // Card 등록이력 조회
		if(ds_cardAplcDtl_list.rowcount < 1) {
			alert("조회 결과가 없습니다.");
		} 
        break;
    }
    return;
}

//사업자등록번호 표시 여부
function fn_bzop_visible(visible_yn, typ) {
    var tab_type = "";
    if (typ == "cms") {
		tab_type = tab_cms;
    } else if (typ == "card") {
		tab_type = tab_card;
    }
	if (visible_yn == "Y") {
		tab_type.stc_brdt.visible = false;
		tab_type.edt_brdt.visible = false;
		
		tab_type.stc_bzop.move(tab_type.stc_brdt.position.left, tab_type.stc_brdt.position.top);
		tab_type.edt_bzop.move(tab_type.edt_brdt.position.left, tab_type.edt_brdt.position.top);
		
		tab_type.stc_bzop.visible = true;
		tab_type.edt_bzop.visible = true;
	} else {
		tab_type.stc_brdt.visible = true;
		tab_type.edt_brdt.visible = true;
		
		tab_type.stc_bzop.visible = false;
		tab_type.edt_bzop.visible = false;
	}
}

//개인식별번호에 맞춰 값 삽입
function fn_idn_no_vl_set(idn_no,typ) {
	var tab_type = "";
    if (typ == "cms") {
		tab_type = tab_cms;
    } else if (typ == "card") {
		tab_type = tab_card;
    }
	if (idn_no != null && idn_no != "") {
		if (idn_no.length == 10) {
			tab_type.ckb_bzop.value = "Y";
			//fn_bzop_visible("Y",typ);
			tab_type.edt_bzop.value = idn_no;
			brno_onkillfocus(tab_type.edt_bzop);
		} else {
			tab_type.ckb_bzop.value = "N";
			//fn_bzop_visible("N",typ);
			tab_type.edt_brdt.value = "";
			if(idn_no.length > 6) {
			    tab_type.edt_brdt.value = idn_no.substring(0,6);
			} else {
				tab_type.edt_brdt.value = idn_no;
			}
		}
	}	
}

//예금주번호 표시여부
function fn_depr_phone_visible(visible_yn) {
	if (visible_yn == "N") {
	    tab_cms.stc_deprPhone.visible = false;
	    tab_cms.edt_cell.visible = false;
	} else {
	    tab_cms.stc_deprPhone.visible = true;
	    tab_cms.edt_cell.visible = true;
	}
}

//식별번호 체크
function fn_chk_idn_no(typ) {
	var tab_type = "";
    if (typ == "cms") {
		tab_type = tab_cms;
    } else if (typ == "card") {
		tab_type = tab_card;
    }
    
	var brdt = tab_type.edt_brdt.value;
	var bzop = tab_type.edt_bzop.value;
	if (tab_type.ckb_bzop.value == "Y") {
		bzop = bzop.replace(/[^0-9]/g,"");
	}
	var bzop_fg = tab_type.ckb_bzop.value;
	
	var return_bool = true;
	
	if (bzop_fg == "N") {
	    if (gfn_isNull(tab_type.edt_brdt.value)) {
	        alert("생년월일을 입력하여 주십시오.");
	        return_bool = false;
	    } else {
	        if (tab_type.edt_brdt.value.length != 6) {
	            alert("생년월일 6자리를 입력하여 주십시오.");
	            return_bool = false;
	        }
	    }
	} else {
	   if ( !gfn_isNull(bzop) && bzop.length != 10 ) {
	       alert("사업자등록번호 자릿수가 일치하지 않습니다.");
	       return_bool = false;
	   }
	}
	return return_bool;
}

//구좌조회후 CMS 납입 구좌일경우 나머지 정보 가져옴.
function fn_setCMSInfoByAccnt(){
	fn_commSearch(gfn_getCommTypeInit(), "srchCmsInfoByAccnt");
}
function fn_setCardInfoByAccnt() {
	fn_commSearch(gfn_getCommTypeInit(), "srchCardInfoByAccnt");
}

function fn_setAddCmsInfo() {
//idn_no, 예금주휴대폰, 은행, 계좌번호, 이체일, 예금주, 관계 세팅
	tab_cms.edt_bankCd.value = ds_cms_info.getColumn(0, "bank_cd");
	tab_cms.edt_bankNm.value = ds_cms_info.getColumn(0, "bank_nm");
	tab_cms.edt_bankaccntNo.value = ds_cms_info.getColumn(0, "bank_accnt_no");
	tab_cms.edt_depr.value = ds_cms_info.getColumn(0, "depr");
	tab_cms.edt_tranDt.value = ds_cms_info.getColumn(0, "ichae_dt");
	tab_cms.cbo_RltnCd.value = ds_cms_info.getColumn(0, "reltn");
	tab_cms_cbo_RltnCd_onitemchanged(tab_cms.cbo_RltnCd);
	
	ds_srchCms.setColumn(0, "sync_no", ds_cms_info.getColumn(0, "sync_no"));
	
	fn_idn_no_vl_set(ds_cms_info.getColumn(0, "idn_no"),"cms");
	
	var depr_cell = ds_cms_info.getColumn(0, "depr_cell");
	if (!gfn_isNull(depr_cell) && depr_cell.length > 0) {
		depr_cell = depr_cell.replace("-","");
		tab_cms.edt_cell.value = depr_cell;
		phone_onkillfocus(tab_cms.edt_cell);
	}
}
function fn_setOnlineCmsInfo() {
	//ds_onlineCmsMember
	tab_cms.cbo_RltnCd.value = ds_onlineCmsMember.getColumn(0,"reltn");//관계
	tab_cms_cbo_RltnCd_onitemchanged(tab_cms.cbo_RltnCd);
	tab_cms.edt_tranDt.value = ds_onlineCmsMember.getColumn(0, "ichae_dt");	//이체일
	tab_cms.edt_depr.value = ds_onlineCmsMember.getColumn(0, "depr");//예금주
	tab_cms.edt_bankCd.value = ds_onlineCmsMember.getColumn(0, "bank_cd");
	tab_cms.edt_bankNm.value = ds_onlineCmsMember.getColumn(0, "bank_nm");
	tab_cms.edt_bankaccntNo.value = ds_onlineCmsMember.getColumn(0, "bank_accnt_no");//계좌번호
	var depr_cell = ds_onlineCmsMember.getColumn(0, "depr_cell");
	if (!gfn_isNull(depr_cell) && depr_cell.length > 0) {
		depr_cell = depr_cell.replace("-","");
		tab_cms.edt_cell.value = depr_cell;
	}
	
	var online_idnNo = ds_onlineCmsMember.getColumn(0, "idn_no");	// 식별번호
	// 온라인식별번호 없을경우 현재, 현재 없을경우 ncaidnno
	if(gfn_isNull(online_idnNo)) {
		var current_idnNo = ds_cms_info.getColumn(0,"idn_no")
		if(gfn_isNull(current_idnNo)) {
			fn_idn_no_vl_set(current_idnNo,"cms");
		}
	}
}

function fn_setAddCardInfo() {
	tab_card.edt_accntNo.value = ds_card_info.getColumn(0, "accnt_no");
	tab_card.edt_mmbrNm.value = ds_card_info.getColumn(0, "mem_nm");
	tab_card.edt_mmbrNo.value = ds_card_info.getColumn(0, "mem_no");
	var expire_date = ds_card_info.getColumn(0, "expire_date");
	
	if(!gfn_isNull(expire_date) && expire_date.length=4){
		tab_card.edt_exp_year.value = expire_date.substring(0,2);
		tab_card.edt_exp_mon.value = expire_date.substring(2,4);
	}
	tab_card.edt_cardNo.value = ds_card_info.getColumn(0, "card_no");
	card_onkillfocus(tab_card.edt_cardNo);
	tab_card.edt_tranDt.value = ds_card_info.getColumn(0, "pay_dt");
	tab_card.edt_bid.value = ds_card_info.getColumn(0, "bid");
	fn_idn_no_vl_set(ds_card_info.getColumn(0,"card_birth"),"cms");
	tab_card.cbo_CardCd.value = ds_card_info.getColumn(0, "card_cd");
}

function fn_setOnlineCardInfo() {
	//ds_onlineCardMember
	tab_card.cbo_CardCd.value = ds_onlineCardMember.getColumn(0, "card_cd");
	tab_card.edt_cardNo.value = ds_onlineCardMember.getColumn(0, "card_no");
	card_onkillfocus(tab_card.edt_cardNo);
	tab_card.edt_tranDt.value = ds_onlineCardMember.getColumn(0, "pay_dt");
	var expire_date = ds_onlineCardMember.getColumn(0, "expire_date");
	if(!gfn_isNull(expire_date) && expire_date.length == 4){
		tab_card.edt_exp_year.value = expire_date.substring(0,2);
		tab_card.edt_exp_mon.value = expire_date.substring(2,4);
	}
	fn_idn_no_vl_set(ds_onlineCardMember.getColumn(0,"card_birth"),"card");
}

/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
//조회 버튼 이벤트 (CMS)
function btn_Search_onclick(obj:Button,  e:ClickEventInfo)
{
	//fn_cmsCsmmSearch(gfn_getCommTypeInit()); // 조회
	fn_commSearch(gfn_getCommTypeInit(), "srchCmsAplcDtl"); // 조회
}
//조회 버튼 이벤트 (Card)
function btn_card_Search_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_commSearch(gfn_getCommTypeInit(), "srchCardAplcDtl"); // 조회
}
//초기화 버튼 이벤트 (CMS)
function btn_Init_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_init();
}
//초기화 버튼 이벤트 (Card)
function btn_card_Init_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_card_init();
}
//저장 버튼 이벤트 (CMS)
function btn_saveCmsRgsnInfo_onclick(obj:Button,  e:ClickEventInfo)
{						
    //신규, 해지여부
    if(tab_cms.rdo_cmsApcl.value == "1") {//신규
        //저장
        fn_commSave("saveCmsRgsnAnxtSrvc");
    } else if (tab_cms.rdo_cmsApcl.value == "2"){ //해지
        //Cms 산출중여부 조회
        fn_commSearch(gfn_getCommTypeInit(),"srchCmsWdrwChk");
    }
}
//저장 버튼 이벤트 (Card)
function btn_saveCardRgsnInfo_onclick(obj:Button,  e:ClickEventInfo)
{
    //등록일자를 금일 이전으로 지정할 수 없습니다.
	var objDate = new Date();
	var strDate = objDate.toFormatString("%Y%m%d"); //금일
	
    var rgsn_dt = tab_card.cal_rgsnDt.value;
    if(gfn_isNull(rgsn_dt)) {
		alert("등록일자를 입력하세요");
		return false;
    }
    if (rgsn_dt < strDate) {
		alert("등록일자를 금일 이전으로 지정할 수 없습니다.");
		return false;
    }

	//신규, 해지여부
    if(tab_card.rdo_cardApcl.value == "1") {//신규
        //중복카드여부 확인
        fn_commSearch(gfn_getCommTypeInit(),"srchCardDplcChk");
    } else if (tab_card.rdo_cardApcl.value == "2"){ //해지
        //Card 산출중여부 조회
        fn_commSearch(gfn_getCommTypeInit(),"srchCardWdrwChk");
    }
}

// 스크롤 페이징 (CMS)
function fn_cmsAplcDtlGrid_onvscrolllastover(obj:Grid, e:ScrollEventInfo)
{
	fn_commSearch(gfn_getCommTypeAppend(),"srchCmsAplcDtl");
}
// 스크롤 페이징 (Card)
function fn_cardAplcDtlGrid_onvscrolllastover(obj:Grid, e:ScrollEventInfo)
{
	fn_commSearch(gfn_getCommTypeAppend(),"srchCardAplcDtl");
}

// 그리드 헤더 클릭(정렬)(CMS)
function grd_cms_csmm_onheadclick(obj:Grid, e:GridClickEventInfo)
{ 
    if (e.cell == 0) return false;
    //속도저하로 주석처리
// 	ds_inqCndt.setColumn(0, "sController", "/dlw/cms/cms-csmm/list");
// 	ds_inqCndt.setColumn(0, "dsName", "ds_output");
// 	
// 	if(!gfn_pageSearch(gfn_getCommTypeOrderBy(), ds_cmsCsmm_list, tab_cms.sta_TotalCnt, 50, tc_cmsCsmm)) return;
// 	
// 	gfn_grdHeadClick(obj, e, ds_inqCndt,"", ds_cmsCsmm_list_tmp, "ds_cmsCsmm_list_tmp");
// 	gfn_setTotalRowCount(ds_cmsCsmm_list, tab_cms.sta_TotalCnt, tc_cmsCsmm); // 페이지건수 표출
	gfn_grdHeadClick(obj, e);
}
// 그리드 헤더 사이즈 초기화
function btn_gdInit_cmsCsmm_onclick(obj:Button,  e:ClickEventInfo)
{
	gfn_resetColsize(tab_cms.cms_csmm_grid);
}
// 신규/해지 신청 변경시
function tab_cms_Radio00_onitemchanged(obj:Radio, e:ItemChangeEventInfo)
{
	if(obj.index == 1) {
	    tab_cms.ckb_dfrTrmt.visible = true;
	} else {
	    tab_cms.ckb_dfrTrmt.visible = false;
	}
}
// 사업자 체크박스 클릭시 (CMS)
function tab_cms_ckb_bzop_onchanged(obj:CheckBox, e:CheckBoxChangeEventInfo)
{
    fn_bzop_visible(obj.value, "cms");
}
// 사업자 체크박스 클릭시 (Card)
function tab_card_ckb_bzop_onchanged(obj:CheckBox, e:CheckBoxChangeEventInfo)
{
	fn_bzop_visible(obj.value, "card");
}
//관계값 변경시
function tab_cms_cbo_RltnCd_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
    fn_setRltnCd(obj.value);
}

function fn_setRltnCd(sType)
{
	var old_idn_no = ds_srchCms.getColumn(0, "idn_no");
    var old_mem_nm = ds_srchCms.getColumn(0, "mem_nm");
    var idn_no = "";
    
    tab_cms.edt_bzop.readonly = false;
    tab_cms.edt_brdt.readonly = false;
    tab_cms.edt_depr.readonly = false;
    
    if (sType == "20") {
        fn_depr_phone_visible("N");
        //본인일경우
       //>> 식별번호 10자리(사업자)경우
       if(!gfn_isNull(old_idn_no)){
	   //>>예금주 값 설정
	   tab_cms.edt_depr.value = old_mem_nm;
	   fn_idn_no_vl_set(old_idn_no,"cms");
	   tab_cms.edt_brdt.readonly = true;
	   tab_cms.edt_depr.readonly = true;
		   /*
		   if (old_idn_no.length == 10) {
			   //>> 체크박스 체크 후 사업자번호표시  사업자번호값설정
			   fn_idn_no_vl_set(old_idn_no,"cms");

			   //>> 사업자번호,예금주수정불가
			   tab_cms.edt_bzop.readonly = true;
			   tab_cms.edt_depr.readonly = true;
		   } else {
		   // 식별번호 10자리(사업자) 아닌 경우
		   //>> 체크박스 해제 후 사업자번호 표시X 
		   //>> 생년월일 6자리이상일경우 substring(0,6)
		   //>> 생년월일,예금주수정불가 (readonly)

		   }
		   */
		}
    } else if (sType == "") {
    fn_depr_phone_visible("N");
    //전체선택일경우
    //생년월일, 사업자번호, 예금주 수정가능,예금주휴대번호 표시X
        tab_cms.edt_brdt.readonly = false;
	    tab_cms.edt_bzop.readonly = false;
	    tab_cms.edt_depr.readonly = false;
	    
    //타인일경우
    } else {
      //>>예금주휴대폰번호 visible = true
      fn_depr_phone_visible("Y");
      //>>사업자, 생년월일,예금주 값 제거
      //>> 생년월일, 사업자번호,예금주 빈값 모두 수정가능하도록
        tab_cms.edt_brdt.value = "";
	    tab_cms.edt_bzop.value = "";
	    tab_cms.edt_depr.value = "";
        tab_cms.edt_brdt.readonly = false;
	    tab_cms.edt_bzop.readonly = false;
	    tab_cms.edt_depr.readonly = false;
    }
}

// 전화번호 설정
function phone_ontextchanged(obj:Edit,  e:TextChangedEventInfo)
{
	obj.value = gfn_phoneNumStr(obj.value);
	obj.setCaretPos(-1);
}
function phone_onkillfocus(obj:Edit, e:KillFocusEventInfo)
{
	obj.value = gfn_phoneNumStr(obj.value);
}

//사업자등록번호 설정
function brno_onkillfocus(obj:Edit, e:KillFocusEventInfo)
{
	obj.value = gfn_BrnoStr(obj.value);
}

function brno_ontextchanged(obj:Edit,  e:TextChangedEventInfo)
{
	obj.value = gfn_BrnoStr(obj.value);
	obj.setCaretPos(-1);
}

//카드번호 설정
function card_onkillfocus(obj:Edit, e:KillFocusEventInfo)
{
	obj.value = gfn_CardStr(obj.value);
}

function card_ontextchanged(obj:Edit,  e:TextChangedEventInfo)
{
	obj.value = gfn_CardStr(obj.value);
	obj.setCaretPos(-1);
}
/********************************************************************************************/
/**   7-0. 팝업 관련 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
// 은행 조회 버튼 클릭
function btn_Bank_onclick(obj:Button,  e:ClickEventInfo)
{
	var sPrmr = {"":""};
	var reVal = gfn_diaLog("은행 조회", -1, -1, 884, 601, "PS990000::PS992500.xfdl", false, sPrmr, false, false, true);
	
	if( reVal != null ){
		if(reVal.getColumn(0, "cd") != ""){
		    tab_cms.edt_bankCd.value = reVal.getColumn(0, "cd");
		    tab_cms.edt_bankNm.value = reVal.getColumn(0, "cd_nm");
		}
	}
}
// 회원 조회 버튼 클릭
function btn_Custaccnt_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_accntSrch();
}
function fn_accntSrch (typ) {
	var sPrmr = {"p_srch_typ":"","p_srch_vl":""};
	if ("Y" == typ) {
		sPrmr = {"p_srch_typ":ds_accntInqCndt.getColumn(0,"srch_typ"), "p_srch_vl":ds_accntInqCndt.getColumn(0,"srch_vl")};
	}
	gfn_diaLog("회원 조회", -1, -1, -1, -1, "PS990000::PS992400.xfdl", false, sPrmr, true, false, true, null, null, true);
}
function fn_setAccntNo(){
	if(ds_accnt_info.getColumn(0, "accnt_no") != ""){
		var accnt_no = ds_accnt_info.getColumn(0, "accnt_no");
		var mem_no = ds_accnt_info.getColumn(0, "mem_no");
		var mem_nm = ds_accnt_info.getColumn(0, "mem_nm");
		var idn_no = ds_accnt_info.getColumn(0, "idn_no");
		var cell = ds_accnt_info.getColumn(0, "cell");
		var prdt_cd = ds_accnt_info.getColumn(0, "prod_cd");
		var prdt_nm = ds_accnt_info.getColumn(0, "prod_nm");
		var bank_accnt_no = ds_accnt_info.getColumn(0, "bank_accnt_no");
		
		if (tab_main.tabindex == 0) {
			//데이터 클리어
			fn_init("N");
			tab_cms.edt_custaccntNo.value = accnt_no;
			tab_cms.edt_mmbrNm.value = mem_nm;
			tab_cms.edt_mmbrNo.value = mem_no;
			tab_cms.edt_depr.value = mem_nm;
			tab_cms.edt_bankaccntNo.value = bank_accnt_no;
			
			tab_cms.edt_depr.readonly = true;
			
			//본인 설정
			tab_cms.cbo_RltnCd.value = "20";
			tab_cms_cbo_RltnCd_onitemchanged(tab_cms.cbo_RltnCd);

			//조회 데이터셋 초기화
			ds_srchCms.clearData();
			ds_srchCms.addRow();
			ds_srchCms.copyRow(0,ds_accnt_info,0);
			
			//idn_no값 설정
			tab_cms.edt_brdt.value = "";
			fn_idn_no_vl_set(idn_no, "cms");
			
			//납입방법이 CMS일경우 추가정보 출력
			if (ds_srchCms.getColumn(0, "pay_mthd") == '04') {
				fn_setCMSInfoByAccnt();
			}
			
			//온라인회원일경우 온라인가입시 입력된 CMS정보 Load
			// joinCl => 02 :온라인[일반], 03:온라인[결합],05:온라인[이벤트]
			// join_cl , trans_gubun, tab_cms.rdo_cmsApcl.value == "1"
			/*     /dlw/cust/cust-acnt-online/list    */
			/*     /dlw/cust/cust-acnt-online-ss/list    */
			// gubun >> "" or card
			var apcl_gubun = tab_cms.rdo_cmsApcl.value;
			var join_cl = ds_srchCms.getColumn(0, "join_cl");
			var trans_gubun = ds_srchCms.getColumn(0, "trans_gubun");
			
			if("1" == apcl_gubun && "02" == join_cl && "N" == trans_gubun) {
				fn_commSearch(gfn_getCommTypeInit(), "srchOnlineMemberCms");
			} else if ("1" == apcl_gubun && ("03" == join_cl || "05" == join_cl ) && "N" == trans_gubun) {
				//fn_commSearch(gfn_getCommTypeInit(), "srchOnlineMemberCmsSs");
			}
		} else if (tab_main.tabindex == 1){
			fn_card_init("N");
			//초기화
			ds_srchCard.clearData();
			ds_srchCard.addRow();
			ds_srchCard.copyRow(0,ds_accnt_info,0);
			
			tab_card.edt_accntNo.value = accnt_no;
			tab_card.edt_mmbrNm.value = mem_nm;
			tab_card.edt_mmbrNo.value = mem_no;
			tab_card.edt_cell.value = cell;
			tab_card.edt_PrdtCd.value = prdt_cd;
			tab_card.edt_PrdtNm.value = prdt_nm;
			//이메일?

			//idn_no값 설정
			tab_card.edt_brdt.value = "";
			fn_idn_no_vl_set(idn_no, "card");
			
			//납입방법이 Card일경우 추가정보 출력
			if (ds_srchCard.getColumn(0, "pay_mthd") == '06') {
				var apcl_gubun = tab_card.rdo_cardApcl.value;
				if(apcl_gubun == "1") {
					var join_cl = ds_srchCard.getColumn(0, "join_cl");
					var trans_gubun = ds_srchCard.getColumn(0, "trans_gubun");
					if("02" == join_cl && "N" == trans_gubun) {
						fn_commSearch(gfn_getCommTypeInit(), "srchOnlineMemberCard");
					} else if (("03" == join_cl || "05" == join_cl ) && "N" == trans_gubun) {
						fn_commSearch(gfn_getCommTypeInit(), "srchOnlineMemberCardSs");
					} else {
						fn_setCardInfoByAccnt();
					}
				} else {
					fn_setCardInfoByAccnt();
				}
			}
		}
	} else {
		if (tab_main.tabindex == 0) {
			//CMS초기화
			fn_init("N");
		} else if (tab_main.tabindex == 1){
			//CARD초기화
			fn_card_init("N");
		}
	
	}
}
/********************************************************************************************/
/**   7-1. CMS 웹모듈 관련 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
//웹모듈 결과 요청
function fn_rltmWebModuleRequest()
{
	//결과조회에 사용할 변수 초기화
	aplc_div = "";
	tmpr_resl = "";
   
    var tmpr_resl = ""; //임시결과
    
    var aplc_div = "";  //신규, 해지 구분
    var idn_no = "";    //개인식별번호
    var accnt_no = "";   //회원번호(구좌)
    var bank_cd = tab_cms.edt_bankCd.value;    //은행코드
    var bank_accnt_no = tab_cms.edt_bankaccntNo.value; //은행계좌번호
    if(tab_cms.rdo_cmsApcl.value == "1") {
        aplc_div = "3";
        accnt_no = ds_srchCms.getColumn(0,"accnt_no");
    } else if (tab_cms.rdo_cmsApcl.value == "2") {
        aplc_div = "4";
        accnt_no = ds_srchCms.getColumn(0,"accnt_no");
    } else {
        alert("신규, 해지여부를 선택해주세요.");
        return false;
    }
    
    //임시구분값 >> aplc_div >> 2일경우 유효검사
    //aplc_div = "2";
    
    if(tab_cms.ckb_bzop.value == "N") {
		idn_no = tab_cms.edt_brdt.value;
	} else {
		idn_no = tab_cms.edt_bzop.value;
		idn_no = idn_no.replace(/[^0-9]/g,"");
	}
	
    //웹모듈 부가서비스요청
	tmpr_resl = gfn_AdditionalServiceReq(aplc_div,bank_cd,bank_accnt_no,accnt_no,idn_no);
	
	trace('LDJ Error=====================>  ' + tmpr_resl);
	
	//결과조회에 사용할 변수 저장
	tmp_aplc_div = aplc_div;
	tmp_tmpr_resl = tmpr_resl;
	
    //결과 조회
    var resl_bool = fn_rltmWebModuleResult();
    
    return resl_bool;
}

//웹모듈 결과 조회
function fn_rltmWebModuleResult()
{
    if(gfn_isNull(tmp_aplc_div) && gfn_isNull(tmp_tmpr_resl)){
		alert("결과 저장이 완료되지 않았습니다. 재호출 해주세요.");
		return false;
    }

    var FlReslCd = gfn_AdditionalServiceRes(tmp_aplc_div,tmp_tmpr_resl);
    var RlReslCd = FlReslCd.substring(0,4);
    
    if(RlReslCd == "0000") {    
        return true;
    } else {
		ds_resl_cd.filter("(cd=='"+ RlReslCd +"')");
		alert(ds_resl_cd.getColumn(0,"cd_nm"));
		ds_resl_cd.filter("");
		return false;
    }
}

// 닫기
function btn_close_onclick(obj:Button,  e:ClickEventInfo)
{
	close();
}
]]></Script>
  </Form>
</FDL>

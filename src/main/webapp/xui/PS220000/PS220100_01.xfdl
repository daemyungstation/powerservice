<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="PS220100" classname="캠페인관리" inheritanceid="" position="absolute 0 0 989 795" titletext="캠페인 관리" scrollbars="none" onload="PS220100_onload">
    <Layouts>
      <Layout>
        <Static id="stc_10" class="sta_workData" position2="absolute l:9.61% r:53.69% t:318px h:26" positiontype="position2"/>
        <Static id="stc_21" class="sta_workData" position2="absolute l:9.61% r:0 t:268px h:26" positiontype="position2"/>
        <Static id="stc_25" text="캠페인 상세정보보기" class="sta_workTitle2" position="absolute 0 247 297 267"/>
        <Static id="sta_GrayLine" class="sta_WF_Line1" position2="absolute l:0 r:0 t:267px h:1" positiontype="position2"/>
        <Static id="stc_04" class="sta_workSrcBg" position2="absolute l:0 r:0 t:7 h:42" positiontype="position2">
          <Layouts>
            <Layout width="989" height="42"/>
          </Layouts>
        </Static>
        <Static id="stc_05" text="캠페인유형" class="sta_workSrcLabel1" position="absolute 199 18 277 38"/>
        <Static id="stc05" text="캠페인명" class="sta_workSrcLabel1" position="absolute 20 18 77 38"/>
        <Static id="stc_06" text="진행상태" class="sta_workSrcLabel1" position="absolute 486 18 542 38"/>
        <Combo id="cbo_srch_cmpg_typ_cd" taborder="1" position="absolute 274 18 369 38" innerdataset="@ds_cmpgTypCdList_srch" datacolumn="hrch_cd_nm" codecolumn="hrch_cd" onitemchanged="cbo_onitemchanged"/>
        <Edit id="edt_srch_cmpg_nm" taborder="0" autoselect="true" autoskip="true" onkeydown="common_onkeydown" enable="true" position="absolute 83 18 178 38"/>
        <Combo id="cbo_srch_cmpg_prgr_stat_cd" taborder="3" innerdataset="@ds_cmpgPrgrStatCdList_srch" codecolumn="cd" datacolumn="cd_nm" onitemchanged="div_Search_cbo_areaType_onitemchanged" oncloseup="Tab00_tabpage1_cbo_prdtDiv_oncloseup" position="absolute 551 18 646 38"/>
        <Button id="btn_search" taborder="4" onclick="btn_onclick" class="btn_WF_Search" tooltiptext="조회" style="padding:0 0 0 0;" position2="absolute r:94 w:72 t:18px h:20" positiontype="position2"/>
        <Button id="btn_init" taborder="5" onclick="btn_onclick" class="btn_WF_Return" tooltiptext="초기화" style="padding:0 0 0 0;" position2="absolute r:20 w:72 t:18px h:20" positiontype="position2"/>
        <Static id="stc_02" class="sta_workData" position2="absolute l:55.71% r:0 t:318px h:51" positiontype="position2"/>
        <Static id="stc_33" text="캠페인유형" class="sta_workLabel1_P" validate="" position2="absolute l:46.11% w:9.71% t:268px h:26" positiontype="position2"/>
        <Combo id="cbo_cmpg_typ_cd" taborder="6" innerdataset="@ds_cmpgTypCdList" codecolumn="hrch_cd" datacolumn="hrch_cd_nm" position2="absolute l:56.02% w:17.9% t:270px h:22" positiontype="position2" onitemchanged="cbo_onitemchanged"/>
        <Static id="stc_01" class="sta_workData" position2="absolute l:9.61% r:0 t:293px h:26" positiontype="position2"/>
        <Static id="stc_11" text="진행상태" onclick="div_Work00_stc_11_onclick" class="sta_workLabel1_P" validate="" position2="absolute l:74.12% w:9.71% t:293 h:26" positiontype="position2"/>
        <Calendar id="cal_cmpg_stt_dt" taborder="12" displaynulltext="____-__-__" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" enable="false" position2="absolute l:9.91% w:89 t:296px h:20" positiontype="position2"/>
        <Calendar id="cal_cmpg_end_dt" taborder="13" displaynulltext="____-__-__" dateformat="yyyy-MM-dd" onchanged="cal_00_onchanged" oneditclick="cal_00_oneditclick" enable="false" position2="absolute l:20.32% w:89 t:296px h:20" positiontype="position2"/>
        <Static id="Static00" text="~" position2="absolute l:19.21% w:8 t:300 h:15" positiontype="position2"/>
        <Edit id="edt_trgt_list_nm" taborder="14" enable="false" position2="absolute l:9.91% w:33.87% t:321 h:20" positiontype="position2" readonly="true"/>
        <Button id="btn_open_trgt_list_Pop" taborder="15" class="btn_workSrcPop" position2="absolute l:43.88% w:20px t:321px h:20" positiontype="position2" visible="false" onclick="btn_onclick"/>
        <Static id="stc_08" class="sta_workData" position2="absolute l:9.61% r:53.69% t:343 h:26" positiontype="position2"/>
        <Button id="btn_cmpg_invt_mthd_pop" taborder="17" onclick="btn_onclick" class="btn_workSrcPop" position2="absolute l:43.88% w:20 t:346px h:20" positiontype="position2" visible="false"/>
        <Static id="stc_14" class="sta_workData" position2="absolute l:9.61% r:0 t:368px h:26" positiontype="position2"/>
        <Static id="stc_18" text="수정자" class="sta_workLabel1" validate="" position2="absolute l:46.11% w:9.71% t:368px h:26" positiontype="position2"/>
        <Static id="stc_19" text="수정일시" class="sta_workLabel1" validate="" position2="absolute l:73.91% w:9.71% t:368px h:26" positiontype="position2"/>
        <Static id="stc_22" text="등록일시" class="sta_workLabel1" validate="" position2="absolute l:23.56% w:9.71% t:368px h:26" positiontype="position2"/>
        <Grid id="grd_list_cmpg" taborder="18" binddataset="ds_list_cmpg" useinputpanel="false" position2="absolute l:0 r:0 t:78px h:155" positiontype="position2" class="grd_list" autofittype="col" oncellclick="grd_oncellclick" onheadclick="grd_onheadclick" onvscrolllastover="grd_onvscrolllastover" autoenter="none" areaselecttype="limitband" findtype="none">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="139"/>
                <Column size="139"/>
                <Column size="116"/>
                <Column size="79"/>
                <Column size="70"/>
                <Column size="76"/>
                <Column size="69"/>
                <Column size="94"/>
                <Column size="104"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="NO"/>
                <Cell col="1" text="캠페인명" id="cmpg_nm"/>
                <Cell col="2" text="캠페인유형" id="cmpg_typ_cd2"/>
                <Cell col="3" text="실행채널" id="cmpg_pran_chnl_cd"/>
                <Cell col="4" text="진행상태" id="cmpg_pran_chnl_cd"/>
                <Cell col="5" text="조사방법" id="cmpg_prgr_stat_cd"/>
                <Cell col="6" text="시작일" id="cmpg_stt_dt"/>
                <Cell col="7" text="종료일" id="cmpg_end_dt"/>
                <Cell col="8" text="수정자" id="amnd_nm"/>
                <Cell col="9" text="수정일시" id="amnt_dttm"/>
              </Band>
              <Band id="body">
                <Cell expr="currow+1"/>
                <Cell col="1" displaytype="normal" edittype="none" style="align:left;" text="bind:cmpg_nm" editdisplay="edit" tooltiptype="mouse" tooltiptext="bind:cmpg_nm"/>
                <Cell col="2" text="bind:cmpg_typ_nm2"/>
                <Cell col="3" text="bind:cmpg_pran_chnl_nm"/>
                <Cell col="4" style="color:EXPR(cmpg_prgr_stat_cd =='20'? &quot;#FF6075&quot; :&quot;&quot;);color2:EXPR(cmpg_prgr_stat_cd =='20'? &quot;#FF6075&quot; :&quot;&quot;);selectcolor:EXPR(cmpg_prgr_stat_cd =='20'? &quot;red&quot; :&quot;&quot;);" text="bind:cmpg_prgr_stat_nm"/>
                <Cell col="5" displaytype="normal" text="bind:cmpg_invt_mthd_nm"/>
                <Cell col="6" displaytype="date" text="bind:cmpg_stt_dt" mask="yyyy-MM-dd"/>
                <Cell col="7" displaytype="date" text="bind:cmpg_end_dt" mask="yyyy-MM-dd"/>
                <Cell col="8" text="bind:amnd_nm"/>
                <Cell col="9" displaytype="date" text="bind:amnt_dttm" mask="yyyy-MM-dd HH:mm"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Edit id="edt_cmpg_nm" taborder="19" position2="absolute l:9.91% w:36% t:271px h:20" positiontype="position2" readonly="true" maxlength="100" lengthunit="utf8"/>
        <Static id="sta_totalCnt" text="검색결과   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt; / 전체   &lt;fs v='9'&gt;&lt;fc v='#f0850c'&gt;&lt;b v='true'&gt;0&lt;/b&gt;&lt;/fc&gt;&lt;/fs&gt; &lt;fc v='#a1a1a1'&gt;건&lt;/fc&gt;" usedecorate="true" class="sta_workTitle5" position="absolute 2 60 218 80"/>
        <Combo id="cbo_srch_cmpg_typ_cd2" taborder="2" innerdataset="@ds_cmpgTypCdList_srch2" codecolumn="hrch_cd" datacolumn="hrch_cd_nm" onitemchanged="div_Search_cbo_areaType_onitemchanged" oncloseup="Tab00_tabpage1_cbo_prdtDiv_oncloseup" position="absolute 370 18 465 38" enable="false" displaynulltext="전체"/>
        <Edit id="edt_invt_cnts_nm" taborder="20" enable="false" position2="absolute l:20.73% w:23.05% t:346 h:20" positiontype="position2" readonly="false"/>
        <TextArea id="tea_cmpg_expi" taborder="21" position2="absolute l:56.02% r:2 t:320px h:47" positiontype="position2" wordwrap="both" readonly="true" lengthunit="utf8" maxlength="500"/>
        <Static id="stc_03" text="실행채널" class="sta_workLabel1_P" position2="absolute l:46.11% w:9.71% t:293 h:26" positiontype="position2" validate=""/>
        <Combo id="cbo_cmpg_pran_chnl_cd" taborder="22" innerdataset="@ds_cmpgPranChnlCdList" codecolumn="cd" datacolumn="cd_nm" position2="absolute l:56.02% w:17.9% t:295 h:22" positiontype="position2" readonly="true" onitemchanged="cbo_onitemchanged" canitemchange="cbo_canitemchange"/>
        <Combo id="cbo_cmpg_typ_cd2" taborder="23" innerdataset="@ds_cmpgTypCdList2" codecolumn="hrch_cd" datacolumn="hrch_cd_nm" position2="absolute l:74.12% r:2 t:270px h:22" positiontype="position2" displaynulltext="선택"/>
        <Combo id="cbo_cmpg_prgr_stat_cd" taborder="24" innerdataset="@ds_cmpgPrgrStatCdList" codecolumn="cd" datacolumn="cd_nm" position2="absolute l:83.92% r:2 t:295px h:22" positiontype="position2" readonly="true" canitemchange="cbo_canitemchange" onitemchanged="cbo_onitemchanged"/>
        <Edit id="edt_rgsn_dttm" taborder="26" readonly="true" class="edt_edit" position2="absolute l:33.37% w:12.64% t:371px h:20" positiontype="position2"/>
        <Edit id="edt_amnd_nm" taborder="27" readonly="true" class="edt_edit" position2="absolute l:55.92% w:17.9% t:371px h:20" positiontype="position2"/>
        <Edit id="edt_amnt_dttm" taborder="28" readonly="true" class="edt_edit" position2="absolute l:83.72% r:2 t:371px h:20" positiontype="position2"/>
        <Combo id="cbo_cmpg_invt_mthd_cd" taborder="16" innerdataset="@ds_methodcdList_bak" codecolumn="cd" datacolumn="cd_nm" position2="absolute l:9.91% w:10.72% t:346 h:20" positiontype="position2" visible="true" readonly="false" canitemchange="cbo_canitemchange"/>
        <Edit id="edt_rgsr_nm" taborder="25" readonly="true" class="edt_edit" position2="absolute l:9.91% w:13.45% t:371px h:20" positiontype="position2"/>
        <Button id="btn_cancel" taborder="11" text="취소" onclick="btn_onclick" class="btn_Cancel" position2="absolute r:-168 w:72 t:245 h:20" positiontype="position2" tooltiptext="취소" style="padding:0 0 0 0;"/>
        <Button id="btn_save" taborder="10" onclick="btn_onclick" class="btn_WF_Save" position2="absolute r:-94 w:72 t:245 h:20" positiontype="position2" tooltiptext="신규" style="padding:0 0 0 0;"/>
        <Button id="btn_delete" taborder="9" onclick="btn_onclick" class="btn_WF_Del" position2="absolute r:0 w:72 t:245 h:20" positiontype="position2" tooltiptext="삭제" style="padding:0 0 0 0;"/>
        <Button id="btn_update" taborder="8" onclick="btn_onclick" class="btn_WF_Modif" position2="absolute r:74 w:72 t:245 h:20" positiontype="position2" tooltiptext="수정" style="padding:0 0 0 0;"/>
        <Button id="btn_create" taborder="7" onclick="btn_onclick" class="btn_WF_New" position2="absolute r:148 w:72 t:245 h:20" positiontype="position2" tooltiptext="신규" style="padding:0 0 0 0;"/>
        <Edit id="edt_cmpg_typ_cd" taborder="29" readonly="true" lengthunit="utf8" maxlength="100" position2="absolute l:56.02% w:36% t:271 h:20" positiontype="position2"/>
        <Edit id="edt_cmpg_invt_mthd_cd" taborder="30" readonly="true" lengthunit="utf8" maxlength="100" position2="absolute l:9.91% w:36% t:346 h:20" positiontype="position2"/>
        <Button id="btn_fileUpload" taborder="31" text="파일선택" onclick="btn_onclick" class="btn_WF_Common" style="padding:0 0 0 0;" position2="absolute l:33.16% w:92 t:346 h:20" positiontype="position2"/>
        <FileUpload id="file_cmpg" taborder="32" uploadurl="  " timeout="0" retry="0" async="true" index="0" onfindclick="file_cmpg_onfindclick" position2="absolute l:1002 w:90 t:338 h:22" positiontype="position2" tooltiptype="hover,mouseleave" style="buttonsize:90;editbackground:URL('theme://images/bg_compD.png') stretch 5,5;buttonbackground:URL('theme://images/btn_WF_CommN.png') stretch 5,5;buttonpadding:0 0 0 0;buttonmargin:0 0 0 0;buttonfont:맑은 고딕,9,bold antialias;buttoncolor:#444444ff;buttontext:파일선택;" onitemchanged="file_cmpg_onitemchanged" onappenditem="file_cmpg_onappenditem" visible="false"/>
        <Static id="stc_00" text="캠페인설명" class="sta_workLabel1" style="align:left top;" validate="" position2="absolute l:46.11% w:9.71% t:318px h:51" positiontype="position2"/>
        <Static id="stc_20" text="캠페인명" class="sta_workLabel1_P" validate="" position2="absolute l:0% w:9.71% t:268px h:26" positiontype="position2"/>
        <Static id="stc_09" text="수행일자" class="sta_workLabel1_P" validate="" position2="absolute l:0% w:9.71% t:293px h:26" positiontype="position2"/>
        <Static id="stc_16" text="조사방법" class="sta_workLabel1_P" validate="" position2="absolute l:0% w:9.71% t:343 h:26" positiontype="position2"/>
        <Static id="stc_07" text="대상목록" class="sta_workLabel1_P" validate="" position2="absolute l:0% w:9.71% t:318 h:26" positiontype="position2"/>
        <Static id="stc_13" text="등록자" class="sta_workLabel1" validate="" position2="absolute l:0% w:9.71% t:368px h:26" positiontype="position2"/>
        <Static id="sta_filenm" position2="absolute l:10.01% w:35.39% t:344 h:25" positiontype="position2" usedecorate="true" style="cursor:hand;" onclick="sta_filenm_onclick"/>
        <FileDownload id="fdl_btn_fixedFormDown" taborder="33" downloadurl="/file/download-template?file_nm=CustomerList_sample.xlsx" retry="0" onload="FileDownload00_onload" text="조사방법다운로드" wordwrap="none" visible="false" position="absolute 997 308 1107 329" style="background:URL('theme://images/btn_WF_CommN.png') stretch 5,5;border:0 none #808080ff ;color:#444444ff;font:맑은 고딕,9,bold antialias;cursor:hand;shadow:drop 1,1 1 #0000004a;gradation:none 0,0 white 100,100 black;"/>
        <Edit id="edt_fileNm" taborder="34" enable="false" position2="absolute l:9.91% w:23.05% t:346 h:20" positiontype="position2"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="edt_cmpg_nm" propid="value" datasetid="ds_cmpg" columnid="cmpg_nm"/>
      <BindItem id="item2" compid="edt_rgsr_nm" propid="value" datasetid="ds_cmpg" columnid="rgsr_nm"/>
      <BindItem id="item4" compid="edt_rgsn_dttm" propid="value" datasetid="ds_cmpg" columnid="rgsn_dttm"/>
      <BindItem id="item3" compid="edt_amnd_nm" propid="value" datasetid="ds_cmpg" columnid="amnd_nm"/>
      <BindItem id="item5" compid="edt_amnt_dttm" propid="value" datasetid="ds_cmpg" columnid="amnt_dttm"/>
      <BindItem id="item1" compid="cal_cmpg_stt_dt" propid="value" datasetid="ds_cmpg" columnid="cmpg_stt_dt"/>
      <BindItem id="item6" compid="cal_cmpg_end_dt" propid="value" datasetid="ds_cmpg" columnid="cmpg_end_dt"/>
      <BindItem id="item7" compid="cbo_cmpg_pran_chnl_cd" propid="value" datasetid="ds_cmpg" columnid="cmpg_pran_chnl_cd"/>
      <BindItem id="item8" compid="cbo_cmpg_prgr_stat_cd" propid="value" datasetid="ds_cmpg" columnid="cmpg_prgr_stat_cd"/>
      <BindItem id="item9" compid="tea_cmpg_expi" propid="value" datasetid="ds_cmpg" columnid="cmpg_expi"/>
      <BindItem id="item10" compid="edt_trgt_list_nm" propid="value" datasetid="ds_cmpg" columnid="trgt_list_nm"/>
      <BindItem id="item12" compid="edt_invt_cnts_nm" propid="value" datasetid="ds_cmpg" columnid="invt_cnts_nm"/>
      <BindItem id="item13" compid="cbo_cmpg_invt_mthd_cd" propid="value" datasetid="ds_cmpg" columnid="cmpg_invt_mthd_cd"/>
      <BindItem id="item15" compid="cbo_cmpg_typ_cd" propid="value" datasetid="ds_cmpg" columnid="cmpg_typ_cd"/>
      <BindItem id="item11" compid="cbo_cmpg_typ_cd2" propid="value" datasetid="ds_cmpg" columnid="cmpg_typ_cd2"/>
      <BindItem id="item14" compid="edt_fileNm" propid="value" datasetid="ds_cmpg" columnid="invt_cnts_id"/>
    </Bind>
    <Objects>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgPrgrStatCdList_srch" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgTypCdList_srch" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="hrch_typ_cd" type="STRING" size="256"/>
          <Column id="hgrn_hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd_nm" type="STRING" size="256"/>
          <Column id="hrch_cd_lvl_cnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgTypCdList_srch2" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="hrch_typ_cd" type="STRING" size="256"/>
          <Column id="hgrn_hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd_nm" type="STRING" size="256"/>
          <Column id="hrch_cd_lvl_cnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmpg_nm" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd2" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_cd" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_cmpg" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="targetlistid_old" type="STRING" size="256"/>
          <Column id="methodcd_old" type="STRING" size="256"/>
          <Column id="mthdcntid_old" type="STRING" size="256"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="cmpg_nm" type="STRING" size="256"/>
          <Column id="cmpg_expi" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd" type="STRING" size="256"/>
          <Column id="cmpg_typ_nm" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_cd" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_nm" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_cd" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_nm" type="STRING" size="256"/>
          <Column id="old_campaignstatecd" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_cd" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_nm" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="invt_cnts_id" type="STRING" size="256"/>
          <Column id="cmpg_stt_dt" type="STRING" size="256"/>
          <Column id="cmpg_end_dt" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="assignnum" type="STRING" size="256"/>
          <Column id="invt_cnts_nm" type="STRING" size="256"/>
          <Column id="trgt_list_nm" type="STRING" size="256"/>
          <Column id="modifyfg" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="fileIds" type="STRING" size="256"/>
          <Column id="initialFiles" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd2" type="STRING" size="256"/>
          <Column id="cmpg_typ_nm2" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_tmp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="targetlistid_old" type="STRING" size="256"/>
          <Column id="methodcd_old" type="STRING" size="256"/>
          <Column id="mthdcntid_old" type="STRING" size="256"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="cmpg_nm" type="STRING" size="256"/>
          <Column id="cmpg_expi" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd" type="STRING" size="256"/>
          <Column id="cmpg_typ_nm" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_cd" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_nm" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_cd" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_nm" type="STRING" size="256"/>
          <Column id="old_campaignstatecd" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_cd" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_nm" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="invt_cnts_id" type="STRING" size="256"/>
          <Column id="cmpg_stt_dt" type="STRING" size="256"/>
          <Column id="cmpg_end_dt" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="assignnum" type="STRING" size="256"/>
          <Column id="invt_cnts_nm" type="STRING" size="256"/>
          <Column id="trgt_list_nm" type="STRING" size="256"/>
          <Column id="modifyfg" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="fileIds" type="STRING" size="256"/>
          <Column id="initialFiles" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd2" type="STRING" size="256"/>
          <Column id="cmpg_typ_nm2" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpg" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="targetlistid_old" type="STRING" size="256"/>
          <Column id="methodcd_old" type="STRING" size="256"/>
          <Column id="mthdcntid_old" type="STRING" size="256"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="cmpg_nm" type="STRING" size="256"/>
          <Column id="cmpg_expi" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd" type="STRING" size="256"/>
          <Column id="cmpg_typ_nm" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_cd" type="STRING" size="256"/>
          <Column id="cmpg_pran_chnl_nm" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_cd" type="STRING" size="256"/>
          <Column id="cmpg_invt_mthd_nm" type="STRING" size="256"/>
          <Column id="old_campaignstatecd" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_cd" type="STRING" size="256"/>
          <Column id="cmpg_prgr_stat_nm" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="invt_cnts_id" type="STRING" size="256"/>
          <Column id="cmpg_stt_dt" type="STRING" size="256"/>
          <Column id="cmpg_end_dt" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="assignnum" type="STRING" size="256"/>
          <Column id="invt_cnts_nm" type="STRING" size="256"/>
          <Column id="trgt_list_nm" type="STRING" size="256"/>
          <Column id="modifyfg" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="fileIds" type="STRING" size="256"/>
          <Column id="initialFiles" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd2" type="STRING" size="256"/>
          <Column id="cmpg_typ_nm2" type="STRING" size="256"/>
          <Column id="invt_cnts_cd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgPranChnlCdList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgPrgrStatCdList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_methodcdList_bak" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="reset" loadfiltermode="reset" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgTypCdList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="hrch_typ_cd" type="STRING" size="256"/>
          <Column id="hgrn_hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd_nm" type="STRING" size="256"/>
          <Column id="hrch_cd_lvl_cnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmpgTypCdList2" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="hrch_typ_cd" type="STRING" size="256"/>
          <Column id="hgrn_hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd" type="STRING" size="256"/>
          <Column id="hrch_cd_nm" type="STRING" size="256"/>
          <Column id="hrch_cd_lvl_cnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt_assign" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_assign" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="team_nm" type="STRING" size="256"/>
          <Column id="team_cd" type="STRING" size="256"/>
          <Column id="cnsr_id" type="STRING" size="256"/>
          <Column id="user_nm" type="STRING" size="256"/>
          <Column id="assignnum" type="STRING" size="256"/>
          <Column id="st10" type="STRING" size="256"/>
          <Column id="st20" type="STRING" size="256"/>
          <Column id="st30" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="totalassignnum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_assignData" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="team_nm" type="STRING" size="256"/>
          <Column id="team_cd" type="STRING" size="256"/>
          <Column id="cnsr_id" type="STRING" size="256"/>
          <Column id="user_nm" type="STRING" size="256"/>
          <Column id="assignnum" type="STRING" size="256"/>
          <Column id="st10" type="STRING" size="256"/>
          <Column id="st20" type="STRING" size="256"/>
          <Column id="st30" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="totalassignnum" type="STRING" size="256"/>
          <Column id="Column0" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt_assignData" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_tmp_assign" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="team_nm" type="STRING" size="256"/>
          <Column id="team_cd" type="STRING" size="256"/>
          <Column id="cnsr_id" type="STRING" size="256"/>
          <Column id="user_nm" type="STRING" size="256"/>
          <Column id="assignnum" type="STRING" size="256"/>
          <Column id="st10" type="STRING" size="256"/>
          <Column id="st20" type="STRING" size="256"/>
          <Column id="st30" type="STRING" size="256"/>
          <Column id="cust_data_extc_cnt" type="STRING" size="256"/>
          <Column id="totalassignnum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_selectUser" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="user_id" type="STRING" size="256"/>
          <Column id="user_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <FileDialog id="FileDialog" filter="All(*.*)|*.*|" filterindex="0" defaultextention="false"/>
      <Dataset id="ds_file" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="DS_FilePath_oncolumnchanged">
        <ColumnInfo>
          <Column id="filePath" type="STRING" size="256"/>
          <Column id="fileName" type="STRING" size="256"/>
          <Column id="fileSize" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileParam" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="rltn_item_id" type="STRING" size="256"/>
          <Column id="rltn_tbl_nm" type="STRING" size="256"/>
          <Column id="atch_typ_cd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cdSet" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="6"/>
          <Column id="cd_nm" type="STRING" size="100"/>
          <Column id="adtl_cd" type="STRING" size="100"/>
          <Column id="adtl_cd_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/***************************************************************************
 * Program ID    : PS220100.xfdl
 * Program Name  : 우수상담사례 수정
 * Author        : 정 훈
 * Created On    : 2016.03.14
 * 개    요 	 :
 *
 * =========================================================================
 * 변경일자     수정자       내    용
 * =========================================================================
 * 2016.03.14    정   훈      최초작성
 
 **************************************************************************/


/********************************************************************************************/
/* 1. Include Library include                                                               */
/********************************************************************************************/
include "LIB::lib_All.xjs";


/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트,전역변수,초기화) 처리                         	*/
/********************************************************************************************/
//전역변수
var total_count = 0;

//권한
var rgsnYn; //등록권한
var inqYn; //조회권한
var amntYn; //수정권한
var dltnYn; //삭제권한
var pritYn; //출력권한
var xlsYn; //엑셀권한
var athrPpupYn; //팝업오픈권한
var xlsRrnoYn; //엑셀 개인정보 권한 여부 

//온로드
function PS220100_onload(obj:Form, e:LoadEventInfo)
{
	gfn_athrPgm(gfn_gdsCd_admin()); //권한조회
	gfn_getList("cd","CAM120,CAM060,CAM050","fn_callBack",null,"srchCdSet","ds_cdSet");   // 코드셋
	gfn_getList("hrchCd","CAM990","fn_callBack",null,"srchHrchCdSet");   //캠페인유형(계층유형코드)
	gfn_createPagingDataset(obj); // 페이징처리 위한 데이터셋 설정
	fn_commSearch(gfn_getCommTypeInit());//조회
}

//초기화
function fn_init()
{
	edt_srch_cmpg_nm.value = null;
	cbo_srch_cmpg_typ_cd.index = 0;
	cbo_srch_cmpg_typ_cd2.index = 0;
	cbo_srch_cmpg_typ_cd2.enable = false;
	cbo_srch_cmpg_prgr_stat_cd.index = 0;
}
/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
//콜백
function fn_callBack(svcid, errcd, errmsg) {
    if (errcd != 0) {
		trace("errcd  :   " +errcd +"   \n errmsg   :   "+ errmsg +"    \n svcid   :   "+ svcid)
		return false;
	} else {
		switch (svcid) {
		    case "srchCdSet": //코드셋
				gfn_getCode("CAM050", "ALL", ds_cmpgPrgrStatCdList_srch,ds_cdSet); //캠페인상태코드 [대기(10),진행(20),중지(30),완료(40)]
				gfn_getCode("CAM120", "", ds_cmpgPranChnlCdList,ds_cdSet); //캠페인실행채널코드 [전화(10),문자(20),이메일(30),외부(40)]
				gfn_getCode("CAM050", "", ds_cmpgPrgrStatCdList,ds_cdSet); //캠페인상태코드 [대기(10),진행(20),중지(30),완료(40)]
				gfn_getCode("CAM060", "SELECT", ds_methodcdList_bak,ds_cdSet); //조사방법코드 [설문지(10),스크립트(20),문자컨텐츠(30),이메일컨텐츠(40)]
			
				cbo_srch_cmpg_prgr_stat_cd.index=0;
		    break;
		    
		    case "srchHrchCdSet": //캠페인유형 계층코드
				gfn_getHrchCodeLoad("","ALL",ds_cmpgTypCdList_srch,null,1);
				gfn_getHrchCodeLoad("","SELECT",ds_cmpgTypCdList,null,1);
				cbo_srch_cmpg_typ_cd.index = 0;
		    break;
		    
		    case "srchCmpg" : //캠페인 조회
				gfn_appendSearchDs(ds_list_cmpg, ds_list_tmp); // 조회된 결과를 실제보여줄 데이타셋으로 Append처리
				gfn_setTotalRowCount(ds_list_cmpg, sta_totalCnt, total_count); // 페이지건수 표출
				fn_postSearch();
		    break;
		    
		    case "saveCmpg" : //저장콜백
		    if(cbo_cmpg_pran_chnl_cd.value == 40&& file_cmpg.hasValue(0)){
				ds_fileParam.clearData();
				ds_fileParam.addRow();
				
				ds_fileParam.setColumn(ds_fileParam.rowposition, 'rltn_item_id' ,sCmpgId );
				ds_fileParam.setColumn(ds_fileParam.rowposition, 'rltn_tbl_nm' ,  'TB_CMPG_BASI');
				ds_fileParam.setColumn(ds_fileParam.rowposition, 'atch_typ_cd' , '10');
				
				var bResult=fn_saveFileUpload(); //파일업로드
		    }
		    fn_commSearch(gfn_getCommTypeInit());//재조회
		    break;
		    
		    
		    
		    default :
		    alert("svcid 를 확인하세요 \n svcid : "+svcid);
		    break;
		}
	}
}

/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/
//조회전 처리 조회조건셋팅
function fn_preSearch(sType)
{
	if (sType == gfn_getCommTypeInit())
	{
		// 조회조건 및 default 정렬
		ds_list_cmpg.keystring = ""; // 정렬컬럼 초기화
		
		ds_inqCndt.clearData();
		ds_inqCndt.addRow();
		ds_inqCndt.setColumn(0, "cmpg_nm", edt_srch_cmpg_nm.value);
		ds_inqCndt.setColumn(0, "cmpg_prgr_stat_cd", cbo_srch_cmpg_prgr_stat_cd.value);
		
		//나중에 변경
		ds_inqCndt.setColumn(0, "cmpg_typ_cd", cbo_srch_cmpg_typ_cd.value);
		ds_inqCndt.setColumn(0, "cmpg_typ_cd2", cbo_srch_cmpg_typ_cd2.value);
		ds_inqCndt.setColumn(0, "orderBy", "amnt_dttm");
		ds_inqCndt.setColumn(0, "orderDirection", "desc");
	}
	return true;
}

function fn_preSaveData(){

	if(gfn_isNull(edt_cmpg_nm.value)){
		alert("캠페인명을 입력하세요.");
		return false;
	}
		
	if(cbo_cmpg_typ_cd.index == 0){
		alert("캠페인유형을 선택하세요.");
		return false;
	}
	
	if(cbo_cmpg_typ_cd2.index == 0){
		alert("캠페인유형을 선택하세요.");
		return false;
	}
	
	
	
	if(gfn_isNull(cal_cmpg_stt_dt.value)){
		alert("수행 시작일을 입력해 주세요");
		return false;
	}
	

	if(ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_id') == null){
		if(cal_cmpg_stt_dt.value < gfn_getToday()){
			alert("수행 시작일은 오늘 이전으로 선택하실 수 없습니다.");
			cal_cmpg_stt_dt.value = gfn_getToday();
			return false;
		}
	}
	
	if(gfn_isNull(cal_cmpg_end_dt.value)){
		alert("수행 종료일을 입력해 주세요");
		return false;
	}
	
	
	if(cal_cmpg_end_dt.value < gfn_getToday()){
		alert("수행 종료일은 오늘 이전으로 선택하실 수 없습니다.");
		cal_cmpg_end_dt.value = gfn_getToday();
		return false;
	}
	
	
	if(cal_cmpg_stt_dt.value > cal_cmpg_end_dt.value){
		alert("시작일자 종료일자를 확인하세요");
		return false;
	}
	
	if(gfn_isNull(cbo_cmpg_pran_chnl_cd.value)){
		alert("실행채널을 선택하세요.");
		return false;
	}
		
	if(gfn_isNull(cbo_cmpg_prgr_stat_cd.value)){
		alert("진행상태를 선택하세요.");
		return false;
	}
		
	if(gfn_isNull(edt_trgt_list_nm.value)){
		alert("대상목록을 선택하세요.");
		return false;
	}	
	
	if(ds_cmpg.getColumn(ds_cmpg.rowposition, 'cmpg_pran_chnl_cd') != "40"){
		if(gfn_isNull(cbo_cmpg_invt_mthd_cd.value)){
			alert("조사방법을 선택하세요.");
			return false;
		}
		
		if(gfn_isNull(edt_invt_cnts_nm.value)){
			alert("조사방법을 선택하세요.");
			return false;
		}
	}
	
	if( ds_cmpg.getColumn(ds_cmpg.rowposition , 'cust_data_extc_cnt')-ds_cmpg.getColumn(ds_cmpg.rowposition , 'totalassignnum')> 0 && ds_cmpg.getColumn(ds_cmpg.rowposition,'cmpg_prgr_stat_cd') == '20'){
		alert("미배정 건수가 존재합니다.");
        return false;
	}
	return true;
}


/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
//조회
function fn_commSearch(sType)
{	
    if (!fn_preSearch(sType)) return false;
	
	// 호출 건수 설정 및 조회여부 설정
	if(!gfn_pageSearch(sType, ds_list_cmpg, sta_totalCnt, 10, total_count)) return; 
	
	var szSvcid       = "srchCmpg";
    var szController  = "/cmpg/cmpg/list";
    var szInDs        = "ds_input=ds_inqCndt";
    var szOutDs       = "ds_list_tmp=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//저장
function fn_saveData(){
	if(!fn_preSaveData()) return false;
	
	var szSvcid       = "saveCmpg";
    var szController  = "/cmpg/cmpg/save";
    var szInDs        = "ds_input=ds_cmpg";
    var szOutDs       = "ds_cmpg=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//삭제
function fn_deleteData()
{
	 if (!fn_preDelete()) return false;
	 
	var szSvcid       = "deleteCmpg";
    var szController  = "/cmpg/cmpg/delete";
    var szInDs        = "ds_input=ds_cmpg";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback, false);
}


/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/
//조회 결과 
function fn_postSearch()
{
	if(ds_list_cmpg.rowcount < 1) {
		sta_totalCnt.text ="조회 결과가 없습니다.";
		fn_copyRow();
		fn_changeComponent("R"); //컴포넌트 셋팅
 	} else {
		fn_copyRow();
		fn_changeComponent("R"); //컴포넌트 셋팅
	}
	return;
}

//리스트 데이터셋 뷰 데이터셋에 카피
function fn_copyRow(){
	if(ds_list_cmpg.rowcount<1){
		ds_cmpg.clearData();
		ds_cmpg.addRow();
	}else{
		ds_cmpg.clearData();
		ds_cmpg.addRow();
		ds_cmpg.copyRow(ds_cmpg.rowposition,ds_list_cmpg,ds_list_cmpg.rowposition);
		
		//등록 수정일시 데이터타입에 맞게
		var rgsnDttmStr = edt_rgsn_dttm.value;
		edt_rgsn_dttm.value = gfn_strDttm(rgsnDttmStr);
			
		var amntDttmStr = edt_amnt_dttm.value;
		edt_amnt_dttm.value = gfn_strDttm(amntDttmStr);
		old_campaignstatecd =ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_prgr_stat_cd');
	}
}


//버튼 AND 컴포넌트 변경함수
function fn_changeComponent(rMode){
	switch(rMode){
		case "R" : //읽기모드
		if(ds_list_cmpg.rowcount<1){
			btn_create.enable = true;
			btn_update.enable = false;
			btn_delete.enable = false;
			
			//캠페인유형
			edt_cmpg_typ_cd.visible = false;
			
			//조사방법
			edt_cmpg_invt_mthd_cd.visible = false;	

		}else{
			btn_create.enable = true;
			if(ds_list_cmpg.getColumn(ds_list_cmpg.rowposition,'cmpg_prgr_stat_cd')==40){ //진행상태 완료건인경우
				btn_update.enable = false;
				btn_delete.enable = false;
			}else{
				btn_update.enable = true;
				btn_delete.enable = true;
			}
			//캠페인유형
			edt_cmpg_typ_cd.visible = true;
			edt_cmpg_typ_cd.value = ds_list_cmpg.getColumn(ds_list_cmpg.rowposition, 'cmpg_typ_nm') + " > "+ ds_list_cmpg.getColumn(ds_list_cmpg.rowposition, 'cmpg_typ_nm2');
			
			//조사방법
			if(ds_list_cmpg.getColumn(ds_list_cmpg.rowposition,'cmpg_pran_chnl_cd') == "40"){
				sta_filenm.visible = true;
				edt_cmpg_invt_mthd_cd.visible = false;
				sta_filenm.text = "<fs v='9'><fc v='#6087FF'><u v='true'>";
				sta_filenm.text	+= ds_list_cmpg.getColumn(ds_list_cmpg.rowposition, 'cmpg_invt_mthd_nm') + " - " +ds_list_cmpg.getColumn(ds_list_cmpg.rowposition, 'invt_cnts_id');
				sta_filenm.text	+= "</fs></fc></u>";
			}else{
				edt_cmpg_invt_mthd_cd.visible = true;
				sta_filenm.visible = false;
				edt_cmpg_invt_mthd_cd.value = ds_list_cmpg.getColumn(ds_list_cmpg.rowposition, 'cmpg_invt_mthd_nm') + " - "+ ds_list_cmpg.getColumn(ds_list_cmpg.rowposition, 'invt_cnts_nm');
			}
		}
		
		btn_create.visible = true;
		btn_update.visible = true;
		btn_delete.visible = true;
		
		btn_save.visible = false;
		btn_cancel.visible = false;
		
		//캠페인명
		edt_cmpg_nm.readonly = true;
		
		//캠페인 유형
		cbo_cmpg_typ_cd.visible = false;
		cbo_cmpg_typ_cd2.visible= false;
		
		//수행일자
		cal_cmpg_stt_dt.enable = false;
		cal_cmpg_end_dt.enable = false;
		
		//실행채널
		cbo_cmpg_pran_chnl_cd.readonly = true;
		
		//진행상태
		cbo_cmpg_prgr_stat_cd.readonly = true;
		cbo_cmpg_prgr_stat_cd.enable = true;
		
		//대상목록
		edt_trgt_list_nm.readonly = true;
		edt_trgt_list_nm.enable = true;
		btn_open_trgt_list_Pop.visible = false;
		
		//조사방법
		cbo_cmpg_invt_mthd_cd.visible = false;
		edt_invt_cnts_nm.visible = false;
		btn_cmpg_invt_mthd_pop.visible = false;
		btn_fileUpload.visible = false;
		edt_fileNm.visible = false;
		
		//캠페인설명
		tea_cmpg_expi.readonly = true;
		break;
		
		case "C" : //신규모드
		//버튼
		btn_create.visible = false;
		btn_update.visible = false;
		btn_delete.visible = false;
		
		btn_save.move(btn_update.position.left , btn_update.position.top);
		btn_cancel.move(btn_delete.position.left , btn_delete.position.top);
		
		btn_save.visible = true;
		btn_cancel.visible = true;
		
		//캠페인 명
		edt_cmpg_nm.readonly = false;
		
		//캠페인유형
		edt_cmpg_typ_cd.visible = false;
		cbo_cmpg_typ_cd.visible = true;
		cbo_cmpg_typ_cd.index = 0;
		cbo_cmpg_typ_cd2.visible= true;
		cbo_cmpg_typ_cd2.index = 0;
		cbo_cmpg_typ_cd2.enable = false;
		
		//수행일자
		cal_cmpg_stt_dt.enable = true;
		cal_cmpg_end_dt.enable = true;
		
		//실행채널
		cbo_cmpg_pran_chnl_cd.readonly = false;
		cbo_cmpg_pran_chnl_cd.index = 0;
		
		//진행상태
		cbo_cmpg_prgr_stat_cd.readonly = false;
		cbo_cmpg_prgr_stat_cd.enable = false;
		cbo_cmpg_prgr_stat_cd.index = 0;
		
		//대상목록
		edt_trgt_list_nm.readonly = false;
		edt_trgt_list_nm.enable = false;
		btn_open_trgt_list_Pop.visible = true;
		
		//조사방법
		edt_cmpg_invt_mthd_cd.visible = false;
		fn_changeChnlCdComp();
		cbo_cmpg_invt_mthd_cd.index = 0;		
		sta_filenm.visible = false;
		
		
		//캠페인설명
		tea_cmpg_expi.readonly = false;
		break;
		
		case "U" :// 수정모드
		if(ds_list_cmpg.getColumn(ds_list_cmpg.rowposition,'cmpg_prgr_stat_cd') == '10'){
			
			//캠페인 명
			edt_cmpg_nm.readonly = false;
			
			//캠페인유형
			edt_cmpg_typ_cd.visible = false;
			cbo_cmpg_typ_cd.visible = true;
			cbo_cmpg_typ_cd2.visible= true;
			gfn_getHrchCodeLoad(cbo_cmpg_typ_cd.value,"SELECT",ds_cmpgTypCdList2,null);
			
			//수행일자
			cal_cmpg_stt_dt.enable = true;
			cal_cmpg_end_dt.enable = true;
			
			//실행채널
			cbo_cmpg_pran_chnl_cd.readonly = false;
			
			//진행상태
			cbo_cmpg_prgr_stat_cd.readonly = false;
			
			//대상목록
			edt_trgt_list_nm.readonly = false;
			edt_trgt_list_nm.enable = false;
			btn_open_trgt_list_Pop.visible = true;
			
			//조사방법
			edt_cmpg_invt_mthd_cd.visible = false;
			fn_changeChnlCdComp();
			sta_filenm.visible = false;
			
			//캠페인설명
			tea_cmpg_expi.readonly = false;
		}else if(ds_list_cmpg.getColumn(ds_list_cmpg.rowposition,'cmpg_prgr_stat_cd') != '10'){
			//수행일자
			cal_cmpg_end_dt.enable = true;
			
			//진행상태
			cbo_cmpg_prgr_stat_cd.readonly = false;
			
			//캠페인설명
			tea_cmpg_expi.readonly = false;
		}
			//버튼
			btn_create.visible = false;
			btn_update.visible = false;
			btn_delete.visible = false;
			
			btn_save.move(btn_update.position.left , btn_update.position.top);
			btn_cancel.move(btn_delete.position.left , btn_delete.position.top);
			
			btn_save.visible = true;
			btn_cancel.visible = true;
		break;
		
		default :
		alert("obj를 확인하세요");
		break;
	}	
}

//실행채널에 따른 관련 컴포넌트 변경여부
function fn_changeChnlCdComp(){
	if(ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_pran_chnl_cd') !=40){
		fn_changeCmpgPranChnlCdList();
		edt_fileNm.visible = false;
		btn_fileUpload.visible = false;
		
		cbo_cmpg_invt_mthd_cd.visible = true;
		edt_invt_cnts_nm.visible = true;
		btn_cmpg_invt_mthd_pop.visible = true;
		
		cbo_cmpg_invt_mthd_cd.index = 0;
	}else{
		cbo_cmpg_invt_mthd_cd.visible = false;
		edt_invt_cnts_nm.visible = false;
		btn_cmpg_invt_mthd_pop.visible = false;
		
		btn_fileUpload.visible = true;
		edt_fileNm.visible = true;
	}
}


// 실행채널 변경에 따라 조사방법 코드리스트 값 변경
function fn_changeCmpgPranChnlCdList(){
	if(cbo_cmpg_pran_chnl_cd.value == "10"){ //전화일경우
		ds_methodcdList_bak.filter("");
		ds_methodcdList_bak.filter("cd <30");
	}else if(cbo_cmpg_pran_chnl_cd.value == "20"){ //문자일경우
		ds_methodcdList_bak.filter("");
		ds_methodcdList_bak.filter("cd==''||cd==30");
	}else if(cbo_cmpg_pran_chnl_cd.value == "30"){ //이메일일경우
	
		ds_methodcdList_bak.filter("");
		ds_methodcdList_bak.filter("cd==''||cd =='40'");
	}else{
		ds_methodcdList_bak.filter("");
	}
}



/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
//버튼 클릭 이벤트
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj){
		case btn_search : //조회버튼
			fn_commSearch(gfn_getCommTypeInit());//조회
		break;
		
		case btn_init : //초기화 버튼
			fn_init();
		break;
		
 		case btn_create: //신규버튼클릭
			ds_cmpg.clearData();
			ds_cmpg.addRow();
			fn_changeComponent("C"); //컴포넌트 셋팅
 		break;
 		
 		case btn_update: // 수정버튼 
			fn_changeComponent("U"); //컴포넌트 셋팅
 		break;
 		
 		case btn_delete://삭제버튼 클릭
			fn_deleteData();//트랜잭션 호출
 		break;
 		
 		case btn_save: //저장버튼 클릭
			fn_saveData();
 		break;
 		
 		case btn_cancel: //취소버튼 클릭
			fn_copyRow(); // 상세부에 데이터셋 카피
			fn_changeComponent("R"); //컴포넌트 셋팅
 		break;
 		
 		case btn_open_trgt_list_Pop: //대상목록 팝업 오픈
			var sPrmr = {trgt_list_typ_cd:ds_cmpg.getColumn(ds_cmpg.rowposition, "cmpg_pran_chnl_cd")};	
			gfn_diaLog("대상목록 선택", -1, -1, 719, 388, "PS220000::PS220101.xfdl", false, sPrmr, false, true, true, null ,null ,true);
 		break;
 		
 		case btn_cmpg_invt_mthd_pop://조사방법 팝업 오픈 
			switch(cbo_cmpg_invt_mthd_cd.value){
				case "10": //설문지일경우
				gfn_diaLog("설문지 선택", -1, -1, 719, 375, "PS220000::PS220102.xfdl", false, "", false, true, true, null ,null ,true);
				break;
				
				case "20" : //스크립트일경우
				gfn_diaLog("스크립트 선택", -1, -1, 719, 388, "PS220000::PS220103.xfdl", false, "", false, true, true, null ,null ,true);
				break;
				
				case "30" : //문자컨텐츠일경우
				gfn_diaLog("문자컨텐츠 선택", -1, -1, 817, 363, "PS990000::PS991900.xfdl", false, "", false, true, true, null ,null ,true);
				break;
				
				case "40" : //이메일컨텐츠일경우
				gfn_diaLog("이메일컨텐츠 선택", -1, -1, 746, 508, "PS990000::PS991800.xfdl", false, "", false, true, true, null ,null ,true);
				break;
				
				default :
					alert("조사방법을 선택하세요.");
				break;
			}
 		break;
	}
}

//콤보변환 이벤트 
function cbo_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	switch(obj){
		case cbo_srch_cmpg_typ_cd: //serach 캠페인유형 1뎁스 변환시
			gfn_getHrchCodeLoad(cbo_srch_cmpg_typ_cd.value,"ALL",ds_cmpgTypCdList_srch2,null);
			cbo_srch_cmpg_typ_cd2.index = 0;
			if(obj.value != "" && obj.value != null){
				cbo_srch_cmpg_typ_cd2.enable = true;
			}else{
				cbo_srch_cmpg_typ_cd2.enable = false;
				cbo_srch_cmpg_typ_cd2.value = "";
			}
		break;
		
		case cbo_cmpg_typ_cd: //detail 캠페인유형 1뎁스 변환시
			gfn_getHrchCodeLoad(cbo_cmpg_typ_cd.value,"SELECT",ds_cmpgTypCdList2,null);
			cbo_cmpg_typ_cd2.index = 0;
			if(obj.value != "" && obj.value != null){
				cbo_cmpg_typ_cd2.enable = true;
			}else{
				cbo_cmpg_typ_cd2.enable = false;
				cbo_cmpg_typ_cd2.value = "";
			}
		break;
		
		//detail 실행채널 변경시
		case cbo_cmpg_pran_chnl_cd : 
			fn_changeChnlCdComp();
		break;
		
		//진행상태
		case cbo_cmpg_prgr_stat_cd:
			if(ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_id') != null && ds_cmpg.getColumn(ds_cmpg.rowposition , 'cmpg_id') != ""){
				if(ds_cmpg.getColumn(ds_cmpg.rowposition , 'modifyfg') != 'Y'&&!(old_campaignstatecd == "30")&& parseInt(cbo_cmpg_prgr_stat_cd.value) < parseInt(old_campaignstatecd)){
					 cbo_cmpg_prgr_stat_cd.value = old_campaignstatecd;
					 alert("이전상태로 수정이 불가능 합니다.\r\n진행된 캠페인이 1건이상 존재합니다.");
					 return;
				}else{
					if(old_campaignstatecd == "30" && cbo_cmpg_prgr_stat_cd.value == '10'){
						cbo_cmpg_prgr_stat_cd.value = old_campaignstatecd;
						alert("중지 상태에서 대기상태로 수정이 불가능 합니다.");
						return;
					}
				}
			}
	    break;
		
		default :
			alert("obj를 확인하세요.");
		break;
	}
}


]]></Script>
  </Form>
</FDL>

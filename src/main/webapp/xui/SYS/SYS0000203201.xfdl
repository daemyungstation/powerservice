<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="SYS0000501004" classname="SYS0000501000" inheritanceid="" position="absolute 0 0 889 561" titletext="공통업무코드변경공지" onload="SYS0000501004_onload">
    <Layouts>
      <Layout>
        <Static id="stc_86" class="sta_popupBg1" enable="false" position="absolute 0 0 889 560"/>
        <Static id="stc_83" text="공통 업무 코드 변경공지" class="sta_popupTitle" transparenthittest="true" position="absolute 10 8 346 28"/>
        <Button id="btn_Close25" taborder="3" onclick="btn_close_onclick" class="btn_popupClose" position="absolute 865 8 885 27"/>
        <Static id="stc_84" text="공지업무담당자" class="sta_workLabel1" position="absolute 11 71 146 97"/>
        <Static id="stc_85" class="sta_workData" position="absolute 145 71 301 97"/>
        <Edit id="Edit05" taborder="0" readonly="false" position="absolute 148 74 272 94" onkeydown="Edit05_onkeydown"/>
        <Static id="stc_02" text="공지제목" class="sta_workLabel1" position="absolute 11 96 146 122"/>
        <Static id="stc_04" class="sta_workData" position="absolute 145 96 878 122"/>
        <Edit id="Edit02" taborder="1" readonly="false" position="absolute 148 99 875 119"/>
        <Static id="stc_08" text="관리명" class="sta_workLabel1" position="absolute 11 249 146 275"/>
        <Static id="stc_09" class="sta_workData" position="absolute 145 249 301 275"/>
        <Static id="stc_10" class="sta_workData" position="absolute 433 249 589 275"/>
        <Static id="stc_11" text="파일명" class="sta_workLabel1" position="absolute 299 249 434 275"/>
        <Edit id="Edit04" taborder="4" readonly="true" position="absolute 148 252 289 272"/>
        <Edit id="Edit06" taborder="5" readonly="true" position="absolute 436 252 578 272"/>
        <Static id="stc_12" text="적용사업부" class="sta_workLabel1" position="absolute 588 249 723 275"/>
        <Edit id="Edit07" taborder="6" value="ERP 프로젝트팀" readonly="true" position="absolute 725 252 867 272"/>
        <Static id="stc_13" class="sta_workData" position="absolute 722 249 878 275"/>
        <Static id="stc_14" text="트랜잭션ID" class="sta_workLabel1" position="absolute 11 274 146 300"/>
        <Static id="stc_15" class="sta_workData" position="absolute 145 274 301 300"/>
        <Static id="stc_16" class="sta_workData" position="absolute 433 274 878 300"/>
        <Static id="stc_17" text="트랜잭션명" class="sta_workLabel1" position="absolute 299 274 434 300"/>
        <Edit id="Edit08" taborder="7" readonly="true" position="absolute 148 277 289 297"/>
        <Edit id="Edit09" taborder="8" readonly="true" position="absolute 436 277 867 297"/>
        <Static id="stc_20" text="SQL ID" class="sta_workLabel1" position="absolute 11 299 146 325"/>
        <Static id="stc_21" class="sta_workData" position="absolute 145 299 301 325"/>
        <Edit id="Edit11" taborder="9" readonly="true" position="absolute 148 302 289 322"/>
        <Static id="stc_152" text="공지 내용" class="sta_workTitle2" position="absolute 11 45 131 65"/>
        <Static id="stc_27" text="관리사업부" class="sta_workLabel1" position="absolute 11 343 146 369"/>
        <Static id="stc_28" class="sta_workData" position="absolute 145 343 301 369"/>
        <Static id="stc_33" text="관리담당내용" class="sta_workLabel1" position="absolute 11 368 146 438"/>
        <Static id="stc_34" class="sta_workData" position="absolute 145 368 878 438"/>
        <TextArea id="TextArea00" taborder="10" position="absolute 148 371 875 432" readonly="true"/>
        <Static id="stc_40" text="최근공지내용" class="sta_workLabel1" position="absolute 11 437 146 547"/>
        <Static id="stc_41" class="sta_workData" position="absolute 145 437 878 547"/>
        <TextArea id="TextArea01" taborder="11" position="absolute 148 440 875 544" readonly="true"/>
        <Static id="stc_03" text="공지내용" class="sta_workLabel1" position="absolute 11 121 146 231"/>
        <Static id="stc_05" class="sta_workData" position="absolute 145 121 878 231"/>
        <TextArea id="TextArea02" taborder="2" readonly="false" position="absolute 148 124 875 228"/>
        <Static id="stc_22" class="sta_workData" position="absolute 433 299 878 325"/>
        <Edit id="Edit13" taborder="13" readonly="true" position="absolute 436 302 872 322"/>
        <Static id="stc_23" text="네임스페이스 명" class="sta_workLabel1" position="absolute 299 299 434 325"/>
        <Button id="btn_Close26" taborder="14" text="등록" position="absolute 812 45 877 65" onclick="btn_Close26_onclick"/>
        <Button id="Button00" taborder="15" onclick="Div00_Button00_onclick" position="absolute 273 72 297 96" style="image:URL('theme://images\btn_gridSrc.png');imagealign:center middle;"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="Edit02" propid="value" datasetid="ds_info" columnid="ancmTitlNm"/>
      <BindItem id="item1" compid="TextArea02" propid="value" datasetid="ds_info" columnid="ancmCntn"/>
      <BindItem id="item2" compid="Edit04" propid="value" datasetid="ds_info" columnid="comnCdAdmnNm"/>
      <BindItem id="item3" compid="Edit06" propid="value" datasetid="ds_info" columnid="dwldFileNm"/>
      <BindItem id="item4" compid="Edit08" propid="value" datasetid="ds_info" columnid="trscId"/>
      <BindItem id="item5" compid="Edit09" propid="value" datasetid="ds_info" columnid="srvcItemAdmnNm"/>
      <BindItem id="item6" compid="Edit11" propid="value" datasetid="ds_info" columnid="srvcClssNm"/>
      <BindItem id="item7" compid="Edit13" propid="value" datasetid="ds_info" columnid="srvcOperNm"/>
      <BindItem id="item8" compid="TextArea00" propid="value" datasetid="ds_info" columnid="admnRspsCntn"/>
      <BindItem id="item9" compid="TextArea01" propid="value" datasetid="ds_info" columnid="lastAncmCntn"/>
      <BindItem id="item10" compid="Edit05" propid="value" datasetid="ds_info" columnid="ancmUserNm"/>
    </Bind>
    <Objects>
      <Dataset id="ds_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_info_oncolumnchanged">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="0"/>
          <Column id="xRowStatusType" type="STRING" size="0"/>
          <Column id="comnCdAdmnNo" type="STRING" size="256"/>
          <Column id="comnCdAdmnNm" type="STRING" size="256"/>
          <Column id="dwldFileNm" type="STRING" size="256"/>
          <Column id="dwldSqnc" type="STRING" size="256"/>
          <Column id="aplyBzdpDivCd" type="STRING" size="256"/>
          <Column id="trscId" type="STRING" size="256"/>
          <Column id="srvcOperNm" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="admnBzdpDivCd" type="STRING" size="256"/>
          <Column id="admnRspsCntn" type="STRING" size="256"/>
          <Column id="admnAncmCntn" type="STRING" size="256"/>
          <Column id="ancmTitlNm" type="STRING" size="256"/>
          <Column id="ancmCntn" type="STRING" size="256"/>
          <Column id="ancmUserId" type="STRING" size="256"/>
          <Column id="ancmDttm" type="STRING" size="256"/>
          <Column id="lastAncmTitlNm" type="STRING" size="256"/>
          <Column id="lastAncmCntn" type="STRING" size="256"/>
          <Column id="srvcItemAdmnNm" type="STRING" size="256"/>
          <Column id="srvcClssNm" type="STRING" size="256"/>
          <Column id="ancmUserNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_popUp" firefirstcount="0" firenextcount="0" onvaluechanged="ds_input_onvaluechanged">
        <ColumnInfo>
          <Column id="orgzCd" type="STRING" size="256"/>
          <Column id="orgzNm" type="STRING" size="256"/>
          <Column id="userId" type="STRING" size="256"/>
          <Column id="userNm" type="STRING" size="256"/>
          <Column id="admnUserId" type="STRING" size="256"/>
          <Column id="Column0" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[include "LIB::lib_All.xjs";

var fv_pasingDatasetList1 = "ds_pagingRequestDs1:ds_pagingResponseDs1";		// 첫번째그리드 페이징처리위한데이타셋(요청:응답)

function SYS0000501004_onload(obj:Form, e:LoadEventInfo)
{
	// 시스템 공통함수 호출
	gfn_commInit(obj);
	
	// 폼 공통함수 호출
	fn_init();
	
	// 공통코드 조회
	//fn_getCommCode();	
}


function fn_init()
{
	gfn_createPagingDataset(fv_pasingDatasetList1);	// 첫번째그리드 페이징 처리를 위한 데이타셋 생성

	ds_info.copyData(pv_info);
	
	//ds_info.addColumn( "lastAncmTitlNm", "string" );
	ds_info.addColumn( "lastAncmCntn", "string" );
	ds_info.setColumn(0,"lastAncmCntn",ds_info.getColumn(0,"ancmCntn"));
	ds_info.setColumn(0,"ancmCntn",ds_info.getColumn(0,"admnAncmCntn"));
	ds_info.addColumn( "ancm", "string" );
	ds_info.setColumn(0,"ancm","NEW");
	ds_info.addColumn( "ancmUserNm", "string" );
	ds_info.setColumn(0,"ancmUserId",gds_UserInfo.getColumn(0,"emplNo"));
	ds_info.setColumn(0,"ancmUserNm",gds_UserInfo.getColumn(0,"userNm"));
	//fn_commSearchGrop(gfn_getCommTypeInit());
	

}



function btn_Close26_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_commSave();
}


/***************************************************************************
 * 함  수  명		: fn_commSave()
 * 기      능		: (공통버튼)저장 프로세스
 ***************************************************************************/
function fn_commSave(sType)
{
	// 필수 입력 체크
	/*
	if (!gfn_dsValidCheck(div_body.grd_list, ds_listValid)) {
		return;
	}
	*/
	
	if (!fn_preSave(sType)) return false;

	// KWData 설정
	gfn_kwDataInit();

//	gfn_setKwData_nameSpace("");
	gfn_setKwData_trscCode("SYS00002C05");
// 	gfn_setKwData_trscType("");
// 	gfn_setKwData_screenId("");
// 	gfn_setKwData_bizGroupCode("");
	gfn_setKwData_systemCode("KRP_TEST");

	gfn_tranNMCI(sType
				, "ds_list=ds_info:U"
				, ""
				, "fn_commSave_callBack");
}


/***************************************************************************
 * 함  수  명		: fn_commSave_callBack()
 * 기      능		: [CallBack함수] Transaction Callback함수
 ***************************************************************************/
function fn_commSave_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	if(nErrorCode != 0) {
		return;
	}
	// 저장 후 처리
	fn_postSave(strSvcID);
}


/***************************************************************************
 * 함  수  명		: fn_preSave()
 * 기      능		: 저장 전 처리
 ***************************************************************************/
function fn_preSave(sType)
{
	if(!gfn_preSaveDs(ds_info, sType)) return false;
	
	//TO-DO:필수 입력 체크 등
	return true;
}

/***************************************************************************
 * 함  수  명		: fn_postSave()
 * 기      능		: 저장 후 처리
 ***************************************************************************/
function fn_postSave(sType)
{
	//fn_commSearch(sType);	//저장 후 재조회 처리
	var objRtn = new Object;
	objRtn["result"] = "true";
	close(objRtn);
	
	//TO-DO: 저장 결과 메세지처리
}


function btn_close_onclick(obj:Button,  e:ClickEventInfo)
{
var objRtn = new Object;
	objRtn["result"] = "false";
	this.close(objRtn);
	
}


function ds_info_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if(e.columnid != gfn_getColNmChk() && e.columnid != gfn_getColNmStatus()) {
		gfn_modify(obj, e);
	}

}

function Div00_Button00_onclick(obj:Button,  e:ClickEventInfo)
{
	popup_searchUser();
}

function Edit05_onkeydown(obj:Edit, e:KeyEventInfo)
{
	
	if(e.keycode == 13){
		obj.updateToDataset();
		popup_searchUser();
	}
}

function popup_searchUser()
{
	ds_popUp.clearData();
	ds_popUp.addRow();
// 	ds_popUp.setColumn(0,"userId",ds_input.getColumn(0,"userId"));
 	ds_popUp.setColumn(0,"userNm",ds_info.getColumn(0,"ancmUserNm"));
// 	ds_popUp.setColumn(0,"orgzCd",ds_input.getColumn(0,"orgzCd"));
// 	ds_popUp.setColumn(0,"orgzNm",Div00.Combo00.text);
// 	ds_popUp.setColumn(0,"admnUserId",gds_UserInfo.getColumn(0,"emplNo"));
	
	var strParam = {pv_info:ds_popUp};
		//전문상세 조회 팝업
	var rtn = gfn_diaLog("searchUser", -1, -1, 989, 519, "SYS::SYS0000202301.xfdl", false, strParam,  false, false, true);
	//추가 입력된 내용 재 조회
	if(rtn instanceof Object) {
		trace("userId:"+rtn["userId"]);
		trace("userNm:"+rtn["userNm"]);
 		trace("orgzCd:"+rtn["orgzCd"]);
 		ds_info.setColumn(0,"ancmUserId",rtn["userId"]);
 		ds_info.setColumn(0,"ancmUserNm",rtn["userNm"]);
	}
}


]]></Script>
  </Form>
</FDL>

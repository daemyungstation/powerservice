<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="PS21000102" classname="PS21000101" inheritanceid="" position="absolute 0 0 486 304" titletext="고객정보" scrollbars="none" onload="PS21000102_onload">
    <Layouts>
      <Layout>
        <Static id="stc_27" class="sta_workData" position2="absolute l:15.02% r:0.21% t:274 h:26" positiontype="position2"/>
        <Static id="stc_34" class="sta_workData" position2="absolute l:14.93% r:0% t:49 h:26" positiontype="position2"/>
        <Static id="stc_32" class="sta_workData" position2="absolute l:14.93% r:0% t:24px h:26" positiontype="position2"/>
        <Static id="stc_41" class="sta_workData" position2="absolute l:14.93% r:0% t:74 h:26" positiontype="position2"/>
        <Static id="stc_02" class="sta_workData" position2="absolute l:15.04% r:0% t:99 h:26" positiontype="position2"/>
        <Static id="stc_06" class="sta_workData" position2="absolute l:15.04% r:0% t:149 h:26" positiontype="position2"/>
        <Static id="stc_08" class="sta_workData" position2="absolute l:14.86% r:0% t:174 h:26" positiontype="position2"/>
        <Static id="stc_13" class="sta_workData" position2="absolute l:15.04% r:0% t:124 h:26" positiontype="position2"/>
        <Static id="stc_18" class="sta_workData" position2="absolute l:15.04% r:0% t:224 h:26" positiontype="position2"/>
        <Static id="stc_19" class="sta_workData" position2="absolute l:15.04% r:0% t:249 h:26" positiontype="position2"/>
        <Static id="stc_23" class="sta_workData" position2="absolute l:15.04% r:0% t:199 h:26" positiontype="position2"/>
        <Static id="stc_33" text="회원번호" class="sta_workLabel1" position2="absolute l:51.99% w:19.02% t:24 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_16" text="고객번호" class="sta_workLabel1" position2="absolute l:51.99% w:19.02% t:49 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_07" text="캠페인유형" class="sta_workLabel1" position2="absolute l:0 w:19.02% t:24 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_09" text="일반전화" class="sta_workLabel1" position2="absolute l:0 w:19.02% t:74 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_36" text="고객명" class="sta_workLabel1" position2="absolute l:0 w:19.02% t:49 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="sta_GrayLine01" class="sta_WF_Line1" position2="absolute l:1 r:0 t:24 h:1" positiontype="position2"/>
        <Static id="stc_00" text="휴대전화" class="sta_workLabel1" position2="absolute l:51.99% w:19.02% t:74 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_01" text="회사전화" class="sta_workLabel1" position2="absolute l:0 w:19.02% t:99 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_03" text="기타전화" class="sta_workLabel1" position2="absolute l:51.99% w:19.02% t:99 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_04" text="사용자정의3" class="sta_workLabel1" position2="absolute l:0 w:19.02% t:174 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_05" text="사용자정의1" class="sta_workLabel1" position2="absolute l:0 w:19.02% t:149 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_10" text="사용자정의4" class="sta_workLabel1" position2="absolute l:51.99% w:19.02% t:174 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_11" text="사용자정의2" class="sta_workLabel1" position2="absolute l:51.99% w:19.02% t:149 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_12" text="연락번호" class="sta_workLabel1" position2="absolute l:51.99% w:19.02% t:124 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_14" text="등록일시" class="sta_workLabel1" position2="absolute l:0 w:19.02% t:124 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_15" text="사용자정의9" class="sta_workLabel1" position2="absolute l:0 w:19.02% t:249 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_17" text="사용자정의7" class="sta_workLabel1" position2="absolute l:0 w:19.02% t:224 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_20" text="사용자정의10" class="sta_workLabel1" position2="absolute l:51.99% w:19.02% t:249 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_21" text="사용자정의8" class="sta_workLabel1" position2="absolute l:51.99% w:19.02% t:224 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_22" text="사용자정의6" class="sta_workLabel1" position2="absolute l:51.99% w:19.02% t:199 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_24" text="사용자정의5" class="sta_workLabel1" position2="absolute l:0 w:19.02% t:199 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_43" text="캠페인대상 고객정보" class="sta_workTitle2" position2="absolute l:1 w:297 t:5 h:20" positiontype="position2"/>
        <Edit id="edt_cust_nm" taborder="2" position2="absolute l:19.14% w:32.51% t:51 h:22" positiontype="position2" readonly="true" oneditclick="edt_cust_nm_oneditclick"/>
        <Edit id="edt_home_tlno" taborder="5" position2="absolute l:19.14% w:27.98% t:76 h:22" positiontype="position2" readonly="false" onkillfocus="phone_onkillfocus" ontextchanged="phone_ontextchanged" inputtype="digit" maxlength="11"/>
        <Edit id="edt_rgsn_dttm" taborder="14" position2="absolute l:19.14% w:32.72% t:126px h:22" positiontype="position2" readonly="true"/>
        <Edit id="edt_user_defn1_cntn" taborder="16" position2="absolute l:19.14% w:32.72% t:151px h:22" positiontype="position2" readonly="true" tooltiptype="hover"/>
        <Edit id="edt_user_defn3_cntn" taborder="18" position2="absolute l:19.14% w:32.72% t:176px h:22" positiontype="position2" readonly="true" tooltiptype="hover"/>
        <Edit id="edt_user_defn5_cntn" taborder="20" position2="absolute l:19.14% w:32.72% t:201px h:22" positiontype="position2" readonly="true" tooltiptype="hover"/>
        <Edit id="edt_user_defn7_cntn" taborder="22" position2="absolute l:19.14% w:32.72% t:226px h:22" positiontype="position2" readonly="true" tooltiptype="hover"/>
        <Edit id="edt_user_defn9_cntn" taborder="24" position2="absolute l:19.14% w:32.72% t:251px h:22" positiontype="position2" readonly="true" tooltiptype="hover"/>
        <Edit id="edt_user_defn10_cntn" taborder="25" position2="absolute l:71.19% w:28.4% t:251px h:22" positiontype="position2" readonly="true" tooltiptype="hover"/>
        <Edit id="edt_user_defn8_cntn" taborder="23" position2="absolute l:71.19% w:21.81% t:226 h:22" positiontype="position2" readonly="true" tooltiptype="hover"/>
        <Edit id="edt_user_defn6_cntn" taborder="21" position2="absolute l:71.19% w:28.4% t:201px h:22" positiontype="position2" readonly="true" tooltiptype="hover"/>
        <Edit id="edt_user_defn4_cntn" taborder="19" position2="absolute l:71.19% w:28.4% t:176px h:22" positiontype="position2" readonly="true" tooltiptype="hover"/>
        <Edit id="edt_user_defn2_cntn" taborder="17" position2="absolute l:71.19% w:28.4% t:151 h:22" positiontype="position2" readonly="true" tooltiptype="hover"/>
        <Edit id="Edit15" taborder="15" position2="absolute l:71.19% w:28.4% t:126px h:22" positiontype="position2" readonly="true"/>
        <Edit id="edt_comp_tlno" taborder="10" position2="absolute l:19.14% w:27.98% t:101 h:22" positiontype="position2" readonly="false" onkillfocus="phone_onkillfocus" ontextchanged="phone_ontextchanged" inputtype="digit" maxlength="11"/>
        <Edit id="edt_clph_tlno" taborder="7" position2="absolute l:71.19% w:18.72% t:76 h:22" positiontype="position2" readonly="false" ontextchanged="phone_ontextchanged" onkillfocus="phone_onkillfocus" inputtype="digit" maxlength="11"/>
        <Edit id="edt_mem_no" taborder="3" position2="absolute l:71.19% w:20.58% t:51 h:22" positiontype="position2" readonly="true"/>
        <Edit id="edt_cmpg_typ_nm" taborder="0" position2="absolute l:19.14% w:32.51% t:26 h:22" positiontype="position2" readonly="true"/>
        <Button id="btn_callHome" taborder="6" onclick="btn_onclick" class="btn_workpPhonePop" position2="absolute l:47.53% w:23 t:77 h:20" positiontype="position2" tooltiptext="걸기" enable="false"/>
        <Button id="btn_callComp" taborder="11" onclick="btn_onclick" class="btn_workpPhonePop" position2="absolute l:47.53% r:235 t:102 h:20" positiontype="position2" tooltiptext="걸기" enable="false"/>
        <Button id="btn_callClph" taborder="9" onclick="btn_onclick" class="btn_workpPhonePop" position2="absolute l:94.65% r:6 t:77 h:20" positiontype="position2" tooltiptext="걸기" enable="false"/>
        <Button id="btn_change" taborder="4" text="전환" onclick="btn_onclick" class="btn_WF_Common" enable="false" position2="absolute r:4 w:29 t:52 h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Button id="btn_makeSms" taborder="8" onclick="btn_onclick" class="btn_workHpPop" position2="absolute l:90.33% w:20 t:77 h:20" positiontype="position2" tooltiptext="문자발송" enable="false"/>
        <Button id="btn_join" taborder="26" text="가입" onclick="btn_onclick" class="btn_WF_Common" enable="false" position2="absolute r:4 w:29 t:51 h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Edit id="edt_accnt_no" taborder="1" readonly="true" position2="absolute l:77.78% w:28.4% t:26 h:22" positiontype="position2"/>
        <Edit id="edt_etc_tlno" taborder="12" onkillfocus="phone_onkillfocus" ontextchanged="phone_ontextchanged" position2="absolute l:71.19% w:23.46% t:101 h:22" positiontype="position2" inputtype="digit" maxlength="11"/>
        <Button id="btn_callEtc" taborder="13" onclick="btn_onclick" class="btn_workpPhonePop" enable="false" position2="absolute l:94.86% w:23 t:102 h:20" positiontype="position2" tooltiptext="걸기"/>
        <Static id="sta_unpy_stat" style="border:1 none #808080ff ;color:red;align:right middle;font:Dotum,9,bold;" visible="false" position2="absolute r:2 w:483 t:302 h:14" positiontype="position2"/>
        <Button id="btn_makeSms00" taborder="30" tabstop="false" onclick="btn_makeSms_test_onclick" class="btn_workHpPop" position2="absolute l:30.86% w:20 t:3 h:20" positiontype="position2" tooltiptext="문자발송"/>
        <Static id="stc_25" text="생년월일" class="sta_workLabel1" position2="absolute l:0 w:18.93% t:274px h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Static id="stc_26" text="진행상태" class="sta_workLabel1" position2="absolute l:58.64% w:18.93% t:274 h:26" positiontype="position2" style="padding:6 1 0 6;font:Dotum,8;" validate=""/>
        <Calendar id="brth_mon_day1" taborder="33" autoselect="true" autoskip="true" position2="absolute l:19.14% w:15.84% t:276 h:22" positiontype="position2" enable="false" value="null" enableevent="true" dateformat="yyyy-MM-dd"/>
        <Button id="btn_niceFirstSend" taborder="34" text="NICE전송" class="btn_WF_Common" position2="absolute l:35.39% w:11.93% t:277 h:20" positiontype="position2" style="padding:0 0 0 0;" enable="false" onclick="btn_onclick"/>
        <Edit id="edt_upp_tx_type_nm" taborder="35" readonly="true" position2="absolute l:77.78% w:21.81% t:275 h:22" positiontype="position2" tooltiptype="hover"/>
        <Button id="btn_copy" taborder="36" text="복사" class="btn_WF_Common" enable="false" position2="absolute l:93.42% w:29 t:227px h:20" positiontype="position2" style="padding:0 0 0 0;" onclick="btn_copy_onclick"/>
        <Div id="div_reserve" taborder="37" style="background:#ffffffff;border:1 solid #385d8aff ;" visible="false" position="absolute 222 126 482 265">
          <Layouts>
            <Layout>
              <Button id="btn_hideReserve" taborder="15" text="닫기" onclick="fn_cmpgReserveClose" class="btn_WF_Common" position2="absolute r:67 w:59 t:111 h:20" style="padding:0 0 0 0;" positiontype="position2"/>
              <Static id="stc_02" text="고객명" class="sta_workLabel1" position="absolute 8 29 89 55" style="font:Dotum,8;" validate="" anchor="default"/>
              <Static id="stc_03" class="sta_workData" position="absolute 88 29 211 55" anchor="default"/>
              <Static id="stc_00" class="sta_workData" position="absolute 88 54 211 80" anchor="default"/>
              <Static id="stc_01" text="휴대전화" class="sta_workLabel1" position="absolute 8 54 89 80" style="font:Dotum,8;" validate="" anchor="default"/>
              <Static id="stc_04" class="sta_workData" position="absolute 88 79 211 105" anchor="default"/>
              <Static id="stc_05" text="예약시간" class="sta_workLabel1" position="absolute 8 79 89 105" style="font:Dotum,8;" validate="" anchor="default"/>
              <Edit id="edt_cell" taborder="16" inputtype="digit" readonly="true" maxlength="11" onkeydown="Edit_onkeydown" position2="absolute l:91 w:115 t:57 h:20" style="background:URL('theme://images/bg_compN.png') stretch 5,5;" positiontype="position2"/>
              <Edit id="edt_mem_nm" taborder="17" inputtype="number" readonly="true" position2="absolute l:91 w:115 t:32 h:20" style="background:URL('theme://images/bg_compN.png') stretch 5,5;" positiontype="position2"/>
              <MaskEdit id="medt_time" taborder="18" readonly="true" type="string" mask="##:##" position="absolute 91 82 136 102" style="background:URL('theme://images/bg_compN.png') stretch 5,5;align:left middle;" anchor="default"/>
              <Edit id="edt_reserve_proc_dt" taborder="19" inputtype="number" readonly="true" onkeydown="Edit_onkeydown" visible="false" position2="absolute l:230 w:25 t:107 h:20" style="background:URL('theme://images/bg_compN.png') stretch 5,5;" positiontype="position2"/>
              <Button id="btn_confirm" taborder="20" text="확인" onclick="fn_cmpgReserveConfirm" class="btn_WF_Common" position2="absolute r:129 w:59 t:111 h:20" style="padding:0 0 0 0;" positiontype="position2"/>
              <Edit id="edt_accnt_no" taborder="21" readonly="true" visible="false" position="absolute 205 110 230 130" style="background:URL('theme://images/bg_compN.png') stretch 5,5;" anchor="default"/>
              <Static id="Static00" text="예약알림" position2="absolute l:0 r:0 t:0 h:26" style="background:orange;font:Dotum,9,bold;" positiontype="position2"/>
            </Layout>
          </Layouts>
        </Div>
        <Button id="btn_niceFirstResend" taborder="38" text="재전송" onclick="btn_onclick" class="btn_WF_Common" enable="false" position2="absolute l:106.58% w:11.93% t:262 h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <MaskEdit id="brth_mon_day" taborder="39" position2="absolute l:19.14% w:15.84% t:276 h:22" positiontype="position2" enable="false" maskchar="____-__-__" type="string" mask="####-##-##"/>
        <Button id="btn_NiceCancel" taborder="40" text="취소전송" onclick="btn_NiceCancel_onclick" class="btn_WF_Common" position2="absolute l:47.74% w:10.7% t:277 h:20" positiontype="position2" tooltiptext="저장" style="padding:0 0 0 0;" visible="true" enable="false"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="trgt_cust_id" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_trgtCust" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cust_nm" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="clph_tlno" type="STRING" size="256"/>
          <Column id="home_tlno" type="STRING" size="256"/>
          <Column id="comp_tlno" type="STRING" size="256"/>
          <Column id="dpms_tmcnt" type="STRING" size="256"/>
          <Column id="dpms_dttm" type="STRING" size="256"/>
          <Column id="dpms_stat_nm" type="STRING" size="256"/>
          <Column id="cmpg_typ_nm" type="STRING" size="256"/>
          <Column id="hgrn_hrch_nm" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="user_defn5_cntn" type="STRING" size="256"/>
          <Column id="user_defn1_cntn" type="STRING" size="256"/>
          <Column id="user_defn2_cntn" type="STRING" size="256"/>
          <Column id="user_defn3_cntn" type="STRING" size="256"/>
          <Column id="user_defn4_cntn" type="STRING" size="256"/>
          <Column id="user_defn6_cntn" type="STRING" size="256"/>
          <Column id="user_defn7_cntn" type="STRING" size="256"/>
          <Column id="user_defn8_cntn" type="STRING" size="256"/>
          <Column id="user_defn9_cntn" type="STRING" size="256"/>
          <Column id="user_defn10_cntn" type="STRING" size="256"/>
          <Column id="trgt_cust_dtpt_id" type="STRING" size="256"/>
          <Column id="etc_tlno" type="STRING" size="256"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="upp_tx_type_nm" type="STRING" size="256"/>
          <Column id="upp_tx_type" type="STRING" size="256"/>
          <Column id="ci_yn" type="STRING" size="256"/>
          <Column id="acuon_fitness_yn" type="STRING" size="256"/>
          <Column id="ci_val" type="STRING" size="256"/>
          <Column id="gender" type="STRING" size="256"/>
          <Column id="credit_rating" type="STRING" size="256"/>
          <Column id="safekey" type="STRING" size="256"/>
          <Column id="Column0" type="STRING" size="256"/>
          <Column id="tel_yn" type="STRING" size="256"/>
          <Column id="email_yn" type="STRING" size="256"/>
          <Column id="dm_yn" type="STRING" size="256"/>
          <Column id="sms_yn" type="STRING" size="256"/>
          <Column id="marry_yn" type="STRING" size="256"/>
          <Column id="child_cnt" type="STRING" size="256"/>
          <Column id="market_agree" type="STRING" size="256"/>
          <Column id="pass_yn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_updateData" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmpg_id" type="STRING" size="256"/>
          <Column id="trgt_cust_dtpt_id" type="STRING" size="256"/>
          <Column id="sub_trgt_list_id" type="STRING" size="256"/>
          <Column id="cti_crnc_dtl_id" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cti_id" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_unpyStat" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_trgtCustAlct" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="cust_nm" type="STRING" size="256"/>
          <Column id="mem_no" type="STRING" size="256"/>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="clph_tlno" type="STRING" size="256"/>
          <Column id="home_tlno" type="STRING" size="256"/>
          <Column id="comp_tlno" type="STRING" size="256"/>
          <Column id="dpms_tmcnt" type="STRING" size="256"/>
          <Column id="dpms_dttm" type="STRING" size="256"/>
          <Column id="dpms_stat_nm" type="STRING" size="256"/>
          <Column id="cmpg_typ_nm" type="STRING" size="256"/>
          <Column id="hgrn_hrch_nm" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="user_defn5_cntn" type="STRING" size="256"/>
          <Column id="user_defn1_cntn" type="STRING" size="256"/>
          <Column id="user_defn2_cntn" type="STRING" size="256"/>
          <Column id="user_defn3_cntn" type="STRING" size="256"/>
          <Column id="user_defn4_cntn" type="STRING" size="256"/>
          <Column id="user_defn6_cntn" type="STRING" size="256"/>
          <Column id="user_defn7_cntn" type="STRING" size="256"/>
          <Column id="user_defn8_cntn" type="STRING" size="256"/>
          <Column id="user_defn9_cntn" type="STRING" size="256"/>
          <Column id="user_defn10_cntn" type="STRING" size="256"/>
          <Column id="trgt_cust_dtpt_id" type="STRING" size="256"/>
          <Column id="cnsr_nm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="dpms_resl_cntn" type="STRING" size="256"/>
          <Column id="dpms_resl_cd" type="STRING" size="256"/>
          <Column id="dpms_stat_cd" type="STRING" size="256"/>
          <Column id="prod_join_yn" type="STRING" size="256"/>
          <Column id="cti_crnc_dtl_id" type="STRING" size="256"/>
          <Column id="hgrn_hrch_cd" type="STRING" size="256"/>
          <Column id="cmpg_typ_cd" type="STRING" size="256"/>
          <Column id="trgt_list_id" type="STRING" size="256"/>
          <Column id="sub_trgt_list_nm" type="STRING" size="256"/>
          <Column id="invt_cnts_id" type="STRING" size="256"/>
          <Column id="sub_trgt_list_id" type="STRING" size="256"/>
          <Column id="prmv_id" type="STRING" size="256"/>
          <Column id="etc_tlno" type="STRING" size="256"/>
          <Column id="dpms_resl_nm" type="STRING" size="256"/>
          <Column id="reserve_proc_dt" type="STRING" size="256"/>
          <Column id="reserve_proc_tm" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="dthms" type="STRING" size="256"/>
          <Column id="reserve_dthms" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_direct" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ci_val" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="cell" type="STRING" size="256"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="sex" type="STRING" size="256"/>
          <Column id="home_zip" type="STRING" size="256"/>
          <Column id="home_addr" type="STRING" size="256"/>
          <Column id="home_addr2" type="STRING" size="256"/>
          <Column id="home_tel" type="STRING" size="256"/>
          <Column id="email" type="STRING" size="256"/>
          <Column id="markt_agr_yn" type="STRING" size="256"/>
          <Column id="dm_yn" type="STRING" size="256"/>
          <Column id="email_yn" type="STRING" size="256"/>
          <Column id="sms_yn" type="STRING" size="256"/>
          <Column id="tel_yn" type="STRING" size="256"/>
          <Column id="marry_yn" type="STRING" size="256"/>
          <Column id="child_cnt" type="STRING" size="256"/>
          <Column id="rdp_mst_idx" type="STRING" size="256"/>
          <Column id="ord_mst_idx" type="STRING" size="256"/>
          <Column id="b2b_cd" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="prod_kind" type="STRING" size="256"/>
          <Column id="model_cd" type="STRING" size="256"/>
          <Column id="inspl_zip" type="STRING" size="256"/>
          <Column id="inspl_addr" type="STRING" size="256"/>
          <Column id="inspl_addr2" type="STRING" size="256"/>
          <Column id="hpcall_time" type="STRING" size="256"/>
          <Column id="main_contract" type="STRING" size="256"/>
          <Column id="reg_dm" type="STRING" size="256"/>
          <Column id="alct_yn" type="STRING" size="256"/>
          <Column id="cnsr_id" type="STRING" size="256"/>
          <Column id="user_nm" type="STRING" size="256"/>
          <Column id="dpms_resl_nm" type="STRING" size="256"/>
          <Column id="dpms_stat_nm" type="STRING" size="256"/>
          <Column id="dpms_stat_cd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_uplus" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_list_onrowposchanged">
        <ColumnInfo>
          <Column id="id_no" type="STRING" size="256"/>
          <Column id="home_prd_num" type="STRING" size="256"/>
          <Column id="u_dlr_cd" type="STRING" size="256"/>
          <Column id="u_dlr_nm" type="STRING" size="256"/>
          <Column id="u_indc_empno" type="STRING" size="256"/>
          <Column id="u_intg_user_id" type="STRING" size="256"/>
          <Column id="wh_pos_cd" type="STRING" size="256"/>
          <Column id="wh_store_nm" type="STRING" size="256"/>
          <Column id="main_cont_type" type="STRING" size="256"/>
          <Column id="u_cmmn_cd_nm" type="STRING" size="256"/>
          <Column id="sales_type" type="STRING" size="256"/>
          <Column id="prdct_nm" type="STRING" size="256"/>
          <Column id="prdct_nm2" type="STRING" size="256"/>
          <Column id="prdct_nm3" type="STRING" size="256"/>
          <Column id="name" type="STRING" size="256"/>
          <Column id="hp" type="STRING" size="256"/>
          <Column id="discount_ctn" type="STRING" size="256"/>
          <Column id="u_prod_no" type="STRING" size="256"/>
          <Column id="u_prod_nm" type="STRING" size="256"/>
          <Column id="reg_dtm" type="STRING" size="256"/>
          <Column id="call_stts" type="STRING" size="256"/>
          <Column id="memo" type="STRING" size="256"/>
          <Column id="agent_emp_nm" type="STRING" size="256"/>
          <Column id="prdct_cd" type="STRING" size="256"/>
          <Column id="prdct_cd2" type="STRING" size="256"/>
          <Column id="prdct_cd3" type="STRING" size="256"/>
          <Column id="agent_emp_tel" type="STRING" size="256"/>
          <Column id="cnslr" type="STRING" size="256"/>
          <Column id="chk" type="STRING" size="256"/>
          <Column id="brth_mon_day" type="STRING" size="256"/>
          <Column id="sex" type="STRING" size="256"/>
          <Column id="ci_val" type="STRING" size="256"/>
          <Column id="home_zip" type="STRING" size="256"/>
          <Column id="home_addr" type="STRING" size="256"/>
          <Column id="home_addr2" type="STRING" size="256"/>
          <Column id="home_tel" type="STRING" size="256"/>
          <Column id="pay_mthd" type="STRING" size="256"/>
          <Column id="card_nm" type="STRING" size="256"/>
          <Column id="card_no" type="STRING" size="256"/>
          <Column id="expire_dt" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="pay_dt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item1" compid="edt_cmpg_typ_nm" propid="value" datasetid="ds_list_trgtCust" columnid="cmpg_typ_nm"/>
      <BindItem id="item2" compid="edt_cust_nm" propid="value" datasetid="ds_list_trgtCust" columnid="cust_nm"/>
      <BindItem id="item3" compid="edt_mem_no" propid="value" datasetid="ds_list_trgtCust" columnid="mem_no"/>
      <BindItem id="item5" compid="edt_clph_tlno" propid="value" datasetid="ds_list_trgtCust" columnid="clph_tlno"/>
      <BindItem id="item6" compid="edt_home_tlno" propid="value" datasetid="ds_list_trgtCust" columnid="home_tlno"/>
      <BindItem id="item7" compid="edt_comp_tlno" propid="value" datasetid="ds_list_trgtCust" columnid="comp_tlno"/>
      <BindItem id="item8" compid="edt_rgsn_dttm" propid="value" datasetid="ds_list_trgtCust" columnid="rgsn_dttm"/>
      <BindItem id="item9" compid="edt_user_defn1_cntn" propid="value" datasetid="ds_list_trgtCust" columnid="user_defn1_cntn"/>
      <BindItem id="item10" compid="edt_user_defn3_cntn" propid="value" datasetid="ds_list_trgtCust" columnid="user_defn3_cntn"/>
      <BindItem id="item11" compid="edt_user_defn5_cntn" propid="value" datasetid="ds_list_trgtCust" columnid="user_defn5_cntn"/>
      <BindItem id="item12" compid="edt_user_defn7_cntn" propid="value" datasetid="ds_list_trgtCust" columnid="user_defn7_cntn"/>
      <BindItem id="item13" compid="edt_user_defn9_cntn" propid="value" datasetid="ds_list_trgtCust" columnid="user_defn9_cntn"/>
      <BindItem id="item14" compid="edt_user_defn10_cntn" propid="value" datasetid="ds_list_trgtCust" columnid="user_defn10_cntn"/>
      <BindItem id="item15" compid="edt_user_defn8_cntn" propid="value" datasetid="ds_list_trgtCust" columnid="user_defn8_cntn"/>
      <BindItem id="item16" compid="edt_user_defn6_cntn" propid="value" datasetid="ds_list_trgtCust" columnid="user_defn6_cntn"/>
      <BindItem id="item17" compid="edt_user_defn4_cntn" propid="value" datasetid="ds_list_trgtCust" columnid="user_defn4_cntn"/>
      <BindItem id="item18" compid="edt_user_defn2_cntn" propid="value" datasetid="ds_list_trgtCust" columnid="user_defn2_cntn"/>
      <BindItem id="item0" compid="edt_accnt_no" propid="value" datasetid="ds_list_trgtCust" columnid="accnt_no"/>
      <BindItem id="item4" compid="edt_etc_tlno" propid="value" datasetid="ds_list_trgtCust" columnid="etc_tlno"/>
      <BindItem id="item19" compid="edt_user_defn1_cntn" propid="tooltiptext" datasetid="ds_list_trgtCust" columnid="user_defn1_cntn"/>
      <BindItem id="item20" compid="edt_user_defn2_cntn" propid="tooltiptext" datasetid="ds_list_trgtCust" columnid="user_defn2_cntn"/>
      <BindItem id="item21" compid="edt_user_defn3_cntn" propid="tooltiptext" datasetid="ds_list_trgtCust" columnid="user_defn3_cntn"/>
      <BindItem id="item22" compid="edt_user_defn4_cntn" propid="tooltiptext" datasetid="ds_list_trgtCust" columnid="user_defn4_cntn"/>
      <BindItem id="item23" compid="edt_user_defn5_cntn" propid="tooltiptext" datasetid="ds_list_trgtCust" columnid="user_defn5_cntn"/>
      <BindItem id="item24" compid="edt_user_defn6_cntn" propid="tooltiptext" datasetid="ds_list_trgtCust" columnid="user_defn6_cntn"/>
      <BindItem id="item25" compid="edt_user_defn7_cntn" propid="tooltiptext" datasetid="ds_list_trgtCust" columnid="user_defn7_cntn"/>
      <BindItem id="item26" compid="edt_user_defn9_cntn" propid="tooltiptext" datasetid="ds_list_trgtCust" columnid="user_defn9_cntn"/>
      <BindItem id="item27" compid="brth_mon_day1" propid="value" datasetid="ds_list_trgtCust" columnid="brth_mon_day"/>
      <BindItem id="item28" compid="edt_upp_tx_type_nm" propid="value" datasetid="ds_list_trgtCust" columnid="upp_tx_type_nm"/>
      <BindItem id="item29" compid="brth_mon_day" propid="value" datasetid="ds_list_trgtCust" columnid="brth_mon_day"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/***************************************************************************
 * Program ID    : PS21000102.xfdl
 * Program Name  : 발신이력조회(아웃바운드)
 * Author        : 정 훈
 * Created On    : 2016.03.21
 * 개    요 	 :
 *
 * =========================================================================
 * 변경일자     수정자       내    용
 * =========================================================================
 * 2016.03.21    정   훈      최초작성
 
 **************************************************************************/


/********************************************************************************************/
/* 1. Include Library include                                                               */
/********************************************************************************************/
include "LIB::lib_All.xjs"; // 공통라이브러리


/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트,전역변수,초기화) 처리                         	*/
/********************************************************************************************/
var total_count =0;
var sPreSelectTrgtCustDtptId = "";
//var niceSendingFlag = "N"; // NICE 전송중 여부
var elect_Sign_yn = "N";	

function PS21000102_onload(obj:Form, e:LoadEventInfo)
{

	btn_join.visible = false;
	btn_change.visible = false;
	gfn_createPagingDataset(obj); // 페이징처리 위한 데이터셋 설정
}

function fn_Init(){

	//전자 서명 초기화	
	elect_Sign_yn = "N";

	//전자서명 하드코딩_20180724 (L라이프와 스페셜라이프 온라인 [CMP201802011552424 / TAR99999999999998])
	if(parent.div_cmpgInfo.cbo_srch_cmpg.value == "CMP201802011552424" || parent.div_cmpgInfo.cbo_srch_cmpg.value == "TAR99999999999998"){
		elect_Sign_yn = "Y";
	}
	
	if(ds_list_trgtCust.rowcount < 1){
		btn_callHome.enable = false;
		btn_callClph.enable = false;
		btn_callComp.enable = false;
		btn_change.enable = false;
		btn_change.visible = false;
		btn_join.enable = false;
		btn_join.visible = false;
		edt_home_tlno.readonly = true;
		edt_comp_tlno.readonly = true;
		edt_clph_tlno.readonly = true;
		sta_unpy_stat.visible = false;
		
		//2018.02.08 생년월일, NICE전송 추가...
		brth_mon_day.enable = false;	
		btn_niceFirstSend.enable = false;
		btn_niceFirstResend.enable = false;
		btn_niceFirstResend.visible = false;
		
		//2018.04.09 클립보드
		btn_copy.enable = false;
	}else{
		//일반전화
		if(edt_home_tlno.value == null){
			btn_callHome.enable = false;
			edt_home_tlno.readonly = true;
		}else{
		    var homeTlno = gfn_phoneNumStr(edt_home_tlno.value);
			edt_home_tlno.value = homeTlno;
			btn_callHome.enable = true;
			edt_home_tlno.readonly = false;
		}
		
		//휴대전화				
		if(edt_clph_tlno.value == null){
			btn_callClph.enable = false;
			btn_makeSms.enable = false;
			edt_clph_tlno.readonly = true;
		}else{
			var clphTlno = gfn_phoneNumStr(edt_clph_tlno.value);
			edt_clph_tlno.value = clphTlno;
			btn_makeSms.enable = true;
			btn_callClph.enable = true;
			edt_clph_tlno.readonly = false;
		}
		
		//회사전화
		if(edt_comp_tlno.value == null){
			btn_callComp.enable = false;
			edt_comp_tlno.readonly = true;
		}else{
		    var compTlno = gfn_phoneNumStr(edt_comp_tlno.value);
			edt_comp_tlno.value = compTlno;
			btn_callComp.enable = true;
			edt_comp_tlno.readonly = false;
		}
		
		//기타전화
		if(edt_etc_tlno.value == null){
			btn_callEtc.enable = false;
			edt_etc_tlno.readonly = true;
		}else{
		    var etcTlno = gfn_phoneNumStr(edt_etc_tlno.value);
			edt_etc_tlno.value = etcTlno;
			btn_callEtc.enable = true;
			edt_etc_tlno.readonly = false;
		}
		
		//등록일시 
		if(edt_rgsn_dttm.value != null){
			var rgsnDttmStr = edt_rgsn_dttm.value;
			edt_rgsn_dttm.value = gfn_strDttm(rgsnDttmStr);
		}
		
		// 전자서명 캠페인 로직
		var sMemNo = "" + edt_mem_no.value ;
	
		if(elect_Sign_yn == "Y"){

			//2018.02.09 전자서명 추가 개발 sMemNo.substr(0,1)=='k' (쇼핑몰 추가) , upp_tx_type =03(신용평가완료), ci_yn : 본인인증, acuon_fitness_yn: 신용인증
			//else if ((sMemNo.substr(0,2)=='KS' || sMemNo.substr(0,2)=='ks') && ds_list_trgtCust.getColumn(0, "upp_tx_type") == "03" && ds_list_trgtCust.getColumn(0, "ci_yn") == "Y" && ds_list_trgtCust.getColumn(0, "acuon_fitness_yn") == "Y")
			if (ds_list_trgtCust.getColumn(0, "upp_tx_type") == "03" && ds_list_trgtCust.getColumn(0, "ci_yn") == "Y" && ds_list_trgtCust.getColumn(0, "acuon_fitness_yn") == "Y")			
			{
				if(gfn_isNull(sMemNo) || sMemNo == "")
				{
					btn_change.enable = false;
					btn_change.visible = false;
					btn_join.enable = true;
					btn_join.visible = true;	
				}
				else 
				{
					if(sMemNo.substr(0,1)=='T' || sMemNo.substr(0,1)=='t')
					{
						btn_change.enable = false;
						btn_change.visible = false;
						btn_join.enable = true;
						btn_join.visible = true;
					} 
					else
					{
						btn_change.enable = true;
						btn_change.visible = true;
						btn_join.enable = false;
						btn_join.visible = false;
					}
				}
			}
			
			if(gfn_isNull(ds_list_trgtCust.getColumn(0, "upp_tx_type")) || ds_list_trgtCust.getColumn(0, "upp_tx_type") == "01" || ds_list_trgtCust.getColumn(0, "upp_tx_type") == "02")
			{
				btn_change.enable = false;
				btn_change.visible = false;
				btn_join.enable = false;
				btn_join.visible = false;
			}						
		}
		// 전자서명이 아닌 캠페인 로직
		else
		{			
			if(gfn_isNull(sMemNo) || sMemNo == "")
			{
				btn_change.enable = false;
				btn_change.visible = false;
				btn_join.enable = true;
				btn_join.visible = true;	
			}
			else 
			{
				if(sMemNo.substr(0,1)=='T' || sMemNo.substr(0,1)=='t')
				{
					btn_change.enable = false;
					btn_change.visible = false;
					btn_join.enable = true;
					btn_join.visible = true;
				} 
				else
				{
					btn_change.enable = true;
					btn_change.visible = true;
					btn_join.enable = false;
					btn_join.visible = false;
				}
			}
			
		}
				
		// MEM_NO
		/*
		if(edt_mem_no.value == null && elect_Sign_yn == "N"){
			btn_change.enable = false;
			btn_change.visible = false;
			btn_join.enable = true;
			btn_join.visible = true;			
		}else if(edt_mem_no.value != null && elect_Sign_yn == "N"){
			btn_change.enable = true;
			btn_change.visible = true;
			btn_join.enable = false;
			btn_join.visible = false;	
		}else{
			var sMemNo = edt_mem_no.value;
			//2018.02.09 전자서명 추가 개발 sMemNo.substr(0,1)=='k' (쇼핑몰 추가) , upp_tx_type =03(신용평가완료), ci_yn : 본인인증, acuon_fitness_yn: 신용인증
			//else if ((sMemNo.substr(0,2)=='KS' || sMemNo.substr(0,2)=='ks') && ds_list_trgtCust.getColumn(0, "upp_tx_type") == "03" && ds_list_trgtCust.getColumn(0, "ci_yn") == "Y" && ds_list_trgtCust.getColumn(0, "acuon_fitness_yn") == "Y")
			if (elect_Sign_yn == "Y" && ds_list_trgtCust.getColumn(0, "upp_tx_type") == "03" && ds_list_trgtCust.getColumn(0, "ci_yn") == "Y" && ds_list_trgtCust.getColumn(0, "acuon_fitness_yn") == "Y")			
			{
				btn_change.enable = false;
				btn_change.visible = false;
				btn_join.enable = true;
				btn_join.visible = true
			}
			//2018.06.21 [모든이에] 홈쇼핑 고객일 경우(KS로 시작), upp_tx_type =02(본인인증완료)
			//else if((sMemNo.substr(0,2)=='KS' || sMemNo.substr(0,2)=='ks') && ds_list_trgtCust.getColumn(0, "upp_tx_type") == "02")
			else if(elect_Sign_yn == "Y" && ds_list_trgtCust.getColumn(0, "upp_tx_type") == "02")
			{
				btn_change.enable = false;
				btn_change.visible = false;
				btn_join.enable = false;
				btn_join.visible = false;
			}
			//2018.06.21 [모든이에] 홈쇼핑 고객일 경우(KS로 시작), upp_tx_type =01(1차접수완료)
			//else if((sMemNo.substr(0,2)=='KS' || sMemNo.substr(0,2)=='ks') && ds_list_trgtCust.getColumn(0, "upp_tx_type") == "01")
			else if(elect_Sign_yn == "Y" && ds_list_trgtCust.getColumn(0, "upp_tx_type") == "01")
			{
				btn_change.enable = false;
				btn_change.visible = false;
				btn_join.enable = false;
				btn_join.visible = false;
			}
			//2018.06.21 [모든이에] 홈쇼핑 고객일 경우(KS로 시작), upp_tx_type = null(진행하지 않은 상태)
			//else if((sMemNo.substr(0,2)=='KS' || sMemNo.substr(0,2)=='ks') && gfn_isNull(ds_list_trgtCust.getColumn(0, "upp_tx_type")))
			else if(elect_Sign_yn == "Y" && gfn_isNull(ds_list_trgtCust.getColumn(0, "upp_tx_type")))
			{
				btn_change.enable = false;
				btn_change.visible = false;
				btn_join.enable = false;
				btn_join.visible = false;
			}
						
			else if(sMemNo.substr(0,1)=='T' || sMemNo.substr(0,1)=='t')
			{
				btn_change.enable = false;
				btn_change.visible = false;
				btn_join.enable = true;
				btn_join.visible = true;
			} 
			else
			{
				btn_change.enable = true;
				btn_change.visible = true;
				btn_join.enable = false;
				btn_join.visible = false;
			}
			
		}
		*/
						
		//2018.02.08 생년월일, NICE전송 추가...캠페인이 홈쇼핑일때....
		//if (parent.div_cmpgInfo.cbo_srch_cmpg.value == "CMP201609222273793")
		
		//trace("chk : " + ds_list_trgtCust.getColumn(0, "upp_tx_type"));
		if (elect_Sign_yn == "Y")
		{			
			if (gfn_isNull(ds_list_trgtCust.getColumn(0, "upp_tx_type_nm")) == true ||  ds_list_trgtCust.getColumn(0, "upp_tx_type_nm") == "undefined")
			{
				btn_niceFirstSend.text = 'NICE전송';
				brth_mon_day.enable = true;	
				btn_niceFirstSend.enable = true;
				btn_NiceCancel.enable = false;
			}
			else if(ds_list_trgtCust.getColumn(0, "upp_tx_type") == "01")
			{
				brth_mon_day.enable = false;	
				btn_niceFirstSend.text = '재전송';
				btn_niceFirstSend.enable = true;				
				btn_NiceCancel.enable = true;
			}
			else if(ds_list_trgtCust.getColumn(0, "upp_tx_type") == "02")
			{
				brth_mon_day.enable = false;	
				btn_niceFirstSend.text = '재전송';
				btn_niceFirstSend.enable = true;				
				btn_NiceCancel.enable = true;
			}
			else
			{
				brth_mon_day.enable = false;	
				btn_niceFirstSend.enable = false;
				btn_niceFirstResend.enable = false;
				btn_niceFirstResend.visible = false;
				btn_NiceCancel.enable = false;
			}
		}	
		//2018.04.09 클립보드
		btn_copy.enable = true;
		
		var sUserDefn3Cntn = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition , "user_defn3_cntn");
		
		if(sUserDefn3Cntn == "Z567" || sUserDefn3Cntn == "ZH73" || sUserDefn3Cntn == "ZH74" ||
		   sUserDefn3Cntn == "ZH75" || sUserDefn3Cntn == "ZRB3")
		{
			edt_user_defn3_cntn.style.color = "red";
		}
		else
		{
			edt_user_defn3_cntn.style.color = "#333333ff";
		}
	}
}
/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/


//콜백
function fn_callBack(svcid, errcd, errmsg) {
    if (errcd != 0) {
		trace("errcd  :   " +errcd +"   \n errmsg   :   "+ errmsg +"    \n svcid   :   "+ svcid)
		return false;
	} else {
		switch(svcid){
		    case "srchTrgtCustInfo":// 조회콜백

			break;
			
			case "updateCtiCrncDtlId" : //cti_id update
				parent.div_cmpgDpms.ds_trgtCustAlct.setColumn(parent.div_cmpgDpms.ds_trgtCustAlct.rowposition,'cti_crnc_dtl_id',ds_cti_id.getColumn(ds_cti_id.rowposition, 'cti_crnc_dtl_id'));
				parent.div_cmpgDpms.fn_commSearch(gfn_getCommTypeInit());//히스토리재조회
			break;
			
			
			case "srchUnpyStat" ://현재 미납상태
			  
			    fn_postSrch();
			    
			break;
			
			//2018.02.08 전자서명 개발 추가
			
			case "insertNiceInfomation" :
				parent.div_cmpgInfo.fn_commSearch(gfn_getCommTypeInit());//히스토리재조회				
				fn_niceSendPostProcess("insertNiceInfomation");
			break;	
			
			case "resendKaKao" :
				parent.div_cmpgInfo.fn_commSearch(gfn_getCommTypeInit());//히스토리재조회
				fn_niceSendPostProcess("resendKaKao");
			break;
			
			case "sendNiceCancel" :
				parent.div_cmpgInfo.fn_commSearch(gfn_getCommTypeInit());//히스토리재조회
				fn_niceSendPostProcess("sendNiceCancel");
			break;
		}
	}
}


/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/

function fn_preSaveData()
{
	if(!gfn_isNull(ap_TopFrame.form.gv_cti_crnc_dtl_id)){
		ds_updateData.clearData();
		ds_updateData.addRow();
		ds_updateData.setColumn(0, "cmpg_id", parent.div_cmpgInfo.cbo_srch_cmpg.value);
		ds_updateData.setColumn(0, "trgt_cust_dtpt_id",parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition,'trgt_cust_dtpt_id'));
		ds_updateData.setColumn(0, "sub_trgt_list_id", parent.div_cmpgInfo.ds_list_subTrgtList.getColumn(parent.div_cmpgInfo.ds_list_subTrgtList.rowposition,'sub_trgt_list_id'));
		ds_updateData.setColumn(0, "cti_crnc_dtl_id", ap_TopFrame.form.gv_cti_crnc_dtl_id);
		return true;
	}else{
		return false;
	}
}


/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
//조회
function fn_commSearch (sType, cmpg_id, trgt_list_id, trgt_cust_id)
{	
    ds_inqCndt.clearData();
	ds_inqCndt.addRow();
	ds_inqCndt.setColumn(0, "cmpg_id", cmpg_id);
	ds_inqCndt.setColumn(0, "trgt_list_id", trgt_list_id);
	ds_inqCndt.setColumn(0, "trgt_cust_id", trgt_cust_id);
	
	var szSvcid       = "srchTrgtCustInfo";
    var szController  = "/cmpg/dpms-resl-hstr/list";
    var szInDs        = "ds_input=ds_inqCndt";
    var szOutDs       = "ds_campaignResultHist=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

//cti 통화내역 id 업데이트
function fn_updateCtiCrncDtlId(){
    if(!fn_preSaveData()) return false;

	var szSvcid       = "updateCtiCrncDtlId";
    var szController  = "/cmpg/trgt-cust-alct/ctiid/update";
    var szInDs        = "ds_input=ds_updateData";
    var szOutDs       = "ds_cti_id=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}


function fn_srchUnpyStat(sAccntNo){
    
	var szSvcid       = "srchUnpyStat";
    var szController  = "/cmpg/extc-trgt/unpystat";
    var szInDs        = "";
    var szOutDs       = "ds_unpyStat=ds_output";
    var szParam       = "accnt_no="+sAccntNo;
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/
function fn_postSrch(){

	if(ds_unpyStat.rowcount > 0){
	   
		sta_unpy_stat.text = '납입상태: ';
		if(gfn_isNull(ds_unpyStat.getColumn(ds_unpyStat.rowposition,'pay_state'))){
			sta_unpy_stat.text += "정보없음";
		}else{
			sta_unpy_stat.text += ds_unpyStat.getColumn(ds_unpyStat.rowposition,'pay_state'); 
		}
		
		sta_unpy_stat.text += "/결합납입상태: ";
		if(gfn_isNull(ds_unpyStat.getColumn(ds_unpyStat.rowposition,'union_pay_state'))){
			sta_unpy_stat.text += "정보없음";
		}else{
			sta_unpy_stat.text += ds_unpyStat.getColumn(ds_unpyStat.rowposition,'union_pay_state'); 
		}
		
		
		sta_unpy_stat.text += "/가입상태: ";
		if(gfn_isNull(ds_unpyStat.getColumn(ds_unpyStat.rowposition,'acc_stat'))){
			sta_unpy_stat.text += "정보없음";
		}else{
			sta_unpy_stat.text += ds_unpyStat.getColumn(ds_unpyStat.rowposition,'acc_stat'); 
		}
	}
}


/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
//버튼클릭 이벤트
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	
	switch(obj){
		case btn_callClph: //휴대전화  CAM130
			if (ap_TopFrame.form.ctiStatus == ap_TopFrame.form.CTI_STATUS_LOGOUT) { // CTI 로그인 여부 확인
				alert("CTI 로그인을 하십시요.");
				return;
			}
			ap_TopFrame.form.gfn_makeCall(edt_clph_tlno.value, edt_mem_no.value, edt_cust_nm.value, edt_accnt_no.value,"","Y");
			parent.div_cmpgDpms.fn_setTrgtCustAlctDpms("20", edt_clph_tlno.value);
		break;
		
		case btn_callComp: //회사전화 CAM130
			if (ap_TopFrame.form.ctiStatus == ap_TopFrame.form.CTI_STATUS_LOGOUT) { // CTI 로그인 여부 확인
				alert("CTI 로그인을 하십시요.");
				return;
			}
			ap_TopFrame.form.gfn_makeCall(edt_clph_tlno.value, edt_mem_no.value, edt_cust_nm.value, edt_accnt_no.value,"","Y");
			parent.div_cmpgDpms.fn_setTrgtCustAlctDpms("30", edt_comp_tlno.value);
		break;
		
		case btn_callHome: //일반전화 CAM130
			if (ap_TopFrame.form.ctiStatus == ap_TopFrame.form.CTI_STATUS_LOGOUT) { // CTI 로그인 여부 확인
				alert("CTI 로그인을 하십시요.");
				return;
			}
			ap_TopFrame.form.gfn_makeCall(edt_clph_tlno.value, edt_mem_no.value, edt_cust_nm.value, edt_accnt_no.value,"","Y");
			parent.div_cmpgDpms.fn_setTrgtCustAlctDpms("10", edt_home_tlno.value);
		break;
		
		case btn_change: //전환 버튼
			parent.div_cmpgDpms.ds_auto_trgtCustAlct.clearData();
			parent.div_cmpgDpms.ds_auto_trgtCustAlct.addRow();
			parent.div_cmpgDpms.ds_auto_trgtCustAlct.copyRow(parent.div_cmpgDpms.ds_auto_trgtCustAlct.rowposition,parent.div_cmpgDpms.ds_trgtCustAlct,parent.div_cmpgDpms.ds_trgtCustAlct.rowposition);
			parent.div_cmpgDpms.ds_auto_trgtCustAlct.setColumn(parent.div_cmpgDpms.ds_auto_trgtCustAlct.rowposition,'prmv_id',parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition,'prmv_id'));
	
			ap_MDITabFrame.form.lfn_activeTabpage(gds_OpenList.getColumn(0,'WINKEY')); // 탭페이지 이동
			for(var i=0;i<ap_WorkFrame.all.length; i++){
				if (ap_WorkFrame.all[i].prgmCode =='DL500001') {//if (ap_WorkFrame.all[i].prgmCode =='PS020001') { //인바운드 화면
					var sMemNo = "";
					var tarType = parent.div_cmpgInfo.ds_list_subTrgtList.getColumn(0,'trgt_list_extc_typ_cd');
					
					//ap_WorkFrame.all[i].form.div_Work.div_member.fn_init("click");				 // 회원 초기화
					ap_WorkFrame.all[i].form.div_Work.div_member.fn_srch_cust(edt_mem_no.value); // 회원 조회
					ap_WorkFrame.all[i].form.div_Work.div_cons_memo.fn_init();        			 // 상담 초기화
					ap_WorkFrame.all[i].form.div_Work.div_cons_memo.fn_endTotalConsHr();		 // 상담시간 종료
					ap_WorkFrame.all[i].form.div_Work.div_cons_memo.edt_totl_cons_hr.value = ""; // 상담시간 초기화
					ap_WorkFrame.all[i].form.div_Work.div_product.fn_endRecHr();				 // 부분 녹취 종료
					ap_WorkFrame.all[i].form.div_Work.div_product.edt_rec_dual_hr.value = "";	 // 부분 녹취시간 초기화
					if(parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition,'hgrn_hrch_cd') == '4000'){
						ap_WorkFrame.all[i].form.div_Work.div_cons_memo.tab_cons.tp_cons1.div_cons1.acpg_chnl_cd.value = "30";
					}else{
						ap_WorkFrame.all[i].form.div_Work.div_cons_memo.tab_cons.tp_cons1.div_cons1.acpg_chnl_cd.value = "20";
					}
					
					if(tarType == '50') {
						ap_WorkFrame.all[i].form.div_Work.div_product.btn_uplus.visible = true;
						ap_WorkFrame.all[i].form.div_Work.div_product.btn_direct.visible = false;
					} else if (tarType == '40') {
						ap_WorkFrame.all[i].form.div_Work.div_product.btn_uplus.visible = false;
						ap_WorkFrame.all[i].form.div_Work.div_product.btn_direct.visible = true;
					} else {
						ap_WorkFrame.all[i].form.div_Work.div_product.btn_uplus.visible = false;
						ap_WorkFrame.all[i].form.div_Work.div_product.btn_direct.visible = false;
					}
				}
			}
		break;
		
		case btn_join: //가입버튼
			
			//(tarType == '30') newtype 가입대상자 리스트
			var tarType = parent.div_cmpgInfo.ds_list_subTrgtList.getColumn(0,'trgt_list_extc_typ_cd');
			
			if (tarType == '30'){
				init_cmpg_newtypejoin_process();
			} else if (tarType == '40'){
				init_cmpg_directjoin_process();
			} else if (tarType == '50'){
				init_cmpg_uplusjoin_process();
			} else {
				init_cmpg_join_process();
			}
			
		break;
	
		case btn_makeSms: //문자발송
		
			var nRowIdx = 0;
			nRowIdx = parent.div_cmpgInfo.ds_cmpg_srch.findRow('cmpg_id',parent.div_cmpgInfo.cbo_srch_cmpg.value);
			var sPrmr = {mem_nm:edt_cust_nm.value, cell:edt_clph_tlno.value, mem_no:edt_mem_no.value,
				cmpg_id:parent.div_cmpgInfo.cbo_srch_cmpg.value,
				trgt_cust_dtpt_id:parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition,'trgt_cust_dtpt_id'),
				sub_trgt_list_id:parent.div_cmpgInfo.ds_list_subTrgtList.getColumn(parent.div_cmpgInfo.ds_list_subTrgtList.rowposition,'sub_trgt_list_id'),
				trgt_list_id:parent.div_cmpgInfo.ds_cmpg_srch.getColumn(nRowIdx , 'trgt_list_id')
			};
									
			var reVal = gfn_diaLog("문자발송", -1, -1, 884, 601, "PS990000::PS994000.xfdl", false, sPrmr, false, false, true);
		break;
		
		/* ================================================================
 		 * 날짜 : 20180207
 		 * 이름 : 송준빈
 		 * 추가내용 : NICE 전송버튼 클릭 이벤트
 		 * ================================================================
 		 */
		case btn_niceFirstSend :
			if (btn_niceFirstSend.text == "NICE전송"){
				//trace('fn_sendNiceFirst();')
				fn_sendNiceFirst();
			} else {
				fn_resendNiceFirst();
				//trace('//fn_resendNiceFirst();')
			}
			
		break;				
	 }
}

function init_cmpg_join_process()
{
	/*
		date : 20190802
		memo : 아웃바운드 시 가입버튼 클릭시 이벤트 (ASIS타입)
	*/
	parent.div_cmpgDpms.ds_auto_trgtCustAlct.clearData();
	parent.div_cmpgDpms.ds_auto_trgtCustAlct.addRow();
	parent.div_cmpgDpms.ds_auto_trgtCustAlct.copyRow(parent.div_cmpgDpms.ds_auto_trgtCustAlct.rowposition,parent.div_cmpgDpms.ds_trgtCustAlct,parent.div_cmpgDpms.ds_trgtCustAlct.rowposition);
	parent.div_cmpgDpms.ds_auto_trgtCustAlct.setColumn(parent.div_cmpgDpms.ds_auto_trgtCustAlct.rowposition,'prmv_id',parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition,'prmv_id'));
	
	
	init_main_ui() // 상담업무화면 초기화 
	
	//2018.02.08 생년월일, CI_VAL, GENDER, CREDIT_RATING, SAFEKEY...캠페인이 홈쇼핑일때 추가....
	//if (parent.div_cmpgInfo.cbo_srch_cmpg.value == "CMP201609222273793")
	
	var tarType = parent.div_cmpgInfo.ds_list_subTrgtList.getColumn(0,'trgt_list_extc_typ_cd');
	
	var sbrthMonDay = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "brth_mon_day");
	var sciVal = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "ci_val");
	var sgender = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "gender");
	var screditRating = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "credit_rating");
	var sSafekey = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "safekey");
				
	var sPrmr = {p_tarType:tarType, p_mem_nm:edt_cust_nm.value, p_home_tel:edt_home_tlno.value, p_cell:edt_clph_tlno.value, p_wrpl_tel:edt_comp_tlno.value, p_brth_mon_day:sbrthMonDay, p_ciVal:sciVal, p_gender:sgender, p_safekey:sSafekey};
	
	/*
	if (elect_Sign_yn == "Y")
	{
		var sbrthMonDay = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "brth_mon_day");
		var sciVal = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "ci_val");
		var sgender = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "gender");
		var screditRating = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "credit_rating");
		var sSafekey = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "safekey");
					
		var sPrmr = {p_mem_nm:edt_cust_nm.value, p_home_tel:edt_home_tlno.value, p_cell:edt_clph_tlno.value, p_wrpl_tel:edt_comp_tlno.value, p_brth_mon_day:sbrthMonDay, p_ciVal:sciVal, p_gender:sgender, p_safekey:sSafekey};
	}
	else
	{
		var sPrmr = {p_mem_nm:edt_cust_nm.value, p_home_tel:edt_home_tlno.value, p_cell:edt_clph_tlno.value, p_wrpl_tel:edt_comp_tlno.value, p_brth_mon_day:sbrthMonDay};
	}
	*/	
	
	//var reVal = gfn_diaLog("회원 등록", -1, -1, 884, 601, "PS020000::PS020408.xfdl", false, sPrmr, false, false, true);
	var reVal = gfn_diaLog("회원 등록", -1, -1, 884, 601, "DL500000::DL50000101P01.xfdl", false, sPrmr, false, false, true);
}

function init_cmpg_newtypejoin_process()
{
	/*
		date : 20190802
		memo : 아웃바운드 시 가입버튼 클릭시 이벤트 (신규 대상 목록 타입)
	*/
	
// 	var ci_val = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "ci_val");
// 	var ord_mst_idx = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "ord_mst_idx");
// 	
 	//alert(ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, ""));
 	 	
 	var sChk = "0";
 	var sTrgt_list_id = parent.div_cmpgInfo.ds_list_subTrgtList.getColumn(0,'trgt_list_id');
 	var sciVal = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "ci_val");				//ci값
 	var scustNm = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "cust_nm"); 				//고객명
 	var sCell = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "clph_tlno"); 				//핸드폰번호
 	
 	/*
 	if(sTrgt_list_id == "TAR201907243101180" || sTrgt_list_id == "TAR202105119262672") { //TAR201907243101180(브랜즈에셋) TAR202007294803226(에이엔젯)
		var sPrmr = {p_ci_val:sciVal, 
					 p_trgt_list_id:sTrgt_list_id, 
					 p_mem_nm:scustNm, 
					 p_cell:gfn_Replace(sCell, "-", ""), 
					 p_url:'PS21000102'};	
		var reVal = gfn_diaLog("전자서명 가입", -1, -1, 719, 388, "PS210000::PS21000101P02.xfdl", true, sPrmr, false, true, true, null ,null ,true);
		
		if(!gfn_isNull(reVal)) {
		
			init_main_ui(); // 상담업무화면 초기화 
			
			if(!gfn_isNull(reVal.getColumn(0, "mem_no"))) {
				ap_MDITabFrame.form.lfn_activeTabpage(gds_OpenList.getColumn(0,'WINKEY')); // 탭페이지 이동
				for(var i=0;i<ap_WorkFrame.all.length; i++){
					if (ap_WorkFrame.all[i].prgmCode =='DL500001') {//if (ap_WorkFrame.all[i].prgmCode =='PS020001') { //인바운드 화면
						ap_WorkFrame.all[i].form.div_Work.div_member.fn_srch_cust(reVal.getColumn(0, "mem_no"));
					}
				}
				//gv_accnt_no = reVal.getColumn(0, "accnt_no");
			} else {
				sChk = "1"
			}
		}
 	} else {
		sChk = "1"
 	}
 	
 	*/
 	init_main_ui(); // 상담업무화면 초기화 
 	sChk = "1"
	if(sChk == "1") {
		var starType = parent.div_cmpgInfo.ds_list_subTrgtList.getColumn(0,'trgt_list_extc_typ_cd');
//		var scustNm = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "cust_nm"); 				//고객명
//		var sCell = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "clph_tlno"); 				//핸드폰번호
		var sbrthMonDay = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "brth_mon_day"); 	//생년월일
//		var sciVal = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "ci_val");				//ci값
		var sgender = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "gender");				//성별
		var screditRating = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "credit_rating");	//신용등급
		var sSafekey = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "safekey");				//safekey
		var sMAgree = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "market_agree");			//마케팅동의
		var sSmsYn = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "sms_yn");				//SMS동의
		var sDmYn = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "dm_yn");					//DM동의
		var sEmYn = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "email_yn");					//이메일동의
		var sTellYn = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "tel_yn");				//전화동의
		var sMarryYn = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "marry_yn");			//결혼여부
		var iChildCnt = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "child_cnt");			//자식수
		var sPassYn = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "acuon_fitness_yn");		//신용등급PASS
		var sRegdm = ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "rgsn_dttm");				//신용등록일
		
		
		var sPrmr2 = { p_tarType:starType,
					  p_mem_nm:scustNm, 
					  p_cell:sCell,
					  p_brth_mon_day:sbrthMonDay,
					  p_ciVal:sciVal,
					  p_gender:sgender,
					  p_safekey:sSafekey,
					  p_MAgree:sMAgree,
					  p_SmsYn:sSmsYn,
					  p_DmYn:sDmYn,
					  p_EmYn:sEmYn,
					  p_TellYn:sTellYn,
					  p_MarryYn:sMarryYn,
					  p_ChildCnt:iChildCnt,
					  p_PassYn:sPassYn,
					  p_Regdm:sRegdm,
					  p_screditRating:screditRating
					};
					
		//신규등록창 					
		//var reVal = gfn_diaLog("회원 등록", -1, -1, 884, 601, "PS020000::PS020408.xfdl", false, sPrmr, false, false, true);						     						
		var reVal2 = gfn_diaLog("회원 등록", -1, -1, 884, 601, "DL500000::DL50000101P01.xfdl", false, sPrmr2, false, false, true);
	}
}

function init_main_ui(){

	/* 아웃바운드 -> 상담메인 시 화면 초기화 */
	ap_MDITabFrame.form.lfn_activeTabpage(gds_OpenList.getColumn(0,'WINKEY')); // 탭페이지 이동
	for (var i=0; i<ap_WorkFrame.all.length; i++) {
		//if (ap_WorkFrame.all[i].prgmCode =='PS020001') { //인바운드 화면
		trace("xxxxxxxxxxxxxxxxxxxxx" +  ap_WorkFrame.all[i].prgmCode);
		if (ap_WorkFrame.all[i].prgmCode =='DL500001') { //인바운드 화면
			ap_WorkFrame.all[i].form.div_Work.div_member.fn_init("click");				 // 회원 초기화
			ap_WorkFrame.all[i].form.div_Work.div_cons_memo.fn_init();        			 // 상담 초기화
			ap_WorkFrame.all[i].form.div_Work.div_cons_memo.fn_endTotalConsHr();		 // 상담시간 종료
			ap_WorkFrame.all[i].form.div_Work.div_cons_memo.edt_totl_cons_hr.value = ""; // 상담시간 초기화
			ap_WorkFrame.all[i].form.div_Work.div_product.fn_endRecHr();				 // 부분 녹취 종료
			ap_WorkFrame.all[i].form.div_Work.div_product.edt_rec_dual_hr.value = "";	 // 부분 녹취시간 초기화
			
			//접수채널 초기화 (TM)
			if(parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition,'hgrn_hrch_cd') == '4000'){
				ap_WorkFrame.all[i].form.div_Work.div_cons_memo.tab_cons.tp_cons1.div_cons1.acpg_chnl_cd.value = "30";
			}else{
				ap_WorkFrame.all[i].form.div_Work.div_cons_memo.tab_cons.tp_cons1.div_cons1.acpg_chnl_cd.value = "20";
			}
		}
	}
}


function phone_onkillfocus(obj:Edit, e:KillFocusEventInfo)
{
	obj.value = gfn_phoneNumStr(obj.value);
}

// 전화번호 설정
function phone_ontextchanged(obj:Edit,  e:TextChangedEventInfo)
{
	obj.value = gfn_phoneNumStr(obj.value);
	obj.setCaretPos(-1);
}

// 예약 DIV 닫기 버튼 클릭 이벤트 핸들러
function fn_cmpgReserveClose(obj:Button,  e:ClickEventInfo)
{
	parent.div_cmpgInfo.fn_hideReserve();
}

// 예약 DIV 확인 버튼 클릭 이벤트 핸들러
function fn_cmpgReserveConfirm(obj:Button,  e:ClickEventInfo)
{
	var accnt_no = div_reserve.edt_accnt_no.value;
	var reserve_dthms = div_reserve.edt_reserve_proc_dt.value + "" + div_reserve.medt_time.value;
	reserve_dthms = reserve_dthms.replace(":","");
	parent.div_cmpgInfo.fn_selectRow(reserve_dthms);
	parent.div_cmpgInfo.fn_hideReserve();
}

function btn_makeSms_test_onclick(obj:Button,  e:ClickEventInfo)
{
	/*************************************************
	2017.09.26 김준호 알림톡 아웃바운드 추가수정
	**************************************************/
	
	var user_nm = gds_UserInfo.getColumn(0,"user_nm");	// 현재 로그인한 사람 이름
	var user_id = gds_UserInfo.getColumn(0,"user_id");	// 현재 로그인한 사람 사번
	alert(edt_cust_nm.value);
		var sPrmr = {mem_nm:edt_cust_nm.value, cell:edt_clph_tlno.value, mem_no:edt_mem_no.value,
				cmpg_id:parent.div_cmpgInfo.cbo_srch_cmpg.value,
				trgt_cust_dtpt_id:parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition,'trgt_cust_dtpt_id'),
				sub_trgt_list_id:parent.div_cmpgInfo.ds_list_subTrgtList.getColumn(parent.div_cmpgInfo.ds_list_subTrgtList.rowposition,'sub_trgt_list_id'), p_gubun : "DL50000102" , delay :  '', cnsl_man:user_nm
			};
	//var sPrmr = {mem_no:edt_mem_no.value, mem_nm:edt_cust_nm.value ,cnsl_man:user_nm, cell:edt_clph_tlno.value , p_accnt_no : edt_mem_no.value  , p_gubun : "PS02000102" , delay :  '' };
	var reVal = gfn_diaLog("문자발송", -1, -1, 884, 601, "PS990000::PS994000_1.xfdl", false,sPrmr, false, false, true);
}


/* ================================================================
 * 날짜 : 20180207
 * 이름 : 송준빈
 * 추가내용 : NICE 전송
 * ================================================================
 */
function fn_sendNiceFirst()
{
	if(fn_sendNiceFirstValidation() == true)
	{
		//niceSendingFlag = "Y";
		/* (고객타겟리스트 [캠페인]) 정보 추가 insert 대상 정보 */
		ds_trgtCustAlct.clearData();
		ds_trgtCustAlct.addRow();
		
		ds_trgtCustAlct.setColumn(0, "cntr_cd"          , parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "cntr_cd"          ));
		ds_trgtCustAlct.setColumn(0, "trgt_list_id"     , parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "trgt_list_id"     ));
		ds_trgtCustAlct.setColumn(0, "sub_trgt_list_id" , parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "sub_trgt_list_id" ));
		ds_trgtCustAlct.setColumn(0, "trgt_cust_dtpt_id", parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "trgt_cust_dtpt_id"));

		sPreSelectTrgtCustDtptId = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "trgt_cust_dtpt_id");
		
		var szSvcid       = "insertNiceInfomation";
		var szController  = "/web/nice/insertNiceInfomation";
		var szInDs        = "ds_input1=ds_list_trgtCust ds_input2=ds_trgtCustAlct"; // ds_input1 에는 생년월일이 들어가 있음.(그밖엔 사용자 정보 휴대폰번호, 이름등이 있음) , ds_input2에는 기준키값이 있음.(캠페인 ID, 서브타켓리스트, 고객타켓ID)
		var szOutDs       = "";
		var szParam       = "";
		var szRetCallback = "fn_callBack";

		// 트랜젝션 공통함수 호출
		gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
	}
}
/* ================================================================
 * 날짜 : 20180207
 * 이름 : 송준빈
 * 추가내용 : NICE 1차 전송시 VALIDATION 체크
 * ================================================================
 */
function fn_sendNiceFirstValidation()
{
	if(gfn_isNull(ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "brth_mon_day")) == true)
	{
		alert("생년월일을 정확히 입력하여 주십시오. [입력방식 : YYYYMMDD]");
		brth_mon_day.setFocus();
		return false;
	}
	
	if(gfn_isYMD(ds_list_trgtCust.getColumn(ds_list_trgtCust.rowposition, "brth_mon_day")) == false)
	{
		alert("생년월일을 정확히 입력하여 주십시오. [입력방식 : YYYYMMDD]");
		brth_mon_day.setFocus();
		return false;
	}
		
	return true;
}

/* ================================================================
 * 날짜 : 20180625
 * 이름 : 송준빈
 * 추가내용 : NICE 재전송
 * ================================================================
 */
function fn_resendNiceFirst()
{
	if(fn_resendNiceFirstValidation() == true)
	{
		//niceSendingFlag = "Y";
		/* (고객타겟리스트 [캠페인]) 정보 추가 insert 대상 정보 */
		ds_trgtCustAlct.clearData();
		ds_trgtCustAlct.addRow();
		
		ds_trgtCustAlct.setColumn(0, "cntr_cd"          , parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "cntr_cd"          ));
		ds_trgtCustAlct.setColumn(0, "trgt_list_id"     , parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "trgt_list_id"     ));
		ds_trgtCustAlct.setColumn(0, "sub_trgt_list_id" , parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "sub_trgt_list_id" ));
		ds_trgtCustAlct.setColumn(0, "trgt_cust_dtpt_id", parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "trgt_cust_dtpt_id"));
		
		var szSvcid       = "resendKaKao";
		var szController  = "/web/nice/resendKaKao";
		var szInDs        = "ds_input1=ds_list_trgtCust ds_input2=ds_trgtCustAlct"; // ds_input1 에는 생년월일이 들어가 있음.(그밖엔 사용자 정보 휴대폰번호, 이름등이 있음) , ds_input2에는 기준키값이 있음.(캠페인 ID, 서브타켓리스트, 고객타켓ID)
		var szOutDs       = "";
		var szParam       = "";
		var szRetCallback = "fn_callBack";

		// 트랜젝션 공통함수 호출
		gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
	}
}
/* ================================================================
 * 날짜 : 20180625
 * 이름 : 송준빈
 * 추가내용 : NICE 1차 재전송시 VALIDATION 체크
 * ================================================================
 */
function fn_resendNiceFirstValidation()
{
	sPreSelectTrgtCustDtptId = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "trgt_cust_dtpt_id");
			
	var nUppTxType = parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition;
	var sUppTxType = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(nUppTxType, "upp_tx_type");
	
	return true;
}

// 2018.04.09 사용자 정의8 클립보드 복사...
function btn_copy_onclick(obj:Button,  e:ClickEventInfo)
{
	var sDefn8  = edt_user_defn8_cntn.value;
	if (gfn_isNull(sDefn8) == false)
	{
		system.setClipboard("CF_TEXT", sDefn8);
	}	
}

function fn_niceSendPostProcess(sProcessName)
{
	var idx = 0;
	if(sProcessName == "insertNiceInfomation")
	{
		alert("NICE 인증 접수되었습니다!");	
		idx = parent.div_cmpgInfo.ds_list_trgtCustAlct.findRow("trgt_cust_dtpt_id", sPreSelectTrgtCustDtptId);
		parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition = idx;
		
	}
	else if(sProcessName == "resendKaKao")
	{
		alert("NICE 인증 재전송 되었습니다.");
			
		idx = parent.div_cmpgInfo.ds_list_trgtCustAlct.findRow("trgt_cust_dtpt_id", sPreSelectTrgtCustDtptId);
		parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition = idx;
		
		var nUppTxType = parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition;
		var sUppTxType = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(nUppTxType, "upp_tx_type");
	
	
		
		
		idx = parent.div_cmpgInfo.ds_list_trgtCustAlct.findRow("trgt_cust_dtpt_id", sPreSelectTrgtCustDtptId);
		parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition = idx;
	}
	else if(sProcessName == "sendNiceCancel")
	{
		alert("NICE 인증 취소 되었습니다.");
		idx = parent.div_cmpgInfo.ds_list_trgtCustAlct.findRow("trgt_cust_dtpt_id", sPreSelectTrgtCustDtptId);
		parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition = idx;
		
		var nUppTxType = parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition;
		var sUppTxType = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(nUppTxType, "upp_tx_type");
		
		idx = parent.div_cmpgInfo.ds_list_trgtCustAlct.findRow("trgt_cust_dtpt_id", sPreSelectTrgtCustDtptId);
		parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition = idx;
	}
	else
	{
		alert("exception process.");
	}
}

function fn_NiceCancelValidation()
{
	sPreSelectTrgtCustDtptId = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "trgt_cust_dtpt_id");
		
	var sUpp_tx_type = ds_list_trgtCust.getColumn(0, "upp_tx_type");
	
	if(sUpp_tx_type == "03")
	{
		alert("해당고객의 상태가 [신용정보취득]상태입니다. 취소전문발송이 불가능합니다.");
		return false;
	}
	if(sUpp_tx_type == "04")
	{
		alert("해당고객의 상태가 [2차접수완료]상태입니다. 상담화면에서 취소하여 주십시오.");
		return false;
	}
	if(sUpp_tx_type == "05")
	{
		alert("해당고객의 상태가 [위탁처리]상태입니다. 상담화면에서 취소하여 주십시오.");
		return false;
	}
	if(sUpp_tx_type == "06")
	{
		alert("해당고객의 상태가 [고객가입완료]상태입니다. 취소전문발송이 불가능합니다.");
		return false;
	}
	return true;
}

function btn_NiceCancel_onclick(obj:Button,  e:ClickEventInfo)
{
	if(fn_NiceCancelValidation() == true)
	{	
		var szSvcid       = "sendNiceCancel";
		var szController  = "/web/nice/sendNiceCancel";
		var szInDs        = "ds_input1=ds_list_trgtCust";
		var szOutDs       = "";
		var szParam       = "";
		var szRetCallback = "fn_callBack";

		// 트랜젝션 공통함수 호출
		gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
	}
}


function init_cmpg_directjoin_process()
{
	var ci_val = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "ci_val");
	var ord_mst_idx = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "ord_mst_idx");
	
	
		var sPrmr = {p_ci_val:ci_val, p_ord_mst_idx:ord_mst_idx, p_url:'PS21000102'};	
		var reVal = gfn_diaLog("다이렉트 상품관리", -1, -1, 719, 388, "PS210000::PS21000101P01.xfdl", true, sPrmr, false, true, true, null ,null ,true);
		
		
		if(!gfn_isNull(reVal)) {
			ds_list_direct.loadXML(reVal);
//			init_cmpg_directjoin_process();

			init_main_ui() // 상담업무화면 초기화 
			
			var starType = parent.div_cmpgInfo.ds_list_subTrgtList.getColumn(0,'trgt_list_extc_typ_cd');
			var scustNm = ds_list_direct.getColumn(0, "mem_nm"); 				//고객명
			var sCell = ds_list_direct.getColumn(0, "cell"); 				//핸드폰번호
			var sHomeTelNo = ds_list_direct.getColumn(0, "home_tel_no"); 				//자택전화번호			
			var sbrthMonDay = ds_list_direct.getColumn(0, "brth_mon_day"); 	//생년월일
			var sciVal = ds_list_direct.getColumn(0, "ci_val");				//ci값
			var sgender = "";				//성별
			
			if(ds_list_direct.getColumn(0, "sex") == 'M' || ds_list_direct.getColumn(0, "sex") == '0001') {
				sgender = '0001';
			} else {
				sgender = '0002';
			}
			
			var sHomeZip = ds_list_direct.getColumn(0, "home_zip");			//우편번호
			var sHomeAddr = ds_list_direct.getColumn(0, "home_addr");			//주소
			var sHomeAddr2 = ds_list_direct.getColumn(0, "home_addr2");			//주소2
			var sEmail = ds_list_direct.getColumn(0, "email");			//이메일
			
			var sMAgree = ds_list_direct.getColumn(0, "markt_agr_yn");			//마케팅동의
			var sSmsYn = ds_list_direct.getColumn(0, "sms_yn");				//SMS동의
			var sDmYn = ds_list_direct.getColumn(0, "dm_yn");					//DM동의
			var sEmYn = ds_list_direct.getColumn(0, "email_yn");					//이메일동의
			var sTellYn = ds_list_direct.getColumn(0, "tel_yn");				//전화동의
			var sMarryYn = ds_list_direct.getColumn(0, "marry_yn");			//결혼여부
			var iChildCnt = ds_list_direct.getColumn(0, "child_cnt");			//자식수
			
			var sPrmr = { p_tarType:starType,
						  p_mem_nm:scustNm, 
						  p_cell:sCell,
						  p_homeTelNo:sHomeTelNo,
						  p_brth_mon_day:sbrthMonDay,
						  p_ciVal:sciVal,
						  p_gender:sgender,
						  p_HomeZip:sHomeZip,
						  p_HomeAddr:sHomeAddr,
						  p_HomeAddr2:sHomeAddr2,
						  p_Email:sEmail,
						  p_MAgree:sMAgree,
						  p_SmsYn:sSmsYn,
						  p_DmYn:sDmYn,
						  p_EmYn:sEmYn,
						  p_TellYn:sTellYn,
						  p_MarryYn:sMarryYn,
						  p_ChildCnt:iChildCnt
						};
						
			//신규등록창 					
			//var reVal = gfn_diaLog("회원 등록", -1, -1, 884, 601, "PS020000::PS020408.xfdl", false, sPrmr, false, false, true);						     						
			var reVal = gfn_diaLog("회원 등록", -1, -1, 884, 601, "DL500000::DL50000101P01.xfdl", false, sPrmr, false, false, true);
		}
}

function init_cmpg_uplusjoin_process() 
{
	var ci_val = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "ci_val");
	var ord_mst_idx = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "ord_mst_idx");
	var id_no = parent.div_cmpgInfo.ds_list_trgtCustAlct.getColumn(parent.div_cmpgInfo.ds_list_trgtCustAlct.rowposition, "id_no");
		
		trace('-----------id_no2:'+id_no);
		
		var sPrmr = {p_id_no:id_no, p_url:'PS21000102'};	
		var reVal = gfn_diaLog("유플러스 상품관리", -1, -1, 719, 388, "PS210000::PS21000101P03.xfdl", true, sPrmr, false, true, true, null ,null ,true);
		
		
		if(!gfn_isNull(reVal)) {
			ds_list_uplus.loadXML(reVal);
//			init_cmpg_directjoin_process();

			init_main_ui() // 상담업무화면 초기화 
			
			var starType = parent.div_cmpgInfo.ds_list_subTrgtList.getColumn(0,'trgt_list_extc_typ_cd');
			var sCustNm = ds_list_uplus.getColumn(0, "name"); 				//고객명
			var sCell = ds_list_uplus.getColumn(0, "hp"); 				//핸드폰번호
			var sHomeTelNo = ds_list_uplus.getColumn(0, "home_tel"); 				//자택전화번호			
			var sbrthMonDay = ds_list_uplus.getColumn(0, "brth_mon_day"); 	//생년월일
			var sciVal = ds_list_uplus.getColumn(0, "ci_val");				//ci값
			var sgender = "";				//성별
			
			if(ds_list_uplus.getColumn(0, "sex") == 'M' || ds_list_uplus.getColumn(0, "sex") == '0001') {
				sgender = '0001';
			} else {
				sgender = '0002';
			}
			
			var sHomeZip = ds_list_uplus.getColumn(0, "home_zip");			//우편번호
			var sHomeAddr = ds_list_uplus.getColumn(0, "home_addr");			//주소
			var sHomeAddr2 = ds_list_uplus.getColumn(0, "home_addr2");			//주소2
			
//			var sEmail = ds_list_uplus.getColumn(0, "email");			//이메일
			
//			var sMAgree = ds_list_uplus.getColumn(0, "markt_agr_yn");			//마케팅동의
//			var sSmsYn = ds_list_uplus.getColumn(0, "sms_yn");				//SMS동의
//			var sDmYn = ds_list_uplus.getColumn(0, "dm_yn");					//DM동의
//			var sEmYn = ds_list_uplus.getColumn(0, "email_yn");					//이메일동의
//			var sTellYn = ds_list_uplus.getColumn(0, "tel_yn");				//전화동의
//			var sMarryYn = ds_list_uplus.getColumn(0, "marry_yn");			//결혼여부
//			var iChildCnt = ds_list_uplus.getColumn(0, "child_cnt");			//자식수
			
// 			var sPrmr = { p_tarType:starType,
// 						  p_mem_nm:sCustNm, 
// 						  p_cell:sCell
// 						};
			var sPrmr = { p_tarType:"50",
						  p_mem_nm:sCustNm, 
						  p_cell:sCell,
						  p_homeTelNo:sHomeTelNo,
						  p_brth_mon_day:sbrthMonDay,
						  p_ciVal:sciVal,
						  p_gender:sgender,
						  p_HomeZip:sHomeZip,
						  p_HomeAddr:sHomeAddr,
						  p_HomeAddr2:sHomeAddr2,
						  p_Email:"",
						  p_MAgree:"",
						  p_SmsYn:"",
						  p_DmYn:"",
						  p_EmYn:"",
						  p_TellYn:"",
						  p_MarryYn:"",
						  p_ChildCnt:"",
						  p_safekey:""
						};
						
			//신규등록창 					
			//var reVal = gfn_diaLog("회원 등록", -1, -1, 884, 601, "PS020000::PS020408.xfdl", false, sPrmr, false, false, true);						     						
			var reVal = gfn_diaLog("회원 등록", -1, -1, 884, 601, "DL500000::DL50000101P01.xfdl", false, sPrmr, false, false, true);
		}
}]]></Script>
  </Form>
</FDL>

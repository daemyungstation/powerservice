<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="DL411500_01" classname="srch_dept_pop" inheritanceid="" position="absolute 0 0 598 305" onload="DL420503_onload" scrollbars="none" titletext="가수금 등록 및 환불처리">
    <Layouts>
      <Layout>
        <Static id="stc_popup" class="sta_popupBg1" enable="false" position="absolute 0 0 596 305"/>
        <Button id="btn_Close" taborder="0" onclick="btn_close_onclick" class="btn_popupClose" position="absolute 572 8 592 27"/>
        <Static id="stc_30" text="고객청구 환불관리 상세내역" class="sta_popupTitle" transparenthittest="true" position="absolute 10 5 312 25"/>
        <Static id="sta_GrayLine" class="sta_WF_Line1" position="absolute 5 62 591 63"/>
        <Static id="stc_17" class="sta_workData" position="absolute 97 63 593 89"/>
        <Static id="stc_01" onclick="div_Work_tab_02_tabpage1_stc_01_onclick" class="sta_workData" position="absolute 98 88 593 114"/>
        <Static id="stc_09" text="등록일자" class="sta_workLabel1" position="absolute 5 88 110 114" style="font:Dotum,8;" validate=""/>
        <Static id="stc_11" text="회원번호" class="sta_workLabel1" position="absolute 5 63 110 89" style="font:Dotum,8;" validate=""/>
        <Edit id="edt_accnt_no" taborder="32" enable="true" position="absolute 112 65 274 87" readonly="true"/>
        <Static id="stc_25" text="고객청구환불 정보" onclick="div_Work_tab_01_cms_stc_25_onclick" class="sta_workTitle2" position2="absolute l:5 w:234 t:42 h:20" positiontype="position2"/>
        <Static id="stc_04" onclick="div_Work_tab_02_tabpage1_stc_01_onclick" class="sta_workData" position="absolute 98 113 593 139"/>
        <Static id="stc_05" text="입금회차" class="sta_workLabel1" position="absolute 276 88 370 114" style="font:Dotum,8;" validate=""/>
        <Static id="stc_06" text="환불상세금액" class="sta_workLabel1" position="absolute 5 113 110 139" style="font:Dotum,8;" validate=""/>
        <Static id="stc_07" text="PAYBIT" class="sta_workLabel1" position="absolute 5 138 110 164" style="font:Dotum,8;" validate="" wordwrap="none"/>
        <Static id="stc_08" onclick="div_Work_tab_02_tabpage1_stc_01_onclick" class="sta_workData" position="absolute 109 138 593 164"/>
        <Static id="stc_10" text="비고" class="sta_workLabel1" position="absolute 765 218 870 244" style="font:Dotum,8;" validate="" visible="false"/>
        <Calendar id="cal_pay_day" taborder="45" dateformat="yyyy-MM-dd" editformat="yyyy-MM-dd" oneditclick="Calendar00_oneditclick" position="absolute 112 92 209 111" value="null" enable="false"/>
        <Static id="stc_14" text="회원명" class="sta_workLabel1" position="absolute 276 63 370 89" style="font:Dotum,8;" validate=""/>
        <Edit id="edt_mem_nm" taborder="47" onkeydown="edt_accnt_onkeydown" position="absolute 371 65 590 87" enable="false"/>
        <Edit id="edt_pay_no" taborder="49" position="absolute 371 91 590 111" style="align:right middle;" inputtype="number" enable="false"/>
        <Edit id="edt_note" taborder="50" position="absolute 872 221 1308 241" style="align:right middle;" enable="false" visible="false"/>
        <Static id="stc_12" text="환불상세관리" onclick="div_Work_tab_01_cms_stc_25_onclick" class="sta_workTitle2" position2="absolute l:5 w:105 t:193 h:20" positiontype="position2"/>
        <Static id="sta_GrayLine00" class="sta_WF_Line1" position="absolute 5 215 591 216"/>
        <Static id="stc_13" class="sta_workData" position="absolute 97 216 591 242"/>
        <Static id="stc_15" onclick="div_Work_tab_02_tabpage1_stc_01_onclick" class="sta_workData" position="absolute 98 241 591 267"/>
        <Static id="stc_16" text="은행코드" class="sta_workLabel1" position="absolute 5 241 110 267" style="font:Dotum,8;" validate=""/>
        <Static id="stc_18" text="환불일자" class="sta_workLabel1" position="absolute 5 216 110 242" style="font:Dotum,8;" validate=""/>
        <Static id="stc_19" onclick="div_Work_tab_02_tabpage1_stc_01_onclick" class="sta_workData" position="absolute 98 266 591 292"/>
        <Static id="stc_20" text="계좌카드번호" class="sta_workLabel1" position="absolute 292 241 386 267" style="font:Dotum,8;" validate=""/>
        <Static id="stc_21" text="예금주" class="sta_workLabel1" position="absolute 5 266 110 292" style="font:Dotum,8;" validate=""/>
        <Edit id="edt_rf_note" taborder="61" position="absolute 388 269 588 289" style="align:right middle;"/>
        <Calendar id="cal_refund_day" taborder="62" dateformat="yyyy-MM-dd" editformat="yyyy-MM-dd" position="absolute 112 219 208 238" value="null"/>
        <Static id="stc_22" text="환불금액" class="sta_workLabel1" position="absolute 292 216 386 242" style="font:Dotum,8;" validate=""/>
        <Edit id="edt_bank_accnt_no" taborder="65" position="absolute 388 244 588 264" style="align:right middle;" inputtype="number"/>
        <Edit id="edt_depr" taborder="66" position="absolute 112 269 274 289" style="align:right middle;"/>
        <Static id="stc_23" text="비고" wordwrap="none" class="sta_workLabel1" position="absolute 292 266 386 292" style="font:Dotum,8;" validate=""/>
        <Edit id="edt_bankCd" taborder="67" inputtype="number" onkeydown="edt_onkeydown" position2="absolute l:112 w:49 t:245 h:22" positiontype="position2"/>
        <Edit id="edt_bankNm" taborder="68" onkeydown="edt_onkeydown" position2="absolute l:162 w:91 t:245 h:22" positiontype="position2"/>
        <Button id="btn_bank" taborder="69" onclick="btn_onclick" class="btn_workSrcPop" position2="absolute l:254 w:20 t:245 h:20" positiontype="position2"/>
        <MaskEdit id="edt_refund_amt" taborder="72" displaynulltext="0" mask="###,###" position="absolute 872 188 1035 208" enable="false" visible="true"/>
        <MaskEdit id="edt_refund_amt_save" taborder="76" displaynulltext="0" mask="###,###" class="mae_clssEnable" position="absolute 388 219 588 239"/>
        <Button id="btn_delete" taborder="77" text="삭제" onclick="btn_onclick" position="absolute 519 39 591 59" style="border:0 none #000000ff ;padding:0 0 0 0;" visible="false"/>
        <Edit id="edt_pay_bit" taborder="78" onkeydown="edt_accnt_onkeydown" enable="false" position="absolute 112 141 275 161"/>
        <Edit id="edt_result_key" taborder="79" onkeydown="edt_accnt_onkeydown" enable="false" position="absolute 211 92 274 111" visible="false"/>
        <Static id="stc_03" text="납입방법" class="sta_workSrcLabel1" position="absolute 112 192 169 212"/>
        <Combo id="cbo_pay_mthd" taborder="82" text="전체" codecolumn="codecolumn" datacolumn="datacolumn" index="0" position="absolute 176 192 245 212" enable="false">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn">04</Col>
                <Col id="datacolumn">CMS</Col>
              </Row>
              <Row>
                <Col id="codecolumn">06</Col>
                <Col id="datacolumn">Card</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Div id="div_dtlCMSButtonList" taborder="83" style="border:0 solid #808080ff ;color:#333333ff;" position="absolute 363 188 591 215" visible="false">
          <Layouts>
            <Layout>
              <Button id="btn_dtlSave" taborder="6" text="저장" onclick="btn_onclick" position="absolute 151 3 223 23" style="border:0 none #000000ff ;padding:0 0 0 0;" anchor="default" visible="true" enable="false"/>
              <Button id="btn_update" taborder="7" text="수정" onclick="btn_onclick" position="absolute 77 3 149 23" style="border:0 none #000000ff ;padding:0 0 0 0;" anchor="default" enable="true"/>
              <Button id="btn_insert" taborder="8" text="입금반영" onclick="btn_onclick" position="absolute 3 3 75 23" style="border:0 none #000000ff ;padding:0 0 0 0;" anchor="default" visible="true" enable="false"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_dtlCardButtonList" taborder="81" style="border:0 solid #808080ff ;color:#333333ff;" position="absolute 267 188 591 215" visible="false">
          <Layouts>
            <Layout width="305" height="27">
              <Button id="btn_cancel" taborder="0" text="결재취소" onclick="btn_onclick" position="absolute 247 3 319 23" tooltiptext="결재취소" style="border:0 none #000000ff ;padding:0 0 0 0;" anchor="default"/>
              <Static id="return_msg" position="absolute 76 6 241 22" style="border:1 solid red ;" anchor="default"/>
              <Static id="stc_07" text="결과" wordwrap="none" class="sta_workLabel1" position="absolute 25 4 69 24" style="padding:8 10 4 15;align:center middle;font:Dotum,8;" validate="" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="stc_00" text="상조금" class="sta_workLabel1" position="absolute 109 113 180 139" style="font:Dotum,8;" validate=""/>
        <Static id="stc_02" text="결합금" class="sta_workLabel1" position="absolute 276 113 347 139" style="font:Dotum,8;" validate=""/>
        <Static id="stc_24" text="추가금" class="sta_workLabel1" position="absolute 441 113 512 139" style="font:Dotum,8;" validate=""/>
        <MaskEdit id="edt_true_amt" taborder="89" displaynulltext="0" mask="###,###" enable="false" visible="true" position="absolute 181 116 275 136"/>
        <MaskEdit id="edt_rel_amt" taborder="90" displaynulltext="0" mask="###,###" enable="false" visible="true" position="absolute 348 116 440 136"/>
        <MaskEdit id="edt_add_amt" taborder="91" displaynulltext="0" mask="###,###" enable="false" visible="true" position="absolute 514 116 590 136"/>
        <Div id="div_dtlNauthCardButtonList" taborder="92" style="border:0 solid #808080ff ;color:#333333ff;" visible="false" position="absolute 267 188 591 215">
          <Layouts>
            <Layout width="305" height="27">
              <Button id="btn_cancel" taborder="1" text="무승인취소" onclick="btn_onclick" position="absolute 247 3 319 23" tooltiptext="결재취소" style="border:0 none #000000ff ;padding:0 0 0 0;" anchor="default"/>
              <Static id="return_msg" position="absolute 76 6 241 22" style="border:1 solid red ;" anchor="default"/>
              <Static id="stc_07" text="결과" wordwrap="none" class="sta_workLabel1" position="absolute 25 4 69 24" style="padding:8 10 4 15;align:center middle;font:Dotum,8;" validate="" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_inqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="model_cl_cd" type="STRING" size="256"/>
          <Column id="prod_kind" type="STRING" size="256"/>
          <Column id="popup_yn" type="STRING" size="256"/>
          <Column id="del_fg" type="STRING" size="256"/>
          <Column id="mst_seq" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="prod_nm" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_listMemberReqRefundTemp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="resn_seq" type="STRING" size="256"/>
          <Column id="resn_amt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_dtlList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="gasu_seq" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="refund_day" type="STRING" size="256"/>
          <Column id="refund_amt" type="STRING" size="256"/>
          <Column id="bank_accnt_no" type="STRING" size="256"/>
          <Column id="bank_cd" type="STRING" size="256"/>
          <Column id="bank_nm" type="STRING" size="256"/>
          <Column id="depr" type="STRING" size="256"/>
          <Column id="note" type="STRING" size="256"/>
          <Column id="reg_dm" type="STRING" size="256"/>
          <Column id="reg_man" type="STRING" size="256"/>
          <Column id="chk_yn" type="STRING" size="256"/>
          <Column id="mode" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bank" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="6"/>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bankInqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cd" type="STRING" size="256"/>
          <Column id="cd_nm" type="STRING" size="256"/>
          <Column id="grp_cd" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accntInqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srch_typ" type="STRING" size="256"/>
          <Column id="srch_vl" type="STRING" size="256"/>
          <Column id="option" type="STRING" size="256"/>
          <Column id="ns_yn" type="STRING" size="256"/>
          <Column id="popup_yn" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_accnt_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="page_indx" type="STRING" size="6"/>
          <Column id="accnt_no" type="STRING" size="100"/>
          <Column id="mem_no" type="STRING" size="100"/>
          <Column id="mem_nm" type="STRING" size="100"/>
          <Column id="home_tel" type="STRING" size="100"/>
          <Column id="cell" type="STRING" size="100"/>
          <Column id="wrpl_tel" type="STRING" size="100"/>
          <Column id="idn_no" type="STRING" size="100"/>
          <Column id="prod_cd" type="STRING" size="100"/>
          <Column id="prod_nm" type="STRING" size="100"/>
          <Column id="prod_amt" type="STRING" size="100"/>
          <Column id="mon_pay_amt" type="STRING" size="100"/>
          <Column id="expr_no" type="STRING" size="100"/>
          <Column id="emple_no" type="STRING" size="100"/>
          <Column id="emple_nm" type="STRING" size="100"/>
          <Column id="appfm_no" type="STRING" size="100"/>
          <Column id="join_dt" type="STRING" size="100"/>
          <Column id="compt_dt" type="STRING" size="100"/>
          <Column id="bef_emple_cd" type="STRING" size="100"/>
          <Column id="pay_perd" type="STRING" size="100"/>
          <Column id="pay_mthd" type="STRING" size="100"/>
          <Column id="join_prod" type="STRING" size="100"/>
          <Column id="new_chan_gunsu" type="STRING" size="100"/>
          <Column id="certf_rcv_chk" type="STRING" size="100"/>
          <Column id="pay_stat_1no" type="STRING" size="100"/>
          <Column id="ichae_dt" type="STRING" size="100"/>
          <Column id="bank_accnt_no" type="STRING" size="100"/>
          <Column id="old_mid" type="STRING" size="100"/>
          <Column id="reg_dm" type="STRING" size="100"/>
          <Column id="reg_man" type="STRING" size="100"/>
          <Column id="upd_dm" type="STRING" size="100"/>
          <Column id="upd_man" type="STRING" size="100"/>
          <Column id="accnt_stat" type="STRING" size="100"/>
          <Column id="total_pay" type="STRING" size="100"/>
          <Column id="last_no" type="STRING" size="100"/>
          <Column id="real_pay_no" type="STRING" size="100"/>
          <Column id="ded_no" type="STRING" size="100"/>
          <Column id="join_cl" type="STRING" size="100"/>
          <Column id="trans_gubun" type="STRING" size="100"/>
          <Column id="brth_mon_day" type="STRING" size="100"/>
          <Column id="pay_mthd" type="STRING" size="100"/>
          <Column id="emp_cell" type="STRING" size="100"/>
          <Column id="join_stat" type="STRING" size="100"/>
          <Column id="pay_stat" type="STRING" size="100"/>
          <Column id="pay_no" type="STRING" size="100"/>
          <Column id="pay_allt_no" type="STRING" size="100"/>
          <Column id="pay_add_no" type="STRING" size="100"/>
          <Column id="pay_amt" type="STRING" size="100"/>
          <Column id="pay_allt_amt" type="STRING" size="100"/>
          <Column id="pay_add_amt" type="STRING" size="100"/>
          <Column id="model_cl_nm" type="STRING" size="100"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_listMemberReqRefund" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="reg_dm" type="STRING" size="256"/>
          <Column id="pay_mthd" type="STRING" size="256"/>
          <Column id="req_pay_no" type="STRING" size="256"/>
          <Column id="pay_amt" type="STRING" size="256"/>
          <Column id="pay_bit" type="STRING" size="256"/>
          <Column id="refund_etc" type="STRING" size="256"/>
          <Column id="result_key" type="STRING" size="256"/>
          <Column id="ichae_no" type="STRING" size="256"/>
          <Column id="ichae_cd" type="STRING" size="256"/>
          <Column id="depr" type="STRING" size="256"/>
          <Column id="tid" type="STRING" size="256"/>
          <Column id="del_fg" type="STRING" size="256"/>
          <Column id="req_day" type="STRING" size="256"/>
          <Column id="prod_cd" type="STRING" size="256"/>
          <Column id="bid" type="STRING" size="256"/>
          <Column id="true_amt" type="STRING" size="256"/>
          <Column id="rel_amt" type="STRING" size="256"/>
          <Column id="add_amt" type="STRING" size="256"/>
          <Column id="refund_dt" type="STRING" size="256"/>
          <Column id="auth_yn" type="STRING" size="256"/>
          <Column id="cncl_del_fg" type="STRING" size="256"/>
          <Column id="franchisee_no" type="STRING" size="256"/>
          <Column id="ini_yn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rgsnDtl" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="mem_nm" type="STRING" size="256"/>
          <Column id="refund_day" type="STRING" size="256"/>
          <Column id="pay_mthd" type="STRING" size="256"/>
          <Column id="req_pay_no" type="STRING" size="256"/>
          <Column id="pay_amt" type="STRING" size="256"/>
          <Column id="pay_bit" type="STRING" size="256"/>
          <Column id="refund_etc" type="STRING" size="256"/>
          <Column id="result_key" type="STRING" size="256"/>
          <Column id="ichae_no" type="STRING" size="256"/>
          <Column id="ichae_cd" type="STRING" size="256"/>
          <Column id="depr" type="STRING" size="256"/>
          <Column id="reg_dm" type="STRING" size="256"/>
          <Column id="mode" type="STRING" size="256"/>
          <Column id="del_fg" type="STRING" size="256"/>
          <Column id="req_day" type="STRING" size="256"/>
          <Column id="refund_dt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_refundInfo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="min_req_pay_no" type="STRING" size="256"/>
          <Column id="max_req_pay_no" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_refundProcess" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="accnt_no" type="STRING" size="256"/>
          <Column id="pay_mthd" type="STRING" size="256"/>
          <Column id="req_day" type="STRING" size="256"/>
          <Column id="result_key" type="STRING" size="256"/>
          <Column id="req_pay_no" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item5" compid="cal_pay_day" propid="value" datasetid="ds_listMemberReqRefund" columnid="reg_dm"/>
      <BindItem id="item4" compid="edt_note" propid="value" datasetid="ds_listMemberReqRefund" columnid="refund_etc"/>
      <BindItem id="item0" compid="edt_accnt_no" propid="value" datasetid="ds_listMemberReqRefund" columnid="accnt_no"/>
      <BindItem id="item1" compid="edt_mem_nm" propid="value" datasetid="ds_listMemberReqRefund" columnid="mem_nm"/>
      <BindItem id="item3" compid="edt_pay_no" propid="value" datasetid="ds_listMemberReqRefund" columnid="req_pay_no"/>
      <BindItem id="item2" compid="edt_refund_amt" propid="value" datasetid="ds_listMemberReqRefund" columnid="pay_amt"/>
      <BindItem id="item6" compid="edt_pay_bit" propid="value" datasetid="ds_listMemberReqRefund" columnid="pay_bit"/>
      <BindItem id="item7" compid="edt_result_key" propid="value" datasetid="ds_listMemberReqRefund" columnid="result_key"/>
      <BindItem id="item8" compid="cbo_pay_mthd" propid="value" datasetid="ds_listMemberReqRefund" columnid="pay_mthd"/>
      <BindItem id="item9" compid="cal_refund_day" propid="value" datasetid="ds_listMemberReqRefund" columnid="refund_dt"/>
      <BindItem id="item10" compid="edt_refund_amt_save" propid="value" datasetid="ds_listMemberReqRefund" columnid="pay_amt"/>
      <BindItem id="item11" compid="edt_rf_note" propid="value" datasetid="ds_listMemberReqRefund" columnid="refund_etc"/>
      <BindItem id="item12" compid="edt_bank_accnt_no" propid="value" datasetid="ds_listMemberReqRefund" columnid="ichae_no"/>
      <BindItem id="item13" compid="edt_bankCd" propid="value" datasetid="ds_listMemberReqRefund" columnid="ichae_cd"/>
      <BindItem id="item14" compid="edt_depr" propid="value" datasetid="ds_listMemberReqRefund" columnid="depr"/>
      <BindItem id="item18" compid="edt_true_amt" propid="value" datasetid="ds_listMemberReqRefund" columnid="true_amt"/>
      <BindItem id="item19" compid="edt_rel_amt" propid="value" datasetid="ds_listMemberReqRefund" columnid="rel_amt"/>
      <BindItem id="item20" compid="edt_add_amt" propid="value" datasetid="ds_listMemberReqRefund" columnid="add_amt"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/********************************************************************************************/
/* 1. Include Library include, variables Declaration 영역                                  */
/********************************************************************************************/
include "LIB::lib_All.xjs";

var tc_custAcnt = 0;
var gv_chkIUMode = "none"
var rslt_cd; // 나이스 결제취소 [성공 : 03, 실패 : 01]
var rslt_nm; // 나이스 결제취소시 returg_msg

var pAccntNo;
var pMemNm;
var pRegDm;
var pReqPayNo;
var pPayAmt;
var pRefundEtc;
var pPayBit;
var pPayMthd;
var pResultKey;
var pIchaeNo;
var pIchaeCd;
var pDepr;
var pDelFg;
var pReqDay;
var pTrueAmt;
var pRelAmt;
var pAddAmt;
var pRefundDt;
var pAuthYn;
var pCnclDelFg;

/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트) 처리                                           	*/
/********************************************************************************************/
function DL420503_onload(obj:Form, e:LoadEventInfo)
{
	gfn_initForm(obj);
	gfn_createPagingDataset(obj); // 페이징처리 위한 데이터셋 설정
	
	fn_init();
	
	// 회원의 환불회차정보 가져오기
	fn_commSearch(gfn_getCommTypeInit(), "getRefundReqNoOfAccnt");
}


/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
function fn_callBack(svcid, errcd, errmsg) 
{
	if (errcd != 0) 
	{
	
	} 
	else 
	{
		switch (svcid) 
		{
			case "srchOcbProdList":
				
			break;
			
			case "getDlwCodeList":
				if (ds_bank.getRowCount() > 1) 
				{
					btn_Bank_onclick();
				} 
				else if (ds_bank.getRowCount() == 1) 
				{
					edt_bankCd.value = ds_bank.getColumn(0, "cd");
					edt_bankNm.value = ds_bank.getColumn(0, "cd_nm");
				} 
				else 
				{
					edt_bankCd.value = "";
					edt_bankNm.value = "";
				}
			break;
			
			case "selectCustaccntList":
				if(tc_custAcnt == 1) 
				{
					fn_setAccntNo();
				} 
				else if (tc_custAcnt > 1) 
				{
					btn_accnt_onclick(null, "Y");
				} 
				else 
				{
					edt_accnt_no.value = "";
					edt_mem_nm.value = "";
				}			
			break;
			
			/* 2018.12.07 사용하지 않음
			case "getMemberRefundDetail":
				if (ds_listMemberReqRefund.getRowCount() > 0) 
				{
					if(ds_dtlList.getRowCount() >0) 
					{
						fn_setDetail();
					}
				} 
				else 
				{
					alert("존재하지않는 정보입니다.");
					close();
				}
			break;
			*/
			
			case "deleteMemberRefundMng":
				alert("삭제가 완료되었습니다.");
		        opener.fn_commSearch(gfn_getCommTypeInit(), "getMemberRefundList"); // 조회
				close();
			break;
			
			// CMS 정보저장시 
			case "mergeMemberRefundDtl":
				alert("저장이 완료되었습니다.");
				opener.fn_commSearch(gfn_getCommTypeInit(), "getMemberRefundList"); // 조회
				
				//close();
				// CMS 정보저장 후, 버튼 control
				div_dtlCMSButtonList.btn_update.enable = true;
				div_dtlCMSButtonList.btn_dtlSave.enable = false;
				
				// CMS 은행코드, 계좌, 예금주 정보가 있는 경우만 입금반영 가능하도록
				if( !gfn_isNull(edt_bankCd.value)
				 && !gfn_isNull(edt_bank_accnt_no.value)
				 && !gfn_isNull(edt_depr.value)
				) {
					div_dtlCMSButtonList.btn_insert.enable = true;
				}
				
				cal_refund_day.enable = false;
				edt_bankCd.enable = false;
				edt_bankNm.enable = false;
				btn_bank.enable = false;
				edt_bank_accnt_no.enable = false;
				edt_depr.enable = false;
				edt_rf_note.enable = false;
				
				//gv_chkIUMode = "none";
				//fn_initDtlInfoBox();
				//fn_dtlModeBtnCtrl("default");
				///fn_commSearch(gfn_getCommTypeInit(), "getMemberRefundDetail");
			break;
			
			case "deleteMemberRefundDtl":
				alert("삭제가 완료되었습니다.");
				gv_chkIUMode = "none";
				
				//fn_initDtlInfoBox();
				//fn_dtlModeBtnCtrl("default");
				//fn_commSearch(gfn_getCommTypeInit(), "getMemberRefundDetail");
			break;
			
			// 회원의 환불회차정보 가져오기
			case "getRefundReqNoOfAccnt":
				trace(ds_refundInfo.saveXML());
				
				// 회원의 환불회차정보에 따라 버튼 control
				fn_control_btn_by_refundInfo();
				
				// 2018.12.05 입금완료가 아닌 경우 삭제, 환불처리 불가하도록
				if(pDelFg != 'C') {
					btn_delete.visible = false;
					div_dtlCardButtonList.visible = false;
					div_dtlCMSButtonList.visible = false;
				}
			break;
			
			// CMS 입금(취소)반영
			case "updateByCmsRefundProcess":
				alert("입금반영완료");
				
				// 재조회
		        opener.fn_commSearch(gfn_getCommTypeInit(), "getMemberRefundList"); // 조회
		        close();
			break;
			
			// 카드취소
			case "pymnCancelNicePay":
				// 취소 성공시
				if(rslt_cd == "03") {
					alert("취소가 완료되었습니다.");
					
					// 재조회
					opener.fn_commSearch(gfn_getCommTypeInit(), "getMemberRefundList");
					close();
				}
				// 취소 실패시
				else {
					div_dtlCardButtonList.return_msg.text = rslt_nm; // 취소 메시지 표시
				}
			break;
			case "cancelNauthpay":
				alert("무승인 취소가 청구되었습니다.");
					
					// 재조회
				opener.fn_commSearch(gfn_getCommTypeInit(), "getMemberRefundList");
				close();
			break;
		}
	}
}



/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/
function fn_preSearch(sType,svcid) 
{
	if (sType == gfn_getCommTypeInit())
	{
		switch(svcid) 
		{
			case "srchOcbProdList": 
				ds_inqCndt.keystring = ""; // 정렬컬럼 초기화
			
				ds_inqCndt.clearData();
				ds_inqCndt.addRow();
			
				ds_inqCndt.setColumn(0, "seq", ds_ocbProd_info.getColumn(0, "seq"));
				ds_inqCndt.setColumn(0, "orderBy", "seq");
				ds_inqCndt.setColumn(0, "orderDirection", "asc");
			break;
		}
	}
	
	return true;
}


function fn_preSave(svcid) 
{
	switch(svcid) 
	{
	    // CMS 정보저장시
		case "mergeMemberRefundDtl": 
			if (gfn_isNull(cal_refund_day.value)) 
			{
				alert("환불일자를 입력하세요.");
				cal_refund_day.setFocus();
				return false;
			}

			if (ds_listMemberReqRefund.getColumn(0,"pay_mthd") == "CMS")
			{
				if (gfn_isNull(edt_bankCd.value)) 
				{
					alert("은행코드를 입력하세요.");
					edt_bankCd.setFocus();
					return false;
				}
			
				if (gfn_isNull(edt_bank_accnt_no.value)) 
				{
					alert("계좌번호를 입력하세요.");
					edt_bank_accnt_no.setFocus();
					return false;
				}
			
				if (gfn_isNull(edt_depr.value)) 
				{
					alert("예금주를 입력하세요.");
					edt_depr.setFocus();
					return false;
				}
			}
				
			if (gfn_isNull(edt_refund_amt_save.value)) 
			{
				alert("환불금액을 입력하세요.");
				edt_refund_amt_save.setFocus();
				return false;
			}

			if(!confirm("저장하시겠습니까?")) 
			{
				return false;
			}
		
			ds_rgsnDtl.clearData();
			var nRow = ds_rgsnDtl.addRow();
		
			ds_rgsnDtl.setColumn(nRow, "mode", gv_chkIUMode);
			ds_rgsnDtl.setColumn(nRow, "accnt_no", edt_accnt_no.value)
			ds_rgsnDtl.setColumn(nRow, "ichae_cd", edt_bankCd.value);
			ds_rgsnDtl.setColumn(nRow, "ichae_no", edt_bank_accnt_no.value);
			ds_rgsnDtl.setColumn(nRow, "depr", edt_depr.value);
			ds_rgsnDtl.setColumn(nRow, "pay_mthd", cbo_pay_mthd.value);
			ds_rgsnDtl.setColumn(nRow, "reg_dm", cal_refund_day.value);
			ds_rgsnDtl.setColumn(nRow, "result_key", edt_result_key.value);
			ds_rgsnDtl.setColumn(nRow, "del_fg", pDelFg);
			ds_rgsnDtl.setColumn(nRow, "req_day", pReqDay);
			ds_rgsnDtl.setColumn(nRow, "refund_dt", cal_refund_day.value);
			ds_rgsnDtl.setColumn(nRow, "refund_etc", edt_rf_note.value);
		break;
		
		// (CMS) 입금취소반영시
		case "updateByCmsRefundProcess":
			ds_refundProcess.clearData();
			var nRow = ds_refundProcess.addRow();
			
			ds_refundProcess.setColumn(nRow, "accnt_no", edt_accnt_no.value);
			ds_refundProcess.setColumn(nRow, "pay_mthd", cbo_pay_mthd.value);
			ds_refundProcess.setColumn(nRow, "req_day", pReqDay);
			ds_refundProcess.setColumn(nRow, "result_key", edt_result_key.value);
			ds_refundProcess.setColumn(nRow, "req_pay_no", edt_pay_no.value);
		break;
	}

	return true;
}


/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)                                                   	*/
/********************************************************************************************/
//조회
function fn_commSearch(sType, svcid) 
{
	var szSvcid       = "";
    var szController  = "";
    var szInDs        = "";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "";
    
    switch(svcid) 
    {
        /* 2018.12.07 사용하지 않음
        case "getMemberRefundDetail": 
			szSvcid       = "getMemberRefundDetail";
			szController  = "/dlw/pay/getMemberRefundDetail";
			szInDs        = "";
			szOutDs       = "ds_listMemberReqRefund=ds_output ds_dtlList=ds_outputDtl";
			szParam       = "";
			szRetCallback = "fn_callBack";
        break;
        */
        
        // 회원의 환불회차정보 가져오기
        case "getRefundReqNoOfAccnt":
			szSvcid       = "getRefundReqNoOfAccnt";
			szController  = "/dlw/pay/getRefundReqNoOfAccnt";
			szInDs        = "ds_input=ds_listMemberReqRefund";
			szOutDs       = "ds_refundInfo=ds_output";
			szParam       = "";
			szRetCallback = "fn_callBack";
        break;
    }
    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback, false);
}

//저장
function fn_commSave(svcid)
{
	var szSvcid       = "";
    var szController  = "";
    var szInDs        = "";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "";
    
    switch(svcid) 
    {
		// 환불삭제
        case "deleteMemberRefundMng": 
			szSvcid       = "deleteMemberRefundMng";
			szController  = "/dlw/pay/deleteMemberRefundMng";
			szInDs        = "ds_input=ds_listMemberReqRefund";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";
        break;
        
        // CMS 정보저장시
        case "mergeMemberRefundDtl": 
        if (!fn_preSave("mergeMemberRefundDtl")) return false;
			szSvcid       = "mergeMemberRefundDtl";
			szController  = "/dlw/pay/mergeMemberRefundDtl";
			szInDs        = "ds_input=ds_rgsnDtl";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";
        break;
        
        case "deleteMemberRefundDtl": 
			szSvcid       = "deleteMemberRefundDtl";
			szController  = "/dlw/pay/deleteMemberRefundDtl";
			szInDs        = "";
			szOutDs       = "";
			szParam       = "gasu_seq=" + p_seq + " seq=" + edt_seq.value;
			szRetCallback = "fn_callBack";
        break;
		
	    // 카드취소 
        case "pymnCancelNicePay":		
			szSvcid       = "pymnCancelNicePay";
			szController  = "/dlw/pay/cancel-realtime";
			szInDs        = "ds_input=ds_listMemberReqRefund";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";
        break;
        
        // CMS 입금(취소)반영
        case "updateByCmsRefundProcess":
        if (!fn_preSave("updateByCmsRefundProcess")) return false;
			szSvcid       = "updateByCmsRefundProcess";
			szController  = "/dlw/pay/updateByCmsRefundProcess";
			szInDs        = "ds_input=ds_refundProcess";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";
        break;
        case "cancelNauthpay" :
        	szSvcid       = "cancelNauthpay";
			szController  = "/dlw/pay/cancel-nauthpay";
			szInDs        = "ds_input=ds_listMemberReqRefund";
			szOutDs       = "";
			szParam       = "";
			szRetCallback = "fn_callBack";
        break;
    }
    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}




/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/
//초기화
function fn_init()
{
	pAccntNo   = gfn_BlankStr(p_accnt_no);
	pMemNm     = gfn_BlankStr(p_mem_nm);
	pRegDm     = gfn_BlankStr(p_reg_dm);
	pReqPayNo  = gfn_BlankStr(p_req_pay_no);
	pPayAmt    = gfn_BlankStr(p_pay_amt);
	pRefundEtc = gfn_BlankStr(p_refund_etc);
	pPayBit    = gfn_BlankStr(p_pay_bit);
	pPayMthd   = gfn_BlankStr(p_pay_mthd);
	pResultKey = gfn_BlankStr(p_result_key);
	pIchaeNo   = gfn_BlankStr(p_ichae_no);
    pIchaeCd   = gfn_BlankStr(p_ichae_cd);
    pDepr      = gfn_BlankStr(p_depr);
    pTid       = gfn_BlankStr(p_tid);
    pDelFg     = gfn_BlankStr(p_del_fg);
    pReqDay    = gfn_BlankStr(p_req_day);
    pTrueAmt   = gfn_BlankStr(p_true_amt);
    pRelAmt    = gfn_BlankStr(p_rel_amt);
    pAddAmt    = gfn_BlankStr(p_add_amt);
    pRefundDt  = gfn_BlankStr(p_refund_dt);
    pAuthYn    = gfn_BlankStr(p_auth_yn);
    pCnclDelFg = gfn_BlankStr(p_cncl_del_fg);
    pfranchisee_no = gfn_BlankStr(p_franchisee_no);

	ds_listMemberReqRefund.clearData();
	var nRow = ds_listMemberReqRefund.addRow();
	
	ds_listMemberReqRefund.setColumn(nRow, "accnt_no", pAccntNo);
	ds_listMemberReqRefund.setColumn(nRow, "mem_nm", pMemNm);
	ds_listMemberReqRefund.setColumn(nRow, "reg_dm", pRegDm);
	ds_listMemberReqRefund.setColumn(nRow, "req_pay_no", pReqPayNo);
	ds_listMemberReqRefund.setColumn(nRow, "pay_amt", pPayAmt);
	ds_listMemberReqRefund.setColumn(nRow, "refund_etc", pRefundEtc);
	ds_listMemberReqRefund.setColumn(nRow, "pay_bit", pPayBit);
	ds_listMemberReqRefund.setColumn(nRow, "pay_mthd", pPayMthd);
	ds_listMemberReqRefund.setColumn(nRow, "result_key", pResultKey);
	ds_listMemberReqRefund.setColumn(nRow, "ichae_no", pIchaeNo);
	ds_listMemberReqRefund.setColumn(nRow, "ichae_cd", pIchaeCd);
	ds_listMemberReqRefund.setColumn(nRow, "depr", pDepr);
	ds_listMemberReqRefund.setColumn(nRow, "tid", pTid);
	ds_listMemberReqRefund.setColumn(nRow, "del_fg", pDelFg);
	ds_listMemberReqRefund.setColumn(nRow, "req_day", pReqDay);
	ds_listMemberReqRefund.setColumn(nRow, "prod_cd", p_prod_cd);
	ds_listMemberReqRefund.setColumn(nRow, "bid", p_bid);
	ds_listMemberReqRefund.setColumn(nRow, "true_amt", pTrueAmt);
	ds_listMemberReqRefund.setColumn(nRow, "rel_amt", pRelAmt);
	ds_listMemberReqRefund.setColumn(nRow, "add_amt", pAddAmt);
	ds_listMemberReqRefund.setColumn(nRow, "refund_dt", pRefundDt);
	ds_listMemberReqRefund.setColumn(nRow, "auth_yn", pAuthYn);
	ds_listMemberReqRefund.setColumn(nRow, "cncl_del_fg", pCnclDelFg);
	ds_listMemberReqRefund.setColumn(nRow, "franchisee_no", pfranchisee_no);
	
	if(gfn_isNull(pIchaeCd) == false)
	{
		fn_bankSearch();
	}
	
	fn_dtlModeBtnCtrl('default');
}

function fn_dtlModeBtnCtrl(dtlMode)
{
	if (dtlMode == 'default') 
	{
		btn_delete.enable = true;
		
		cal_refund_day.enable = false;
		edt_refund_amt_save.enable = false;
		edt_bank_accnt_no.enable = false;
		edt_depr.enable = false;
		edt_rf_note.enable = false;
		edt_bankCd.enable = false;
		edt_bankNm.enable = false;
		btn_bank.enable = false;
		
		if(gfn_isNull(cal_refund_day.value))
			cal_refund_day.value = gfn_getToday();
		
		/*
		if(cbo_pay_mthd.value == "04")
		{
			div_dtlCMSButtonList.visible = true;
			div_dtlCardButtonList.visible = false;
			
			div_dtlCMSButtonList.btn_dtlSave.enable = false;
		}
		else if(cbo_pay_mthd.value == "06")
		{
			div_dtlCMSButtonList.visible = false;
			div_dtlCardButtonList.visible = true;
		}
		else
		{
			div_dtlCMSButtonList.visible = false;
			div_dtlCardButtonList.visible = false;
		}
		*/
	}
	else if (dtlMode == 'edit') // CMS 정보수정시
	{
		btn_delete.enable = false;

		div_dtlCMSButtonList.btn_insert.enable = false;
		div_dtlCMSButtonList.btn_update.enable = false;
		div_dtlCMSButtonList.btn_dtlSave.enable = true;

		//div_dtlCardButtonList.btn_cancel.enable = true;

		cal_refund_day.enable = false;
		edt_refund_amt_save.enable = false;
		edt_bank_accnt_no.enable = true;
		edt_depr.enable = true;
		edt_rf_note.enable = false;
		edt_bankCd.enable = true;
		edt_bankNm.enable = true;
		btn_bank.enable = true;
		
		// 환불일자 및 비고 수정 가능 - 2018.12.06
		cal_refund_day.enable = true;
		edt_rf_note.enable = true;
		
		if(cbo_pay_mthd.value == "04")
		{
			div_dtlCMSButtonList.visible = true;
			div_dtlCardButtonList.visible = false;
			div_dtlNauthCardButtonList.visible = false;
		}
		else if(cbo_pay_mthd.value == "06")
		{
			div_dtlCMSButtonList.visible = false;
			if(pAuthYn == "N") {
				div_dtlNauthCardButtonList.visible = true;
				if(pCnclDelFg == 'P') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 등록상태입니다.";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
				} else if (pCnclDelFg == 'N') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 산출상태입니다.";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
				} else if (pCnclDelFg == 'R') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 청구상태입니다.";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
				} else if (pCnclDelFg == 'C') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 성공상태입니다.";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
				} else if (pCnclDelFg == 'X') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 처리되었습니다";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
				} else if (pCnclDelFg == 'F') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 실패되었습니다";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
					btn_delete.visible = false;
				} else {
					div_dtlNauthCardButtonList.btn_cancel.visible = true;
				}
			} else {
				div_dtlCardButtonList.visible = true;
			}
		}
		else
		{
			div_dtlCMSButtonList.visible = false;
			div_dtlCardButtonList.visible = false;
			div_dtlNauthCardButtonList.visible = false;
		}
	}
}

/* 2018.12.07 사용하지 않음
function fn_setDetail()
{
	if (gv_chkIUMode == "update") 
	{
		alert("수정모드 입니다. 저장 혹은 취소 버튼을 누른 후 클릭하십시오.");
		return false;
	} 
	else if (gv_chkIUMode == "insert") 
	{
		alert("입력모드 입니다. 저장 혹은 취소 버튼을 누른 후 클릭하십시오.");
		return false;
	} 
	else 
	{
		div_dtlCMSButtonList.btn_insert.enable  = true;
		div_dtlCMSButtonList.btn_update.enable  = true;
		div_dtlCMSButtonList.btn_dtlSave.enable = false;

		div_dtlCardButtonList.btn_cancel.enable  = true;
		
		cal_refund_day.value = ds_dtlList.getColumn(ds_dtlList.rowposition, "refund_day");
		edt_refund_amt_save.value = ds_dtlList.getColumn(ds_dtlList.rowposition, "refund_amt");
		edt_bank_accnt_no.value = ds_dtlList.getColumn(ds_dtlList.rowposition, "bank_accnt_no");
		edt_depr.value = ds_dtlList.getColumn(ds_dtlList.rowposition, "depr");
		edt_rf_note.value = ds_dtlList.getColumn(ds_dtlList.rowposition, "note");
		edt_bankCd.value = ds_dtlList.getColumn(ds_dtlList.rowposition, "bank_cd");
		edt_bankNm.value = ds_dtlList.getColumn(ds_dtlList.rowposition, "bank_nm");
	}
}
*/

/* 사용하지 않음 - 2018.12.07 */
/*function fn_initDtlInfoBox()
{
	cal_refund_day.value = gfn_getToday();
	edt_bankCd.value = "";
	edt_bankNm.value = "";
	edt_refund_amt_save.value = "";
	edt_bank_accnt_no.value = "";
	edt_depr.value = "";
	edt_rf_note.value = "";
}*/


/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
function btn_close_onclick(obj:Button,  e:ClickEventInfo)
{
	close();
}

function edt_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 13) 
	{
		switch(obj) 
		{
			case edt_bankCd:
				fn_bankSearch();
			break;
			
			case edt_bankNm:
				fn_bankSearch();
			break;
		}
	}
}

function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj) 
	{
		case btn_bank:
			btn_Bank_onclick();
		break;
		
		case btn_delete:
			if(confirm("삭제하시겠습니까?")){
				fn_commSave("deleteMemberRefundMng");
			}
		break;
		
		// CMS 입금반영버튼
        case div_dtlCMSButtonList.btn_insert: 
			gv_chkIUMode = "insert";
			//fn_initDtlInfoBox();
			//fn_dtlModeBtnCtrl("edit");
			if(confirm("입금반영하시겠습니까?")) 
			{
				fn_commSave("updateByCmsRefundProcess");
			}
        break;
        
        // CMS 정보수정
        case div_dtlCMSButtonList.btn_update: 
			gv_chkIUMode = "update";
			fn_dtlModeBtnCtrl("edit");
        break;
        
        // CMS 정보저장
        case div_dtlCMSButtonList.btn_dtlSave:
			fn_commSave("mergeMemberRefundDtl");
        break;
        
        // 카드취소
        case div_dtlCardButtonList.btn_cancel:
			gv_chkIUMode = "none";
			//fn_dtlModeBtnCtrl("default");
			//fn_setDetail();
			fn_commSave("pymnCancelNicePay");
        break;
        
        case div_dtlNauthCardButtonList.btn_cancel:
			gv_chkIUMode = "none";
			fn_commSave("cancelNauthpay");
        break;
        
    }
}

/********************************************************************************************/
/**   8. 팝업 관련 이벤트(Event) Function                                                          	*/
/********************************************************************************************/
// 은행 조회 버튼 클릭
function btn_Bank_onclick(obj:Button,  e:ClickEventInfo)
{
	var sPrmr = { p_bank_nm:edt_bankNm.value };
	var reVal = gfn_diaLog("은행 조회", -1, -1, 884, 601, "PS990000::PS992500.xfdl", false, sPrmr, false, false, true);
	
	if( reVal != null )
	{
		if(reVal.getColumn(0, "cd") != "")
		{
		    edt_bankCd.value = reVal.getColumn(0, "cd");
		    edt_bankNm.value = reVal.getColumn(0, "cd_nm");
		}
	}
}

function fn_bankSearch()
{		
	ds_bankInqCndt.clearData();
	ds_bankInqCndt.addRow();
	ds_bankInqCndt.setColumn(0, "cd", edt_bankCd.value);
	ds_bankInqCndt.setColumn(0, "cd_nm", edt_bankNm.value);
	ds_bankInqCndt.setColumn(0, "grp_cd", "63");
	ds_bankInqCndt.setColumn(0, "orderBy", "cd");
	ds_bankInqCndt.setColumn(0, "orderDirection", "asc");
	
	var szSvcid       = "getDlwCodeList";
    var szController  = "/dlw/pay/getDlwCodeList";
    var szInDs        = "ds_input=ds_bankInqCndt";
    var szOutDs       = "ds_bank=ds_output";
    var szParam       = "svcid=getDlwCodeList";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
}

/* 사용하지 않음 - 2018.12.07
function grd_list_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	fn_setDetail();
}
*/

// 회원의 환불회차정보에 따라 버튼 control
function fn_control_btn_by_refundInfo()
{
	var minRefundReqNo = ds_refundInfo.getColumn(0, "min_req_pay_no");
	var maxRefundReqNo = ds_refundInfo.getColumn(0, "max_req_pay_no");
	
	// 환불회차정보가 가장 작은 경우
	if(minRefundReqNo == edt_pay_no.value) {
		// 삭제 가능
		btn_delete.visible = true;
	}
	
	// 환불회차정보가 가장 큰 경우
	if(maxRefundReqNo <= edt_pay_no.value) {
		// 취소 가능
		if(cbo_pay_mthd.value == "04") {
			div_dtlCMSButtonList.visible = true;
			
			// CMS의 경우 은행/계좌번호/예금주가 모두 입력이 되면 입금반영할 수 있도록 (TEMP)
			if( !gfn_isNull(edt_bankCd.value)
			 && !gfn_isNull(edt_bank_accnt_no.value)
			 && !gfn_isNull(edt_depr.value)
			) {
				div_dtlCMSButtonList.btn_insert.enable = true;
			}
		}
		else if(cbo_pay_mthd.value == "06") {
			if(pAuthYn == 'N') {
				div_dtlNauthCardButtonList.visible = true;
				
				if(pCnclDelFg == 'P') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 등록상태입니다.";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
					btn_delete.visible = false;
				} else if (pCnclDelFg == 'N') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 산출상태입니다.";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
					btn_delete.visible = false;
				} else if (pCnclDelFg == 'R') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 청구상태입니다.";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
					btn_delete.visible = false;
				} else if (pCnclDelFg == 'C') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 성공상태입니다.";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
					btn_delete.visible = false;
				} else if (pCnclDelFg == 'X') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 처리되었습니다";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
					btn_delete.visible = false;
				} else if (pCnclDelFg == 'F') {
					div_dtlNauthCardButtonList.return_msg.text = "무승인취소 실패되었습니다";
					div_dtlNauthCardButtonList.btn_cancel.visible = false;
					btn_delete.visible = false;
				} else {
					div_dtlNauthCardButtonList.btn_cancel.visible = true;
					btn_delete.visible = true;
				}
			} else {
				div_dtlCardButtonList.visible = true;
			}
		}
	}
	
	// 자유결제인 경우는 결재취소 버튼 open - 2019.02.15
	if(edt_pay_no.value == 999) {
		div_dtlCardButtonList.visible = true;
	}
}]]></Script>
  </Form>
</FDL>

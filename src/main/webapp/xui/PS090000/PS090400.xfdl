<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="PS090400" classname="캠페인관리" inheritanceid="" position="absolute 0 0 989 795" titletext="권한관리" onload="PS090400_onload">
    <Layouts>
      <Layout>
        <Static id="stc_25" text="프로그램 대분류 권한" class="sta_workTitle2" position2="absolute l:410 w:183 t:11px h:20" positiontype="position2"/>
        <Grid id="grd_list" taborder="1" useinputpanel="false" position2="absolute l:0 w:400 t:31px b:298" positiontype="position2" binddataset="ds_list_authority" autofitminwidth="400" autofittype="col" onheadclick="grd_onheadclick" oncellclick="grd_oncellclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="90"/>
                <Column size="232"/>
                <Column size="75"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="권한코드" id="athr_cd"/>
                <Cell col="1" text="권한명" id="athr_nm"/>
                <Cell col="2" text="순서" id="athr_sqnc"/>
              </Band>
              <Band id="body">
                <Cell text="bind:athr_cd"/>
                <Cell col="1" style="align:left;" text="bind:athr_nm"/>
                <Cell col="2" text="bind:athr_sqnc"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_modifyArthMajor" taborder="16" text="권한변경" class="btn_WF_Common" style="padding:0 0 0 0;" position2="absolute r:74 w:72 t:8 h:20" positiontype="position2" onclick="btn_onclick"/>
        <Static id="stc_01" class="sta_workData" position2="absolute l:95 w:305 b:237 h:26" positiontype="position2"/>
        <Static id="stc_02" text="권한 상세" class="sta_workTitle2" position2="absolute l:0 w:139 b:263 h:20" positiontype="position2"/>
        <Static id="stc_07" class="sta_workData" position2="absolute l:95 w:305 b:187 h:26" positiontype="position2"/>
        <Static id="stc_12" class="sta_workData" position2="absolute l:95 w:305 b:212 h:26" positiontype="position2"/>
        <Static id="stc_15" class="sta_workData" position2="absolute l:95 w:305 b:162 h:26" positiontype="position2"/>
        <Static id="stc_17" class="sta_workData" position2="absolute l:95 w:305 b:112 h:51" positiontype="position2"/>
        <Static id="stc_24" class="sta_workData" position2="absolute l:95 w:305 b:87 h:26" positiontype="position2"/>
        <Static id="stc_27" class="sta_workData" position2="absolute l:95 w:305 b:62 h:26" positiontype="position2"/>
        <Static id="stc_29" class="sta_workData" position2="absolute l:95 w:305 b:37 h:26" positiontype="position2"/>
        <Static id="stc_31" class="sta_workData" position2="absolute l:95 w:305 b:12 h:26" positiontype="position2"/>
        <Grid id="grd_list_majorPgmAthr" taborder="18" useinputpanel="false" position2="absolute l:410 r:0 t:31 b:70.19%" positiontype="position2" binddataset="ds_list_majorPgmAthr" autofitminwidth="1200" autofittype="col" oncellclick="grd_oncellclick" oncelldblclick="grd_oncelldblclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="100"/>
                <Column size="110"/>
                <Column size="298"/>
                <Column size="69"/>
                <Column size="81"/>
                <Column size="65"/>
                <Column size="63"/>
                <Column size="64"/>
                <Column size="59"/>
                <Column size="63"/>
                <Column size="73"/>
                <Column size="128"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="프로그램코드"/>
                <Cell col="1" text="프로그램명"/>
                <Cell col="2" text="프로그램경로"/>
                <Cell col="3" text="개별기능"/>
                <Cell col="4" text="등록"/>
                <Cell col="5" text="조회"/>
                <Cell col="6" text="수정"/>
                <Cell col="7" text="삭제"/>
                <Cell col="8" text="출력"/>
                <Cell col="9" text="엑셀"/>
                <Cell col="10" text="팝업오픈"/>
                <Cell col="11" text="엑셀주민등록번호"/>
              </Band>
              <Band id="body">
                <Cell text="bind:pgm_cd"/>
                <Cell col="1" style="align:left;" text="bind:pgm_nm" tooltiptype="mouse" tooltiptext="bind:pgm_nm"/>
                <Cell col="2" style="align:left;" text="bind:file_nm" tooltiptype="mouse" tooltiptext="bind:file_nm"/>
                <Cell col="3" displaytype="expr:indv_fnct_yn =='Y'?&quot;button&quot;:&quot;normal&quot;" edittype="none" style="cursor:EXPR(indv_fnct_yn =='Y'?&quot;hand&quot;:&quot;&quot;);" text="bind:indv_fnct_yn" expr="indv_fnct_yn =='Y'?&quot;추가&quot;:&quot;없음&quot;"/>
                <Cell col="4" text="bind:rgsn_yn"/>
                <Cell col="5" text="bind:inq_yn"/>
                <Cell col="6" text="bind:amnt_yn"/>
                <Cell col="7" text="bind:dltn_yn"/>
                <Cell col="8" text="bind:prit_yn"/>
                <Cell col="9" text="bind:xls_yn"/>
                <Cell col="10" text="bind:athr_ppup_yn"/>
                <Cell col="11" text="bind:xls_rrno_yn"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="stc_00" text="프로그램 소분류 권한" class="sta_workTitle2" position2="absolute l:410 w:183 t:66.16% h:20" positiontype="position2"/>
        <Static id="stc_04" text="프로그램 중분류 권한" class="sta_workTitle2" position2="absolute l:410 w:183 t:33.71% h:20" positiontype="position2"/>
        <Combo id="cbo_gds_cd" taborder="0" codecolumn="codecolumn" datacolumn="datacolumn" position2="absolute l:300 w:99 t:8 h:20" positiontype="position2" index="0" value="1" text="상담업무" onitemchanged="cbo_onitemchanged">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn">1</Col>
                <Col id="datacolumn">상담업무</Col>
              </Row>
              <Row>
                <Col id="codecolumn">2</Col>
                <Col id="datacolumn">관리업무</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="stc_03" text="제품선택" class="sta_workTitle2" position2="absolute l:0 w:183 t:11 h:20" positiontype="position2"/>
        <CheckBox id="chk_gds_cd_list_1" taborder="8" text="상담업무" onclick="CheckBox00_onclick" position2="absolute l:103 w:70 b:164 h:20" positiontype="position2" truevalue="1" readonly="true"/>
        <CheckBox id="chk_gds_cd_list_2" taborder="9" text="관리업무" onclick="CheckBox00_onclick" position2="absolute l:175 w:65 b:164 h:20" positiontype="position2" truevalue="2" readonly="true"/>
        <Combo id="cbo_athr_sqnc" taborder="7" innerdataset="@ds_orderList" codecolumn="id" datacolumn="name" position2="absolute l:97 w:101 b:189 h:22" positiontype="position2" readonly="true"/>
        <TextArea id="tea_athr_expi" taborder="10" position2="absolute l:97 w:301 b:115 h:46" positiontype="position2" readonly="true" wordwrap="both"/>
        <Button id="btn_create" taborder="2" onclick="btn_onclick" class="btn_WF_New" position2="absolute l:180 w:72 b:266 h:20" positiontype="position2" tooltiptext="신규" style="padding:0 0 0 0;"/>
        <Button id="btn_update" taborder="3" onclick="btn_onclick" class="btn_WF_Modif" position2="absolute l:254 w:72 b:266 h:20" positiontype="position2" tooltiptext="수정" style="padding:0 0 0 0;"/>
        <Button id="btn_delete" taborder="4" onclick="btn_onclick" class="btn_WF_Del" position2="absolute l:328 w:72 b:266 h:20" positiontype="position2" tooltiptext="삭제" style="padding:0 0 0 0;"/>
        <Button id="btn_save" taborder="27" onclick="btn_onclick" class="btn_WF_Save" position2="absolute l:423 w:72 b:-54 h:20" positiontype="position2" tooltiptext="신규" style="padding:0 0 0 0;"/>
        <Button id="btn_cancel" taborder="29" text="취소" onclick="btn_onclick" class="btn_Cancel" position2="absolute l:497 w:72 b:-54 h:20" positiontype="position2" tooltiptext="취소" style="padding:0 0 0 0;"/>
        <Static id="stc_30" text="수정일시" class="sta_workLabel1" validate="" position2="absolute l:0 w:96 b:12 h:26" positiontype="position2"/>
        <Static id="stc_28" text="수정자" class="sta_workLabel1" validate="" position2="absolute l:0 w:96 b:37 h:26" positiontype="position2"/>
        <Static id="stc_26" text="등록일시" class="sta_workLabel1" validate="" position2="absolute l:0 w:96 b:62 h:26" positiontype="position2"/>
        <Static id="stc_23" text="등록자" class="sta_workLabel1" validate="" position2="absolute l:0 w:96 b:87 h:26" positiontype="position2"/>
        <Static id="stc_08" text="권한설명" class="sta_workLabel1" validate="" position2="absolute l:0 w:96 b:112 h:51" positiontype="position2"/>
        <Static id="stc_16" text="업무권한" class="sta_workLabel1_P" validate="" position2="absolute l:0 w:96 b:162 h:26" positiontype="position2"/>
        <Static id="stc_06" text="순서" class="sta_workLabel1_P" validate="" position2="absolute l:0 w:96 b:187 h:26" positiontype="position2"/>
        <Static id="stc_10" text="권한명" class="sta_workLabel1_P" validate="" position2="absolute l:0 w:96 b:212 h:26" positiontype="position2"/>
        <Static id="stc_11" text="권한코드" class="sta_workLabel1_P" validate="" position2="absolute l:0 w:96 b:237 h:26" positiontype="position2"/>
        <Static id="sta_GrayLine00" onclick="div_Work00_sta_GrayLine_onclick" class="sta_WF_Line1" position2="absolute l:0 w:400 b:262 h:1" positiontype="position2"/>
        <Edit id="edt_rgsr_nm" taborder="11" readonly="true" class="edt_edit" position2="absolute l:97 w:300 b:90 h:20" positiontype="position2"/>
        <Edit id="edt_rgsn_dttm" taborder="12" readonly="true" class="edt_edit" position2="absolute l:97 w:300 b:65 h:20" positiontype="position2"/>
        <Edit id="edt_amnd_nm" taborder="13" readonly="true" class="edt_edit" position2="absolute l:97 w:300 b:40 h:20" positiontype="position2"/>
        <Edit id="edt_amnt_dttm" taborder="14" readonly="true" class="edt_edit" position2="absolute l:97 w:301 b:15 h:20" positiontype="position2"/>
        <Edit id="edt_athr_cd" taborder="5" readonly="true" class="edt_edit" position2="absolute l:97 w:300 b:240 h:20" positiontype="position2"/>
        <Edit id="edt_athr_nm" taborder="6" class="edt_edit" position2="absolute l:97 w:300 b:215 h:20" positiontype="position2" readonly="true"/>
        <Button id="btn_delete_majorPgmAthr" taborder="17" onclick="btn_onclick" class="btn_WF_Del" position2="absolute r:1 w:72 t:8 h:20" positiontype="position2" tooltiptext="삭제" style="padding:0 0 0 0;"/>
        <Button id="btn_add_major" taborder="15" text="추가" onclick="btn_onclick" class="btn_WF_Common" position2="absolute r:147 w:72 t:8 h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Button id="btn_add_middle" taborder="19" text="추가" onclick="btn_onclick" class="btn_WF_Common" position2="absolute r:147 w:72 t:33.33% h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Button id="btn_modifyArthMiddle" taborder="20" text="권한변경" onclick="btn_onclick" class="btn_WF_Common" position2="absolute r:74 w:72 t:33.33% h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Button id="btn_delete_middlePgmAthr" taborder="21" onclick="btn_onclick" class="btn_WF_Del" position2="absolute r:1 w:72 t:33.33% h:20" positiontype="position2" tooltiptext="삭제" style="padding:0 0 0 0;"/>
        <Button id="btn_add_minor" taborder="23" text="추가" onclick="btn_onclick" class="btn_WF_Common" position2="absolute r:148 w:72 t:65.66% h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Button id="btn_modifyArthMinor" taborder="24" text="권한변경" onclick="btn_onclick" class="btn_WF_Common" position2="absolute r:75 w:72 t:65.66% h:20" positiontype="position2" style="padding:0 0 0 0;"/>
        <Button id="btn_delete_minorPgmAthr" taborder="25" onclick="btn_onclick" class="btn_WF_Del" position2="absolute r:2 w:72 t:65.66% h:20" positiontype="position2" tooltiptext="삭제" style="padding:0 0 0 0;"/>
        <Static id="Static00" text="※그리드를 클릭하시면 개별 기능을 수정하실 수 있습니다." style="color:red;" position2="absolute r:-6 w:324 t:30.19% h:15" positiontype="position2"/>
        <Static id="Static01" text="※그리드를 클릭하시면 개별 기능을 수정하실 수 있습니다." style="color:red;" position2="absolute r:-3 w:324 t:62.39% h:15" positiontype="position2"/>
        <Static id="Static02" text="※그리드를 클릭하시면 개별 기능을 수정하실 수 있습니다." style="color:red;" position2="absolute r:-3 w:324 t:96.86% h:15" positiontype="position2"/>
        <Grid id="grd_list_middlePgmAthr" taborder="22" binddataset="ds_list_middlePgmAthr" useinputpanel="false" autofittype="col" autofitminwidth="1200" oncellclick="grd_oncellclick" oncelldblclick="grd_oncelldblclick" position2="absolute l:410 r:0 t:36.1% b:37.99%" positiontype="position2">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="100"/>
                <Column size="110"/>
                <Column size="298"/>
                <Column size="69"/>
                <Column size="81"/>
                <Column size="65"/>
                <Column size="63"/>
                <Column size="64"/>
                <Column size="59"/>
                <Column size="63"/>
                <Column size="73"/>
                <Column size="128"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="프로그램코드"/>
                <Cell col="1" text="프로그램명"/>
                <Cell col="2" text="프로그램경로"/>
                <Cell col="3" text="개별기능"/>
                <Cell col="4" text="등록"/>
                <Cell col="5" text="조회"/>
                <Cell col="6" text="수정"/>
                <Cell col="7" text="삭제"/>
                <Cell col="8" text="출력"/>
                <Cell col="9" text="엑셀"/>
                <Cell col="10" text="팝업오픈"/>
                <Cell col="11" text="엑셀주민등록번호"/>
              </Band>
              <Band id="body">
                <Cell text="bind:pgm_cd"/>
                <Cell col="1" style="align:left;" text="bind:pgm_nm" tooltiptype="mouse" tooltiptext="bind:pgm_nm"/>
                <Cell col="2" style="align:left;" text="bind:file_nm" tooltiptype="mouse" tooltiptext="bind:file_nm"/>
                <Cell col="3" displaytype="expr:indv_fnct_yn =='Y'?&quot;button&quot;:&quot;normal&quot;" edittype="none" style="cursor:EXPR(indv_fnct_yn =='Y'?&quot;hand&quot;:&quot;&quot;);" text="bind:indv_fnct_yn" expr="indv_fnct_yn =='Y'?&quot;추가&quot;:&quot;없음&quot;"/>
                <Cell col="4" text="bind:rgsn_yn"/>
                <Cell col="5" text="bind:inq_yn"/>
                <Cell col="6" text="bind:amnt_yn"/>
                <Cell col="7" text="bind:dltn_yn"/>
                <Cell col="8" text="bind:prit_yn"/>
                <Cell col="9" text="bind:xls_yn"/>
                <Cell col="10" text="bind:athr_ppup_yn"/>
                <Cell col="11" text="bind:xls_rrno_yn"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Grid id="grd_list_minorPgmAthr" taborder="26" binddataset="ds_list_minorPgmAthr" useinputpanel="false" autofittype="col" autofitminwidth="1200" oncellclick="grd_oncellclick" oncelldblclick="grd_oncelldblclick" position2="absolute l:410 r:0 t:68.43% b:3.9%" positiontype="position2">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="100"/>
                <Column size="110"/>
                <Column size="298"/>
                <Column size="69"/>
                <Column size="81"/>
                <Column size="65"/>
                <Column size="63"/>
                <Column size="64"/>
                <Column size="59"/>
                <Column size="63"/>
                <Column size="73"/>
                <Column size="128"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="프로그램코드"/>
                <Cell col="1" text="프로그램명"/>
                <Cell col="2" text="프로그램경로"/>
                <Cell col="3" text="개별기능"/>
                <Cell col="4" text="등록"/>
                <Cell col="5" text="조회"/>
                <Cell col="6" text="수정"/>
                <Cell col="7" text="삭제"/>
                <Cell col="8" text="출력"/>
                <Cell col="9" text="엑셀"/>
                <Cell col="10" text="팝업오픈"/>
                <Cell col="11" text="엑셀주민등록번호"/>
              </Band>
              <Band id="body">
                <Cell text="bind:pgm_cd"/>
                <Cell col="1" style="align:left;" text="bind:pgm_nm" tooltiptype="mouse" tooltiptext="bind:pgm_nm"/>
                <Cell col="2" style="align:left;" text="bind:file_nm" tooltiptype="mouse" tooltiptext="bind:file_nm"/>
                <Cell col="3" displaytype="expr:indv_fnct_yn =='Y'?&quot;button&quot;:&quot;normal&quot;" edittype="none" style="cursor:EXPR(indv_fnct_yn =='Y'?&quot;hand&quot;:&quot;&quot;);" text="bind:indv_fnct_yn" expr="indv_fnct_yn =='Y'?&quot;추가&quot;:&quot;없음&quot;"/>
                <Cell col="4" text="bind:rgsn_yn"/>
                <Cell col="5" text="bind:inq_yn"/>
                <Cell col="6" text="bind:amnt_yn"/>
                <Cell col="7" text="bind:dltn_yn"/>
                <Cell col="8" text="bind:prit_yn"/>
                <Cell col="9" text="bind:xls_yn"/>
                <Cell col="10" text="bind:athr_ppup_yn"/>
                <Cell col="11" text="bind:xls_rrno_yn"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item2" compid="edt_rgsr_nm" propid="value" datasetid="ds_authority" columnid="rgsr_nm"/>
      <BindItem id="item4" compid="edt_rgsn_dttm" propid="value" datasetid="ds_authority" columnid="rgsn_dttm"/>
      <BindItem id="item3" compid="edt_amnd_nm" propid="value" datasetid="ds_authority" columnid="amnd_nm"/>
      <BindItem id="item5" compid="edt_amnt_dttm" propid="value" datasetid="ds_authority" columnid="amnt_dttm"/>
      <BindItem id="item0" compid="edt_athr_cd" propid="value" datasetid="ds_authority" columnid="athr_cd"/>
      <BindItem id="item1" compid="edt_athr_nm" propid="value" datasetid="ds_authority" columnid="athr_nm"/>
      <BindItem id="item6" compid="tea_athr_expi" propid="value" datasetid="ds_authority" columnid="athr_expi"/>
      <BindItem id="item7" compid="cbo_athr_sqnc" propid="value" datasetid="ds_authority" columnid="athr_sqnc"/>
    </Bind>
    <Objects>
      <Dataset id="ds_trans_info" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="strSvcID" type="STRING" size="256"/>
          <Column id="strURL" type="STRING" size="256"/>
          <Column id="strInDatasets" type="STRING" size="256"/>
          <Column id="strOutDatasets" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_authority" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="athr_cd" type="STRING" size="256"/>
          <Column id="athr_nm" type="STRING" size="256"/>
          <Column id="athr_expi" type="STRING" size="256"/>
          <Column id="gds_cd" type="STRING" size="256"/>
          <Column id="gds_cd_list" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="rgsr_id" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_id" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="dplc_flag" type="STRING" size="256"/>
          <Column id="athr_sqnc" type="STRING" size="256"/>
          <Column id="athr_sqnc_old" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_authority" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="athr_cd" type="STRING" size="256"/>
          <Column id="athr_nm" type="STRING" size="256"/>
          <Column id="athr_expi" type="STRING" size="256"/>
          <Column id="gds_cd" type="STRING" size="256"/>
          <Column id="gds_cd_list" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="rgsr_id" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_id" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="dplc_flag" type="STRING" size="256"/>
          <Column id="athr_sqnc" type="STRING" size="256"/>
          <Column id="athr_sqnc_old" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_tmp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="page_indx" type="STRING" size="256"/>
          <Column id="athr_cd" type="STRING" size="256"/>
          <Column id="athr_nm" type="STRING" size="256"/>
          <Column id="athr_expi" type="STRING" size="256"/>
          <Column id="gds_cd" type="STRING" size="256"/>
          <Column id="gds_cd_list" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="rgsr_id" type="STRING" size="256"/>
          <Column id="rgsn_dttm" type="STRING" size="256"/>
          <Column id="amnd_id" type="STRING" size="256"/>
          <Column id="amnt_dttm" type="STRING" size="256"/>
          <Column id="rgsr_nm" type="STRING" size="256"/>
          <Column id="amnd_nm" type="STRING" size="256"/>
          <Column id="dplc_flag" type="STRING" size="256"/>
          <Column id="athr_sqnc" type="STRING" size="256"/>
          <Column id="athr_sqnc_old" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_orderList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="id" type="INT" size="50"/>
          <Column id="name" type="INT" size="50"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_majorPgmAthr" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="athr_cd" type="STRING" size="256"/>
          <Column id="pgm_cd" type="STRING" size="256"/>
          <Column id="gds_cd" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="hgrn_pgm_cd" type="STRING" size="256"/>
          <Column id="pgm_nm" type="STRING" size="256"/>
          <Column id="pgm_sqnc" type="STRING" size="256"/>
          <Column id="file_nm" type="STRING" size="256"/>
          <Column id="prmr_cntn" type="STRING" size="256"/>
          <Column id="img_path" type="STRING" size="256"/>
          <Column id="lvl_cnt" type="STRING" size="256"/>
          <Column id="clot_func_nm" type="STRING" size="256"/>
          <Column id="admr_yn" type="STRING" size="256"/>
          <Column id="ppup_yn" type="STRING" size="256"/>
          <Column id="rgsn_yn" type="STRING" size="256"/>
          <Column id="inq_yn" type="STRING" size="256"/>
          <Column id="amnt_yn" type="STRING" size="256"/>
          <Column id="dltn_yn" type="STRING" size="256"/>
          <Column id="prit_yn" type="STRING" size="256"/>
          <Column id="xls_yn" type="STRING" size="256"/>
          <Column id="athr_ppup_yn" type="STRING" size="256"/>
          <Column id="xls_rrno_yn" type="STRING" size="256"/>
          <Column id="indv_fnct" type="STRING" size="256"/>
          <Column id="indv_fnct_yn" type="STRING" size="256"/>
          <Column id="indv_fnct_athr_yn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt_majorPgmAthr" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="athr_cd" type="STRING" size="256"/>
          <Column id="gds_cd" type="STRING" size="256"/>
          <Column id="hgrn_pgm_cd" type="STRING" size="256"/>
          <Column id="lvl_cnt" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_middlePgmAthr" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="athr_cd" type="STRING" size="256"/>
          <Column id="pgm_cd" type="STRING" size="256"/>
          <Column id="gds_cd" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="hgrn_pgm_cd" type="STRING" size="256"/>
          <Column id="pgm_nm" type="STRING" size="256"/>
          <Column id="pgm_sqnc" type="STRING" size="256"/>
          <Column id="file_nm" type="STRING" size="256"/>
          <Column id="prmr_cntn" type="STRING" size="256"/>
          <Column id="img_path" type="STRING" size="256"/>
          <Column id="lvl_cnt" type="STRING" size="256"/>
          <Column id="clot_func_nm" type="STRING" size="256"/>
          <Column id="admr_yn" type="STRING" size="256"/>
          <Column id="ppup_yn" type="STRING" size="256"/>
          <Column id="rgsn_yn" type="STRING" size="256"/>
          <Column id="inq_yn" type="STRING" size="256"/>
          <Column id="amnt_yn" type="STRING" size="256"/>
          <Column id="dltn_yn" type="STRING" size="256"/>
          <Column id="prit_yn" type="STRING" size="256"/>
          <Column id="xls_yn" type="STRING" size="256"/>
          <Column id="athr_ppup_yn" type="STRING" size="256"/>
          <Column id="xls_rrno_yn" type="STRING" size="256"/>
          <Column id="indv_fnct" type="STRING" size="256"/>
          <Column id="indv_fnct_yn" type="STRING" size="256"/>
          <Column id="indv_fnct_athr_yn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt_middlePgmAthr" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="athr_cd" type="STRING" size="256"/>
          <Column id="gds_cd" type="STRING" size="256"/>
          <Column id="hgrn_pgm_cd" type="STRING" size="256"/>
          <Column id="lvl_cnt" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_inqCndt_minorPgmAthr" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="athr_cd" type="STRING" size="256"/>
          <Column id="gds_cd" type="STRING" size="256"/>
          <Column id="hgrn_pgm_cd" type="STRING" size="256"/>
          <Column id="lvl_cnt" type="STRING" size="256"/>
          <Column id="orderBy" type="STRING" size="256"/>
          <Column id="orderDirection" type="STRING" size="256"/>
          <Column id="sController" type="STRING" size="256"/>
          <Column id="dsName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_minorPgmAthr" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="_chk" type="INT" size="1"/>
          <Column id="xRowStatusType" type="STRING" size="1"/>
          <Column id="athr_cd" type="STRING" size="256"/>
          <Column id="pgm_cd" type="STRING" size="256"/>
          <Column id="gds_cd" type="STRING" size="256"/>
          <Column id="cntr_cd" type="STRING" size="256"/>
          <Column id="hgrn_pgm_cd" type="STRING" size="256"/>
          <Column id="pgm_nm" type="STRING" size="256"/>
          <Column id="pgm_sqnc" type="STRING" size="256"/>
          <Column id="file_nm" type="STRING" size="256"/>
          <Column id="prmr_cntn" type="STRING" size="256"/>
          <Column id="img_path" type="STRING" size="256"/>
          <Column id="lvl_cnt" type="STRING" size="256"/>
          <Column id="clot_func_nm" type="STRING" size="256"/>
          <Column id="admr_yn" type="STRING" size="256"/>
          <Column id="ppup_yn" type="STRING" size="256"/>
          <Column id="rgsn_yn" type="STRING" size="256"/>
          <Column id="inq_yn" type="STRING" size="256"/>
          <Column id="amnt_yn" type="STRING" size="256"/>
          <Column id="dltn_yn" type="STRING" size="256"/>
          <Column id="prit_yn" type="STRING" size="256"/>
          <Column id="xls_yn" type="STRING" size="256"/>
          <Column id="athr_ppup_yn" type="STRING" size="256"/>
          <Column id="xls_rrno_yn" type="STRING" size="256"/>
          <Column id="indv_fnct" type="STRING" size="256"/>
          <Column id="indv_fnct_yn" type="STRING" size="256"/>
          <Column id="indv_fnct_athr_yn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/***************************************************************************
 * Program ID    : PS090400.xfdl
 * Program Name  : 권한관리
 * Author        : 정 훈
 * Created On    : 2016.04.06
 * 개    요 	 :
 *
 * =========================================================================
 * 변경일자     수정자       내    용
 * =========================================================================
 * 2016.04.06    정   훈      최초작성
 
 **************************************************************************/

/********************************************************************************************/
/* 1. Include Library include, variables Declaration 영역                                  */
/********************************************************************************************/
include "LIB::lib_All.xjs";


/********************************************************************************************/
/* 2. Form 관련(onload 및 Form 이벤트) 처리,  
  전역변수, 초기화                    
/********************************************************************************************/
//전역변수
var total_count = 0;
var maxOrder = 0;
var dupCount = 0;
var dupFlag = false;

//폼 온로드
function PS090400_onload(obj:Form, e:LoadEventInfo)
{
	gfn_athrPgm(gfn_gdsCd_admin()); //권한조회
	gfn_createPagingDataset(obj); // 페이징처리 위한 데이터셋 설정
	fn_commSearch(gfn_getCommTypeInit());//권한 조회
}


/********************************************************************************************/
/* 3. Callback(gfn_Transaction 호출 후 처리내용)                                   		*/
/********************************************************************************************/
//콜백
function fn_callBack(svcid, errcd, errmsg) {
	 if (errcd != 0) {
		trace("errcd  :   " +errcd +"   \n errmsg   :   "+ errmsg +"    \n svcid   :   "+ svcid)
		return false;
	} else {
		switch (svcid) {
			case "srchAthr": //left 권한조회
				fn_postSearch();
			break;
			
			case "srchSequence": //최대순서 조회 
				ds_orderList.clearData();
				for(var i = maxOrder; i > 0; i--){
					ds_orderList.addRow();
					ds_orderList.setColumn(ds_orderList.rowposition,"name",i);
					ds_orderList.setColumn(ds_orderList.rowposition,"id",i);
				}
			break;
			
			case "saveAthr": //저장
				fn_commSearch(gfn_getCommTypeInit());//권한 조회
				dupCount = 0;
				dupFlag = false;
			break;
			
			case "deleteAthr"://삭제
				fn_commSearch(gfn_getCommTypeInit());//권한 조회
			break;
			
			case "deleteMajorPgmAthr": //대분류삭제 
				fn_commSearch_majorPgmAthr(gfn_getCommTypeInit());
			break;
			
			case "deleteMiddlePgmAthr" ://중분류삭제
				fn_commSearch_middlePgmAthr(gfn_getCommTypeInit()); //중분류권한 조회
			break;
			
			case "deleteMinorPgmAthr" ://소분류 삭제
			 	fn_commSearch_minorPgmAthr(gfn_getCommTypeInit()); //중분류권한 조회
			break;
			
			case "srchDupCount": //중복카운트 조회
				if(dupCount > 0 && confirm("중복되는 순서가 있습니다. 순서를 자동증가하고 등록하시겠습니까?\n자동증가된 순서는 목록을 다시 조회하면 표시됩니다.")){
					dupFlag = true;
				}
			break
			
			case "srchMajorPgmAthr": //right 대분류 조회
				fn_postSearch_majorPgmAthr();
			break;
			
			case "srchMiddlePgmAthr": //right 증분류 조회
				fn_postSearch_middlePgmAthr();
			break;
			
			case "srchMinorPgmAthr": //right 증분류 조회
				fn_postSearch_minorPgmAthr();
			break;
			
			
		}
	}
}

/********************************************************************************************/
/**   4. Validation 처리                                                                   	*/
/********************************************************************************************/
//조회전 처리 조회조건셋팅
function fn_preSearch(sType)
{
	if (sType == gfn_getCommTypeInit())
	{
		ds_inqCndt.clearData();
		ds_inqCndt.addRow();

		ds_inqCndt.setColumn(0, "orderBy", "athr_sqnc");
		ds_inqCndt.setColumn(0, "orderDirection", "asc");
	}
	return true;
}

//조회전 처리 조회조건셋팅 (right 대분류)
function fn_preSearch_majorPgmAthr(sType)
{
	if (sType == gfn_getCommTypeInit())
	{
		ds_inqCndt_majorPgmAthr.clearData();
		ds_inqCndt_majorPgmAthr.addRow();
	
		ds_inqCndt_majorPgmAthr.setColumn(0,"athr_cd",ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'));
		ds_inqCndt_majorPgmAthr.setColumn(0,"gds_cd",cbo_gds_cd.value);
		ds_inqCndt_majorPgmAthr.setColumn(0,"hgrn_pgm_cd",null);
		ds_inqCndt_majorPgmAthr.setColumn(0,"lvl_cnt","1");
		ds_inqCndt_majorPgmAthr.setColumn(0, "orderBy", "pgm_cd");
		ds_inqCndt_majorPgmAthr.setColumn(0, "orderDirection", "asc");
	}
	return true;
}
//조회전 처리 조회조건셋팅 (right 중분류)
function fn_preSearch_middlePgmAthr(sType){
	if (sType == gfn_getCommTypeInit())
	{
		ds_inqCndt_middlePgmAthr.clearData();
		ds_inqCndt_middlePgmAthr.addRow();
	
		ds_inqCndt_middlePgmAthr.setColumn(0,"athr_cd",ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'));
		ds_inqCndt_middlePgmAthr.setColumn(0,"gds_cd",cbo_gds_cd.value);
		ds_inqCndt_middlePgmAthr.setColumn(0,"hgrn_pgm_cd",ds_list_majorPgmAthr.getColumn(ds_list_majorPgmAthr.rowposition, 'pgm_cd'));
		ds_inqCndt_middlePgmAthr.setColumn(0,"lvl_cnt","2");
		ds_inqCndt_middlePgmAthr.setColumn(0, "orderBy", "pgm_cd");
		ds_inqCndt_middlePgmAthr.setColumn(0, "orderDirection", "asc");
	}
	return true;
}

//조회전 처리 조회조건셋팅 (right 소분류)
function fn_preSearch_minorPgmAthr(sType){
	if (sType == gfn_getCommTypeInit())
	{
		ds_inqCndt_minorPgmAthr.clearData();
		ds_inqCndt_minorPgmAthr.addRow();
	
		ds_inqCndt_minorPgmAthr.setColumn(0,"athr_cd",ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'));
		ds_inqCndt_minorPgmAthr.setColumn(0,"gds_cd",cbo_gds_cd.value);
		ds_inqCndt_minorPgmAthr.setColumn(0,"hgrn_pgm_cd",ds_list_middlePgmAthr.getColumn(ds_list_middlePgmAthr.rowposition, 'pgm_cd'));
		ds_inqCndt_minorPgmAthr.setColumn(0,"lvl_cnt","3");
		ds_inqCndt_minorPgmAthr.setColumn(0,"orderBy", "pgm_cd");
		ds_inqCndt_minorPgmAthr.setColumn(0,"orderDirection", "asc");
	}
	return true;
}

//저장전처리 
function fn_preSave()
{
	if(gfn_isNull(edt_athr_cd.value)){
		alert("권한코드를 입력하세요.");
		return false;
	}
	
	if(gfn_isNull(edt_athr_nm.value)){
		alert("권한명을 입력하세요.");
		return false;
	}
	
	if(gfn_isNull(cbo_athr_sqnc.value)){
		alert("순서를 선택하세요.");
		return false;
	}
	var gdsCd  = fn_setGdsCd();
	ds_authority.setColumn(ds_authority.rowposition, 'gds_cd',gdsCd);
	return true;
}


/********************************************************************************************/
/**   5. 서비스 호출(gfn_Transaction)조회,수정,삭제                                   	*/
/********************************************************************************************/
//조회
function fn_commSearch(sType)
{	
    if (!fn_preSearch(sType)) return false;
	
	var szSvcid       = "srchAthr";
    var szController  = "/syst/athr/list";
    var szInDs        = "ds_input=ds_inqCndt";
    var szOutDs       = "ds_list_authority=ds_athr";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback, false);
}

//프로그램 권한 대분류 조회
function fn_commSearch_majorPgmAthr(sType)
{	
    if (!fn_preSearch_majorPgmAthr(sType)) return false;
	
	var szSvcid       = "srchMajorPgmAthr";
    var szController  = "/syst/pgm-athr/list";
    var szInDs        = "ds_input=ds_inqCndt_majorPgmAthr";
    var szOutDs       = "ds_list_majorPgmAthr=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback, false);
}

//프로그램 권한 중분류 조회
function fn_commSearch_middlePgmAthr(sType)
{	
    if (!fn_preSearch_middlePgmAthr(sType)) return false;
	
	var szSvcid       = "srchMiddlePgmAthr";
    var szController  = "/syst/pgm-athr/list";
    var szInDs        = "ds_input=ds_inqCndt_middlePgmAthr";
    var szOutDs       = "ds_list_middlePgmAthr=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback, false);
}

//프로그램 권한 소분류 조회
function fn_commSearch_minorPgmAthr(sType)
{	
    if (!fn_preSearch_minorPgmAthr(sType)) return false;
	
	var szSvcid       = "srchMinorPgmAthr";
    var szController  = "/syst/pgm-athr/list";
    var szInDs        = "ds_input=ds_inqCndt_minorPgmAthr";
    var szOutDs       = "ds_list_minorPgmAthr=ds_output";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback, false);
}

//순서 리스트
function fn_setSequenceList()
{	
	var szSvcid       = "srchSequence";
    var szController  = "/syst/athr/max-sequence";
    var szInDs        = "";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}


//저장
function fn_saveData()
{
	if (!fn_preSave()) return false;
	fn_dupCouontSearch();
	if (dupCount == 0 || dupFlag == true)
	{	
		var szSvcid       = "saveAthr";
		var szController  = "/syst/athr/save";
		var szInDs        = "ds_input=ds_authority";
		var szOutDs       = "";
		var szParam       = "dplc_flag="+dupFlag;
		var szRetCallback = "fn_callBack";

		// 트랜젝션 공통함수 호출
		gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback);
	}
}

//중복조회
function fn_dupCouontSearch()
{	
	var szSvcid       = "srchDupCount";
    var szController  = "/syst/athr/duplicate-count";
    var szInDs        = "ds_input=ds_authority";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";
	
    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback, false);
}

//left 삭제
function fn_deleteData()
{	
	var szSvcid       = "deleteAthr";
    var szController  = "/syst/athr/delete";
    var szInDs        = "ds_input=ds_authority";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}


//right 대분류 삭제
function fn_deleteData_majorPgmAthr()
{	
	var szSvcid       = "deleteMajorPgmAthr";
    var szController  = "/syst/pgm-athr/delete";
    var szInDs        = "ds_input=ds_list_majorPgmAthr::U";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}


//right 중분류 삭제
function fn_deleteData_middlePgmAthr()
{	
	var szSvcid       = "deleteMiddlePgmAthr";
    var szController  = "/syst/pgm-athr/delete";
    var szInDs        = "ds_input=ds_list_middlePgmAthr::U";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}

//right 소분류 삭제
function fn_deleteData_minorPgmAthr()
{	
	var szSvcid       = "deleteMinorPgmAthr";
    var szController  = "/syst/pgm-athr/delete";
    var szInDs        = "ds_input=ds_list_minorPgmAthr::U";
    var szOutDs       = "";
    var szParam       = "";
    var szRetCallback = "fn_callBack";

    // 트랜젝션 공통함수 호출
    gfn_transaction(this, szSvcid, szController, szInDs, szOutDs, szParam, szRetCallback,false);
}



/********************************************************************************************/
/**   6. 사용자 함수                                                                   	*/
/********************************************************************************************/
//처리결과
function fn_postSearch()
{
	if(ds_list_authority.rowcount < 1) {
		alert("조회 결과가 없습니다.");
		fn_copyRow();
		fn_setSequenceList();
		fn_changeComponent("R");
	} else {
		fn_copyRow();
		fn_setSequenceList();
		fn_changeComponent("R");
	}
	return;
}

//처리결과 (right 프로그램권한 대분류)
function fn_postSearch_majorPgmAthr()
{
	if(ds_list_majorPgmAthr.rowcount < 1) {
		ds_list_middlePgmAthr.clearData();
		ds_list_minorPgmAthr.clearData();
	} else {
		fn_commSearch_middlePgmAthr(gfn_getCommTypeInit()); //중분류권한 조회
	}
	return;
}

//처리결과 (right 프로그램권한 중분류)
function fn_postSearch_middlePgmAthr()
{
	if(ds_list_middlePgmAthr.rowcount < 1) {
		ds_list_minorPgmAthr.clearData();
	} else {
		fn_commSearch_minorPgmAthr(gfn_getCommTypeInit()); //소분류권한 조회
	}
	return;
}

//처리결과 (right 프로그램권한 중분류)
function fn_postSearch_minorPgmAthr()
{
	if(ds_list_minorPgmAthr.rowcount < 1) {
		
	} else {
		
	}
	return;
}

//리스트 데이터셋 뷰 데이터셋에 카피
function fn_copyRow(selectFg){
	if(ds_list_authority.rowcount<1){
		ds_authority.clearData();
		ds_authority.addRow();
		chk_gds_cd_list_1.value = false;
		chk_gds_cd_list_2.value = false;
	}else{
		ds_authority.clearData();
		ds_authority.addRow();
		ds_authority.copyRow(ds_authority.rowposition,ds_list_authority,ds_list_authority.rowposition);
		
		//등록 수정일시 데이터타입에 맞게
		var rgsnDttmStr = edt_rgsn_dttm.value;
		edt_rgsn_dttm.value = gfn_strDttm(rgsnDttmStr);
			
		var amntDttmStr = edt_amnt_dttm.value;
		edt_amnt_dttm.value = gfn_strDttm(amntDttmStr);
		
		if(ds_authority.getColumn(ds_authority.rowposition, 'gds_cd') != null){
			//체크박스 셋팅
			var arryGds = ds_authority.getColumn(ds_authority.rowposition, 'gds_cd').split(",");
			fn_chkSet(arryGds);
		}else{
			chk_gds_cd_list_1.value = false;
			chk_gds_cd_list_2.value = false;
		}
		if(selectFg != 'Y'){
			fn_commSearch_majorPgmAthr(gfn_getCommTypeInit()); //대분류권한 조회
		}
	}
}



//체크박스 셋팅
function fn_chkSet(arrGds){
	var chk1 = false;
	var chk2 = false;
	
	for(var i=0; arrGds.length > i; i++){
		if(arrGds[i] == "1"){
			chk1 = "1";
		}else if(arrGds[i] == "2"){
			chk2 = "2";
		}
	}
	chk_gds_cd_list_1.value = chk1;
	chk_gds_cd_list_2.value = chk2;
}


//버튼 AND 컴포넌트 변경함수
function fn_changeComponent(rMode){
	switch(rMode){
		case "R" : //읽기모드
			if(ds_list_authority.rowcount<1){
				btn_create.enable = true;
				btn_update.enable = false;
				btn_delete.enable = false;
				
				//프로그램 대분류 권한
				btn_add_major.enable = false;
				btn_modifyArthMajor.enable = false;
				btn_delete_majorPgmAthr.enable = false;
				
				//프로그램 중분류 권한
				btn_add_middle.enable = false;
				btn_modifyArthMiddle.enable = false;
				btn_delete_middlePgmAthr.enable = false;
				
				//프로그램 소분류 권한
				btn_add_minor.enable = false;
				btn_modifyArthMinor.enable = false;
				btn_delete_minorPgmAthr.enable = false;
				
			}else{
				btn_update.enable = true;
				btn_delete.enable = true;
				
				if(ds_list_majorPgmAthr.rowcount < 1){
					//프로그램 대분류 권한
					btn_add_major.enable = true;
					btn_modifyArthMajor.enable = false;
					btn_delete_majorPgmAthr.enable = false;
					
					//프로그램 중분류 권한
					btn_add_middle.enable = false;
					btn_modifyArthMiddle.enable = false;
					btn_delete_middlePgmAthr.enable = false;
					
					//프로그램 소분류 권한
					btn_add_minor.enable = false;
					btn_modifyArthMinor.enable = false;
					btn_delete_minorPgmAthr.enable = false;
				}else{
					//프로그램 대분류 권한
					btn_add_major.enable = true;
					btn_modifyArthMajor.enable = true;
					btn_delete_majorPgmAthr.enable = true;
					
					if(ds_list_middlePgmAthr.rowcount < 1){
						//프로그램 중분류 권한
						btn_add_middle.enable = true;
						btn_modifyArthMiddle.enable = false;
						btn_delete_middlePgmAthr.enable = false;
						
						//프로그램 소분류 권한
						btn_add_minor.enable = false;
						btn_modifyArthMinor.enable = false;
						btn_delete_minorPgmAthr.enable = false;
					}else{
						//프로그램 중분류 권한
						btn_add_middle.enable = true;
						btn_modifyArthMiddle.enable = true;
						btn_delete_middlePgmAthr.enable = true;
						if(ds_list_minorPgmAthr.rowcount <1){
							//프로그램 소분류 권한
							btn_add_minor.enable = true;
							btn_modifyArthMinor.enable = false;
							btn_delete_minorPgmAthr.enable = false;
						}else{
							//프로그램 소분류 권한
							btn_add_minor.enable = true;
							btn_modifyArthMinor.enable = true;
							btn_delete_minorPgmAthr.enable = true;
						}	
					}
				}
			}
			
			btn_create.visible = true;
			btn_update.visible = true;
			btn_delete.visible = true;
			btn_save.visible = false;
			btn_cancel.visible = false;	
			
			//권한코드
			edt_athr_cd.readonly = true;
			
			//권한명
			edt_athr_nm.readonly = true;
			
			//순서
			cbo_athr_sqnc.readonly = true;
			
			//업무권한
			chk_gds_cd_list_1.readonly = true;
			chk_gds_cd_list_2.readonly = true;
			
			//권한설명
			tea_athr_expi.readonly = true;
		break;	
		
		case "C": //신규
			//버튼
			btn_create.visible = false;
			btn_update.visible = false;
			btn_delete.visible = false;
			
			btn_save.move(btn_update.position.left , btn_update.position.top);
			btn_cancel.move(btn_delete.position.left , btn_delete.position.top);
			
			btn_save.visible = true;
			btn_cancel.visible = true;
			
			//프로그램 대분류 권한
			btn_add_major.enable = false;
			btn_modifyArthMajor.enable = false;
			btn_delete_majorPgmAthr.enable = false;
			
			//프로그램 중분류 권한
			btn_add_middle.enable = false;
			btn_modifyArthMiddle.enable = false;
			btn_delete_middlePgmAthr.enable = false;
			
			//프로그램 소분류 권한
			btn_add_minor.enable = false;
			btn_modifyArthMinor.enable = false;
			btn_delete_minorPgmAthr.enable = false;
			
			//권한코드
			edt_athr_cd.readonly = false;
			
			//권한명
			edt_athr_nm.readonly = false;
			
			//순서
			cbo_athr_sqnc.readonly = false;
			cbo_athr_sqnc.index = 0;
			
			//업무권한 (체크박스) 
			chk_gds_cd_list_1.value = false;
			chk_gds_cd_list_2.value = false;
			chk_gds_cd_list_1.readonly = false;
			chk_gds_cd_list_2.readonly = false;
			
			//권한설명
			tea_athr_expi.readonly = false;
		break;
		
		case "U"://수정
			//버튼
			btn_create.visible = false;
			btn_update.visible = false;
			btn_delete.visible = false;
			
			btn_save.move(btn_update.position.left , btn_update.position.top);
			btn_cancel.move(btn_delete.position.left , btn_delete.position.top);
			
			btn_save.visible = true;
			btn_cancel.visible = true;
			
			//프로그램 대분류 권한
			btn_add_major.enable = false;
			btn_modifyArthMajor.enable = false;
			btn_delete_majorPgmAthr.enable = false;
			
			//프로그램 중분류 권한
			btn_add_middle.enable = false;
			btn_modifyArthMiddle.enable = false;
			btn_delete_middlePgmAthr.enable = false;
			
			//프로그램 소분류 권한
			btn_add_minor.enable = false;
			btn_modifyArthMinor.enable = false;
			btn_delete_minorPgmAthr.enable = false;
			
			//권한코드
			edt_athr_cd.readonly = true;
			
			//권한명
			edt_athr_nm.readonly = false;
			
			//순서
			cbo_athr_sqnc.readonly = false;
			
			//업무권한
			chk_gds_cd_list_1.readonly = false;
			chk_gds_cd_list_2.readonly = false;
			
			//권한설명
			tea_athr_expi.readonly = false;
		break;
	}	
}

//순서변경시 old 값 셋팅
function fn_setOldOrder(){
	if(ds_authority.getColumn(ds_authority.rowposition , 'athr_sqnc')== null){
		ds_authority.setColumn(ds_authority.rowposition, 'athr_sqnc_old', maxOrder+1);
	}else{
		ds_authority.setColumn(ds_authority.rowposition, 'athr_sqnc_old', ds_authority.getColumn(ds_authority.rowposition , 'athr_sqnc'));
	}
}

//제품코드 셋팅 (구분자 ,)
function fn_setGdsCd(){
	var gdsCd =  "";
	if(chk_gds_cd_list_1.value == "1"){//상담업무
		if(gdsCd ==  ""){
			gdsCd = chk_gds_cd_list_1.value;
		}
	 }
	 
	 if(chk_gds_cd_list_2.value == "2"){//관리업무
		if(gdsCd ==  ""){
			gdsCd = chk_gds_cd_list_2.value;
		}else{
			gdsCd += ","+chk_gds_cd_list_2.value;
		}
	 }
	return gdsCd;
}
/********************************************************************************************/
/**   7. 이벤트(Event) Function                                                          	*/
/********************************************************************************************/

//온해더클릭
function grd_onheadclick(obj:Grid, e:GridClickEventInfo)
{
	switch(obj){
		case grd_list : //left 권한그리드
			if (!fn_preSearch()) return false;
			ds_inqCndt.setColumn(0, "sController", "/syst/athr/list");
			ds_inqCndt.setColumn(0, "dsName", "ds_athr");
			
			gfn_grdHeadClick(obj, e, ds_inqCndt);
			
			fn_copyRow();
			fn_setSequenceList();
			fn_changeComponent("R");
		break;
	}
}


//온셀클릭
function grd_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	switch(obj){
		case grd_list : //left 권한그리드
			fn_copyRow();
			fn_setSequenceList();
			fn_changeComponent("R");
		break;
		
		case grd_list_majorPgmAthr : //대분류
			if(e.cell == 3){
				if(ds_list_majorPgmAthr.getColumn(e.row,'indv_fnct_yn') == "Y"){
					var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value, pgm_cd:ds_list_majorPgmAthr.getColumn(ds_list_majorPgmAthr.rowposition, 'pgm_cd'),lvl_cnt:'1'};
					gfn_openAddIndvFnctAthrPop(sPrmr,false);
				}
			}
			fn_copyRow("Y");
			fn_setSequenceList();
			fn_commSearch_middlePgmAthr(gfn_getCommTypeInit()); //중분류권한 조회
			fn_changeComponent("R");
		break;
		
		case grd_list_middlePgmAthr : //중분류
			if(e.cell == 3){
				if(ds_list_middlePgmAthr.getColumn(e.row,'indv_fnct_yn') == "Y"){
					var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value, pgm_cd:ds_list_middlePgmAthr.getColumn(ds_list_middlePgmAthr.rowposition, 'pgm_cd'),lvl_cnt:'2'};
					gfn_openAddIndvFnctAthrPop(sPrmr,false);
				}
			}
			fn_copyRow("Y");
			fn_setSequenceList();
			fn_commSearch_minorPgmAthr(gfn_getCommTypeInit()); //소분류권한 조회
			fn_changeComponent("R");
		break;
		
		case grd_list_minorPgmAthr : //소분류
			if(e.cell == 3){
				if(ds_list_minorPgmAthr.getColumn(e.row,'indv_fnct_yn') == "Y"){
					var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value, pgm_cd:ds_list_minorPgmAthr.getColumn(ds_list_minorPgmAthr.rowposition, 'pgm_cd'),lvl_cnt:'3'};
					gfn_openAddIndvFnctAthrPop(sPrmr,false);
				}
			}
			fn_copyRow("Y");
			fn_setSequenceList();
			fn_changeComponent("R");
		break;
	}
}

//온셀 더블 클릭
function grd_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	switch(obj){
		case grd_list_majorPgmAthr: //대분류
			if(ds_list_majorPgmAthr.getColumn(e.row,'indv_fnct_athr_yn') =='Y'){
				var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value, pgm_cd:ds_list_majorPgmAthr.getColumn(ds_list_majorPgmAthr.rowposition, 'pgm_cd'),lv_cnt:"1"};
				gfn_openModifyIndvFnctAthrPop(sPrmr,false); //개별기능 수정
			}else{
				alert("추가된 개별기능이 없습니다.");
				return;
			}
		break;
		
		case grd_list_middlePgmAthr : //중분류
			if(ds_list_middlePgmAthr.getColumn(e.row,'indv_fnct_athr_yn') =='Y'){
				var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value, pgm_cd:ds_list_middlePgmAthr.getColumn(ds_list_middlePgmAthr.rowposition, 'pgm_cd'),lv_cnt:"2"};
				gfn_openModifyIndvFnctAthrPop(sPrmr,false); //개별기능 수정
			}else{
				alert("추가된 개별기능이 없습니다.");
				return;
			}
		break;
		
		case grd_list_minorPgmAthr : //소분류
			if(ds_list_minorPgmAthr.getColumn(e.row,'indv_fnct_athr_yn') =='Y'){
				var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value, pgm_cd:ds_list_minorPgmAthr.getColumn(ds_list_minorPgmAthr.rowposition, 'pgm_cd'),lv_cnt:"3"};
				gfn_openModifyIndvFnctAthrPop(sPrmr,false); //개별기능 수정
			}else{
				alert("추가된 개별기능이 없습니다.");
				return;
			}
		break;
	}
}

//버튼클릭 이벤트
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj){
		case btn_create : //신규버튼 클릭
			ds_authority.clearData();
			ds_authority.addRow();
			
			ds_orderList.insertRow(0);
			ds_orderList.setColumn(ds_orderList.rowposition,"name",parseInt(maxOrder)+1);
			ds_orderList.setColumn(ds_orderList.rowposition,"id",parseInt(maxOrder)+1);
			fn_setOldOrder();
			fn_changeComponent("C");
		break;
		
		case btn_update: //수정버튼 클릭
			fn_setOldOrder();
			fn_changeComponent("U");
		break;
		
		case btn_delete ://삭제버튼
			if(confirm("삭제하시겠습니까?")) {
				fn_deleteData();
			}
		break;
		
		case btn_save: // 저장버튼
			fn_saveData();
		break;
		
		case btn_cancel: //취소버튼 클릭
			fn_copyRow();
			fn_setSequenceList();
			fn_changeComponent("R");
		break;
		
		case btn_add_major: //추가버튼 (대분류)
			var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value,hgrn_pgm_cd:null,lvl_cnt:'1'};
			gfn_openPgmAthr1Pop(sPrmr,false);
		break;
		
		case btn_modifyArthMajor ://권한변경(대분류)
			var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value,lvl_cnt:'1',pgm_cd:ds_list_majorPgmAthr.getColumn(ds_list_majorPgmAthr.rowposition,'pgm_cd'),hgrn_pgm_cd:null};
			gfn_openModifyArthPop(sPrmr,false);
		break;
		
		case btn_delete_majorPgmAthr : //프로그램 권한 대분류 삭제 
			if(confirm("하위 프로그램 권한까지 모두 삭제됩니다.\n삭제하시겠습니까?")) {
				ds_list_majorPgmAthr.deleteRow(ds_list_majorPgmAthr.rowposition);;
				fn_deleteData_majorPgmAthr();
			}
		break;
		
		case btn_add_middle: //추가버튼 (중분류)
			var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value,hgrn_pgm_cd:ds_list_majorPgmAthr.getColumn(ds_list_majorPgmAthr.rowposition, 'pgm_cd'),lvl_cnt:'2'};
			gfn_openPgmAthr2Pop(sPrmr,false);
		break;
		
		case btn_modifyArthMiddle: //권한변경 (중분류)
			var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value,lvl_cnt:'2',pgm_cd:ds_list_middlePgmAthr.getColumn(ds_list_middlePgmAthr.rowposition,'pgm_cd'),hgrn_pgm_cd:ds_list_majorPgmAthr.getColumn(ds_list_majorPgmAthr.rowposition, 'pgm_cd')};
			gfn_openModifyArthPop(sPrmr,false);
		break;
		
		case btn_delete_middlePgmAthr: //프로그램 권한 중분류 삭제 
			if(confirm("하위 프로그램 권한까지 모두 삭제됩니다.\n삭제하시겠습니까?")) {
				ds_list_middlePgmAthr.deleteRow(ds_list_middlePgmAthr.rowposition);;
				fn_deleteData_middlePgmAthr();
			}
		break;
		
		case btn_add_minor: //추가버튼 (소분류)
			var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value,hgrn_pgm_cd:ds_list_middlePgmAthr.getColumn(ds_list_middlePgmAthr.rowposition, 'pgm_cd'),lvl_cnt:'3'};
			gfn_openPgmAthr3Pop(sPrmr,false);
		break;
		
		case btn_modifyArthMinor://권한변경 (소분류)
			var sPrmr = {athr_cd:ds_list_authority.getColumn(ds_list_authority.rowposition,'athr_cd'),gds_cd:cbo_gds_cd.value,lvl_cnt:'3',pgm_cd:ds_list_minorPgmAthr.getColumn(ds_list_minorPgmAthr.rowposition,'pgm_cd'),hgrn_pgm_cd:ds_list_middlePgmAthr.getColumn(ds_list_middlePgmAthr.rowposition, 'pgm_cd')};
			gfn_openModifyArthPop(sPrmr,false);
		break;
		
		case btn_delete_minorPgmAthr: //프로그램 권한 소분류 삭제 
			if(confirm("하위 프로그램 권한까지 모두 삭제됩니다.\n삭제하시겠습니까?")) {
				ds_list_minorPgmAthr.deleteRow(ds_list_minorPgmAthr.rowposition);;
				fn_deleteData_minorPgmAthr();
			}
		break;
		
		
	}
}

//콤보변환 이벤트
function cbo_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	switch(obj){
		case cbo_gds_cd: //제품
			fn_commSearch_majorPgmAthr(gfn_getCommTypeInit()); //대분류권한 조회
		break;
	}
}




]]></Script>
  </Form>
</FDL>
